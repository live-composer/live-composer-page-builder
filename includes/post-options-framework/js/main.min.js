jQuery(document).ready(function(){function a(a){var b,c="",d=jQuery(".dslca-post-option-image",a);d.each(function(){b=jQuery(this),imageID=b.data("id"),c+=imageID+" "}),jQuery(".dslca-post-options-field-file",a).val(c)}function b(b){var c=b.closest(".dslca-post-option");b.remove(),a(c)}jQuery(".dslca-post-options-field-datepicker").datepicker(),jQuery(document).on("click",".dslca-post-option-image-remove",function(){b(jQuery(this).closest(".dslca-post-option-image"))}),jQuery(".dslca-post-option-field-files .dslca-post-options-images").length&&(jQuery(".dslca-post-option-field-files .dslca-post-options-images").sortable({update:function(b,c){a(jQuery(this).closest(".dslca-post-option"))}}),jQuery(".dslca-post-options-images").disableSelection());var c;if(jQuery(".dslca-post-option-add-file-hook").click(function(){var a=jQuery(this),b=jQuery(this).closest(".dslca-post-option"),d=jQuery(".dslca-post-options-field-file",b),e=jQuery(".dslca-post-option-image",b),f=!1;a.data("multiple")&&(f=!0),c=wp.media.frames.file_frame=wp.media({title:"Choose File",button:{text:"Send to option"},multiple:f}),c.on("select",function(){if(f){attachments=c.state().get("selection").toJSON(),attachmentVal="";for(var a=0;a<attachments.length;a++)attachment=attachments[a],attachmentVal+=attachment.id+" ",b.find(".dslca-post-options-images").append('<div class="dslca-post-option-image" data-id="'+attachment.id+'"><div class="dslca-post-option-image-inner"><img src="'+attachment.url+'" /><span class="dslca-post-option-image-remove">x</span></div></div>');d.val(d.val()+attachmentVal)}else attachment=c.state().get("selection").first().toJSON(),"image"==attachment.type?e.length?e.find("img").attr("src",attachment.url):b.find(".dslca-post-options-images").html('<div class="dslca-post-option-image" data-id="'+attachment.id+'"><div class="dslca-post-option-image-inner"><img src="'+attachment.url+'" /></div><span class="dslca-post-option-image-remove">x</span></div>'):e.length?e.find("strong").text(attachment.filename):b.find(".dslca-post-options-images").html('<div class="dslca-post-option-image" data-id="'+attachment.id+'"><div class="dslca-post-option-image-inner"><strong>'+attachment.filename+"</strong></div></div>"),d.val(attachment.id)}),c.open()}),"undefined"!=typeof tabData){var d=jQuery("<div></div>");d.addClass("quicktags-toolbar-lc"),$wrap=jQuery("#lc_content_wrap"),$wrap.prepend(d),jQuery("#wp-content-editor-tools #content-html").after('<button type="button" id="content-lc" class="wp-switch-editor switch-lc">'+tabData.tabTitle+"</button>")}"dslc_code"==jQuery('#postcustom input[value="dslc_code"]').val()&&0==jQuery(".wp-editor-area").text().length&&(jQuery("#wp-content-wrap").removeClass("html-active tmce-active"),jQuery("#postdivrich").addClass("lc-active")),jQuery(document).on("click","#content-lc",function(a){a.preventDefault(),jQuery(".wp-editor-expand").addClass("lc-active")}),jQuery(document).on("click","#content-tmce, #content-html",function(a){a.preventDefault(),jQuery(".wp-editor-expand").removeClass("lc-active")})});