jQuery(document).ready(function () {
  jQuery(".dslca-post-options-field-datepicker").datepicker();
  function o(t) {
    var e,
      o = "",
      a = jQuery(".dslca-post-option-image", t);
    a.each(function () {
      e = jQuery(this);
      imageID = e.data("id");
      o += imageID + " ";
    });
    jQuery(".dslca-post-options-field-file", t).val(o);
  }
  function t(t) {
    var e = t.closest(".dslca-post-option");
    t.remove();
    o(e);
  }
  jQuery(document).on("click", ".dslca-post-option-image-remove", function () {
    t(jQuery(this).closest(".dslca-post-option-image"));
  });
  if (
    jQuery(".dslca-post-option-field-files .dslca-post-options-images").length
  ) {
    jQuery(
      ".dslca-post-option-field-files .dslca-post-options-images"
    ).sortable({
      update: function (t, e) {
        o(jQuery(this).closest(".dslca-post-option"));
      },
    });
    jQuery(".dslca-post-options-images").disableSelection();
  }
  var s;
  jQuery(".dslca-post-option-add-file-hook").click(function () {
    var t = jQuery(this);
    var e = jQuery(this).closest(".dslca-post-option");
    var o = jQuery(".dslca-post-options-field-file", e);
    var a = jQuery(".dslca-post-option-image", e);
    var i = false;
    if (t.data("multiple")) {
      i = true;
    }
    s = wp.media.frames.file_frame = wp.media({
      title: "Choose File",
      button: { text: "Send to option" },
      multiple: i,
    });
    s.on("select", function () {
      if (i) {
        attachments = s.state().get("selection").toJSON();
        attachmentVal = "";
        for (var t = 0; t < attachments.length; t++) {
          attachment = attachments[t];
          attachmentVal += attachment.id + " ";
          e.find(".dslca-post-options-images").append(
            '<div class="dslca-post-option-image" data-id="' +
              attachment.id +
              '"><div class="dslca-post-option-image-inner"><img src="' +
              attachment.url +
              '" /><span class="dslca-post-option-image-remove">x</span></div></div>'
          );
        }
        o.val(o.val() + attachmentVal);
      } else {
        attachment = s.state().get("selection").first().toJSON();
        if (attachment.type == "image") {
          if (a.length) {
            a.find("img").attr("src", attachment.url);
          } else {
            e.find(".dslca-post-options-images").html(
              '<div class="dslca-post-option-image" data-id="' +
                attachment.id +
                '"><div class="dslca-post-option-image-inner"><img src="' +
                attachment.url +
                '" /></div><span class="dslca-post-option-image-remove">x</span></div>'
            );
          }
        } else {
          if (a.length) {
            a.find("strong").text(attachment.filename);
          } else {
            e.find(".dslca-post-options-images").html(
              '<div class="dslca-post-option-image" data-id="' +
                attachment.id +
                '"><div class="dslca-post-option-image-inner"><strong>' +
                attachment.filename +
                "</strong></div></div>"
            );
          }
        }
        o.val(attachment.id);
      }
    });
    s.open();
  });
  if (typeof tabData !== "undefined") {
    var e = jQuery("<div></div>");
    e.addClass("quicktags-toolbar-lc");
    $wrap = jQuery("#lc_content_wrap");
    $wrap.prepend(e);
    jQuery("#wp-content-editor-tools #content-html").after(
      '<button type="button" id="content-lc" class="wp-switch-editor switch-lc">' +
        tabData.tabTitle +
        "</button>"
    );
  }
  if (
    jQuery('#postcustom input[value="dslc_code"]').val() == "dslc_code" &&
    jQuery(".wp-editor-area").text().length == 0
  ) {
    jQuery("#wp-content-wrap").removeClass("html-active tmce-active");
    jQuery("#postdivrich").addClass("lc-active");
  }
  jQuery(document).on("click", "#content-lc", function (t) {
    t.preventDefault();
    jQuery(".wp-editor-expand").addClass("lc-active");
  });
  jQuery(document).on("click", "#content-tmce, #content-html", function (t) {
    t.preventDefault();
    jQuery(".wp-editor-expand").removeClass("lc-active");
  });
  jQuery(document).on(
    "click",
    '#dslca_single_post_templates input[type="checkbox"], #dslca_archive_index_templates input[type="checkbox"], #dslca_special_page_templates input[type="checkbox"]',
    function (t) {
      var e, o, a;
      e = jQuery(
        '#dslca_single_post_templates input[type="checkbox"]:checked'
      ).length;
      o = jQuery(
        '#dslca_archive_index_templates input[type="checkbox"]:checked'
      ).length;
      a = jQuery(
        '#dslca_special_page_templates input[type="checkbox"]:checked'
      ).length;
      if (e && o == 0 && a == 0) {
        jQuery("#post-option-dslc_template_base").show();
      } else {
        jQuery("#post-option-dslc_template_base").hide();
      }
    }
  );
  if (
    jQuery('#dslca_single_post_templates input[type="checkbox"]').is(":checked")
  ) {
    jQuery("#post-option-dslc_template_base").show();
  } else {
    jQuery("#post-option-dslc_template_base").hide();
  }
  var a = jQuery("select#dslc_hf_for").val();
  if (a == "footer") {
    jQuery("#post-option-dslc_extra_padding").hide();
    jQuery('#post-option-dslc_extra_padding input[type="checkbox"]').val("");
  }
  jQuery(document).on("change", "select#dslc_hf_for", function (t) {
    var e = jQuery(this).val();
    if (e == "footer") {
      jQuery("#post-option-dslc_extra_padding").hide();
      jQuery('#post-option-dslc_extra_padding input[type="checkbox"]').val("");
    } else {
      jQuery(
        '#post-option-dslc_hf_position input[type="radio"]#dslc_hf_position0'
      ).prop("checked", true);
      jQuery('#post-option-dslc_extra_padding input[type="checkbox"]').val("");
      jQuery('#post-option-dslc_extra_padding input[type="checkbox"]').prop(
        "checked",
        false
      );
    }
    a = jQuery("select#dslc_hf_for").val();
  });
  jQuery(document).on(
    "change",
    '#post-option-dslc_hf_position input[type="radio"]',
    function (t) {
      if (a == "header") {
        var e = jQuery(this).val();
        if (e == "relative") {
          jQuery("#post-option-dslc_extra_padding").hide();
          jQuery('#post-option-dslc_extra_padding input[type="checkbox"]').val(
            ""
          );
          jQuery('#post-option-dslc_extra_padding input[type="checkbox"]').prop(
            "checked",
            false
          );
        } else {
          jQuery("#post-option-dslc_extra_padding").show();
        }
      }
    }
  );
  if (
    jQuery(
      '#post-option-dslc_hf_position input[type="radio"]#dslc_hf_position0'
    ).is(":checked")
  ) {
    jQuery("#post-option-dslc_extra_padding").hide();
  }
  function i() {
    var a = {};
    var t = window.location.href.replace(
      /[?&]+([^=&]+)=([^&]*)/gi,
      function (t, e, o) {
        a[e] = o;
      }
    );
    return a;
  }
  if (i()["for"] !== undefined) {
    var c = i()["for"];
    jQuery("input[value='" + c + "']").prop("checked", true);
  }
});
