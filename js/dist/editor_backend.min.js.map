{"version":3,"file":"editor_backend.min.js","mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC3lBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC/XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACl8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACruBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACjlFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACn1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AC3pBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACxXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACnYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACntCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC1PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC36BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC1PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACneA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACxTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC3eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://live-composer-page-builder/./js/src/editor/backend/codegeneration.js","webpack://live-composer-page-builder/./js/src/editor/backend/dragndrop.js","webpack://live-composer-page-builder/./js/src/editor/backend/events.js","webpack://live-composer-page-builder/./js/src/editor/backend/modalwindow.class.js","webpack://live-composer-page-builder/./js/src/editor/backend/modalwindow.js","webpack://live-composer-page-builder/./js/src/editor/backend/module.js","webpack://live-composer-page-builder/./js/src/editor/backend/modulearea.class.js","webpack://live-composer-page-builder/./js/src/editor/backend/modulearea.js","webpack://live-composer-page-builder/./js/src/editor/backend/presets.js","webpack://live-composer-page-builder/./js/src/editor/backend/scroller.js","webpack://live-composer-page-builder/./js/src/editor/backend/section.class.js","webpack://live-composer-page-builder/./js/src/editor/backend/sections.js","webpack://live-composer-page-builder/./js/src/editor/backend/sectionscontainer.class.js","webpack://live-composer-page-builder/./js/src/editor/backend/settings.panel.js","webpack://live-composer-page-builder/./js/src/editor/backend/templates.js","webpack://live-composer-page-builder/./js/src/editor/backend/uigeneral.js","webpack://live-composer-page-builder/./js/src/editor/backend/utils.class.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/animatable/animatable.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/animation/additive.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/animation/animation.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/animation/composition.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/clock.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/colors.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/consts.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/globals.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/helpers.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/render.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/styles.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/targets.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/transforms.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/units.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/core/values.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/draggable/draggable.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/easings/cubic-bezier/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/easings/eases/parser.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/easings/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/easings/irregular/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/easings/linear/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/easings/none.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/easings/spring/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/easings/steps/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/engine/engine.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/events/scroll.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/scope/scope.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/svg/drawable.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/svg/helpers.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/svg/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/svg/morphto.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/svg/motionpath.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/text/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/text/split.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/timeline/position.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/timeline/timeline.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/timer/timer.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/utils/chainable.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/utils/index.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/utils/number.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/utils/random.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/utils/stagger.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/utils/target.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/utils/time.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/waapi/composition.js","webpack://live-composer-page-builder/./node_modules/animejs/dist/modules/waapi/waapi.js","webpack://live-composer-page-builder/./node_modules/sortablejs/modular/sortable.esm.js","webpack://live-composer-page-builder/webpack/bootstrap","webpack://live-composer-page-builder/webpack/runtime/define property getters","webpack://live-composer-page-builder/webpack/runtime/hasOwnProperty shorthand","webpack://live-composer-page-builder/webpack/runtime/make namespace object","webpack://live-composer-page-builder/./js/src/editor/backend/index.js"],"sourcesContent":["/*********************************\r\n *\r\n * = CODE GENERATION =\r\n *\r\n * - dslc_save_composer ( Save the Page Changes )\r\n * - dslc_save_draft_composer ( Save the changes as draft, not publish )\r\n * - dslc_generate_code ( Generates Page's LC data )\r\n * - generateSectionCode ( Generate LC data for a specific row/section )\r\n * - dslca_gen_content_for_search ( Generate Readable Content For Search )\r\n *\r\n ***********************************/\r\n\r\n'use strict';\r\n\r\n/**\r\n * CODE GENERATION - Save Page Changes\r\n */\r\nfunction dslc_save_composer() {\r\n\tif ( window.dslcDebug ) console.log( 'dslc_save_composer' );\r\n\t/**\r\n\t * Before saving code via ajax\r\n\t * refresh the page source in a hidden #dslca-code\r\n\t */\r\n\twindow.dslc_generate_code();\r\n\r\n\t// Generate content for search\r\n\tdslca_gen_content_for_search();\r\n\r\n\t// Vars\r\n\tvar composerCode = jQuery('#dslca-code').val(),\r\n\tcontentForSearch = jQuery('#dslca-content-for-search').val(),\r\n\tpostID = jQuery('.dslca-container').data('post-id');\r\n\r\n\t// Apply class to body to know saving is in progress\r\n\tjQuery('body').addClass('dslca-saving-in-progress');\r\n\r\n\t// Replace the check in publish button with a loading animation\r\n\tjQuery('.dslca-save-composer .dslca-icon').removeClass('dslc-icon-ok').addClass('dslc-icon-spin dslc-icon-spinner');\r\n\r\n\t// Ajax call to save the new content\r\n\tjQuery.ajax({\r\n\t\tmethod: 'POST',\r\n\t\ttype: 'POST',\r\n\t\turl: DSLCAjax.ajaxurl,\r\n\t\tdata: {\r\n\t\t\taction : 'dslc-ajax-save-composer',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_post_id : postID,\r\n\t\t\tdslc_code : composerCode,\r\n\t\t\tdslc_content_for_search : contentForSearch\r\n\t\t},\r\n\t\ttimeout: 30000\r\n\t}).done(function( response ) {\r\n\r\n\t\t// On success hide the publish button\r\n\t\tif ( response.status == 'success' ) {\r\n\t\t\tjQuery('.dslca-save-composer').fadeOut(250);\r\n\t\t\tjQuery('.dslca-save-draft-composer').fadeOut(250);\r\n\r\n\t\t\t// Create new cache version after it's saved.\r\n\t\t\tjQuery('body').append( '<iframe class=\"lbmn-cache-iframe\" id=\"lbmn-cache-iframe-' + postID + '\" src=\"'+ DSLCSiteData.siteurl + '/?p=' + postID +'\" ></iframe>' );\r\n\r\n\t\t\tjQuery('.lbmn-cache-iframe').each(function(index, el) {\r\n\t\t\t\tjQuery(el).load(function() {\r\n\t\t\t\t\tjQuery(el).remove();\r\n\t\t\t\t\t// Cache built at this point. Remove iframe.\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t// On fail show an alert message\r\n\t\t} else {\r\n\t\t\talert( 'Something went wrong, please try to save again. Are you sure to make any changes? Error Code: ' + response.status);\r\n\t\t}\r\n\t}).fail(function( response ) {\r\n\r\n\t\tif ( response.statusText == 'timeout' ) {\r\n\t\t\talert( 'The request timed out after 30 seconds. Server do not respond in time. Please try again.' );\r\n\t\t} else {\r\n\t\t\talert( 'Something went wrong. Please try again. Error Code: ' + response.statusText  );\r\n\t\t}\r\n\t}).always(function( reseponse ) {\r\n\r\n\t\t// Replace the loading animation with a check icon\r\n\t\tjQuery('.dslca-save-composer .dslca-icon').removeClass('dslc-icon-spin dslc-icon-spinner').addClass('dslc-icon-ok')\r\n\r\n\t\t// Remove the class previously added so we know saving is finished\r\n\t\tjQuery('body').removeClass('dslca-saving-in-progress');\r\n\t});\r\n}\r\n\r\n/**\r\n * CODE GENERATION - Save Draft\r\n */\r\nfunction dslc_save_draft_composer() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_save_draft_composer' );\r\n\r\n\t// Vars\r\n\tvar composerCode = jQuery('#dslca-code').val(),\r\n\tpostID = jQuery('.dslca-container').data('post-id');\r\n\r\n\t// Apply class to body to know saving is in progress\r\n\tjQuery('body').addClass('dslca-saving-in-progress');\r\n\r\n\t// Replace the check in publish button with a loading animation\r\n\tjQuery('.dslca-save-draft-composer .dslca-icon').removeClass('dslc-icon-ok').addClass('dslc-icon-spin dslc-icon-spinner');\r\n\r\n\t// Ajax call to save the new content\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-ajax-save-draft-composer',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_post_id : postID,\r\n\t\t\tdslc_code : composerCode,\r\n\t\t},\r\n\t\tfunction( response ) {\r\n\r\n\t\t\t// Replace the loading animation with a check icon\r\n\t\t\tjQuery('.dslca-save-draft-composer .dslca-icon').removeClass('dslc-icon-spin dslc-icon-spinner').addClass('dslc-icon-save')\r\n\r\n\t\t\t// On success hide the publish button\r\n\t\t\tif ( response.status == 'success' ) {\r\n\t\t\t\tjQuery('.dslca-save-draft-composer').fadeOut(250);\r\n\r\n\t\t\t// On fail show an alert message\r\n\t\t\t} else {\r\n\r\n\t\t\t\talert( 'Something went wrong, please try to save again.' );\r\n\t\t\t}\r\n\r\n\t\t\t// Remove the class previously added so we know saving is finished\r\n\t\t\tjQuery('body').removeClass('dslca-saving-in-progress');\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * CODE GENERATION - Generate LC Data\r\n * @param section is not required. If no parameter provided function generates\r\n */\r\nwindow.dslc_generate_code = function() {\r\n\tif ( window.dslcDebug ) console.log( 'dslc_generate_code' );\r\n\r\n\t// Vars\r\n\tvar moduleCode = '',\r\n\tmodule_size,\r\n\tcomposerCode = '',\r\n\tpageCodeInJson = '',\r\n\tmaxPerRow = 12,\r\n\tmaxPerRowA = 12,\r\n\tcurrPerRow = 0,\r\n\tcurrPerRowA = 0,\r\n\tmodulesAreaSize,\r\n\tmodulesArea,\r\n\tmodulesAreaLastState,\r\n\tmodulesAreaFirstState,\r\n\tmodulesSection,\r\n\tmodulesSectionAtts = '',\r\n\tmodulesSectionJson;\r\n\r\n\t/**\r\n\t * Go through module areas (empty or not empty)\r\n\t * TODO: Optimize code to go though the section/area needed only,\r\n\t * not the whole page.\r\n\t */\r\n\r\n\tjQuery('#dslc-main .dslc-modules-area', LiveComposer.Builder.PreviewAreaDocument).each(function(){\r\n\r\n\t\tif ( jQuery('.dslc-module-front', this).length ) {\r\n\r\n\t\t\tjQuery(this).removeClass('dslc-modules-area-empty').addClass('dslc-modules-area-not-empty');\r\n\t\t\tjQuery('.dslca-no-content', this).hide();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tjQuery(this).removeClass('dslc-modules-area-not-empty').addClass('dslc-modules-area-empty');\r\n\r\n\t\t\tjQuery('.dslca-no-content:not(:visible)', this).show().css({\r\n\t\t\t\t'-webkit-animation-name' : 'dslcBounceIn',\r\n\t\t\t\t'-moz-animation-name' : 'dslcBounceIn',\r\n\t\t\t\t'animation-name' : 'dslcBounceIn',\r\n\t\t\t\t'animation-duration' : '0.6s',\r\n\t\t\t\t'-webkit-animation-duration' : '0.6s',\r\n\t\t\t\tpadding : 0\r\n\t\t\t}).animate({ padding : '35px 0' }, 300);\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Go through each row (empty or not empty)\r\n\t */\r\n\r\n\tjQuery('#dslc-main .dslc-modules-section', LiveComposer.Builder.PreviewAreaDocument).each(function(){\r\n\r\n\t\tmodulesSection = jQuery(this);\r\n\r\n\t\tmodulesSectionJson = generateSectionCode( modulesSection );\r\n\r\n\t\t// Update JSON in hidden text area with updated code.\r\n\t\tmodulesSection.find('.dslca-section-code').val( modulesSectionJson );\r\n\r\n\t\t// Add row code into the the whole page code.\r\n\t\tpageCodeInJson = pageCodeInJson + modulesSectionJson + ',';\r\n\r\n\t\t// Close row ( section ) shortcode\r\n\t\t// composerCode = composerCode + '[/dslc_modules_section] ';\r\n\t});\r\n\r\n\r\n\t// Remove the last comma in the code.\r\n\tpageCodeInJson = pageCodeInJson.slice(0, -1);\r\n\r\n\t// pageCodeInJson = pageCodeInJson;\r\n\tpageCodeInJson = '[' + pageCodeInJson + ']';\r\n\r\n\t// Apply the new code values to the setting containers\r\n\tjQuery('#dslca-code').val(pageCodeInJson);\r\n\r\n\tjQuery('#dslca-export-code').val(pageCodeInJson);\r\n\r\n\t// Create a new \"Code Updated\" event\r\n\t// I'm not sure if we really need to pass source code as event details.\r\n\t// Seems like overkill.\r\n\tconst pageCodeUpdated = new CustomEvent('pageCodeUpdated', /* { detail: pageCodeInJson } */);\r\n\tdocument.dispatchEvent( pageCodeUpdated );\r\n}\r\n\r\n\r\n/**\r\n * CODE GENERATION - Generate LC Data for Section\r\n *\r\n * @param  {jQuery Object} theModulesSection jQuery element for the section to process\r\n * @return {String}                   \t\t\tJSON code for the section\r\n */\r\n// ex. dslc_generate_section_code\r\nexport const generateSectionCode = ( theModulesSection ) => {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'generateSectionCode' );\r\n\r\n\t// Vars\r\n\tvar moduleCode = '',\r\n\tmodule_size,\r\n\tcomposerCode = '',\r\n\tpageCodeInJson = '',\r\n\tmaxPerRow = 12,\r\n\tmaxPerRowA = 12,\r\n\tcurrPerRow = 0,\r\n\tcurrPerRowA = 0,\r\n\tmodulesAreaSize,\r\n\tmodulesArea,\r\n\tmodulesAreaLastState,\r\n\tmodulesAreaFirstState,\r\n\tmodulesSection,\r\n\tmodulesSectionAtts = '',\r\n\tmodulesSectionJsonString = '',\r\n\tmodulesSectionJson;\r\n\r\n\tmodulesSection = theModulesSection;\r\n\r\n\t// Update dslc-modules-section-(not)empty classes\r\n\tif ( jQuery('.dslc-modules-area', modulesSection).length ) {\r\n\t\tmodulesSection.removeClass('dslc-modules-section-empty').addClass('dslc-modules-section-not-empty');\r\n\t} else {\r\n\t\tmodulesSection.removeClass('dslc-modules-section-not-empty').addClass('dslc-modules-section-empty');\r\n\t}\r\n\r\n\t// Remove last and first classes from module areas and modules\r\n\tjQuery('.dslc-modules-area.dslc-last-col, .dslc-modules-area.dslc-first-col', this).removeClass('dslc-last-col dslc-first-col');\r\n\tjQuery('.dslc-module-front.dslc-last-col, .dslc-module-front.dslc-first-col', this).removeClass('dslc-last-col dslc-first-col');\r\n\r\n\t// Vars\r\n\tcurrPerRowA = 0;\r\n\r\n\t// Get current JSON.\r\n\tmodulesSectionJsonString = modulesSection.find('.dslca-section-code').val();\r\n\tmodulesSectionJson = JSON.parse(modulesSectionJsonString);\r\n\r\n\t// Generate attributes for the row shortcode\r\n\tmodulesSectionAtts = '';\r\n\r\n\tjQuery('.dslca-modules-section-settings input', modulesSection).each(function(){\r\n\r\n\t\tvar currentInput = jQuery(this);\r\n\t\tvar currentAttrKey = currentInput.data('id');\r\n\t\tvar currentAttrVal = currentInput.val();\r\n\r\n\t\t// Update hidden text fields with row attributes.\r\n\t\tmodulesSectionAtts = modulesSectionAtts + currentAttrKey + '=\"' + currentAttrVal + '\" ';\r\n\r\n\t\t// Update JSON object.\r\n\t\tmodulesSectionJson[currentAttrKey] = currentAttrVal;\r\n\t});\r\n\r\n\t// Delete attribute 'give_new_id'.\r\n\t// It supposed to be used only once and by this time it was already applied.\r\n\tif (  undefined !== modulesSectionJson['give_new_id'] ) {\r\n\t\tdelete modulesSectionJson['give_new_id'];\r\n\t}\r\n\r\n\t// Prepare place for module areas.\r\n\tmodulesSectionJson['content'] = [];\r\n\r\n\t// Open the module section ( row ) shortcode\r\n\t// composerCode = composerCode + '[dslc_modules_section ' + modulesSectionAtts + '] ';\r\n\r\n\t/**\r\n\t * Go through each column of current row\r\n\t */\r\n\tjQuery('.dslc-modules-area', modulesSection).each(function(){\r\n\r\n\t\t// Reset width counter for modules\r\n\t\tvar currPerRow = 0,\r\n\t\t// Other Vars\r\n\t\tmodulesArea = jQuery(this),\r\n\t\tmodulesAreaSize = parseInt( modulesArea.data('size') ),\r\n\t\tmodulesAreaVAlign = modulesArea.data('valign'),\r\n\t\tmodulesAreaLastState = 'no',\r\n\t\tmodulesAreaFirstState = 'no';\r\n\t\t// Increment area column counter\r\n\t\tcurrPerRowA += modulesAreaSize;\r\n\r\n\t\tjQuery(this).removeClass('dslc-first-col');\r\n\t\tjQuery(this).removeClass('dslc-last-col');\r\n\r\n\t\t// If area column counter same as maximum\r\n\t\tif ( currPerRowA == maxPerRowA ) {\r\n\r\n\t\t\t// Apply classes to current and next column\r\n\t\t\tjQuery(this).addClass('dslc-last-col').next('.dslc-modules-area').addClass('dslc-first-col');\r\n\r\n\t\t\t// Reset area column counter\r\n\t\t\tcurrPerRowA = 0;\r\n\r\n\t\t\t// Set shortcode's \"last\" attribute to \"yes\"\r\n\t\t\tmodulesAreaLastState = 'yes';\r\n\r\n\t\t// If area column counter bigger than maximum\r\n\t\t} else if ( currPerRowA > maxPerRowA ) {\r\n\r\n\t\t\t// Apply classes to current and previous column\r\n\t\t\tjQuery(this).removeClass('dslc-last-col').addClass('dslc-first-col');\r\n\r\n\t\t\t// Set area column counter to the size of the current area\r\n\t\t\tcurrPerRowA = modulesAreaSize;\r\n\r\n\t\t\t// Set shortcode's \"first\" attribute to yes\r\n\t\t\tmodulesAreaFirstState = 'yes';\r\n\t\t}\r\n\r\n\t\t// If area column counter same as current area size\r\n\t\tif ( currPerRowA == modulesAreaSize ) {\r\n\r\n\t\t\t// Set shortcode's \"first\" attribute to yes\r\n\t\t\tmodulesAreaFirstState = 'yes';\r\n\r\n\t\t\t// Apply classes to current and previous column\r\n\t\t\tjQuery(this).removeClass('dslc-last-col').addClass('dslc-first-col');\r\n\r\n\t\t}\r\n\r\n\t\t// Open the modules area ( area ) shortcode\r\n\t\t// composerCode = composerCode + '[dslc_modules_area last=\"' + modulesAreaLastState + '\" first=\"' + modulesAreaFirstState + '\" size=\"' + modulesAreaSize + '\"] ';\r\n\r\n\t\tvar moduleAreaJSON = '{\"element_type\":\"module_area\",\"last\":\"' + modulesAreaLastState + '\",\"first\":\"' + modulesAreaFirstState + '\",\"size\":\"' + modulesAreaSize + '\",\"valign\":\"' + modulesAreaVAlign + '\"}';\r\n\t\tmoduleAreaJSON = JSON.parse( moduleAreaJSON );\r\n\r\n\t\t// Delete attribute 'give_new_id'.\r\n\t\t// It supposed to be used only once and by this time it was already applied.\r\n\t\tif (  undefined !== moduleAreaJSON['give_new_id'] ) {\r\n\t\t\tdelete moduleAreaJSON['give_new_id'];\r\n\t\t}\r\n\r\n\t\tmoduleAreaJSON.content = [];\r\n\r\n\t\t/**\r\n\t\t * Go through each module of current area\r\n\t\t */\r\n\r\n\t\tjQuery('.dslc-module-front', modulesArea).each(function(){\r\n\r\n\t\t\tvar dslc_module = jQuery(this);\r\n\r\n\t\t\t// Vars\r\n\t\t\tmodule_size = parseInt( dslc_module[0].getAttribute('data-dslc-module-size') );\r\n\t\t\tvar moduleLastState = 'no';\r\n\t\t\tvar moduleFirstState = 'no';\r\n\r\n\t\t\tjQuery(this).removeClass('dslc-first-col');\r\n\t\t\tjQuery(this).removeClass('dslc-last-col');\r\n\r\n\t\t\t// Increment modules column counter\r\n\t\t\tcurrPerRow += module_size;\r\n\r\n\t\t\t// If modules column counter same as maximum\r\n\t\t\tif ( currPerRow == maxPerRow ) {\r\n\r\n\t\t\t\t// Add classes to current and next module\r\n\t\t\t\tjQuery(this).addClass('dslc-last-col');\r\n\t\t\t\tjQuery(this).next('.dslc-module-front').addClass('dslc-first-col');\r\n\r\n\t\t\t\t// Reset modules column counter\r\n\t\t\t\tcurrPerRow = 0;\r\n\r\n\t\t\t\t// Set shortcode's \"last\" state to \"yes\"\r\n\t\t\t\tmoduleLastState = 'yes';\r\n\r\n\t\t\t\t// Set shorcode's \"first\" state to \"yes\"\r\n\t\t\t\tmoduleFirstState = 'yes';\r\n\r\n\r\n\t\t\t// If modules column counter bigger than maximum\r\n\t\t\t} else if ( currPerRow > maxPerRow ) {\r\n\r\n\t\t\t\t// Add classes to current and previous module\r\n\t\t\t\tjQuery(this).removeClass('dslc-last-col').addClass('dslc-first-col');\r\n\r\n\t\t\t\t// Set modules column counter to the size of current module\r\n\t\t\t\tcurrPerRow = module_size;\r\n\r\n\t\t\t\t// Set shortcode's \"first\" state to \"yes\"\r\n\t\t\t\tmoduleFirstState = 'yes';\r\n\t\t\t}\r\n\r\n\t\t\t// If modules column counter same as current module size\r\n\t\t\tif ( currPerRow == module_size ) {\r\n\r\n\t\t\t\t// Set shortcode's \"first\" attribute to yes\r\n\t\t\t\tmoduleFirstState = 'yes';\r\n\r\n\t\t\t\t// Apply classes to current and previous column\r\n\t\t\t\tjQuery(this).removeClass('dslc-last-col').addClass('dslc-first-col');\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\t// Get module's LC data\r\n\t\t\t\t// moduleCode = dslc_module[0].querySelector('.dslca-module-code').value;  Don't use. Creating bugs!\r\n\t\t\t\t// moduleCode = dslc_module[0].querySelector('.dslca-module-code').innerHTML;\r\n\t\t\t\tmoduleCode = dslc_module[0].querySelector('.dslca-module-code').innerText;\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.info( 'No DSLC code found in module: ' + dslc_module[0].getAttribute('id') );\r\n\t\t\t}\r\n\r\n\t\t\tif ( '' !== moduleCode ) {\r\n\t\t\t\t// Add the module shortcode containing the data\r\n\t\t\t\t// composerCode = composerCode + '[dslc_module last=\"' + moduleLastState + '\"]' + moduleCode + '[/dslc_module] ';\r\n\r\n\t\t\t\tvar moduleCodeJSON = JSON.parse(moduleCode);\r\n\t\t\t\t// Add idicator for the last module in the row.\r\n\t\t\t\tmoduleCodeJSON.last = moduleLastState;\r\n\r\n\t\t\t\t// RAW CODE CLEANUP: Clean the module code from keys with empty values.\r\n\t\t\t\tjQuery.each(moduleCodeJSON, function(index, el) {\r\n\t\t\t\t\tif ( false === el || '' === el ) {\r\n\t\t\t\t\t\tdelete moduleCodeJSON[index];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( 'content' === index ) {\r\n\t\t\t\t\t\tmoduleCodeJSON[index] = el.replace(/\\\\'/g, \"'\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( 'give_new_id' === index ) {\r\n\t\t\t\t\t\tdelete moduleCodeJSON[index];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Put optimized code back into the hidden textarea.\r\n\t\t\t\t// dslc_module[0].querySelector('.dslca-module-code').value = JSON.stringify(moduleCodeJSON); - Don't use. Creating bugs!\r\n\t\t\t\tdslc_module[0].querySelector('.dslca-module-code').innerText = JSON.stringify(moduleCodeJSON);\r\n\r\n\t\t\t\t// Add the module JSON as array item\r\n\t\t\t\tmoduleAreaJSON['content'].push( moduleCodeJSON );\r\n\t\t\t}\r\n\r\n\t\t\t// Fix bug with modules duplication if broken module saved.\r\n\t\t\tmoduleCode = '';\r\n\r\n\t\t});\r\n\r\n\t\tmodulesSectionJson['content'].push(moduleAreaJSON);\r\n\r\n\t\t// Close area shortcode\r\n\t\t// composerCode = composerCode + '[/dslc_modules_area] ';\r\n\t});\r\n\r\n\tvar generatedCode = JSON.stringify( modulesSectionJson );\r\n\r\n\treturn generatedCode;\r\n}\r\n\r\n/**\r\n * CODE GENERATION - Document Ready\r\n */\r\nconst setEventListeners = () => {\r\n\r\n\t/**\r\n\t * Hook - Save Page\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-save-composer-hook', function(e){\r\n\t\te.preventDefault();\r\n\t\t// If some saving action not already in progress\r\n\t\tif ( ! jQuery('body').hasClass('dslca-module-saving-in-progress') && ! jQuery('body').hasClass('dslca-saving-in-progress') ) {\r\n\t\t\t// Call the function to save\r\n\t\t\tdslc_save_composer();\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Save Draft\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-save-draft-composer-hook', function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\t// If some saving action not already in progress\r\n\t\tif ( ! jQuery('body').hasClass('dslca-module-saving-in-progress') && ! jQuery('body').hasClass('dslca-saving-in-progress') ) {\r\n\t\t\t// Call the function to save\r\n\t\t\tdslc_save_draft_composer();\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n* Other - Generate Readable Content For Search\r\n*/\r\n\r\nfunction dslca_gen_content_for_search() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslca_gen_content_for_search' );\r\n\r\n\t// Vars\r\n\tvar holder = document.getElementById('dslca-content-for-search');\r\n\r\n\tif (null === holder) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar prevContent = holder.value;\r\n\tvar content = '';\r\n\r\n\t// Go through each content element\r\n\r\n\tvar elements = LiveComposer.Builder.PreviewAreaWindow.document.querySelectorAll('#dslc-main .dslc-module-front [data-exportable-content]');\r\n\r\n\tif ( undefined !== elements ) {\r\n\t\tArray.prototype.forEach.call(elements, function(el, i){\r\n\t\t\t// el - current DOM element, i  counter\r\n\t\t\tvar extracted_html_code;\r\n\r\n\t\t\tif ( el.getAttribute('data-exportable-content') !== '' ) {\r\n\r\n\t\t\t\tvar wrapper_tag = el.getAttribute('data-exportable-content');\r\n\t\t\t\textracted_html_code = '<' + wrapper_tag + '>' + el.innerHTML + '</' + wrapper_tag + '>';\r\n\t\t\t} else {\r\n\r\n\t\t\t\textracted_html_code = el.innerHTML;\r\n\t\t\t}\r\n\r\n\t\t\tif ( extracted_html_code !== null ) {\r\n\r\n\t\t\t\tcontent += extracted_html_code.replace(/\\s+/g, ' ').trim() + '\\n';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// Set the value of the content field\r\n\tholder.value = content;\r\n\r\n\t// Used to show the publish button for pages made before this feature\r\n\tif ( prevContent !== content ) {\r\n\r\n\t\twindow.dslc_show_publish_button();\r\n\t}\r\n}\r\n\r\n/**\r\n * Other - Generate code of editable content\r\n */\r\nexport const editableContentCodeGeneration = ( dslcField ) => {\r\n\tif ( window.dslcDebug ) console.log( 'editableContentCodeGeneration' );\r\n\r\n\t// In some rare cases we have the next error:\r\n\t// TypeError: undefined is not an object (evaluating 'dslcField.html().trim()...')\r\n\tif ( undefined === dslcField ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst dslcModule = dslcField.closest('.dslc-module-front');\r\n\tconst moduleEl = dslcModule[0];\r\n\tconst dslcContent = dslcField.html().trim().replace(/<textarea/g, '<lctextarea').replace(/<\\/textarea/g, '</lctextarea');\r\n\tconst dslcFieldID = dslcField.data('id');\r\n\r\n\t// Update module ID in raw base64 code (dslc_code) of the module\r\n\tLiveComposer.Utils.update_module_property_raw( moduleEl, dslcFieldID, dslcContent );\r\n\t// dslcFieldID = 'content'\r\n\t// jQuery('.dslca-module-option-front[data-id=\"' + dslcFieldID + '\"]', dslcModule).val( dslcContent );\r\n}\r\n\r\nexport const codeGenerationInitJS = () => {\r\n\tsetEventListeners();\r\n}\r\n","/**\r\n * UI - General - Initiate Drag and Drop Functonality\r\n */\r\n\r\nimport { moduleOutputDefault } from \"./module.js\";\r\nimport Sortable from 'sortablejs';\r\n\r\nexport const dragAndDropInit = () => {\r\n\tvar modulesSection, modulesArea, moduleID, moduleOutput;\r\n\r\n\t// Drag and Drop for module icons from the list of modules\r\n\tvar modules_list = jQuery('.dslca-modules .dslca-section-scroller-content'); // Groups that can hold modules\r\n\t// jQuery(modules_list).each(function (i,e) {\r\n\r\n\tif( modules_list.length == 0 ) {\r\n\r\n\t\tmodules_list = [ document.createElement( 'div' ) ];\r\n\t}\r\n\r\n\tvar modules_list_sortable = Sortable.create(modules_list[0], {\r\n\t\tsort: false, // do not allow sorting inside the list of modules\r\n\t\tgroup: { name: 'modules', pull: 'clone', put: false },\r\n\t\tanimation: 150,\r\n\t\thandle: '.dslca-module',\r\n\t\tdraggable: '.dslca-module',\r\n\t\t// ghostClass: 'dslca-module-placeholder',\r\n\t\tchosenClass: 'dslca-module-dragging',\r\n\t\tscroll: true, // or HTMLElement\r\n\t\tscrollSensitivity: 150, // px, how near the mouse must be to an edge to start scrolling.\r\n\t\tscrollSpeed: 15, // px\r\n\r\n\r\n\t\tsetData: function (dataTransfer, dragEl) {\r\n\t\t//dragEl  contains html of the draggable element like:\r\n\t\t//<div class=\"dslca-module dslca-scroller-item dslca-origin dslca-origin-General\" data-id=\"DSLC_Button\" data-origin=\"General\" draggable=\"false\" style=\"\">\r\n\r\n\t\t\t  // dataTransfer.setData('Text', dragEl.textContent);\r\n\t\t\tdataTransfer.setData(LiveComposer.Utils.msieversion() !== false ? 'Text' : 'text/html', dragEl.innerHTML);\r\n\t\t},\r\n\r\n\t\t// dragging started\r\n\t\tonStart: function (/**Event*/evt) {\r\n\t\t\tevt.oldIndex;  // element index within parent\r\n\r\n\t\t\t// jQuery( '.dslc-modules-area' ).sortable( \"refreshPositions\" );\r\n\t\t\tjQuery('body').removeClass('dslca-new-module-drag-not-in-progress').addClass('dslca-new-module-drag-in-progress');\r\n\t\t\tjQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-new-module-drag-not-in-progress').addClass('dslca-new-module-drag-in-progress');\r\n\t\t\tjQuery('#dslc-header').addClass('dslca-header-low-z-index');\r\n\t\t},\r\n\r\n\t\t// dragging ended\r\n\t\tonEnd: function (/**Event*/evt) {\r\n\t\t\tevt.oldIndex;  // element's old index within parent\r\n\t\t\tevt.newIndex;  // element's new index within parent\r\n\r\n\t\t\tvar itemEl = evt.item;  // dragged HTML\r\n\t\t\tevt.preventDefault();\r\n\t\t\t// evt.stopPropagation();\r\n\t\t\t//return false;\r\n\r\n\t\t\t// Prevent drop into modules listing\r\n\t\t\tif(jQuery(itemEl).closest('.dslca-section-scroller-content').length > 0) return false;\r\n\r\n\t\t\tjQuery( '.dslca-options-hovered', LiveComposer.Builder.PreviewAreaDocument ).removeClass('dslca-options-hovered');\r\n\r\n\t\t\t// Vars\r\n\t\t\tmodulesArea = jQuery(itemEl.parentNode); //jQuery(this);\r\n\t\t\tmoduleID = itemEl.dataset.id; // get value of data-id attr.\r\n\r\n\t\t\twindow.dslc_generate_code();\r\n\r\n\t\t\tif ( moduleID == 'DSLC_M_A' || jQuery('body').hasClass('dslca-module-drop-in-progress') ||\r\n\t\t\t\tmodulesArea.closest('#dslc-header').length || modulesArea.closest('#dslc-footer').length ) {\r\n\r\n\t\t\t\t// nothing\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tjQuery('body').addClass('dslca-module-drop-in-progress');\r\n\r\n\t\t\t\t// Add padding to modules area\r\n\t\t\t\t/*\r\n\t\t\t\tif ( modulesArea.hasClass('dslc-modules-area-not-empty') )\r\n\t\t\t\t\tmodulesArea.animate({ paddingBottom : 50 }, 150);\r\n\t\t\t\t*/\r\n\r\n\t\t\t\t// TODO: Optimize expensive ajax call in this function!\r\n\t\t\t\t// Load Output\r\n\t\t\t\tmoduleOutputDefault( moduleID, function( response ){\r\n\r\n\t\t\t\t\t// Append Content\r\n\t\t\t\t\tmoduleOutput = response.output;\r\n\r\n\t\t\t\t\t// Remove extra padding from area\r\n\t\t\t\t\t// modulesArea.css({ paddingBottom : 0 });\r\n\r\n\t\t\t\t\t// Add output\r\n\t\t\t\t\t// TODO: optimize jQuery in the string below\r\n\r\n\t\t\t\t\tvar dslcJustAdded = LiveComposer.\r\n\t\t\t\t\t\t\t\t\t\tBuilder.\r\n\t\t\t\t\t\t\t\t\t\tHelpers.\r\n\t\t\t\t\t\t\t\t\t\tinsertModule( moduleOutput, jQuery('.dslca-module', modulesArea) );\r\n\r\n\r\n\t\t\t\t\tsetTimeout( function(){\r\n\t\t\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\t\t\t\t\t\tjQuery('body').removeClass('dslca-module-drop-in-progress');\r\n\t\t\t\t\t}, 700 );\r\n\r\n\t\t\t\t\t// \"Show\" no content text // Not used anymore?\r\n\t\t\t\t\t// jQuery('.dslca-no-content-primary', modulesArea ).css({ opacity : 1 });\r\n\r\n\t\t\t\t\t// \"Show\" modules area management\r\n\t\t\t\t\tjQuery('.dslca-modules-area-manage', modulesArea).css ({ visibility : 'visible' });\r\n\r\n\t\t\t\t\t// Generete\r\n\t\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\r\n\t\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_tabs();\r\n\t\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_init_accordion();\r\n\r\n\t\t\t\t\twindow.dslc_generate_code();\r\n\t\t\t\t\t// Show publish\r\n\t\t\t\t\twindow.dslc_show_publish_button();\r\n\r\n\t\t\t\t\t// LiveComposer.Builder.UI.initInlineEditors();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Loading animation\r\n\r\n\t\t\t\t// Show loader  Not used anymore.\r\n\t\t\t\t// jQuery('.dslca-module-loading', modulesArea).show();\r\n\r\n\t\t\t\t// Change module icon to the spinning loader.\r\n\t\t\t\tjQuery(itemEl).find('.dslca-icon').attr('class', '').attr('class', 'dslca-icon dslc-icon-refresh dslc-icon-spin');\r\n\r\n\r\n\t\t\t\t// Hide no content text // Not used anymore?\r\n\t\t\t\t// jQuery('.dslca-no-content-primary', modulesArea).css({ opacity : 0 });\r\n\r\n\t\t\t\t// Hide modules area management\r\n\t\t\t\tjQuery('.dslca-modules-area-manage', modulesArea).css ({ visibility : 'hidden' });\r\n\r\n\t\t\t\t// Animate loading\r\n\t\t\t\t/*\r\n\t\t\t\tvar randomLoadingTime = Math.floor(Math.random() * (100 - 50 + 1) + 50) * 100;\r\n\t\t\t\tjQuery('.dslca-module-loading-inner', modulesArea).css({ width : 0 }).animate({\r\n\t\t\t\t\twidth : '100%'\r\n\t\t\t\t}, randomLoadingTime, 'linear' );\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\r\n\t\t\tLiveComposer.Builder.UI.stopScroller();\r\n\t\t\tjQuery('body').removeClass('dslca-new-module-drag-in-progress').addClass('dslca-new-module-drag-not-in-progress');\r\n\t\t\tjQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-new-module-drag-in-progress').addClass('dslca-new-module-drag-not-in-progress');\r\n\t\t\tjQuery('#dslc-header').removeClass('dslca-header-low-z-index');\r\n\t\t},\r\n\r\n\t\t// Element is dropped into the list from another list\r\n\t\tonAdd: function (/**Event*/evt) {\r\n\t\t\tvar itemEl = evt.item;  // dragged HTMLElement\r\n\t\t\tevt.from;  // previous list\r\n\t\t\t// + indexes from onEnd\r\n\t\t\t// evt.preventDefault();\r\n\t\t},\r\n\r\n\t\t// Changed sorting within list\r\n\t\tonUpdate: function (/**Event*/evt) {\r\n\t\t\tvar itemEl = evt.item;  // dragged HTMLElement\r\n\t\t\t// + indexes from onEnd\r\n\t\t\twindow.dslc_show_publish_button();\r\n\t\t\t// evt.preventDefault();\r\n\t\t},\r\n\r\n\t\t// Called by any change to the list (add / update / remove)\r\n\t\tonSort: function (/**Event*/evt) {\r\n\t\t\t// same properties as onUpdate\r\n\t\t\tevt.preventDefault();\r\n\t\t\t// evt.stopPropagation(); return false;\r\n\t\t},\r\n\r\n\t\t// Element is removed from the list into another list\r\n\t\tonRemove: function (/**Event*/evt) {\r\n\t\t\t  // same properties as onUpdate\r\n\t\t},\r\n\r\n\t\t// Attempt to drag a filtered element\r\n\t\tonFilter: function (/**Event*/evt) {\r\n\t\t\tvar itemEl = evt.item;  // HTMLElement receiving the `mousedown|tapstart` event.\r\n\t\t},\r\n\r\n\t\t// Event when you move an item in the list or between lists\r\n\t\tonMove: function (/**Event*/evt) {\r\n\t\t\t// Example: http://jsbin.com/tuyafe/1/edit?js,output\r\n\t\t\tevt.dragged; // dragged HTMLElement\r\n\t\t\tevt.draggedRect; // TextRectangle {left, top, right  bottom}\r\n\t\t\tevt.related; // HTMLElement on which have guided\r\n\t\t\tevt.relatedRect; // TextRectangle\r\n\t\t\t// return false;  for cancel\r\n\t\t\tjQuery( evt.to ).addClass('dslca-options-hovered');\r\n\t\t}\r\n\t});\r\n}\r\n","/**\r\n * The place to do all the events bindings.\r\n */\r\n\r\nexport const eventsInit = () =>{\r\n\t// Parent page events.\r\n\tdocument.addEventListener('click', function (event) {\r\n\t\tif ( event.target.matches( '[data-event=\"modal-wysiwyg-cancel\"]' ) ) {\r\n\t\t\t// Create a new \"Modal Cancel\" event\r\n\t\t\tconst modalWysiwygCancel = new CustomEvent('modalWysiwygCancel', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( modalWysiwygCancel );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"modal-wysiwyg-confirm\"]' ) ) {\r\n\t\t\t// Create a new \"Modal Cancel\" event\r\n\t\t\tconst modalWysiwygConfirm = new CustomEvent('modalWysiwygConfirm', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( modalWysiwygConfirm );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"module-confirm\"]' ) ) {\r\n\t\t\t// Create \"Module Confirm\" event\r\n\t\t\tconst moduleConfirm = new CustomEvent('moduleConfirm', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( moduleConfirm );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"module-cancel\"]' ) ) {\r\n\t\t\t// Create \"Module Cancel\" event\r\n\t\t\tconst moduleCancel = new CustomEvent('moduleCancel', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( moduleCancel );\r\n\t\t}\r\n\t}, false);\r\n\r\n\t// Preview iframe events: click.\r\n\tLiveComposer.Builder.PreviewAreaWindow.document.addEventListener('click', function (event) {\r\n\t\t// Disable default action/event,\r\n\t\t// but only if the link clicked doesn't have '.dslca-link' class.\r\n\t\tif ( ! event.target.matches('.dslca-link') ) {\r\n\t\t\t// By default all the default click events disabled on LC editing mode.\r\n\t\t\t// .dslca-link class used to enable default browser behaviour.\r\n\t\t\t// (ex. open header/footer for editing in new tab).\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"module-edit\"]' ) ) {\r\n\t\t\t// Create a new \"Open Module Editing\" event\r\n\t\t\tconst moduleEdit = new CustomEvent('moduleEdit', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( moduleEdit );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"module-duplicate\"]' ) ) {\r\n\t\t\t// Create a new \"Duplicate Module\" event\r\n\t\t\tconst moduleDuplicate = new CustomEvent('moduleDuplicate', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( moduleDuplicate );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"module-delete\"]' ) ) {\r\n\t\t\t// Create a new \"Delete Module\" event\r\n\t\t\tconst moduleDelete = new CustomEvent('moduleDelete', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( moduleDelete );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '.dslca-change-width-module-options [data-size]' ) ) {\r\n\t\t\t// Create a new \"Change Module Width\" event\r\n\t\t\tconst moduleChangeWidth = new CustomEvent('moduleChangeWidth', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( moduleChangeWidth );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"wysiwyg-edit\"]' ) ) {\r\n\t\t\t// Create a new \"Module WYSIWYG Editing\" event\r\n\t\t\tconst wysiwygEdit = new CustomEvent('wysiwygEdit', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( wysiwygEdit );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"module-style-copy\"]' ) ) {\r\n\t\t\t// Create a new \"Copy Module Style\" event\r\n\t\t\tconst copyStyles = new CustomEvent('copyModuleStyles', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( copyStyles );\r\n\t\t}\r\n\r\n\t\tif ( event.target.matches( '[data-event=\"module-style-paste\"]' ) ) {\r\n\t\t\t// Create a new \"Paste Module Style\" event\r\n\t\t\tconst pasteStyles = new CustomEvent('pasteModuleStyles', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( pasteStyles );\r\n\t\t}\r\n\r\n\t}, false);\r\n\r\n\t// Preview iframe events: focusout.\r\n\tLiveComposer.Builder.PreviewAreaWindow.document.addEventListener('focusout', function (event) {\r\n\t\t// This event gets dispatched when the contenteditable element loses focus.\r\n\t\t// Useful when you need to save data when element text edited.\r\n\t\tif ( event.target.matches( '[contenteditable=\"true\"]' ) ) {\r\n\t\t\tconst contentEditableFocusOut = new CustomEvent('contentEditableFocusOut', { detail: event.target });\r\n\t\t\tdocument.dispatchEvent( contentEditableFocusOut );\r\n\t\t}\r\n\t}, false);\r\n}","/**\r\n * Modal Window Class file\r\n */\r\n\r\n/**\r\n * Shows modal window\r\n *\r\n * @param {object} params\r\n * @params.title         {string} - modal window title\r\n * @params.content       {string}- modal window description\r\n * @params.confirm       {function} - modal window confirm action\r\n * @params.cancel        {function} - modal window cancel action\r\n * @params.cancel_title  {string} - modal window cancel title\r\n * @params.confirm_title {string} - modal window confirm title\r\n * @params.ok_title {string} - modal window OK title\r\n */\r\nexport const CModalWindow = function(params) {\r\n\r\n    if( typeof params != 'object' || LiveComposer.Builder.Flags.modalOpen === true ) return false;\r\n\r\n    var self = this;\r\n\r\n    // Show Modal Window\r\n    var modalWindowWrap = '<div class=\"dslca-prompt-modal dslca-prompt-modal-active\">' +\r\n    '<div class=\"dslca-prompt-modal-content\"><div class=\"dslca-prompt-modal-msg\">' +\r\n     '<span class=\"dslca-prompt-modal-title\">' + params.title + '</span>' +\r\n      '<span class=\"dslca-prompt-modal-descr\">' + params.content + '</span></div>';\r\n\r\n      var modalWindowActions = '';\r\n\r\n    if (params.confirm || params.cancel) {\r\n\r\n        modalWindowActions = '<div class=\"dslca-prompt-modal-actions\">' +\r\n        '<a href=\"#\" class=\"dslca-prompt-modal-confirm-hook\"><span class=\"dslc-icon dslc-icon-ok\">' +\r\n        '</span>' + (params.confirm_title ? params.confirm_title : 'Confirm') + '</a><span class=\"dslca-prompt-modal-cancel-hook\"><span class=\"dslc-icon dslc-icon-remove\">' +\r\n        '</span>' + (params.cancel_title ? params.cancel_title : 'Cancel') +'</span></div>';\r\n    } else {\r\n\r\n        modalWindowActions = '<div class=\"dslca-prompt-modal-actions\">' +\r\n        '<a href=\"#\" class=\"dslca-prompt-modal-confirm-hook\"><span class=\"dslc-icon dslc-icon-ok\">' +\r\n        '</span>' + (params.ok_title ? params.ok_title : 'OK') + '</a></div>';\r\n    }\r\n\r\n    modalWindowWrap += modalWindowActions + '</div>';\r\n    modalWindowWrap = jQuery(modalWindowWrap);\r\n\r\n    if (typeof params.confirm != 'function') params.confirm = function(){};\r\n    if (typeof params.cancel != 'function') params.cancel = function(){};\r\n\r\n    // Confirm handler (function)\r\n\r\n    modalWindowWrap.find('.dslca-prompt-modal-confirm-hook')\r\n    .click(function(e)\r\n    {\r\n        e.stopPropagation();\r\n\r\n        modalWindowWrap.find('.dslca-prompt-modal-content').animate({\r\n            top: '55%'\r\n        }, 400);\r\n\r\n        modalWindowWrap.animate(\r\n            {opacity: 0},\r\n            400,\r\n            function()\r\n            {\r\n                params.confirm();\r\n                LiveComposer.Builder.Flags.modalOpen = false;\r\n                jQuery(this).remove();\r\n                //  moved here as it prevent some JS to get value on time\r\n            }\r\n        );\r\n\r\n        return false;\r\n    });\r\n\r\n    // Cancel handler (function)\r\n\r\n    modalWindowWrap.find('.dslca-prompt-modal-cancel-hook')\r\n    .click(function(e){\r\n\r\n        e.stopPropagation();\r\n\r\n        modalWindowWrap.find('.dslca-prompt-modal-content').animate({\r\n            top: '55%'\r\n        }, 400);\r\n\r\n        modalWindowWrap.animate(\r\n            {opacity: 0},\r\n            400,\r\n            function()\r\n            {\r\n                jQuery(this).remove();\r\n                LiveComposer.Builder.Flags.modalOpen = false;\r\n                params.cancel();\r\n            }\r\n        );\r\n\r\n        return false;\r\n    });\r\n\r\n    modalWindowWrap.hide();\r\n    jQuery(\"body\").append(modalWindowWrap);\r\n\r\n    modalWindowWrap.css({opacity: 0}).show().animate({\r\n        opacity: 1,\r\n    }, 400);\r\n\r\n    // Animate modal\r\n    modalWindowWrap.find('.dslca-prompt-modal-content').css({top: '55%'}).animate({\r\n        top: '50%'\r\n    }, 400);\r\n\r\n    LiveComposer.Builder.Flags.modalOpen = true;\r\n}","/*********************************\r\n *\r\n * = UI - MODAL =\r\n * Note: Used for the templates save/export/import and icons\r\n *\r\n * - dslc_show_modal ( Show Modal )\r\n * - dslc_hide_modal ( Hide Modal )\r\n *\r\n ***********************************/\r\nimport { editableContentCodeGeneration } from \"./codegeneration.js\";\r\n\r\n/**\r\n * MODAL - Show\r\n *\r\n * @param {Object} hook - Button that was clicked to open modal\r\n * @param {string} modal - CSS address of the modal, like '.modal-icons'\r\n */\r\n\r\nfunction dslc_show_modal( hook, modal ) {\r\n\r\n\tif ( typeof dslcDebug !== 'undefined' && dslcDebug ) console.log( 'dslc_show_modal' );\r\n\r\n\tif ( jQuery('.dslca-modal:visible').length ) {\r\n\t\t// If a modal already visibile hide it\r\n\t\thideModal( '', jQuery('.dslca-modal:visible') );\r\n\t}\r\n\r\n\t// Vars\r\n\tvar modal = jQuery(modal);\r\n\r\n\t// Calc popup height\r\n\tvar containerHeight = jQuery('.dslca-container').height();\r\n\tmodal.outerHide({\r\n\t\tclbk: function(){\r\n\r\n\t\t\thideModal( '', jQuery('.dslca-modal:visible') );\r\n\t\t}\r\n\t});\r\n\r\n\t// Vars ( Calc Offset )\r\n\tvar position = jQuery(hook).position(),\r\n\tdiff = modal.outerWidth() / 2 - hook.outerWidth() / 2,\r\n\toffset = position.left - diff;\r\n\r\n\t// Show Modal\r\n\tmodal.css({ left : offset });\r\n\tjQuery(\".dslca-prompt-modal-custom\").insertAfter( modal );\r\n\tif ( jQuery(\".dslca-prompt-modal-custom\").length > 0 ) {\r\n\t\tjQuery(\".dslca-prompt-modal-custom\").fadeIn();\r\n\t}\r\n\tmodal.addClass('dslca-modal-open').show();\r\n\r\n\t// Animate Modal\r\n\t// modal.css({\r\n\t\t// '-webkit-animation-name' : 'dslcBounceIn',\r\n\t\t// '-moz-animation-name' : 'dslcBounceIn',\r\n\t\t// 'animation-name' : 'dslcBounceIn',\r\n\t\t// 'animation-duration' : '0.6s',\r\n\t\t// '-webkit-animation-duration' : '0.6s'\r\n\t// }).fadeIn(600);\r\n}\r\n\r\n/**\r\n * MODAL - Hide\r\n */\r\n\r\n // ex. dslc_hide_modal\r\nexport const hideModal = ( hook, modal ) => {\r\n\r\n\tif ( typeof dslcDebug !== 'undefined' && dslcDebug ) console.log( 'hideModal' );\r\n\r\n\t// Vars\r\n\tvar modal = jQuery(modal);\r\n\r\n\t// Hide ( with animation )\r\n\tmodal.outerHide( 'destroy' );\r\n\tmodal.hide();\r\n\tif ( jQuery(\".dslca-prompt-modal-custom\").length > 0 ) {\r\n\t\tjQuery(\".dslca-prompt-modal-custom\").fadeOut();\r\n\t}\r\n\tmodal.removeClass('dslca-modal-open');\r\n\t/*\r\n\tmodal.css({\r\n\t\t'-webkit-animation-name' : 'dslcBounceOut',\r\n\t\t'-moz-animation-name' : 'dslcBounceOut',\r\n\t\t'animation-name' : 'dslcBounceOut',\r\n\t\t'animation-duration' : '0.6s',\r\n\t\t'-webkit-animation-duration' : '0.6s'\r\n\t}).fadeOut(600);\r\n\t*/\r\n\r\n}\r\n\r\n// Hide if clicked outside of modal\r\n/*jQuery(document).mouseup(function (e) {\r\n\t\tvar container = jQuery(\".dslca-modal-open\");\r\n\r\n\t\tif (!container.is(e.target) // if the target of the click isn't the container...\r\n\t\t&& container.has(e.target).length === 0) // ... nor a descendant of the container\r\n\t\t{\r\n\t\tcontainer.hide();\r\n\t\t}\r\n});*/\r\n\r\n/**\r\n * MODAL - Document Ready\r\n */\r\n\r\njQuery(document).ready(function($){\r\n\r\n\t/**\r\n\t * Hook - Show Modal\r\n\t */\r\n\r\n\tjQuery(document).on( 'click', '.dslca-open-modal-hook', function(e){\r\n\t\te.preventDefault();\r\n\t\tvar modal = jQuery(this).data('modal');\r\n\t\tdslc_show_modal( jQuery(this), modal );\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Hide Modal\r\n\t */\r\n\r\n\tjQuery(document).on( 'click', '.dslca-close-modal-hook', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\tvar modal = jQuery(this).data('modal');\r\n\t\t\thideModal( jQuery(this), modal );\r\n\t\t}\r\n\t});\r\n\r\n});\r\n\r\n\r\n/*********************************\r\n *\r\n * 5) = UI - PROMPT MODAL =\r\n *\r\n * - dslc_js_confirm\r\n * - dslc_js_confirm_close\r\n *\r\n ***********************************/\r\nfunction dslc_js_confirm( dslcID, dslcContent, dslcTarget ) {\r\n\r\n\tif ( typeof dslcDebug !== 'undefined' && dslcDebug ) console.log( 'dslc_js_confirm' );\r\n\r\n\t// Add \"active\" class\r\n\tjQuery('.dslca-prompt-modal').addClass('dslca-prompt-modal-active');\r\n\r\n\t// Add the ID of current event\r\n\tjQuery('.dslca-prompt-modal').data( 'id', dslcID );\r\n\tjQuery('.dslca-prompt-modal').data( 'target', dslcTarget );\r\n\r\n\t// Add modal content\r\n\tjQuery('.dslca-prompt-modal-msg').html( dslcContent );\r\n\r\n\t// Show modal\r\n\tjQuery('.dslca-prompt-modal').css({ opacity : 0 }).show().animate({\r\n\t\topacity : 1,\r\n\t}, 400);\r\n\r\n\t// Animate modal\r\n\tjQuery('.dslca-prompt-modal-content').css({ top : '55%' }).animate({\r\n\t\ttop : '50%'\r\n\t}, 400);\r\n}\r\n\r\n// ex. dslc_js_confirm_close\r\nexport const confirmClose = () => {\r\n\r\n\tif ( typeof dslcDebug !== 'undefined' && dslcDebug ) console.log( 'dslc_js_confirm_close' );\r\n\r\n\t// Remove \"active\" class\r\n\tjQuery('.dslca-prompt-modal').removeClass('dslca-prompt-modal-active');\r\n\r\n\t// Hide modal\r\n\tjQuery('.dslca-prompt-modal').animate({\r\n\t\topacity : 0,\r\n\t}, 400, function(){\r\n\t\tjQuery(this).hide();\r\n\t\tjQuery('.dslca-prompt-modal-cancel-hook').show();\r\n\t\tjQuery('.dslca-prompt-modal-confirm-hook').html('<span class=\"dslc-icon dslc-icon-ok\"></span>' + DSLCString.str_confirm);\r\n\t});\r\n\r\n\tjQuery('.dslca-prompt-modal-content').animate({\r\n\t\ttop : '55%'\r\n\t}, 400);\r\n\r\n}\r\n\r\n/**\r\n * Hook - Confirm on Enter, Cancel on Esc\r\n */\r\n\r\nwindow.dslc_modal_keypress_events = function dslc_modal_keypress_events(e) {\r\n\r\n\t// Enter ( confirm )\r\n\tif( e.which == 13 ) {\r\n\t\tif ( jQuery('.dslca-prompt-modal-active').length ) {\r\n\t\t\tjQuery('.dslca-prompt-modal-confirm-hook').trigger('click');\r\n\t\t}\r\n\r\n\t// Escape ( cancel )\r\n\t} else if ( e.which == 27 ) {\r\n\t\tif ( jQuery('.dslca-prompt-modal-active').length ) {\r\n\t\t\tjQuery('.dslca-prompt-modal-cancel-hook').trigger('click');\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * UI - PROMPT MODAL - Document Ready\r\n */\r\n\r\njQuery(document).ready(function($){\r\n\r\n\tjQuery(document).on( 'click', '.dslca-prompt-modal-cancel-hook', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tvar dslcAction = jQuery('.dslca-prompt-modal').data('id');\r\n\t\tvar dslcTarget = jQuery('.dslca-prompt-modal').data('target');\r\n\r\n\t\tif ( dslcAction == 'edit_in_progress' ) {\r\n\r\n\t\t\t/// MOVED\r\n\t\t\tdslc_module_options_cancel_changes( function(){\r\n\t\t\t\tdslcTarget.trigger('click');\r\n\t\t\t});\r\n\r\n\t\t} else if ( dslcAction == 'delete_module' ) {\r\n\r\n\t\t}\r\n\r\n\t\tconfirmClose();\r\n\t\tjQuery('.dslca-prompt-modal').data( 'id', '' );\r\n\r\n\t});\r\n\r\n\tjQuery(document).on( 'click', '.dslca-prompt-modal-confirm-hook', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tvar dslcAction = jQuery('.dslca-prompt-modal').data('id');\r\n\t\tvar dslcTarget = jQuery('.dslca-prompt-modal').data('target');\r\n\t\tvar closeAtEnd = true;\r\n\r\n\t\tif (  dslcAction == 'edit_in_progress' ) {\r\n\r\n\t\t\t/// MOVED\r\n\t\t\tdslc_module_options_confirm_changes( function(){\r\n\t\t\t\tdslcTarget.trigger('click');\r\n\t\t\t});\r\n\r\n\t\t} else if ( dslcAction == 'disable_lc' ) {\r\n\r\n\t\t\twindow.location = dslcTarget;\r\n\r\n\t\t} else if ( 'delete_module' === dslcAction ) {\r\n\r\n\t\t\t/// MOVED\r\n\t\t\tvar module = dslcTarget.closest('.dslc-module-front');\r\n\t\t\tdslc_module_delete( module );\r\n\r\n\t\t} else if ( 'delete_modules_area' === dslcAction ) {\r\n\r\n\t\t\tvar modulesArea = dslcTarget.closest('.dslc-modules-area');\r\n\t\t\tvar parentSectionContainer = modulesArea.closest('.dslc-modules-section-inner');\r\n\t\t\tdslc_modules_area_delete( modulesArea );\r\n\r\n\t\t} else if ( dslcAction == 'delete_modules_section' ) {\r\n\r\n\t\t\t/// MOVED\r\n\t\t\tdslc_row_delete( dslcTarget.closest('.dslc-modules-section') );\r\n\r\n\t\t} else if ( dslcAction == 'export_modules_section' ) {\r\n\r\n\t\t} else if ( dslcAction == 'import_modules_section' ) {\r\n\r\n\t\t\t/// MOVED\r\n\t\t\tdslc_row_import( jQuery('.dslca-prompt-modal textarea').val() );\r\n\t\t\tjQuery('.dslca-prompt-modal-confirm-hook span').css({ opacity : 0 });\r\n\t\t\tjQuery('.dslca-prompt-modal-confirm-hook .dslca-loading').show();\r\n\t\t\tcloseAtEnd = false;\r\n\t\t}\r\n\r\n\t\tif ( closeAtEnd ) {\r\n\t\t\tconfirmClose();\r\n\t\t}\r\n\r\n\t\tjQuery('.dslca-prompt-modal').data( 'id', '' );\r\n\t});\r\n\r\n});\r\n\r\n/**\r\n * DON'T MOVE THE FUNCTION BELLOW OUT OF THIS FILE!\r\n * Hide element when click on another element on the page\r\n */\r\njQuery.fn.outerHide = function(params) {\r\n\tvar $ = jQuery;\r\n\tparams = params ? params : {};\r\n\r\n\tvar self = this;\r\n\r\n\tif ( 'destroy' == params ) {\r\n\r\n\t\tjQuery(document).unbind('click.outer_hide');\r\n\t\treturn false;\r\n\t}\r\n\r\n\tjQuery(document).bind('click.outer_hide', function(e) {\r\n\r\n\t\tif (jQuery(e.target).closest(self).length == 0 &&\r\n\t\t\te.target != self &&\r\n\t\t\t$.inArray(jQuery(e.target)[0], jQuery(params.clickObj)) == -1 &&\r\n\t\t\tjQuery(self).css('display') != 'none'\r\n\t\t)\r\n\t\t{\r\n\t\t\tif(params.clbk)\r\n\t\t\t{\r\n\t\t\t\tparams.clbk();\r\n\t\t\t}else{\r\n\t\t\t\tjQuery(self).hide();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Cancel changes in standard WP Editor (TinyMCE) WYSIWYG\r\n */\r\ndocument.addEventListener( 'modalWysiwygCancel', function ( customEvent ) {\r\n\tjQuery('.dslca-wp-editor').hide();\r\n\tjQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ).removeClass('dslca-wysiwyg-active');\r\n});\r\n\r\n/**\r\n * Confirm changes in standard WP Editor (TinyMCE) WYSIWYG\r\n */\r\ndocument.addEventListener( 'modalWysiwygConfirm', function ( customEvent ) {\r\n\tvar module = jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ).closest('.dslc-module-front');\r\n\r\n\tif( typeof tinymce != \"undefined\" ) {\r\n\t\tif ( jQuery('#wp-dslcawpeditor-wrap').hasClass('tmce-active') ) {\r\n\t\t\tvar editor = tinymce.get( 'dslcawpeditor' );\r\n\t\t\tvar content = editor.getContent();\r\n\t\t} else {\r\n\t\t\tvar content = jQuery('#dslcawpeditor').val();\r\n\t\t}\r\n\r\n\t\tcontent = content.trim();\r\n\t\tjQuery('.dslca-wp-editor').hide();\r\n\t\tjQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ).html( content );\r\n\r\n\t\tif ( module.hasClass('dslc-module-handle-like-accordion') ) {\r\n\t\t\tjQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ).siblings('.dslca-editable-content').html( content );\r\n\t\t\tjQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ).siblings('.dslca-accordion-plain-content').val( content );\r\n\t\t\tvar dslcAccordion = module.find('.dslc-accordion');\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_accordion_generate_code( dslcAccordion );\r\n\t\t} else if ( module.hasClass('dslc-module-handle-like-tabs') ) {\r\n\t\t\tjQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ).siblings('.dslca-editable-content').html( content );\r\n\t\t\tjQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ).siblings('.dslca-tab-plain-content').val( content );\r\n\t\t\tvar dslcTabs = module.find('.dslc-tabs');\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_tabs_generate_code( dslcTabs );\r\n\t\t} else {\r\n\t\t\t// The next function is not compatible for Tab and Accordions.\r\n\t\t\teditableContentCodeGeneration( jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ) );\r\n\t\t}\r\n\r\n\t\tjQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument ).removeClass('dslca-wysiwyg-active');\r\n\t} else {\r\n\t\tconsole.info( 'Live Composer: TinyMCE is undefined.' );\r\n\t}\r\n});\r\n\r\nexport const modalwindowInitJS = () => {\r\n\r\n}\r\n","/**\r\n *  Builder module functions & hooks\r\n *\r\n *   = MODULES =\r\n *\r\n * - dslc_module_delete ( Deletes a module )\r\n * - moduleDuplicate ( Copies a module )\r\n * - dslc_module_width_set ( Sets a width to module )\r\n * - dslc_module_options_show ( Show module options )\r\n * - dslc_module_options_section_filter ( Filter options section )\r\n * - dslc_module_options_hideshow_tabs ( Hide show tabs based on option choices )\r\n * - dslc_module_options_confirm_changes ( Confirm changes )\r\n * - dslc_module_options_cancel_changes ( Cancel changes )\r\n * - dslc_module_options_tooltip ( Helper tooltips for options )\r\n * - dslc_module_options_font ( Actions for font option type )\r\n * - dslc_module_options_icon ( Actions for icon font option type )\r\n * - dslc_module_options_icon_returnid (Fill icon option type with selected icon ID/name)\r\n * - dslc_module_options_text_align ( Actions for text align option type )\r\n * - dslc_module_options_checkbox ( Actions for checkbox option type )\r\n * - dslc_module_options_box_shadow ( Actions for box shadow option type )\r\n * - dslc_modules_options_box_shadow_color ( Initiate colorpicker for box shadow)\r\n * - dslc_module_options_text_shadow ( Actions for text shadow option type )\r\n * - dslc_modules_options_text_shadow_color ( Initiate colorpicker for text shadow)\r\n * - dslc_module_options_color ( Actions for color option type )\r\n * - dslc_module_output_default ( Get module output with default settings )\r\n * - dslc_module_output_altered ( Get module output when settings altered )\r\n *\r\n */\r\n\r\nimport { CModalWindow } from './modalwindow.class.js';\r\nimport { hidePublishButton, showSection } from './uigeneral.js';\r\nimport * as anime from 'animejs';\r\nimport { editableContentCodeGeneration } from \"./codegeneration.js\";\r\n\r\nvar actionAvail = function() {\r\n\r\n\tif ( LiveComposer.Builder.Flags.panelOpened ) {\r\n\t\tLiveComposer.Builder.UI.shakePanelConfirmButton();\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\n/**\r\n * Hook - Duplicate Module\r\n */\r\ndocument.addEventListener('moduleDuplicate', function (customEvent) {\r\n\tconst elClicked = customEvent.detail;  // customEvent.detail - is element being clicked passed as additional data in the event.\r\n\r\n\t// Check if action can be fired\r\n\tif ( ! actionAvail() ) return false;\r\n\r\n\tif ( ! elClicked.classList.contains('dslca-action-disabled') ) {\r\n\t\tmoduleDuplicate( elClicked.closest('.dslc-module-front') );\r\n\t}\r\n});\r\n\r\n/**\r\n * Hook - Module Delete\r\n */\r\n\r\ndocument.addEventListener( 'moduleDelete', function (customEvent) {\r\n\tconst elClicked = customEvent.detail;  // customEvent.detail - is element being clicked passed as additional data in the event.\r\n\r\n\t// Check if action can be fired\r\n\tif ( ! actionAvail() ) return false;\r\n\r\n\tvar self = this;\r\n\r\n\tif ( ! elClicked.classList.contains('dslca-action-disabled') ) {\r\n\r\n\t\tCModalWindow({\r\n\t\t\ttitle: DSLCString.str_del_module_title,\r\n\t\t\tcontent: DSLCString.str_del_module_descr,\r\n\t\t\tconfirm: function() {\r\n\r\n\t\t\t\tvar module = elClicked.closest('.dslc-module-front');\r\n\t\t\t\tdslc_module_delete( module );\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\n/**\r\n * Hook - Edit Module On Click ( Display Options Panel )\r\n */\r\ndocument.addEventListener('moduleEdit', function (customEvent) {\r\n\tconst elClicked = customEvent.detail;  // customEvent.detail - is element being clicked passed as additional data in the event.\r\n\tconst currentModuleEl = elClicked.closest('.dslc-module-front');\r\n\tconst currentModuleId = currentModuleEl.dataset.module;\r\n\r\n\tconst elEditing = LiveComposer.Builder.PreviewAreaWindow.document.querySelector('.dslca-module-being-edited');\r\n\tconst row_edited = jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).length;\r\n\r\n\t// If settings panel opened - do not proceed.\r\n\tif ( LiveComposer.Builder.Flags.uiHidden || ( null !== elEditing && elEditing.length > 0 ) || row_edited > 0 ) {\r\n\t\tif ( elEditing != currentModuleEl ) {\r\n\t\t\tLiveComposer.Builder.UI.shakePanelConfirmButton();\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tunmarkModulesBeingEdited();\r\n\r\n\t// Add the \"being edited\" class to current module\r\n\tcurrentModuleEl.classList.add('dslca-module-being-edited');\r\n\t// Call the function to display options\r\n\twindow.dslc_module_options_show( currentModuleId );\r\n\t// Cover up other modules with semi transp cover\r\n\tLiveComposer.Builder.PreviewAreaWindow.document.body.classList.add('module-editing-in-progress');\r\n});\r\n\r\n/**\r\n * Hook - Copy Module Styles On Click\r\n */\r\ndocument.addEventListener('copyModuleStyles', function (customEvent) {\r\n\tconst elClicked = customEvent.detail;  // customEvent.detail - is element being clicked passed as additional data in the event.\r\n\tconst currentModuleEl = elClicked.closest('.dslc-module-front');\r\n\r\n\t// Get module code.\r\n\tlet currentModuleCode = currentModuleEl.querySelector( '.dslca-module-code').innerText;\r\n\t// Save coppied styles in local storage (real buffer isn't supported by all the browsers).\r\n\tlocalStorage.setItem( 'lcCopyPasteStorage', currentModuleCode );\r\n});\r\n\r\n/**\r\n * Hook - Paste Module Styles On Click\r\n */\r\ndocument.addEventListener('pasteModuleStyles', function (customEvent) {\r\n\tconst elClicked = customEvent.detail;  // customEvent.detail - is element being clicked passed as additional data in the event.\r\n\tconst currentModuleEl = elClicked.closest('.dslc-module-front');\r\n\tconst dslcModule = jQuery( currentModuleEl );\r\n\t// Extract paste value from the local storage.\r\n\tconst pasteModuleCode = localStorage.getItem( 'lcCopyPasteStorage' );\r\n\tlet pasteModuleProperies = false;\r\n\tif ( pasteModuleCode ) {\r\n\t\ttry {\r\n\t\t\tpasteModuleProperies = JSON.parse( pasteModuleCode );\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log( \"Can't parse copy/paste string into JSON:\" );\r\n\t\t\tconsole.log( e );\r\n\t\t}\r\n\t}\r\n\r\n\tif ( pasteModuleProperies ) {\r\n\t\t// Does module id from paste data match with current block?\r\n\t\tif ( pasteModuleProperies.module_id === currentModuleEl.dataset.module ) {\r\n\t\t\tconst currentModuleCodeContainer = currentModuleEl.querySelector('.dslca-module-code');\r\n\t\t\tconst currentModuleCode = currentModuleCodeContainer.innerText;\r\n\t\t\tlet currentModuleProperties = false;\r\n\t\t\ttry {\r\n\t\t\t\tcurrentModuleProperties = JSON.parse( currentModuleCode );\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.log( \"Can't parse current module code into JSON:\" );\r\n\t\t\t\tconsole.log( e );\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentModuleProperties ) {\r\n\t\t\t\tlet modulePropertiesChanged = false;\r\n\t\t\t\tfor (let propertyId in pasteModuleProperies) {\r\n\t\t\t\t\t// Override all styling properties with the ones from pasted styles.\r\n\t\t\t\t\tif ( propertyId.includes( 'css_' ) ) {\r\n\t\t\t\t\t\tcurrentModuleProperties[ propertyId ] = pasteModuleProperies[ propertyId ];\r\n\t\t\t\t\t\tmodulePropertiesChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (let propertyId in currentModuleProperties) {\r\n\t\t\t\t\t// If property is missing in pasted data make it empty.\r\n\t\t\t\t\tif ( propertyId.includes( 'css_' ) ) {\r\n\t\t\t\t\t\tif ( currentModuleProperties[ propertyId ] !== pasteModuleProperies[ propertyId ] ) {\r\n\t\t\t\t\t\t\tcurrentModuleProperties[ propertyId ] = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmodulePropertiesChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( modulePropertiesChanged ) {\r\n\t\t\t\t\t// Prepare and call AJAX module redraw request.\r\n\t\t\t\t\tcurrentModuleProperties['action'] = 'dslc-ajax-add-module';\r\n\t\t\t\t\tcurrentModuleProperties['dslc'] = 'active';\r\n\t\t\t\t\tcurrentModuleProperties['dslc_module_id'] = currentModuleProperties.module_id;\r\n\t\t\t\t\tcurrentModuleProperties['dslc_module_instance_id'] = currentModuleProperties.module_instance_id;\r\n\t\t\t\t\tcurrentModuleProperties['dslc_post_id'] = currentModuleProperties.post_id;\r\n\r\n\t\t\t\t\tif ( dslcModule.hasClass('dslca-preload-preset') )\r\n\t\t\t\t\t\tcurrentModuleProperties['dslc_preload_preset'] = 'enabled';\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tcurrentModuleProperties['dslc_preload_preset'] = 'disabled';\r\n\r\n\t\t\t\t\tdslcModule.removeClass('dslca-preload-preset');\r\n\t\t\t\t\tcurrentModuleProperties.dslc_url_vars = LiveComposer.Utils.get_page_params();\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * Call AJAX for module redraw\r\n\t\t\t\t\t */\r\n\t\t\t\t\tjQuery.post(\r\n\t\t\t\t\t\tDSLCAjax.ajaxurl, currentModuleProperties,\r\n\t\t\t\t\t\tfunction( response ) {\r\n\t\t\t\t\t\t\tif ( response ) {\r\n\t\t\t\t\t\t\t\tdslcModule.after(response.output).next().addClass('dslca-module-being-edited');\r\n\t\t\t\t\t\t\t\tdslcModule.remove();\r\n\t\t\t\t\t\t\t\twindow.dslc_generate_code();\r\n\t\t\t\t\t\t\t\twindow.dslc_show_publish_button();\r\n\r\n\t\t\t\t\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\r\n\t\t\t\t\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\r\n\t\t\t\t\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_tabs();\r\n\t\t\t\t\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_init_accordion();\r\n\r\n\t\t\t\t\t\t\t\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n/**\r\n * Hook - Edit Module On Click ( Display Options Panel ) - Fixed: https://github.com/live-composer/live-composer-page-builder/issues/895\r\n */\r\n\r\nconst adjustZindex = () => {\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( {\r\n\t\tmouseenter: function(e) {\r\n\t\t\t// Adjust z-index.\r\n\t\t\tjQuery('.dslca-modules-section-manage', LiveComposer.Builder.PreviewAreaDocument).css(\"z-index\", \"99998\");\r\n\r\n\t\t\t// Adjust module editing controls for too small elements.\r\n\t\t\tconst moduleEl = e.target.closest(\"[data-module-id]\");\r\n\t\t\tconst elementHeight = moduleEl.offsetHeight;\r\n\t\t\tconst elementWidth = moduleEl.offsetWidth;\r\n\r\n\t\t\tif ( elementHeight < 60 && elementWidth < 300 ) {\r\n\t\t\t\tmoduleEl.classList.add('dslc-small-height-module');\r\n\t\t\t} else {\r\n\t\t\t\tmoduleEl.classList.remove('dslc-small-height-module');\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tmouseleave: function(e) {\r\n\t\t\tjQuery('.dslca-modules-section-manage', LiveComposer.Builder.PreviewAreaDocument).css(\"z-index\", \"999999\");\r\n\t\t},\r\n\t}, '.dslca-change-width-module-hook, .dslc-module-front .dslca-module-manage');\r\n}\r\n\r\n/**\r\n * Hook - Set Module Width\r\n */\r\n\r\ndocument.addEventListener('moduleChangeWidth', function ( customEvent ) {\r\n\tconst elClicked = customEvent.detail;  // customEvent.detail - is element being clicked passed as additional data in the event.\r\n\tconst currentModuleEl = elClicked.closest('.dslc-module-front');\r\n\r\n\tif ( ! elClicked.classList.contains('dslca-action-disabled') ) {\r\n\t\tvar oldSize = currentModuleEl.dataset.dslcModuleSize;\r\n\t\tvar newSize = elClicked.dataset.size;\r\n\r\n\t\t// Start expensive function only if the value changed.\r\n\t\tif (  Number(oldSize) !== Number(newSize) ) {\r\n\t\t\tdslc_module_width_set( currentModuleEl, newSize );\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n/**\r\n * Hook - Show code for altering module's defaults\r\n */\r\n/*\r\nFIXIT\r\nLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-module-get-defaults-hook', function(){\r\n\r\n\t// Vars\r\n\tvar module = jQuery(this).closest('.dslc-module-front');\r\n\tvar code = dslc_dm_get_defaults( module );\r\n\r\n\t// Generate modal's text\r\n\tvar message = '<span class=\"dslca-prompt-modal-title\">Module Defaults</span>'\r\n\t\t+ '<span class=\"dslca-prompt-modal-descr\">The code bellow is used to alter the defaults.</span>'\r\n\t\t+ '<textarea></textarea><br><br>';\r\n\r\n\t// Hide modal's cancel button\r\n\tjQuery('.dslca-prompt-modal-cancel-hook').hide();\r\n\r\n\t// Show confirm button and change it to \"OK\"\r\n\tjQuery('.dslca-prompt-modal-confirm-hook').html('<span class=\"dslc-icon dslc-icon-ok\"></span>OK');\r\n\r\n\t// Show the modal prompt\r\n\tdslc_js_confirm( 'dev_mode_get_default', message, module );\r\n}); */\r\n\r\n/**\r\n * Hook - Refresh Module\r\n * We have 'refresh' icon on blog posts grid and other post-based modules.\r\n * It's visible only when there are no posts to render.\r\n */\r\n/*\r\nFIXIT\r\nLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-refresh-module-hook', function(e){\r\n\r\n\tjQuery(this).css({\r\n\t\t'-webkit-animation-name' : 'dslcRotate',\r\n\t\t'-moz-animation-name' : 'dslcRotate',\r\n\t\t'animation-name' : 'dslcRotate',\r\n\t\t'animation-duration' : '0.6s',\r\n\t\t'-webkit-animation-duration' : '0.6s',\r\n\t\t'animation-iteration-count' : 'infinite',\r\n\t\t'-webkit-animation-iteration-count' : 'infinite'\r\n\t});\r\n\tjQuery(this).closest('.dslc-module-front').addClass('dslca-module-being-edited');\r\n\tmoduleOutputAltered( function() {\r\n\r\n\t\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\t});\r\n}); */\r\n\r\n/**\r\n * Show WYSIWYG\r\n */\r\n\r\ndocument.addEventListener('wysiwygEdit', function ( customEvent ) {\r\n\tconst elClicked = customEvent.detail;  // customEvent.detail - is element being clicked passed as additional data in the event.\r\n\tconst currentModuleEl = elClicked.closest('.dslc-module-front');\r\n\r\n\t// const editableEl = elClicked.querySelector('.dslca-editable-content');\r\n\tconst idToEdit = elClicked.dataset.idToEdit;\r\n\r\n\tconst editableEl = currentModuleEl.querySelector('[data-edit-id=\"' + idToEdit + '\"]');\r\n\tlet content = '';\r\n\r\n\tif ( 'TEXTAREA'=== editableEl.tagName || 'INPUT'=== editableEl.tagName ) {\r\n\t\tcontent = editableEl.value;\r\n\t} else {\r\n\t\tcontent = editableEl.innerHTML;\r\n\t}\r\n\r\n\tif ( undefined === content ) {\r\n\t\tcontent = '';\r\n\t}\r\n\r\n\tif ( content.trim().length ) {\r\n\t\t// Extract Content for current tab/accordion:\r\n\t\t/* if ( currentModuleEl.classList.contains('dslc-module-handle-like-accordion') || currentModuleEl.classList.contains('dslc-module-handle-like-tabs') ) {\r\n\t\t\tconst full_content_arr = content.split('(dslc_sep)');\r\n\t\t\tif ( full_content_arr.length ) {\r\n\t\t\t\tcontent = full_content_arr[idToEdit].trim();\r\n\t\t\t}\r\n\t\t} */\r\n\r\n\t\tcontent = content.replace(/<lctextarea/g, '<textarea').replace(/<\\/lctextarea/g, '</textarea');\r\n\t}\r\n\r\n\t// Restore shortcodes presentation.\r\n\tif ( content.includes( '%' ) ) {\r\n\t\tcontent = content.replace(/%\\(\\(%/g, '[');\r\n\t\tcontent = content.replace(/%\\)\\)%/g, ']');\r\n\t\tcontent = content.replace(/%\\(%/g, '[');\r\n\t\tcontent = content.replace(/%\\)%/g, ']');\r\n\t\tcontent = content.replace(/%\\{%/g, '[');\r\n\t\tcontent = content.replace(/%\\}%/g, ']');\r\n\t}\r\n\r\n\tcontent = content.trim();\r\n\r\n\t// Fill TinyMCE editor with extracted above content.\r\n\tif ( typeof tinymce != 'undefined' ) {\r\n\t\tvar editor = tinymce.get( 'dslcawpeditor' );\r\n\r\n\t\tif ( document.getElementById('wp-dslcawpeditor-wrap').classList.contains('tmce-active') ) {\r\n\t\t\teditor.setContent( content, {format : 'html'} );\r\n\t\t} else {\r\n\t\t\tdocument.getElementById('dslcawpeditor').value = content;\r\n\t\t}\r\n\r\n\t\tif ( ! currentModuleEl.classList.contains('dslca-module-being-edited') ) {\r\n\t\t\tcurrentModuleEl.querySelector('.dslca-module-edit-hook').click();\r\n\t\t}\r\n\r\n\t\tjQuery('.dslca-wp-editor').show();\r\n\t\teditableEl.classList.add('dslca-wysiwyg-active');\r\n\t\tjQuery('#dslcawpeditor_ifr, #dslcawpeditor').css({ height : jQuery('.dslca-wp-editor').height() - 300 });\r\n\t} else {\r\n\t\tconsole.info( 'Live Composer: TinyMCE is undefined.' );\r\n\t}\r\n});\r\n\r\n// Editable Contents.\r\nconst editableContentTextEvents = () => {\r\n\r\n\t// Preview iframe events.\r\n\t/* LiveComposer.Builder.PreviewAreaWindow.document.addEventListener('blur', function (event) {\r\n\t\t// event.preventDefault();\r\n\t\tif ( event.target.matches( '[data-event=\"module-edit\"]' ) ) {\r\n\r\n\t\t}\r\n\t});\r\n */\r\n/* \tLiveComposer.Builder.PreviewAreaWindow.document.addEventListener('keyup', function (event) {\r\n\t\t// event.preventDefault();\r\n\t\tif ( event.target.matches( '[data-event=\"module-edit\"]' ) ) {\r\n\r\n\t\t}\r\n\t});\r\n */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on('blur', '.dslca-editable-content', function() {\r\n\t\tif ( ! LiveComposer.Builder.Flags.uiHidden && jQuery(this).data('type') == 'simple' ) {\r\n\t\t\teditableContentCodeGeneration( jQuery(this) );\r\n\t\t}\r\n\t}).on( 'paste', '.dslca-editable-content:not(.inline-editor)', function(){\r\n\t\tif ( ! LiveComposer.Builder.Flags.uiHidden  && jQuery(this).data('type') == 'simple' ) {\r\n\t\t\tvar dslcRealInput = jQuery(this);\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tif ( dslcRealInput.data('type') == 'simple' ) {\r\n\t\t\t\t\tdslcRealInput.html( dslcRealInput.text() );\r\n\t\t\t\t}\r\n\t\t\t\teditableContentCodeGeneration( dslcRealInput );\r\n\t\t\t}, 100);\r\n\t\t}\r\n\t}).on('focus', '.dslca-editable-content', function() {\r\n\t\tif ( jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).length > 0 && ! jQuery(this).closest('.dslc-module-front').hasClass('dslca-module-being-edited') ) {\r\n\t\t\tjQuery(this).trigger('blur');\r\n\t\t}\r\n\t}).on('keyup', '.dslca-editable-content', function(){\r\n\t\tif ( jQuery(this).data('type') == 'simple' ){\r\n\t\t\tjQuery(this).closest('.dslc-module-front').addClass('dslca-module-change-made');\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Hook - On contenteditable focusout.\r\n */\r\ndocument.addEventListener('contentEditableFocusOut', function (customEvent) {\r\n\twindow.dslc_show_publish_button();\r\n});\r\n\r\n\r\n\r\n/**\r\n * MODULES - Delete a Module\r\n */\r\nfunction dslc_module_delete( module ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_delete_module' );\r\n\tshowSection( '.dslca-modules' );\r\n\r\n\tanime({\r\n\t\ttargets: module,\r\n\t\teasing: 'easeOutExpo',\r\n\t\tscale: 0,\r\n\t\topacity: 0,\r\n\t\tduration: 350,\r\n\t\tdelay: 0,\r\n\t\tendDelay: 0,\r\n\t\tcomplete: function(anim) {\r\n\t\t\t// Remove module, regenerate code, show publish button\r\n\t\t\tmodule.parentNode.removeChild( module );\r\n\t\t\twindow.dslc_generate_code();\r\n\t\t\twindow.dslc_show_publish_button();\r\n\t\t}\r\n\t  });\r\n}\r\n\r\nconst unmarkModulesBeingEdited = () => {\r\n\t// Remove being edited class if some module is being edited.\r\n\tconst elEditing = LiveComposer.Builder.PreviewAreaWindow.document.querySelector('.dslca-module-being-edited');\r\n\tif ( null !== elEditing ) {\r\n\t\telEditing.classList.remove('dslca-module-being-edited');\r\n\t}\r\n}\r\n\r\n/**\r\n * Modules - Copy a Module\r\n */\r\nfunction moduleDuplicate( module ) {\r\n\tif ( window.dslcDebug ) console.log( 'dslc_copy_module' );\r\n\tunmarkModulesBeingEdited();\r\n\r\n\t// Duplicate the module and append it to the same area\r\n\tvar module_new = module.cloneNode(true);\r\n\r\n\tjQuery( module_new ).appendTo( module.closest( '.dslc-modules-area' ) ).css({\r\n\t\t'-webkit-animation-name' : 'none',\r\n\t\t'-moz-animation-name' : 'none',\r\n\t\t'animation-name' : 'none',\r\n\t\t'animation-duration' : '0',\r\n\t\t'-webkit-animation-duration' : '0',\r\n\t\topacity : 0,\r\n\t\ttop: -50\r\n\t}).addClass('dslca-module-being-edited');\r\n\r\n\t// Generate new ID for the new module and change it in HTML/CSS of the module.\r\n\tgetNewModuleId( module_new );\r\n\r\n\t// Module fully cloned. Finish the process.\r\n\t// Need to call this function to update last column class for the modules.\r\n\twindow.dslc_generate_code();\r\n\r\n\t// Fade in the module\r\n\tanime({\r\n\t\ttargets: module_new,\r\n\t\teasing: 'easeOutExpo',\r\n\t\t// scale: 0,\r\n\t\ttop: 0,\r\n\t\topacity: 1,\r\n\t\tduration: 400,\r\n\t\tdelay: 0,\r\n\t\tendDelay: 0,\r\n\t\tcomplete: function(anim) {\r\n\t\t\tmodule_new.classList.remove( 'dslca-module-being-edited' );\r\n\t\t}\r\n\t});\r\n\r\n\twindow.dslc_show_publish_button();\r\n}\r\n\r\n/**\r\n * Generate new ID for the module provided\r\n *\r\n * Search/Replace old module ID with new one in HTML/CSS of the module.\r\n *\r\n * @param DOM module Module that needs ID updated (new ID).\r\n * @return void\r\n */\r\nexport const getNewModuleId = ( moduleEl ) => {\r\n\r\n\t// Vars\r\n\tvar dslc_module_id = LiveComposer.Utils.get_unique_id(); // Generate new module ID.\r\n\tvar dslc_module_id_original = moduleEl.getAttribute( 'id' ); // Original Module ID.\r\n\r\n\t// Update module ID in data attribute\r\n\tmoduleEl.setAttribute( 'data-module-id', dslc_module_id );\r\n\t// Update module ID in id attribute of element\r\n\tmoduleEl.setAttribute( 'id', 'dslc-module-' + dslc_module_id );\r\n\r\n\t/**\r\n\t * Search/Replace module id in the inline CSS\r\n\t */\r\n\tvar inline_css_el = moduleEl.getElementsByTagName( 'style' )[0];\r\n\tvar inline_css_code = inline_css_el.textContent;\r\n\t// Update id attribute for <style> element with new value\r\n\tinline_css_el.setAttribute( 'id', '#css-for-dslc-module-' + dslc_module_id );\r\n\t// Search/Replace all occurrences of module ID in inline CSS\r\n\tinline_css_code = inline_css_code.split( dslc_module_id_original ).join( 'dslc-module-' + dslc_module_id );\r\n\t// Put CSS code back into <style> element\r\n\tinline_css_el.textContent = inline_css_code;\r\n\r\n\t// Update module ID in raw base64 code (dslc_code) of the module\r\n\tLiveComposer.Utils.update_module_property_raw( moduleEl, 'module_instance_id', dslc_module_id );\r\n}\r\n\r\n/**\r\n * MODULES - Set Width\r\n */\r\nfunction dslc_module_width_set( moduleEl, new_width ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_width_set' );\r\n\r\n\t// Generate new column class\r\n\tvar newClass = 'dslc-' + new_width + '-col';\r\n\r\n\t// Add new column class and change size \"data\"\r\n\tjQuery( moduleEl )\r\n\t\t.removeClass('dslc-1-col dslc-2-col dslc-3-col dslc-4-col dslc-5-col dslc-6-col dslc-7-col dslc-8-col dslc-9-col dslc-10-col dslc-11-col dslc-12-col')\r\n\t\t.addClass(newClass)\r\n\t\t.data('dslc-module-size', new_width);\r\n\t\t//.addClass('dslca-module-being-edited');  Deprecated\r\n\r\n\t// Change module size in element attribute\r\n\tmoduleEl.setAttribute('data-dslc-module-size',new_width);\r\n\r\n\t// Update module size in raw base64 code (dslc_code) of the module\r\n\tLiveComposer.Utils.update_module_property_raw( moduleEl, 'dslc_m_size', new_width );\r\n\r\n\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\r\n\twindow.dslc_generate_code();\r\n\twindow.dslc_show_publish_button();\r\n}\r\n\r\n/**\r\n * MODULES - Show module options\r\n */\r\nwindow.dslc_module_options_show = function( moduleID ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_show' );\r\n\r\n\tif ( undefined === moduleID ) {\r\n\t\tconsole.warn( 'No module ID defined in dslc_module_options_show function.' )\r\n\t}\r\n\r\n\t// Vars\r\n\tvar dslcModule = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\r\n\tdslcModuleOptions = jQuery( '.dslca-module-options-front textarea', dslcModule ),\r\n\tdslcDefaultSection = jQuery('.dslca-header').data('default-section'),\r\n\tpseudoPanel = jQuery(jQuery('#pseudo-panel').html());\r\n\r\n\tjQuery(\"#wpwrap\").append(pseudoPanel);\r\n\r\n\t// Settings array for the Ajax call\r\n\tvar dslcSettings = {};\r\n\tdslcSettings['action'] = 'dslc-ajax-display-module-options';\r\n\t_wpnonce : DSLCAjax._wpnonce,\r\n\tdslcSettings['dslc'] = 'active';\r\n\tdslcSettings['dslc_module_id'] = moduleID;\r\n\tdslcSettings['dslc_post_id'] = jQuery('.dslca-container').data('data-post-id');\r\n\tdslcSettings.dslc_url_vars = LiveComposer.Utils.get_page_params();\r\n\r\n\t// Go through each option to fill dslcSettings array\r\n\t// with current module setting values\r\n\tdslcModuleOptions.each(function(){\r\n\r\n\t\t// Vars\r\n\t\tvar dslcOption = jQuery(this),\r\n\t\tdslcOptionID = dslcOption.data('id'),\r\n\t\tdslcOptionValue = dslcOption.val();\r\n\r\n\t\tif ( dslcOptionValue.includes( '%' ) ) {\r\n\t\t\t// Restore shortcodes.\r\n\t\t\tdslcOptionValue = dslcOptionValue.replace(/%\\(\\(%/g, '[');\r\n\t\t\tdslcOptionValue = dslcOptionValue.replace(/%\\)\\)%/g, ']');\r\n\t\t\tdslcOptionValue = dslcOptionValue.replace(/%\\(%/g, '[');\r\n\t\t\tdslcOptionValue = dslcOptionValue.replace(/%\\)%/g, ']');\r\n\t\t\tdslcOptionValue = dslcOptionValue.replace(/%\\{%/g, '[');\r\n\t\t\tdslcOptionValue = dslcOptionValue.replace(/%\\}%/g, ']');\r\n\t\t}\r\n\r\n\t\t// Add option ID and value to the settings array\r\n\t\tdslcSettings[dslcOptionID] = dslcOptionValue;\r\n\t});\r\n\r\n\t// Hide the save/cancel actions for text editor and show notification\r\n\tjQuery('.dslca-wp-editor-actions').hide();\r\n\tjQuery('.dslca-wp-editor-notification').show();\r\n\r\n\t// Hide the publish button\r\n\thidePublishButton();\r\n\r\n\t// LiveComposer.Builder.UI.initInlineEditors();\r\n\r\n\t// Set up backup\r\n\tvar moduleBackup = jQuery('.dslca-module-options-front', dslcModule).children().clone();\r\n\tLiveComposer.Builder.moduleBackup = moduleBackup;\r\n\r\n\tLiveComposer.Builder.Flags.panelOpened = true;\r\n\r\n\t// Show pseudo settings panel\r\n\tpseudoPanel.show();\r\n\tpseudoPanel.addClass('show');\r\n\r\n\t// AJAX call to get options HTML\r\n\tjQuery.post(\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\tdslcSettings,\r\n\t\tfunction( response ) {\r\n\r\n\t\t\t// Hide pseudo panel\r\n\t\t\tpseudoPanel.remove();\r\n\r\n\t\t\t// Show edit section\r\n\t\t\tshowSection('.dslca-module-edit');\r\n\r\n\t\t\t// Add the options\r\n\t\t\tif ( ! jQuery('body').hasClass('rtl') ) {\r\n\r\n\t\t\t\tjQuery('.dslca-module-edit-options-inner').html( response.output );\r\n\t\t\t} else {\r\n\r\n\t\t\t\tjQuery('.dslca-module-edit-options-inner').html( response.output );\r\n\t\t\t}\r\n\r\n\t\t\tjQuery('.dslca-module-edit-options-tabs').html( response.output_tabs );\r\n\r\n\r\n\t\t\tvar sectionsUsed = []; //  Array with tab ids to show for current module.\r\n\r\n\t\t\t/**\r\n\t\t\t * Go through each option and check its tab property.\r\n\t\t\t * Fill sectionsUsed array with ids of the tabs to display.\r\n\t\t\t * We don't want to display tabs with no options inside.\r\n\t\t\t */\r\n\t\t\tjQuery('.dslca-module-edit-options-inner .dslca-module-edit-option').each(function(){\r\n\t\t\t\tvar currentOptionSection = jQuery(this).data('section');\r\n\r\n\t\t\t\t// Check if this section is in the list of tabs to show.\r\n\t\t\t\tif ( sectionsUsed.indexOf(currentOptionSection) == -1 ) {\r\n\t\t\t\t\tsectionsUsed.push(currentOptionSection);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar tabs_total = sectionsUsed.length;\r\n\r\n\t\t\tfor (var i = 0; i < tabs_total; i++) {\r\n\t\t\t\t// Show the tabs used by the current module.\r\n\t\t\t\tjQuery('.dslca-header .dslca-options-filter-hook[data-section=\"' + sectionsUsed[i] + '\"]').show();\r\n\t\t\t}\r\n\r\n\t\t\t// Show the filter hooks\r\n\t\t\t// jQuery('.dslca-header .dslca-options-filter-hook').show();\r\n\r\n\t\t\t// Trigger click on first filter hook\r\n\t\t\tif ( jQuery('.dslca-module-edit-option[data-section=\"' + dslcDefaultSection + '\"]').length ) {\r\n\t\t\t\tjQuery('.dslca-header .dslca-options-filter-hook[data-section=\"' + dslcDefaultSection + '\"]').show();\r\n\t\t\t\tjQuery('.dslca-header .dslca-options-filter-hook[data-section=\"' + dslcDefaultSection + '\"]').trigger('click');\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('.dslca-header .dslca-options-filter-hook:first').hide();\r\n\t\t\t\tjQuery('.dslca-header .dslca-options-filter-hook:first').next('.dslca-options-filter-hook').trigger('click');\r\n\t\t\t}\r\n\r\n\t\t\t// Show the save/cancel actions\r\n\t\t\tjQuery('.dslca-module-edit-actions').show();\r\n\r\n\t\t\t// Show the save/cancel actions for text editor and hide notification\r\n\t\t\tjQuery('.dslca-wp-editor-notification').hide();\r\n\t\t\tjQuery('.dslca-wp-editor-actions').show();\r\n\r\n\t\t\t// Hide the section hooks\r\n\t\t\tjQuery('.dslca-header .dslca-go-to-section-hook').hide();\r\n\r\n\t\t\t// Hide the row save/cancel actions\r\n\t\t\tjQuery('.dslca-row-edit-actions').hide();\r\n\r\n\t\t\tLiveComposer.Builder.UI.loadOptionsDeps();\r\n\t\t}\r\n\t).done(function() {\r\n\t\t// Attach evenets to the Font family selection fields.\r\n\t\twindow.dslc_module_options_font();\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES - Module output default settings\r\n */\r\nexport const moduleOutputDefault = ( dslc_module_id, callback ) => {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'moduleOutputDefault' );\r\n\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-ajax-add-module',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_module_id : dslc_module_id, // ex. DSLC_Button\r\n\t\t\tdslc_post_id : jQuery('.dslca-container').data('post-id'),\r\n\t\t\tdslc_url_vars: LiveComposer.Utils.get_page_params(),\r\n\t\t\tdslc_new_module: true\r\n\t\t},\r\n\t\tfunction( response ) {\r\n\t\t\tcallback(response);\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * MODULES - Redraw module output when settings altered\r\n */\r\nexport const moduleOutputAltered = ( callback ) => {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'moduleOutputAltered' );\r\n\tcallback = typeof callback !== 'undefined' ? callback : false;\r\n\r\n\tvar dslcModule = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\r\n\tdslc_module_id = dslcModule.data('module'),\r\n\tdslcModuleOptions = jQuery( '.dslca-module-options-front textarea', dslcModule ),\r\n\tdslcModuleInstanceID = dslcModule.data('module-id');\r\n\r\n\t/**\r\n\t * Generate code\r\n\t */\r\n\r\n\tvar dslcSettings = {};\r\n\r\n\tdslcSettings['action'] = 'dslc-ajax-add-module';\r\n\tdslcSettings['dslc'] = 'active';\r\n\tdslcSettings['dslc_module_id'] = dslc_module_id;\r\n\tdslcSettings['dslc_module_instance_id'] = dslcModuleInstanceID;\r\n\tdslcSettings['dslc_post_id'] = jQuery('.dslca-container').data('post-id');\r\n\r\n\tif ( dslcModule.hasClass('dslca-preload-preset') )\r\n\t\tdslcSettings['dslc_preload_preset'] = 'enabled';\r\n\telse\r\n\t\tdslcSettings['dslc_preload_preset'] = 'disabled';\r\n\r\n\tdslcModule.removeClass('dslca-preload-preset');\r\n\r\n\tdslcModuleOptions.each(function(){\r\n\r\n\t\tvar dslcOption = jQuery(this);\r\n\t\tvar dslcOptionID = dslcOption.data('id');\r\n\t\tvar dslcOptionValue = dslcOption.val();\r\n\r\n\t\tdslcSettings[dslcOptionID] = dslcOptionValue;\r\n\r\n\t});\r\n\r\n\tdslcSettings.dslc_url_vars = LiveComposer.Utils.get_page_params();\r\n\r\n\t/**\r\n\t * Call AJAX for preview\r\n\t */\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl, dslcSettings,\r\n\t\tfunction( response ) {\r\n\r\n\t\t\tvar newModule = LiveComposer.\r\n\t\t\t\t\t\t\t\tBuilder.\r\n\t\t\t\t\t\t\t\tHelpers.\r\n\t\t\t\t\t\t\t\tinsertModule( response.output, dslcModule );\r\n\r\n\t\t\tnewModule.addClass('dslca-module-being-edited');\r\n\r\n\t\t\tresponse = null;\r\n\t\t\tnewModule = null;\r\n\r\n\t\t\t// TODO: Add new postponed action to run after all done\r\n\r\n\t\t\t// window.dslc_show_publish_button();\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\r\n\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_tabs();\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_init_accordion();\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Create Custom Event/Hook\r\n\t\t\t *\r\n\t\t\t * Third-party developers should use it like this:\r\n\t\t\t * window.addEventListener('moduleOutputAltered', function (e) {\r\n\t\t\t * \t....\r\n\t\t\t * }, false);\r\n\t\t\t */\r\n\t\t\tvar event = new Event('moduleOutputAltered');\r\n\t\t\t// Dispatch the event.\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dispatchEvent(event);\r\n\r\n\t\t\tif ( callback ) {\r\n\t\t\t\tcallback( response );\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * MODULES - Reload a specific module\r\n */\r\nwindow.dslc_module_output_reload = function ( dslcModule, callback ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_output_reload' );\r\n\tcallback = typeof callback !== 'undefined' ? callback : false;\r\n\r\n\tvar dslc_module_id = dslcModule.data('module'),\r\n\tdslcModuleOptions = jQuery( '.dslca-module-options-front textarea', dslcModule ),\r\n\tdslcModuleInstanceID = dslcModule.data('module-id');\r\n\r\n\t/**\r\n\t * Generate code\r\n\t */\r\n\r\n\tvar dslcSettings = {};\r\n\r\n\tdslcSettings['action'] = 'dslc-ajax-add-module';\r\n\tdslcSettings['dslc'] = 'active';\r\n\tdslcSettings['dslc_module_id'] = dslc_module_id;\r\n\tdslcSettings['dslc_module_instance_id'] = dslcModuleInstanceID;\r\n\tdslcSettings['dslc_post_id'] = jQuery('.dslca-container').data('post-id');\r\n\tdslcSettings['dslc_preload_preset'] = 'enabled';\r\n\tdslcModule.removeClass('dslca-preload-preset');\r\n\r\n\tdslcModuleOptions.each(function(){\r\n\r\n\t\tvar dslcOption = jQuery(this);\r\n\t\tvar dslcOptionID = dslcOption.data('id');\r\n\t\tvar dslcOptionValue = dslcOption.val();\r\n\r\n\t\tdslcSettings[dslcOptionID] = dslcOptionValue;\r\n\r\n\t});\r\n\r\n\t/**\r\n\t * Loader\r\n\t */\r\n\r\n\tdslcModule.append('<div class=\"dslca-module-reloading\"><span class=\"dslca-icon dslc-icon-spin dslc-icon-refresh\"></span></div>');\r\n\r\n\t/**\r\n\t * Call AJAX for preview\r\n\t */\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl, dslcSettings,\r\n\t\tfunction( response ) {\r\n\r\n\t\t\tdslcModule.after(response.output).next().addClass('dslca-module-being-edited');\r\n\t\t\tdslcModule.remove();\r\n\t\t\twindow.dslc_generate_code();\r\n\t\t\twindow.dslc_show_publish_button();\r\n\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_tabs();\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_init_accordion();\r\n\r\n\t\t\tif ( callback ) {\r\n\r\n\t\t\t\tcallback( response );\r\n\t\t\t}\r\n\r\n\t\t\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * Other - Get Alter Module Defaults Code\r\n */\r\nfunction dslc_dm_get_defaults( module ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_dm_get_defaults' );\r\n\r\n\t// The module code value\r\n\t// var optionsCode = module.find('.dslca-module-code').val();  Don't use. Causes bugs!\r\n\tvar optionsCode = module.find('.dslca-module-code').innerText;\r\n\r\n\t// Ajax call to get the plain PHP code\r\n\tjQuery.post(\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-ajax-dm-module-defaults',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_modules_options : optionsCode\r\n\t\t},\r\n\t\tfunction( response ) {\r\n\r\n\t\t\t// Apply the plain PHP code to the textarea\r\n\t\t\tjQuery('.dslca-prompt-modal textarea').val( response.output );\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * Deprecated Functions and Fallbacks\r\n */\r\nfunction dslc_copy_module( module ) { moduleDuplicate( module ); }\r\nfunction dslc_display_module_options( moduleID ) { window.dslc_module_options_show( moduleID ); }\r\nfunction dslc_preview_change( callback ) { moduleOutputAltered( callback ); }\r\nfunction dslc_reload_module( moduleID, callback ) { window.dslc_module_output_reload( moduleID, callback ); }\r\n\r\nexport const moduleInitJS = () => {\r\n\tadjustZindex();\r\n\teditableContentTextEvents();\r\n}\r\n","/**\r\n * DSLC_ModuleArea class\r\n */\r\nimport Sortable from 'sortablejs';\r\nimport { modulesAreaAdd } from \"./modulearea.js\";\r\n\r\nexport const ModuleArea = function(elem) {\r\n\r\n\tvar self = this;\r\n\tthis.section = jQuery(elem).closest('.dslc-modules-section');\r\n\tthis.elem = elem;\r\n\r\n\t/** Set observer to change elems class */\r\n\t// this.observer = new mqMutationObserver(elem, function(){\r\n\r\n\t// \tvar classList = self.elem.classList;\r\n\r\n\t// \tif (elem.querySelectorAll('.dslc-module-front').length == 0) {\r\n\r\n\t// \t\tclassList.add('dslc-modules-area-empty');\r\n\t// \t\tclassList.remove('dslc-modules-area-not-empty');\r\n\t// \t} else {\r\n\r\n\t// \t\tclassList.remove('dslc-modules-area-empty');\r\n\t// \t\tclassList.add('dslc-modules-area-not-empty');\r\n\t// \t}\r\n\t// }, {childList: true});\r\n\r\n\t/**\r\n\t * Make MODULES inside the Modules Area draggable/sortable\r\n\t */\r\n\tthis.sortable = Sortable.create(elem, {\r\n\t\tgroup: 'modules',\r\n\t\tanimation: 350,\r\n\t\thandle: '.dslca-move-module-hook',\r\n\t\tdraggable: '.dslc-module-front',\r\n\t\tghostClass: 'dslca-module-ghost',\r\n\t\tchosenClass: 'dslca-module-dragging',\r\n\t\tscroll: true, // or HTMLElement\r\n\t\tscrollSensitivity: 150, // px, how near the mouse must be to an edge to start scrolling.\r\n\t\tscrollSpeed: 15, // px\r\n\r\n\t\tsetData: function (dataTransfer, dragEl) {\r\n\r\n\t\t  dataTransfer.setData( LiveComposer.Utils.msieversion() !== false ? 'Text' : 'text/html', dragEl.innerHTML);\r\n\t\t},\r\n\r\n\t\t// dragging started\r\n\t\tonStart: function (evt) {\r\n\r\n\t\t\tevt.oldIndex;  // element index within parent\r\n\r\n\t\t\tjQuery('body').removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress');\r\n\t\t\tjQuery('body', LiveComposer.Builder.PreviewAreaWindow.document).removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress');\r\n\t\t},\r\n\t\t// dragging ended\r\n\r\n\t\tonEnd: function (evt) {\r\n\r\n\t\t\tevt.oldIndex;  // element's old index within parent\r\n\t\t\tevt.newIndex;  // element's new index within parent\r\n\r\n\t\t\tevt.preventDefault();\r\n\r\n\t\t\twindow.dslc_generate_code();\r\n\t\t\tLiveComposer.Builder.UI.stopScroller();\r\n\t\t\tjQuery('body').removeClass('dslca-drag-in-progress').addClass('dslca-drag-not-in-progress');\r\n\t\t\tjQuery('body', LiveComposer.Builder.PreviewAreaWindow.document).removeClass('dslca-drag-in-progress').addClass('dslca-drag-not-in-progress');\r\n\t\t},\r\n\r\n\t\t// Element is dropped into the list from another list\r\n\t\tonAdd: function (evt) {\r\n\r\n\t\t\tvar itemEl = evt.item;  // dragged HTMLElement\r\n\t\t\tevt.from;  // previous list\r\n\r\n\t\t\t// If container/column/modules area droped.\r\n\t\t\tif ( jQuery(itemEl).data('id') == 'DSLC_M_A' ) {\r\n\r\n\t\t\t\tmodulesAreaAdd( jQuery(self.section).find('.dslc-modules-section-wrapper .dslc-modules-section-inner') );\r\n\t\t\t\titemEl.remove();\r\n\t\t\t}\r\n\r\n\t\t\t// + indexes from onEnd\r\n\t\t\t// evt.preventDefault();\r\n\t\t\t// evt.stopPropagation(); return false;\r\n\t\t},\r\n\r\n\t\t// Changed sorting within list\r\n\t\tonUpdate: function (evt) {\r\n\t\t\tvar itemEl = evt.item;  // dragged HTMLElement\r\n\t\t\t// + indexes from onEnd\r\n\t\t\t// evt.preventDefault();\r\n\t\t\t// evt.stopPropagation(); return false;\r\n\r\n\t\t\twindow.dslc_show_publish_button();\r\n\t\t},\r\n\r\n\t\t// Called by any change to the list (add / update / remove)\r\n\t\tonSort: function (evt) {\r\n\t\t\t// same properties as onUpdate\r\n\t\t\t// evt.preventDefault();\r\n\t\t\t// evt.stopPropagation(); return false;\r\n\r\n\t\t},\r\n\r\n\t\t// Element is removed from the list into another list\r\n\t\tonRemove: function (evt) {\r\n\t\t  // same properties as onUpdate\r\n\t\t},\r\n\r\n\t\t// Attempt to drag a filtered element\r\n\t\tonFilter: function (evt) {\r\n\t\t\tvar itemEl = evt.item;  // HTMLElement receiving the `mousedown|tapstart` event.\r\n\t\t},\r\n\r\n\t\t// Event when you move an item in the list or between lists\r\n\t\tonMove: function (evt) {\r\n\t\t\t// Example: http://jsbin.com/tuyafe/1/edit?js,output\r\n\t\t\tevt.dragged; // dragged HTMLElement\r\n\t\t\tevt.draggedRect; // TextRectangle {left, top, right  bottom}\r\n\t\t\tevt.related; // HTMLElement on which have guided\r\n\t\t\tevt.relatedRect; // TextRectangle\r\n\t\t\t// return false;  for cancel\r\n\r\n\r\n\t\t\t// Add here the function to update underlying class\r\n\t\t\tif ( jQuery('.dslc-modules-area-empty').find('.dslc-module-front').length > 0 ) {\r\n\r\n\t\t\t\tjQuery(this).removeClass('dslc-modules-area-empty').addClass('dslc-modules-area-not-empty');\r\n\r\n\t\t\t\tjQuery('.dslca-no-content:not(:visible)', this).show().css({\r\n\t\t\t\t\t'-webkit-animation-name' : 'dslcBounceIn',\r\n\t\t\t\t\t'-moz-animation-name' : 'dslcBounceIn',\r\n\t\t\t\t\t'animation-name' : 'dslcBounceIn',\r\n\t\t\t\t\t'animation-duration' : '0.6s',\r\n\t\t\t\t\t'-webkit-animation-duration' : '0.6s',\r\n\t\t\t\t\tpadding : 0\r\n\t\t\t\t}).animate({ padding : '35px 0' }, 300, function(){\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Mark module area as initialized\r\n\tjQuery( elem ).attr('data-jsinit', 'initialized');\r\n\r\n\t/** Sort option setter */\r\n\tjQuery(document).on('LC.sortableOff', function(){\r\n\r\n\t\tself.sortable && self.sortable.option && self.sortable.option('disabled', true);\r\n\t});\r\n\r\n\tjQuery(document).on('LC.sortableOn', function(){\r\n\r\n\t\tself.sortable && self.sortable.option && self.sortable.option('disabled', false);\r\n\t});\r\n}\r\n","/**\r\n * Functions powering Module Areas functionality\r\n *\r\n * = AREAS ( MODULE AREAS ) =\r\n *\r\n * - Actions/Events (Duplicate, Change Width, Delete, ...)\r\n * - dslc_modules_area_add ( Adds a new modules area )\r\n * - dslc_modules_area_delete ( Deletes modules area )\r\n * - dslc_modules_area_width_set ( Sets specific width to the modules area )\r\n * - dslc_copy_modules_area ( Copies modules area )\r\n *\r\n */\r\n\r\nimport { dragAndDropInit } from './dragndrop.js';\r\nimport { addSection } from './sections.js';\r\nimport { ModuleArea } from './modulearea.class.js';\r\nimport { CModalWindow } from './modalwindow.class.js';\r\nimport { showSection } from './uigeneral.js';\r\nimport { getNewModuleId } from \"./module.js\";\r\n\r\n\r\n/**\r\n * Module Area Actions (Duplicate, Change Width, Delete, ...)\r\n *\r\n * Attach these actions once the editing iFrame loaded.\r\n */\r\n\r\n;jQuery(document).on('editorFrameLoaded', function(){\r\n\r\n\tfunction init_sortables() {\r\n\r\n\t\tvar el = jQuery('.dslc-modules-area', LiveComposer.Builder.PreviewAreaDocument); // Groups that can hold modules\r\n\r\n\t\tjQuery(el).each(function (i,e) {\r\n\r\n\t\t\tnew ModuleArea(e);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tvar actionAvail = function() {\r\n\r\n\t\tif ( LiveComposer.Builder.Flags.panelOpened ) {\r\n\r\n\t\t\tLiveComposer.Builder.UI.shakePanelConfirmButton();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * Action - Automatically Add a Row if Empty\r\n\t */\r\n\tif ( ! jQuery( '#dslc-main .dslc-modules-section', LiveComposer.Builder.PreviewAreaDocument).length && ! jQuery( '#dslca-tut-page', LiveComposer.Builder.PreviewAreaDocument).length ) {\r\n\r\n\t\taddSection( init_sortables() );\r\n\t} else {\r\n\r\n\t\tinit_sortables();\r\n\t}\r\n\r\n\t/**\r\n\t * Hook - Copy Module Area\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-copy-modules-area-hook', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\tvar modulesArea = jQuery(this).closest('.dslc-modules-area');\r\n\t\t\tdslc_copy_modules_area( modulesArea );\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Delete Module Area\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-delete-modules-area-hook', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\t// Check if current modules area is empty.\r\n\t\t\tvar modulesAreaEmpty = jQuery(this).closest('.dslc-modules-area').hasClass('dslc-modules-area-empty');\r\n\r\n\t\t\tif ( ! modulesAreaEmpty ) {\r\n\r\n\t\t\t\tvar self = jQuery(this);\r\n\r\n\t\t\t\tCModalWindow({\r\n\r\n\t\t\t\t\ttitle: DSLCString.str_del_area_title,\r\n\t\t\t\t\tcontent: DSLCString.str_del_area_descr,\r\n\t\t\t\t\tconfirm: function() {\r\n\r\n\t\t\t\t\t\tvar modulesArea = self.closest('.dslc-modules-area');\r\n\t\t\t\t\t\tdslc_modules_area_delete( modulesArea );\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Show confirmation modal only if the module area isn't empty.\r\n\t\t\t\t/*dslc_js_confirm( 'delete_modules_area', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_del_area_title +\r\n\t\t\t\t\t'</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_del_area_descr + '</span>', jQuery(this) );*/\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar modulesArea = jQuery(this).closest('.dslc-modules-area');\r\n\t\t\t\t// Delete module area without asking anything.\r\n\t\t\t\tdslc_delete_modules_area( modulesArea );\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Set Width of the Module Area\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-change-width-modules-area-options span', function(){\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\t\t\tvar moduleAreaJQ = jQuery(this).closest('.dslc-modules-area');\r\n\t\t\tvar oldSize = moduleAreaJQ.data('size');\r\n\t\t\tvar newSize = jQuery(this).data('size');\r\n\r\n\t\t\t// Start expensive function only if the value changed.\r\n\t\t\tif (  Number(oldSize) !== Number(newSize) ) {\r\n\t\t\t\tdslc_modules_area_width_set( moduleAreaJQ, newSize );\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Set Vertical Align of the Module Area\r\n\t */\r\n\t LiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-change-vertial-align-module-area-hook span', function(){\r\n\t\tvar moduleAreaJQ = jQuery(this).closest('.dslc-modules-area');\r\n\t\tvar newSetting = jQuery(this).data('valign');\r\n\t\tdslc_modules_area_vertical_align_set( moduleAreaJQ, newSetting );\r\n\t});\r\n\r\n\t/**\r\n\t* AREAS - Set Width\r\n\t*/\r\n\tfunction dslc_modules_area_vertical_align_set( areaJQ, newSetting ) {\r\n\t\tif ( window.dslcDebug ) console.log( 'dslc_modules_area_vertical_align_set' );\r\n\r\n\t\t// Generate new class based on align option.\r\n\t\tvar newClass = 'dslc-valign-' + newSetting;\r\n\r\n\t\t// Remove previously set align classes,\r\n\t\t// add new class and set the data-valign attr for storing data.\r\n\t\tareaJQ\r\n\t\t\t.removeClass('dslc-valign-top dslc-valign-middle dslc-valign-bottom')\r\n\t\t\t.addClass(newClass)\r\n\t\t\t.data('valign', newSetting);\r\n\r\n\t\t// Call other functions\r\n\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\r\n\t\tif ( LiveComposer.Builder.Flags.panelOpened ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\twindow.dslc_generate_code();\r\n\t\twindow.dslc_show_publish_button();\r\n\t}\r\n\r\n\t/**\r\n\t * Action - Show/Hide Width Options Popup for the Module Area\r\n\t */\r\n\t/* LiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-change-width-modules-area-hook', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( ! actionAvail() ) return false;\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\t// Is visible\r\n\t\t\tif ( jQuery('.dslca-change-width-modules-area-options:visible', this).length ) {\r\n\r\n\t\t\t\t// Hide\r\n\t\t\t\tjQuery('.dslca-change-width-modules-area-options', this).hide();\r\n\r\n\t\t\t// Is hidden\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Show\r\n\t\t\t\tjQuery('.dslca-change-width-modules-area-options', this).show();\r\n\t\t\t}\r\n\t\t}\r\n\t}); */\r\n/* \r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'mouseleave', '.dslca-change-width-modules-area-options', function(e){\r\n\r\n\t\t// Hide width seleciton panel.\r\n\t\tjQuery(this).hide();\r\n\t});\r\n */\r\n\t/**\r\n\t * Hook - Add Modules Area\r\n\t * TODO: Where we use it? Delete maybe?\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-add-modules-area-hook', function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tmodulesAreaAdd( jQuery(this).closest('.dslc-modules-section').find('.dslc-modules-section-inner') );\r\n\t});\r\n\r\n});\r\n\r\n/**\r\n * AREAS - Add New\r\n */\r\n\r\n// ex. dslc_modules_area_add\r\nexport const modulesAreaAdd = ( row ) => {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'modulesAreaAdd' );\r\n\r\n\t// Add class to body so we know it's in progress\r\n\t// jQuery('body', LiveComposer.Builder.PreviewAreaDocument).addClass('dslca-anim-in-progress');\r\n\r\n\tconst uiIconsUrl = window.DSLCSiteData.editorUrl + 'css/icons';\r\n\tvar output = `<div class=\"dslc-modules-area dslc-col dslc-12-col dslc-modules-area-dnd dslc-modules-area-empty dslc-last-col\" data-size=\"12\">\r\n\t\t<div class=\"dslca-modules-area-manage\">\r\n\t\t\t<span class=\"dslca-modules-area-manage-line\"></span>\r\n\t\t\t<div class=\"dslca-modules-area-manage-inner\">\r\n\t\t\t\t<span class=\"dslca-manage-action dslca-copy-modules-area-hook\" title=\"Duplicate\">\r\n\t\t\t\t\t<svg class=\"feather\">\r\n\t\t\t\t\t\t<use xlink:href=\"` + uiIconsUrl +`/feather-sprite.svg#copy\"></use>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"dslca-manage-action dslca-move-modules-area-hook\" title=\"Drag to move\">\r\n\t\t\t\t\t<svg class=\"feather\">\r\n\t\t\t\t\t\t<use xlink:href=\"` + uiIconsUrl +`/feather-sprite.svg#move\"></use>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"dslca-manage-action dslca-change-width-modules-area-hook\" title=\"Change width\">\r\n\t\t\t\t\t<svg class=\"feather\">\r\n\t\t\t\t\t\t<use xlink:href=\"` + uiIconsUrl +`/feather-sprite.svg#columns\"></use>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<div class=\"dslca-change-width-modules-area-options\"><span>Container Width</span><span data-size=\"1\">1/12</span><span data-size=\"2\">2/12</span>\r\n\t\t\t\t\t\t<span data-size=\"3\">3/12</span><span data-size=\"4\">4/12</span>\r\n\t\t\t\t\t\t<span data-size=\"5\">5/12</span><span data-size=\"6\">6/12</span>\r\n\t\t\t\t\t\t<span data-size=\"7\">7/12</span><span data-size=\"8\">8/12</span>\r\n\t\t\t\t\t\t<span data-size=\"9\">9/12</span><span data-size=\"10\">10/12</span>\r\n\t\t\t\t\t\t<span data-size=\"11\">11/12</span><span data-size=\"12\">12/12</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"dslca-manage-action dslca-change-vertial-align-module-area-hook\" title=\"Change vertical align\" >\r\n\t\t\t\t\t<svg class=\"feather\">\r\n\t\t\t\t\t\t<use xlink:href=\"` + uiIconsUrl +`/feather-sprite.svg#git-commit\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t<div class=\"dslca-change-vertial-align-module-area-options\">\r\n\t\t\t\t\t\t<span>Vertical Align</span>\r\n\t\t\t\t\t\t<span data-valign=\"top\" class=\"dslc-popup-option\"> Top</span>\r\n\t\t\t\t\t\t<span data-valign=\"middle\" class=\"dslc-popup-option\"> Middle</span>\r\n\t\t\t\t\t\t<span data-valign=\"bottom\" class=\"dslc-popup-option\"> Bottom</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"dslca-manage-action dslca-delete-modules-area-hook\" title=\"Delete\">\r\n\t\t\t\t\t<svg class=\"feather\">\r\n\t\t\t\t\t\t<use xlink:href=\"` + uiIconsUrl +`/feather-sprite.svg#x\"></use>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- .dslc-module -->\r\n\t</div>`;\r\n\r\n\t// Append new area and animate\r\n\tjQuery( output ).appendTo( row ).css({ height : 0 }).animate({\r\n\t\theight : 99\r\n\t}, 300, function(){\r\n\t\tjQuery(this).css({ height : 'auto' });\r\n\t}).addClass('dslca-init-animation');\r\n\r\n\r\n\t// Re-initialize all the empty areas on the page\r\n\tvar emptyModuleAreas = jQuery('.dslc-modules-area-empty', LiveComposer.Builder.PreviewAreaDocument);\r\n\r\n\tjQuery(emptyModuleAreas).each(function (i,e) {\r\n\t\tnew ModuleArea(e);\r\n\t});\r\n\r\n\t// Call other functions\r\n\tdragAndDropInit();\r\n\twindow.dslc_generate_code();\r\n\twindow.dslc_show_publish_button();\r\n\r\n\t// Remove class from body so we know it's done\r\n\t// jQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-anim-in-progress');\r\n}\r\n\r\n/**\r\n * AREAS - Delete\r\n */\r\n\r\nfunction dslc_modules_area_delete( area ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_delete_modules_area' );\r\n\r\n\t// Vars\r\n\tvar modulesSection = area.closest('.dslc-modules-section').find('.dslc-modules-section-inner'),\r\n\tdslcDeleteSectionToo = false;\r\n\r\n\t// Add a class to the area so we know it's being deleted\r\n\tarea.addClass('dslca-modules-area-being-deleted');\r\n\r\n\t// If it's the last area in the row delete section as well\r\n\tif ( modulesSection.find('.dslc-modules-area').length < 2 ) {\r\n\t\tdslcDeleteSectionToo = true;\r\n\t}\r\n\r\n\t// If a module in the area is being edited\r\n\tif ( area.find('.dslca-module-being-edited').length ) {\r\n\r\n\t\t// Hide the filter hooks\r\n\t\tjQuery('.dslca-header .dslca-options-filter-hook', LiveComposer.Builder.PreviewAreaDocument).hide();\r\n\r\n\t\t// Hide the save/cancel actions\r\n\t\tjQuery('.dslca-module-edit-actions', LiveComposer.Builder.PreviewAreaDocument).hide();\r\n\r\n\t\t// Show the section hooks\r\n\t\tjQuery('.dslca-header .dslca-go-to-section-hook', LiveComposer.Builder.PreviewAreaDocument).show();\r\n\r\n\t\t// Show the modules listing\r\n\t\tshowSection('.dslca-modules');\r\n\r\n\t}\r\n\r\n\t// Set a timeout so we handle deletion after animation ends\r\n\tsetTimeout( function(){\r\n\r\n\t\t// Delete section if no more module areas inside.\r\n\t\tif ( dslcDeleteSectionToo ) {\r\n\r\n\t\t\tvar parentSectionContainer = area.closest('.dslc-modules-section-inner');\r\n\t\t\t// modulesAreaAdd( modulesSection );\r\n\r\n\t\t\t// Don't delete latest module area in the latest section on the page\r\n\t\t\tif (2 <= area.closest('#dslc-main').find('.dslc-modules-section').length ) {\r\n\r\n\t\t\t\tdslc_row_delete( area.closest('.dslc-modules-section') );\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Remove the area\r\n\t\t\t\tarea.remove();\r\n\t\t\t\t// Create new empty area in current module section\r\n\t\t\t\tmodulesAreaAdd( modulesSection );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Remove the area\r\n\t\tarea.remove();\r\n\r\n\t\t// Call other functions\r\n\t\twindow.dslc_generate_code();\r\n\t\twindow.dslc_show_publish_button();\r\n\t}, 900 );\r\n\r\n\t// Animation\r\n\tarea.css({\r\n\t\t'-webkit-animation-name' : 'dslcBounceOut',\r\n\t\t'-moz-animation-name' : 'dslcBounceOut',\r\n\t\t'animation-name' : 'dslcBounceOut',\r\n\t\t'animation-duration' : '0.6s',\r\n\t\t'-webkit-animation-duration' : '0.6s',\r\n\t\t'overflow' : 'hidden'\r\n\t}).animate({\r\n\t\topacity : 0\r\n\t}, 600).animate({\r\n\t\theight : 0,\r\n\t\tmarginBottom : 0\r\n\t}, 300, function(){\r\n\t\tarea.remove();\r\n\t\twindow.dslc_generate_code();\r\n\t\twindow.dslc_show_publish_button();\r\n\t});\r\n}\r\n\r\n/**\r\n * AREAS - Copy\r\n */\r\n\r\nfunction dslc_modules_area_copy( area ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_copy_modules_area' );\r\n\r\n\t// Vars\r\n\tvar dslc_moduleID,\r\n\tmodulesSection = area.closest('.dslc-modules-section').find('.dslc-modules-section-inner');\r\n\r\n\t// Copy the area and append to the row\r\n\tvar dslc_modulesAreaCloned = area.clone().appendTo(modulesSection);\r\n\r\n\tnew ModuleArea(dslc_modulesAreaCloned[0]);\r\n\r\n\t// Trigger mouseleave ( so the actions that show on hover go away )\r\n\tdslc_modulesAreaCloned.find('.dslca-modules-area-manage').trigger('mouseleave');\r\n\r\n\t// Apply correct data size and get rid of animations\r\n\tdslc_modulesAreaCloned.data('size', area.data('size') ).find('.dslc-module-front').css({\r\n\t\t'-webkit-animation-name' : 'none',\r\n\t\t'-moz-animation-name' : 'none',\r\n\t\t'animation-name' : 'none',\r\n\t\t'animation-duration' : '0',\r\n\t\t'-webkit-animation-duration' : '0',\r\n\t\topacity : 0\r\n\r\n\t// Go through each module in the area\r\n\t}).each(function(){\r\n\r\n\t\tvar dslc_module = jQuery(this);\r\n\r\n\t\t//Generate new ID for the new module and change it in HTML/CSS of the module.\r\n\t\tgetNewModuleId( dslc_module[0] );\r\n\r\n\t\t// Remove \"dslca-module-being-edited\" class form any element\r\n\t\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\r\n\t\t// Need to call this function to update last column class for the modules.\r\n\t\twindow.dslc_generate_code();\r\n\r\n\t\t// Show back new created module\r\n\t\tdslc_module.animate({\r\n\t\t\topacity : 1\r\n\t\t}, 300);\r\n\r\n\t});\r\n\r\n\t// Call other functions\r\n\tdragAndDropInit();\r\n\twindow.dslc_show_publish_button();\r\n\r\n\t// Need to call this function to update last column class for the module areas.\r\n\twindow.dslc_generate_code();\r\n\r\n\r\n}\r\n\r\n/**\r\n * AREAS - Set Width\r\n */\r\nfunction dslc_modules_area_width_set( area, newWidth ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_modules_area_width_set' );\r\n\r\n\t// Generate new class based on width\r\n\tvar newClass = 'dslc-' + newWidth + '-col';\r\n\r\n\t// Remove width classes, add new width class and set the data-size attr\r\n\tarea\r\n\t\t.removeClass('dslc-1-col dslc-2-col dslc-3-col dslc-4-col dslc-5-col dslc-6-col dslc-7-col dslc-8-col dslc-9-col dslc-10-col dslc-11-col dslc-12-col')\r\n\t\t.addClass(newClass)\r\n\t\t.data('size', newWidth);\r\n\r\n\t// Call other functions\r\n\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\r\n\tif ( LiveComposer.Builder.Flags.panelOpened ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\twindow.dslc_generate_code();\r\n\twindow.dslc_show_publish_button();\r\n\r\n}\r\n\r\n/**\r\n * Check Module Areas initialization\r\n *\r\n * @return void\r\n */\r\nexport const moduleareasInitJS = () => {\r\n\r\n\t// Select all the module areas form the main section of the page\r\n\tjQuery( '#dslc-main .dslc-modules-area', LiveComposer.Builder.PreviewAreaDocument ).each( function() {\r\n\r\n\t\t// Check if all the module areas have data attribute 'jsinit' set to 'initialized'?\r\n\t\tif ( jQuery( this ).data('jsinit') !== 'initialized' ) {\r\n\r\n\t\t\t// Initialize all the module areas without 'jsinit' attribute!\r\n\t\t\tnew ModuleArea( this );\r\n\t\t}\r\n\t} );\r\n\r\n}\r\n\r\n/**\r\n * Deprecated Functions and Fallbacks\r\n */\r\nfunction dslc_delete_modules_area( area ) { dslc_modules_area_delete( area ); }\r\nfunction dslc_copy_modules_area( area ) { dslc_modules_area_copy( area ); }\r\n","/*********************************\r\n*\r\n* = MODULE PRESETS =\r\n*\r\n* - dslc_update_preset ( Update Styling Preset )\r\n*\r\n***********************************/\r\n\r\n'use strict';\r\n\r\n/**\r\n * Module Presets - Update\r\n */\r\nexport const updatePreset = () => {\r\n\tif ( window.dslcDebug ) console.log( 'updatePreset' );\r\n\t// Vars\r\n\tvar module = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\r\n\tpresetName = module.find('.dslca-module-option-front[data-id=\"css_load_preset\"]').val(),\r\n\t// presetCode = module.find('.dslca-module-code').val(), - don't use. Creating bugs.\r\n\tpresetCode = module.find('.dslca-module-code').innerText,\r\n\tmoduleID = module.data('module');\r\n\r\n\t// If preset value not \"none\"\r\n\tif ( 'none' !== presetName && '' !== presetName ) {\r\n\r\n\t\t// AJAX Call to Save Preset\r\n\t\tjQuery.post(\r\n\r\n\t\t\tDSLCAjax.ajaxurl,\r\n\t\t\t{\r\n\t\t\t\taction : 'dslc-ajax-save-preset',\r\n\t\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\t\tdslc_preset_name : presetName,\r\n\t\t\t\tdslc_preset_code : presetCode,\r\n\t\t\t\tdslc_module_id : moduleID\r\n\t\t\t},\r\n\t\t\tfunction( response ) {\r\n\r\n\t\t\t\tif ( response.preset_setting == 'enabled' ) {\r\n\r\n\t\t\t\t\t// Reload all modules with the same preset\r\n\t\t\t\t\tjQuery('.dslc-module-front:not(#' + module.attr('id') + ')[data-module=\"' + module.data('module') +\r\n\t\t\t\t\t\t'\"][data-dslc-preset=\"' + module.data('dslc-preset') + '\"]', LiveComposer.Builder.PreviewAreaDocument ).each(function(){\r\n\t\t\t\t\t\twindow.dslc_module_output_reload( jQuery(this) );\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/**\r\n * Module Presets - Document Ready\r\n */\r\njQuery(document).ready(function($){\r\n\r\n\t/**\r\n\t * Action - Save preset\r\n\t */\r\n\r\n\tjQuery(document).on( 'keypress', '.dslca-module-edit-field[name=\"css_save_preset\"]', function(e){\r\n\r\n\t\t// Enter Key Pressed\r\n\t\tif ( e.which == 13 ) {\r\n\r\n\t\t\t// Vars\r\n\t\t\tvar presetName = jQuery(this).val(),\r\n\t\t\tpresetID = presetName.toLowerCase().replace(/\\s/g, '-');\r\n\r\n\t\t\t// Add class to body that a new preset is added\r\n\t\t\tjQuery('body').addClass('dslca-new-preset-added');\r\n\r\n\t\t\t// Append the new preset to the \"Load Preset\" option and trigger change\r\n\t\t\tjQuery('.dslca-module-edit-field[name=\"css_load_preset\"]').append('<option value=\"' + presetID + '\">' + presetID + '</option>').val( presetID ).trigger('change');\r\n\r\n\t\t\t// Erase value from the \"Save Preset\" option\r\n\t\t\tjQuery(this).val('');\r\n\r\n\t\t\tjQuery('.dslc-delete-preset').removeClass('dslc-delete-preset-hide');\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Action - Preset value changed\r\n\t */\r\n\r\n\tjQuery(document).on( 'change', '.dslca-module-edit-field[name=\"css_load_preset\"]', function(e){\r\n\t\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslca-preload-preset');\r\n\t});\r\n\r\n\t/**\r\n\t * Action - Delete Preset\r\n\t */\r\n\r\n\tjQuery(document).on( 'click', '.dslc-delete-preset', function(e){\r\n\r\n\t\t// Vars\r\n\t\tvar module = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\r\n\t\tpresetName = module.find('.dslca-module-option-front[data-id=\"css_load_preset\"]').val(),\r\n\t\tmoduleID = module.data('module');\r\n\r\n\t\t// If preset value not \"none\"\r\n\t\tif ( 'none' !== presetName && '' !== presetName ) {\r\n\r\n\t\t\t// AJAX Call to Save Preset\r\n\t\t\tjQuery.post(\r\n\r\n\t\t\t\tDSLCAjax.ajaxurl,\r\n\t\t\t\t{\r\n\t\t\t\t\taction : 'dslc-ajax-delete-preset',\r\n\t\t\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\t\t\tdslc_preset_name : presetName,\r\n\t\t\t\t\tdslc_module_id : moduleID\r\n\t\t\t\t},\r\n\t\t\t\tfunction( response ) {\r\n\r\n\t\t\t\t\twindow.dslc_module_options_show(moduleID);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n});\r\n\r\n\r\nexport const presetsInit = () => {\r\n\r\n}\r\n","\r\n/*********************************\r\n *\r\n * = UI - SCROLLER =\r\n *\r\n ***********************************/\r\n\r\n/**\r\n * SCROLLER - Document Ready\r\n */\r\njQuery(document).ready(function($){\r\n\r\n\tvar scrollerPlugin = function(container){\r\n\r\n\t\t/**\r\n\t\t * Scroll list of modules with a mouse wheel.\r\n\t\t */\r\n\t\tvar deltaKoef = .75;\r\n\t\tvar increment = 500;\r\n\t\tvar scrollinc = 100;\r\n\t\tvar scroller = jQuery('.dslca-section-scroller', container);\r\n\t\tvar scrollInner = jQuery('.dslca-section-scroller-inner', container)[0];\r\n\r\n\t\tscroller.on( 'wheel', function(event) {\r\n\r\n\t\t\tscroll_to( event.originalEvent.deltaY || event.originalEvent.deltaX );\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Scroll to delta\r\n\t\t *\r\n\t\t * @param  {int} delta\r\n\t\t */\r\n\t\tfunction scroll_to(delta) {\r\n\r\n\t\t\tif (delta < 0 ) {\r\n\r\n\t\t\t\tdelta = -scrollinc;\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelta = scrollinc;\r\n\t\t\t}\r\n\r\n\t\t\tdelta = delta * deltaKoef;\r\n\r\n\t\t\tvar listWidth = scroller.find('.dslca-section-scroller-content').width();\r\n\t\t\tvar contentWidth = scroller.width();\r\n\r\n\t\t\tif ( listWidth <= contentWidth ) return false;\r\n\r\n\t\t\tvar scrollMax = listWidth - contentWidth + 10;\r\n\r\n\t\t\tdelta = parseInt(scrollInner.style.left || 0) - delta;\r\n\t\t\tdelta = delta >= 0 ? 0 : delta;\r\n\t\t\tdelta = delta <= -scrollMax ? -scrollMax : delta;\r\n\r\n\t\t\tscrollInner.style.left = delta + 'px';\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Hook - Scroller Prev\r\n\t\t */\r\n\t\tjQuery('.dslca-section-scroller-prev', container).click(function(e){\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\tscroll_to( -increment );\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Hook - Scroller Next\r\n\t\t */\r\n\t\tjQuery('.dslca-section-scroller-next', container).click(function(e){\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\tscroll_to( increment );\r\n\t\t});\r\n\r\n\t\tjQuery(window).load(function(){\r\n\r\n\t\t\t// Initiate scroller on window resize\r\n\t\t\tjQuery(window).resize(function(){\r\n\r\n\t\t\t\tscroll_to( 0 );\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tscrollerPlugin(jQuery('.dslca-section.dslca-modules'));\r\n\tscrollerPlugin(jQuery('.dslca-section.dslca-templates-load'));\r\n});\r\n\r\n/** Scroll preview area when mouse are on some distant of edge */\r\nexport const initPreviewAreaScroller = () => {\r\n\r\n\tvar pxInTik = 5;\r\n\tvar timerTik = 6;\r\n\tLiveComposer.Builder.Flags.windowScroller = false;\r\n\r\n\t/** Stop scroll if within areas */\r\n\tjQuery(LiveComposer.Builder.PreviewAreaDocument).on('dragleave','.lc-scroll-top-area, .lc-scroll-bottom-area', function(e) {\r\n\r\n\t\tLiveComposer.Builder.UI.stopScroller();\r\n\t});\r\n\r\n\t/** Scroll bottom */\r\n\tjQuery(LiveComposer.Builder.PreviewAreaDocument).on('dragenter dragover','.lc-scroll-bottom-area', function(e) {\r\n\r\n\t\tif( LiveComposer.Builder.Flags.windowScroller !== false ) return false;\r\n\r\n\t\tLiveComposer.Utils.publish('LC.sortableOff', {});\r\n\r\n\t\tLiveComposer.Builder.Flags.windowScroller = setInterval(function(){\r\n\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.scrollBy(0 , pxInTik);\r\n\t\t}, timerTik);\r\n\t});\r\n\r\n\t/** Scroll top */\r\n\tjQuery(LiveComposer.Builder.PreviewAreaDocument).on('dragenter','.lc-scroll-top-area', function(e) {\r\n\r\n\t\tif( LiveComposer.Builder.Flags.windowScroller !== false ) return false;\r\n\r\n\t\tLiveComposer.Utils.publish('LC.sortableOff', {});\r\n\r\n\t\tLiveComposer.Builder.Flags.windowScroller = setInterval(function(){\r\n\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.scrollBy(0 , -pxInTik);\r\n\t\t}, timerTik);\r\n\t});\r\n\r\n\t/** Stop scroll if click or drag ended */\r\n\tjQuery(LiveComposer.Builder.PreviewAreaDocument).on('dragend mouseup', 'body', function(e) {\r\n\r\n\t\tLiveComposer.Builder.Flags.windowScroller && LiveComposer.Builder.UI.stopScroller();\r\n\t});\r\n};\r\n\r\n/** Window Y-scroller */\r\njQuery(document).ready(function($){\r\n\r\n\tinitPreviewAreaScroller();\r\n\t/**\r\n\t * Stops scroller function\r\n\t */\r\n\tLiveComposer.Builder.UI.stopScroller = function() {\r\n\r\n\t\tLiveComposer.Utils.publish('LC.sortableOn', {});\r\n\r\n\t\tclearInterval(LiveComposer.Builder.Flags.windowScroller);\r\n\t\tLiveComposer.Builder.Flags.windowScroller = false;\r\n\t}\r\n\r\n\tjQuery(\"#scroller-stopper\").on('dragover', function(){\r\n\r\n\t\tLiveComposer.Builder.UI.stopScroller();\r\n\t});\r\n});","/**\r\n * Builder section class\r\n */\r\nimport { modulesAreaAdd } from \"./modulearea.js\";\r\n\r\nexport const Section = class{\r\n\r\n\tconstructor (elem) {\r\n\t\tthis.sortable;\r\n\t\tthis.sortableContainer = jQuery( elem ).find('.dslc-modules-section-wrapper .dslc-modules-section-inner').eq(0)[0];\r\n\r\n\t\tthis.initSortable(elem);\r\n\t\tthis.initDropable(elem);\r\n\t\tthis.reactToSortableOnOff();\r\n\r\n\t\t// Mark section as initialized\r\n\t\tjQuery( elem ).attr('data-jsinit', 'initialized');\r\n\t}\r\n\r\n\r\n\r\n\tinitDropable(elem) {\r\n\t\tjQuery( elem ).droppable({\r\n\t\t\tdrop: function( event, ui ) {\r\n\t\t\t\tvar modulesSection = jQuery(this).find('.dslc-modules-section-inner');\r\n\t\t\t\tvar moduleID = ui.draggable.data( 'id' );\r\n\t\t\t\tif ( moduleID == 'DSLC_M_A' ) {\r\n\t\t\t\t\tmodulesAreaAdd( modulesSection );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tinitSortable(elem) {\r\n\r\n\t\tthis.sortable = jQuery( this.sortableContainer ).sortable({\r\n\t\t\tconnectWith: '.dslc-modules-section-inner',\r\n\t\t\titems: \".dslc-modules-area-dnd\",\r\n\t\t\thandle: '.dslca-move-modules-area-hook:not(\".dslca-action-disabled\")',\r\n\t\t\tplaceholder: 'dslca-modules-area-placeholder',\r\n\t\t\tcursorAt: { top: 0, left: 0 },\r\n\t\t\ttolerance : 'intersect',\r\n\t\t\tscroll: true,\r\n\t\t\tscrollSensitivity: 100,\r\n\t\t\tscrollSpeed : 15,\r\n\t\t\tsort: function() {\r\n\t\t\t\tjQuery( this ).removeClass( \"ui-state-default\" );\r\n\t\t\t},\r\n\t\t\tover: function (e, ui) {\r\n\t\t\t\tvar dslcSection = ui.placeholder.closest('.dslc-modules-section');\r\n\r\n\t\t\t\tjQuery(dslcSection).removeClass('dslc-modules-section-empty').addClass('dslc-modules-section-not-empty');\r\n\r\n\t\t\t\tdslcSection.siblings('.dslc-modules-section').each( function(){\r\n\t\t\t\t\tif ( jQuery('.dslc-modules-area:not(.ui-sortable-helper)', jQuery(this)).length ) {\r\n\t\t\t\t\t\tjQuery(this).removeClass('dslc-modules-section-empty').addClass('dslc-modules-section-not-empty');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery(this).removeClass('dslc-modules-section-not-empty').addClass('dslc-modules-section-empty');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tremove: function() {\r\n\t\t\t\t( jQuery( self.elem ).find('.dslc-modules-area').length == 0 ) && modulesAreaAdd( jQuery( this.sortableContainer ) );\r\n\t\t\t},\r\n\t\t\tupdate: function (e, ui) {\r\n\t\t\t\twindow.dslc_generate_code();\r\n\t\t\t\twindow.dslc_show_publish_button();\r\n\t\t\t},\r\n\t\t\tstart: function(e, ui){\r\n\r\n\t\t\t\t// Placeholder\r\n\t\t\t\tui.placeholder.html('<span class=\"dslca-placeholder-help-text\"><span class=\"dslca-placeholder-help-text-inner\">' + DSLCString.str_area_helper_text + '</span></span>');\r\n\t\t\t\tif ( ! jQuery(ui.item).hasClass('dslc-12-col') ) {\r\n\t\t\t\t\tui.placeholder.width(ui.item.width() - 10)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tui.placeholder.width(ui.item.width()).css({ margin : 0 });\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add drag in progress class\r\n\t\t\t\tjQuery('body').removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress dslca-modules-area-drag-in-progress');\r\n\r\n\t\t\t\t// Refresh positions\r\n\t\t\t\tjQuery( '.dslc-modules-section-inner' ).sortable( \"refreshPositions\" );\r\n\r\n\t\t\t},\r\n\t\t\tstop: function(e, ui){\r\n\r\n\t\t\t\tLiveComposer.Builder.UI.stopScroller();\r\n\t\t\t\tjQuery('body').removeClass('dslca-drag-in-progress dslca-modules-area-drag-in-progress').addClass('dslca-drag-not-in-progress');\r\n\t\t\t\tjQuery('.dslca-anim-opacity-drop').removeClass('dslca-anim-opacity-drop');\r\n\t\t\t},\r\n\t\t\tchange: function( e, ui ) {\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treactToSortableOnOff() {\r\n\t\tself = this.sortable;\r\n\r\n\t\t/** Sort option setter */\r\n\t\tjQuery(document).on('LC.sortableOff', function(){\r\n\t\t\t/* if ( undefined !== self.sortable( \"instance\" ) ) {\r\n\t\t\t\tself.sortable('option','disabled', true);\r\n\t\t\t} */\r\n\t\t});\r\n\r\n\t\tjQuery(document).on('LC.sortableOn', function(){\r\n\t\t\t/* if ( undefined !== self.sortable( \"instance\" ) ) {\r\n\t\t\t\tself.sortable('option','disabled', false);\r\n\t\t\t} */\r\n\t\t});\r\n\t}\r\n}\r\n","/*********************************\r\n *\r\n * = ROWS =\r\n *\r\n * - dslc_row_add ( Add New )\r\n * - dslc_row_delete ( Delete )\r\n * - dslc_row_edit ( Edit )\r\n * - dslc_row_edit_slider_init ( Edit - Initiate Slider )\r\n * - dslc_row_edit_cancel ( Edit - Cancel Changes )\r\n * - dslc_row_edit_confirm ( Edit - Confirm Changes )\r\n * - dslc_row_copy ( Copy )\r\n * - dslc_row_import ( Import )\r\n *\r\n ***********************************/\r\n\r\n\r\n\r\nimport { Section } from './section.class.js';\r\nimport { dragAndDropInit } from './dragndrop.js';\r\nimport { moduleareasInitJS } from './modulearea.js';\r\nimport { ModuleArea } from './modulearea.class.js';\r\nimport { CModalWindow } from './modalwindow.class.js';\r\nimport { hidePublishButton, showSection } from './uigeneral.js';\r\nimport { getNewModuleId } from \"./module.js\";\r\nimport { generateSectionCode } from \"./codegeneration.js\";\r\nimport { confirmClose } from \"./modalwindow.js\";\r\n\r\nconst sectionsEventsInit = () => {\r\n\tvar $ = jQuery;\r\n\r\n\tvar actionAvail = function() {\r\n\r\n\t\tif ( LiveComposer.Builder.Flags.panelOpened ) {\r\n\r\n\t\t\tLiveComposer.Builder.UI.shakePanelConfirmButton();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tjQuery(\".dslc-modules-section\", LiveComposer.Builder.PreviewAreaDocument).each(function(){\r\n\t\tnew Section(this);\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Delete Row\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-delete-modules-section-hook', function(e){\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\te.preventDefault();\r\n\t\tvar self = this;\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\tCModalWindow({\r\n\t\t\t\ttitle: DSLCString.str_del_row_title,\r\n\t\t\t\tcontent: DSLCString.str_del_row_descr,\r\n\t\t\t\tconfirm: function() {\r\n\r\n\t\t\t\t\tdslc_row_delete( jQuery(self).closest('.dslc-modules-section') );\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t/*\tdslc_js_confirm( 'delete_modules_section', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_del_row_title +\r\n\t\t\t\t'</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_del_row_descr + '</span>', jQuery(this) );*/\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Import Row\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-import-modules-section-hook', function(e) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\tCModalWindow({\r\n\t\t\t\ttitle: DSLCString.str_import_row_title,\r\n\t\t\t\tcontent: DSLCString.str_import_row_descr + '<br><br><textarea></textarea>',\r\n\t\t\t\tconfirm: function(){\r\n\t\t\t\t\tdslc_row_import( jQuery('.dslca-prompt-modal textarea').val() );\r\n\t\t\t\t\tjQuery('.dslca-prompt-modal-confirm-hook span').css({ opacity : 0 });\r\n\t\t\t\t\tjQuery('.dslca-prompt-modal-confirm-hook .dslca-loading').show();\r\n\t\t\t\t},\r\n\t\t\t\tconfirm_title: DSLCString.str_import\r\n\t\t\t});\r\n\r\n\t\t\t/*jQuery('.dslca-prompt-modal-confirm-hook').html('<span class=\"dslc-icon dslc-icon-ok\"></span><span>' + DSLCString.str_import +\r\n\t\t\t\t'</span><div class=\"dslca-loading followingBallsGWrap\"><div class=\"followingBallsG_1 followingBallsG\"></div>'+\r\n\t\t\t\t'<div class=\"followingBallsG_2 followingBallsG\"></div><div class=\"followingBallsG_3 followingBallsG\"></div><div class=\"followingBallsG_4 followingBallsG\"></div></div>');\r\n\r\n\t\t\tdslc_js_confirm( 'import_modules_section', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_import_row_title +\r\n\t\t\t\t'</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_import_row_descr + ' <br><br><textarea></textarea></span>', jQuery(this) );*/\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Export Row\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-export-modules-section-hook', function(e) {\r\n\t\te.preventDefault();\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\t\t\tjQuery('.dslca-prompt-modal-cancel-hook').hide();\r\n\t\t\tjQuery('.dslca-prompt-modal-confirm-hook').html('<span class=\"dslc-icon dslc-icon-ok\"></span>' + DSLCString.str_ok);\r\n\r\n\t\t\tCModalWindow({\r\n\t\t\t\ttitle: DSLCString.str_export_row_title,\r\n\t\t\t\tcontent: DSLCString.str_export_row_descr + '<br><br><textarea>' + '[' + generateSectionCode( jQuery(this).closest('.dslc-modules-section') ) + ']' + '</textarea></span>'\r\n\t\t\t});\r\n\r\n\t\t\t// dslc_js_confirm( 'export_modules_section', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_export_row_title +\r\n\t\t\t// \t'</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_export_row_descr + ' <br><br><textarea></textarea></span>', jQuery(this) );\r\n\t\t\t// jQuery('.dslca-prompt-modal textarea').val( dslc_generate_section_code( jQuery(this).closest('.dslc-modules-section') ) );\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Copy Row\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-copy-modules-section-hook', function() {\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\tdslc_row_copy( jQuery(this).closest('.dslc-modules-section') );\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Add Row\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-add-modules-section-hook', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tvar button = jQuery(this);\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\t// Add a loading animation\r\n\t\t\tbutton.find('.dslca-icon').removeClass('dslc-icon-align-justify').addClass('dslc-icon-spinner dslc-icon-spin');\r\n\r\n\t\t\t// Add a row\r\n\t\t\taddSection( function(){\r\n\t\t\t\tbutton.find('.dslca-icon').removeClass('dslc-icon-spinner dslc-icon-spin').addClass('dslc-icon-align-justify');\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Edit Row\r\n\t */\r\n\tLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-edit-modules-section-hook', function(){\r\n\r\n\t\t// Check if action can be fired\r\n\t\tif ( !actionAvail() ) return false;\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar module_edited = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).length;\r\n\t\tvar row_edited = jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).length;\r\n\r\n\t\t/// If settings panel opened - finish func\r\n\t\tif ( LiveComposer.Builder.Flags.uiHidden || module_edited > 0 || row_edited > 0 ) return false;\r\n\r\n\t\t// If not disabled ( disabling used for tutorial )\r\n\t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\r\n\r\n\t\t\t// Trigger the function to edit\r\n\t\t\tdslc_row_edit( jQuery(this).closest('.dslc-modules-section') );\r\n\t\t}\r\n\r\n\t\tjQuery('body', LiveComposer.Builder.PreviewAreaDocument).addClass('section-editing-in-progress');\r\n\t});\r\n}\r\n\r\n/**\r\n * Row - Add New\r\n */\r\nexport const addSection = ( callback ) => {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_row_add' );\r\n\r\n\tcallback = typeof callback !== 'undefined' ? callback : false;\r\n\r\n\tvar defer = jQuery.Deferred();\r\n\tvar browserCacheTmp = sessionStorage;\r\n\r\n\tvar newRow = jQuery();\r\n\tvar cachedAjaxRequest = browserCacheTmp.getItem( 'cache-dslc-ajax-add-modules-section-v2' );\r\n\r\n\t// If option 'lc_section_padding_vertical' was update.\r\n\tif ( null !== cachedAjaxRequest ) {\r\n\t\tvar current_value, cache_curent_value;\r\n\r\n\t\tcurrent_value = DSLCMainOptions.section_padding_vertical;\r\n\t\tcache_curent_value = jQuery(cachedAjaxRequest).find('input[data-id=\"padding\"]').val();\r\n\r\n\t\tif ( current_value !== cache_curent_value ) {\r\n\t\t\tbrowserCacheTmp.removeItem('cache-dslc-ajax-add-modules-section-v2');\r\n\t\t\tcachedAjaxRequest = null;\r\n\t\t}\r\n\t}\r\n\r\n\t// If no cache for current Ajax request.\r\n\tif ( null === cachedAjaxRequest ) {\r\n\r\n\t\t// AJAX Request\r\n\t\tjQuery.post(\r\n\r\n\t\t\tDSLCAjax.ajaxurl,\r\n\t\t\t{\r\n\t\t\t\taction : 'dslc-ajax-add-modules-section',\r\n\t\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\t\tdslc : 'active'\r\n\t\t\t},\r\n\t\t\tfunction( response ) {\r\n\r\n\t\t\t\t// newRow = jQuery(response.output);\r\n\t\t\t\tbrowserCacheTmp.setItem( 'cache-dslc-ajax-add-modules-section-v2', response.output );\r\n\r\n\t\t\t\tnewRow = dslc_row_after_add( response.output );\r\n\r\n\t\t\t\tif ( callback ) { callback(); }\r\n\t\t\t\treturn defer;\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t} else {\r\n\t\t// There is cached version of AJAX request.\r\n\t\t// newRow = jQuery(cachedAjaxRequest);\r\n\r\n\t\tnewRow = dslc_row_after_add( cachedAjaxRequest );\r\n\r\n\t\tif ( callback ) { callback(); }\r\n\t\treturn defer;\r\n\t}\r\n}\r\n\r\n/**\r\n * Finish new row creation process.\r\n *\r\n * @param  {String} newRowHTML HTML code of the new row.\r\n * @return {jQuery}            New ROW jQuery object.\r\n */\r\nfunction dslc_row_after_add( newRowHTML ) {\r\n\r\n\tvar newRow = jQuery(newRowHTML);\r\n\r\n\t// Append new row\r\n\tnewRow.appendTo(LiveComposer.Builder.PreviewAreaDocument.find(\"#dslc-main\"));\r\n\r\n\t// Call other functions\r\n\tdragAndDropInit();\r\n\twindow.dslc_generate_code();\r\n\twindow.dslc_show_publish_button();\r\n\r\n\tnew Section(newRow);\r\n\tnew ModuleArea( newRow.find('.dslc-modules-area').eq(0)[0] );\r\n\r\n\tnewRow.find('.dslc-modules-area').addClass('dslc-modules-area-empty dslc-last-col');\r\n\r\n\treturn newRow;\r\n}\r\n\r\n/**\r\n * Row - Delete\r\n */\r\nfunction dslc_row_delete( row ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_row_delete' );\r\n\r\n\t// If the row is being edited\r\n\tif ( row.find('.dslca-module-being-edited') ) {\r\n\r\n\t\t// Hide the filter hooks\r\n\t\tjQuery('.dslca-header .dslca-options-filter-hook').hide();\r\n\r\n\t\t// Hide the save/cancel actions\r\n\t\tjQuery('.dslca-module-edit-actions').hide();\r\n\r\n\t\t// Show the section hooks\r\n\t\tjQuery('.dslca-header .dslca-go-to-section-hook').show();\r\n\r\n\t\tshowSection('.dslca-modules');\r\n\r\n\t}\r\n\r\n\t// Remove row\r\n\trow.trigger('mouseleave').remove();\r\n\r\n\t// Call other functions\r\n\twindow.dslc_generate_code();\r\n\twindow.dslc_show_publish_button();\r\n}\r\n\r\n/**\r\n * Row - Edit\r\n */\r\nfunction dslc_row_edit( row ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_row_edit' );\r\n\r\n\t// Vars we will use\r\n\tvar dslcModulesSectionOpts, dslcVal;\r\n\r\n\t// Set editing class\r\n\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-modules-section-being-edited').removeClass('dslca-modules-section-change-made');\r\n\trow.addClass('dslca-modules-section-being-edited');\r\n\r\n\t// Hide the section hooks\r\n\tjQuery('.dslca-header .dslca-go-to-section-hook').hide();\r\n\r\n\t// Show the styling/responsive tabs\r\n\tjQuery('.dslca-row-options-filter-hook[data-section=\"styling\"], .dslca-row-options-filter-hook[data-section=\"responsive\"]').show();\r\n\tjQuery('.dslca-row-options-filter-hook[data-section=\"styling\"]').trigger('click');\r\n\r\n\t// Hide the filter hooks\r\n\tjQuery('.dslca-header .dslca-options-filter-hook').hide();\r\n\r\n\t// Hide the save/cancel actions\r\n\tjQuery('.dslca-module-edit-actions').hide();\r\n\r\n\t// Show the save/cancel actions\r\n\tjQuery('.dslca-row-edit-actions').show();\r\n\r\n\t// Set current values\r\n\tjQuery('.dslca-modules-section-edit-field').each(function(){\r\n\r\n\r\n\t\t/**\r\n\t\t * Temporary migration from 'wrapped' value to 'wrapper' in ROW type selector\r\n\t\t * TODO: delete this block in a few versions as problem do not exists on new installs\r\n\t\t *\r\n\t\t * @since ver 1.1\r\n\t\t */\r\n\t\tif ( 'type' === jQuery(this).data('id') ) {\r\n\r\n\t\t\tif ( '' === jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"type\"]', LiveComposer.Builder.PreviewAreaDocument).val() ||\r\n\t\t\t\t  'wrapped' === jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"type\"]', LiveComposer.Builder.PreviewAreaDocument).val() ) {\r\n\t\t\t\tjQuery('select[data-id=\"type\"]').val('wrapper').change();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( jQuery(this).data('id') == 'border-top' ) {\r\n\r\n\t\t\tif ( jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"border\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf('top') >= 0 ) {\r\n\t\t\t\tjQuery(this).prop('checked', true);\r\n\t\t\t\tjQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(this).prop('checked', false);\r\n\t\t\t\tjQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\r\n\t\t\t}\r\n\r\n\t\t} else if ( jQuery(this).data('id') == 'border-right' ) {\r\n\r\n\t\t\tif ( jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"border\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf('right') >= 0 ) {\r\n\t\t\t\tjQuery(this).prop('checked', true);\r\n\t\t\t\tjQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(this).prop('checked', false);\r\n\t\t\t\tjQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\r\n\t\t\t}\r\n\r\n\t\t} else if ( jQuery(this).data('id') == 'border-bottom' ) {\r\n\r\n\t\t\tif ( jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"border\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf('bottom') >= 0 ) {\r\n\t\t\t\tjQuery(this).prop('checked', true);\r\n\t\t\t\tjQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(this).prop('checked', false);\r\n\t\t\t\tjQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\r\n\t\t\t}\r\n\r\n\t\t} else if ( jQuery(this).data('id') == 'border-left' ) {\r\n\r\n\t\t\tif ( jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"border\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf('left') >= 0 ) {\r\n\t\t\t\tjQuery(this).prop('checked', true);\r\n\t\t\t\tjQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(this).prop('checked', false);\r\n\t\t\t\tjQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\r\n\t\t\t}\r\n\t\t} else if ( jQuery(this).hasClass('dslca-modules-section-edit-field-checkbox') ) {\r\n\r\n\t\t\tif ( jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"' + jQuery(this).data('id') + '\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf( jQuery(this).data('val') ) >= 0 ) {\r\n\t\t\t\tjQuery( this ).prop('checked', true);\r\n\t\t\t\tjQuery( this ).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\r\n\t\t\t} else {\r\n\t\t\t\tjQuery( this ).prop('checked', false);\r\n\t\t\t\tjQuery( this ).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\tjQuery( this ).val( jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"' + jQuery( this ).data('id') + '\"]', LiveComposer.Builder.PreviewAreaDocument ).val().trim().replace('%(%', '[').replace('%)%', ']') );\r\n\r\n\t\t\tif ( jQuery( this ).hasClass( 'dslca-modules-section-edit-field-colorpicker' ) ) {\r\n\r\n\t\t\t\tvar _this = jQuery( this );\r\n\t\t\t\tjQuery( this ).closest( '.dslca-modules-section-edit-option' )\r\n\t\t\t\t\t\t.find( '.sp-preview-inner' )\r\n\t\t\t\t\t\t.removeClass('sp-clear-display')\r\n\t\t\t\t\t\t.css({ 'background-color' : _this.val() });\r\n\r\n\t\t\t\tjQuery( this ).css({ 'background-color' : _this.val() });\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tjQuery('.dslca-modules-section-edit-field-upload').each(function(){\r\n\r\n\t\tvar dslcParent = jQuery(this).closest('.dslca-modules-section-edit-option');\r\n\r\n\t\tif ( jQuery(this).val() && jQuery(this).val() !== 'disabled' ) {\r\n\r\n\t\t\tjQuery('.dslca-modules-section-edit-field-image-add-hook', dslcParent ).hide();\r\n\t\t\tjQuery('.dslca-modules-section-edit-field-image-remove-hook', dslcParent ).show();\r\n\t\t} else {\r\n\r\n\t\t\tjQuery('.dslca-modules-section-edit-field-image-remove-hook', dslcParent ).hide();\r\n\t\t\tjQuery('.dslca-modules-section-edit-field-image-add-hook', dslcParent ).show();\r\n\t\t}\r\n\t});\r\n\r\n\t// Initiate numeric option sliders\r\n\t// dslc_row_edit_slider_init();\r\n\r\n\t// Show options management\r\n\tshowSection('.dslca-modules-section-edit');\r\n\r\n\tLiveComposer.Builder.Flags.panelOpened = true;\r\n\r\n\t// Hide the publish button\r\n\thidePublishButton();\r\n}\r\n\r\n/**\r\n * Row - Edit - Cancel Changes\r\n */\r\nfunction dslc_row_edit_cancel( callback ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_row_cancel_changes' );\r\n\r\n\tcallback = typeof callback !== 'undefined' ? callback : false;\r\n\r\n\t// Time to generate code optimized {HACK}\r\n\tLiveComposer.Builder.Flags.generate_code_after_row_changed = false;\r\n\r\n\t// Recover original data from data-def attribute for each control\r\n\tjQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input', LiveComposer.Builder.PreviewAreaDocument).each(function(){\r\n\r\n\t\tjQuery(this).val( jQuery(this).data('def') );\r\n\r\n\t\t// Fire change for every ROW control, so it redraw linked CSS properties\r\n\t\tjQuery('.dslca-modules-section-edit-field[data-id=\"' + jQuery(this).data('id') + '\"]').val( jQuery(this).data('def') ).trigger('change');\r\n\t});\r\n\r\n\tLiveComposer.Builder.Flags.generate_code_after_row_changed = true;\r\n\twindow.dslc_generate_code();\r\n\twindow.dslc_show_publish_button();\r\n\r\n\tshowSection('.dslca-modules');\r\n\r\n\t// Hide the save/cancel actions\r\n\tjQuery('.dslca-row-edit-actions').hide();\r\n\r\n\t// Hide the styling/responsive tabs\r\n\tjQuery('.dslca-row-options-filter-hook').hide();\r\n\r\n\t// Show the section hooks\r\n\tjQuery('.dslca-header .dslca-go-to-section-hook').show();\r\n\r\n\t// Show the publish button\r\n\tdslc_show_publish_button;\r\n\r\n\t// Remove being edited class\r\n\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-modules-section-being-edited dslca-modules-section-change-made');\r\n\r\n\tif ( callback ) { callback(); }\r\n\r\n\tLiveComposer.Builder.Flags.panelOpened = false;\r\n\tjQuery(\"body\", LiveComposer.Builder.PreviewAreaDocument).removeClass('section-editing-in-progress');\r\n\r\n}\r\n\r\n/**\r\n * Row - Edit - Confirm Changes\r\n */\r\nfunction dslc_row_edit_confirm( callback ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_confirm_row_changes' );\r\n\r\n\tcallback = typeof callback !== 'undefined' ? callback : false;\r\n\r\n\tjQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input', LiveComposer.Builder.PreviewAreaDocument).each(function(){\r\n\r\n\t\tjQuery(this).data( 'def', jQuery(this).val() );\r\n\t});\r\n\r\n\tshowSection('.dslca-modules');\r\n\r\n\t// Hide the save/cancel actions\r\n\tjQuery('.dslca-row-edit-actions').hide();\r\n\r\n\t// Hide the styling/responsive tabs\r\n\tjQuery('.dslca-row-options-filter-hook').hide();\r\n\r\n\t// Show the section hooks\r\n\tjQuery('.dslca-header .dslca-go-to-section-hook').show();\r\n\r\n\t// Remove being edited class\r\n\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-modules-section-being-edited dslca-modules-section-change-made');\r\n\r\n\twindow.dslc_generate_code();\r\n\r\n\t// Show the publish button\r\n\twindow.dslc_show_publish_button();\r\n\r\n\tif ( callback ) { callback(); }\r\n\r\n\tLiveComposer.Builder.Flags.panelOpened = false;\r\n\tjQuery(\"body\", LiveComposer.Builder.PreviewAreaDocument).removeClass('section-editing-in-progress');\r\n}\r\n\r\n/**\r\n * Row - Copy\r\n */\r\nfunction dslc_row_copy( row ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_row_copy' );\r\n\r\n\t// Vars that will be used\r\n\tvar dslc_module_id,\r\n\tdslcModulesSectionCloned,\r\n\tdslcModule;\r\n\r\n\t// Clone the row\r\n\tdslcModulesSectionCloned = row.clone().appendTo( jQuery('#dslc-main', LiveComposer.Builder.PreviewAreaDocument ) );\r\n\r\n\t// Mark new ROW as NON initialized\r\n\tdslcModulesSectionCloned[0].removeAttribute('data-jsinit');\r\n\r\n\t// Go through each area of the new row and apply correct data-size\r\n\t// Mark each module area inside as NON initialized (2)\r\n\tdslcModulesSectionCloned.find('.dslc-modules-area').each(function(){\r\n\t\tvar dslcIndex = jQuery(this).index();\r\n\t\tjQuery(this).data('size', row.find('.dslc-modules-area:eq( ' + dslcIndex + ' )').data('size') );\r\n\r\n\t\tthis.removeAttribute('data-jsinit'); // (2)\r\n\t});\r\n\r\n\tnew Section(dslcModulesSectionCloned);\r\n\r\n\t/**\r\n\t * Re-render modules inside of the new ROW\r\n\t */\r\n\r\n\t// Remove animations and temporary hide modules inside\r\n\tdslcModulesSectionCloned.find('.dslc-module-front').css({\r\n\t\t'-webkit-animation-name' : 'none',\r\n\t\t'-moz-animation-name' : 'none',\r\n\t\t'animation-name' : 'none',\r\n\t\t'animation-duration' : '0',\r\n\t\t'-webkit-animation-duration' : '0',\r\n\t\topacity : 0\r\n\r\n\t// Go through each module inside the new ROW\r\n\t}).each(function(){\r\n\r\n\t\t// Current module\r\n\t\tvar dslc_module = jQuery(this);\r\n\r\n\t\t//Generate new ID for the new module and change it in HTML/CSS of the module.\r\n\t\tgetNewModuleId( dslc_module[0] );\r\n\r\n\t\t// Check init for rows and module areas\r\n\t\tsectionsInitJS();\r\n\t\tmoduleareasInitJS();\r\n\r\n\t\t// TODO: the next function contains AJAX call. It needs optimization.\r\n\t\twindow.dslc_generate_code();\r\n\r\n\t\t/**\r\n\t\t * Re-init drag and drop from modules list into modules areas.\r\n\t\t * Need this function, so we can drop new modules on the cloned areas.\r\n\t\t */\r\n\t\tdragAndDropInit();\r\n\r\n\t\t// Remove \"dslca-module-being-edited\" class form any element\r\n\t\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\r\n\t\t// Show back new created module\r\n\t\tdslc_module.animate({\r\n\t\t\topacity : 1\r\n\t\t}, 300);\r\n\r\n\t\twindow.dslc_show_publish_button();\r\n\t});\r\n\r\n\t// Generate new ID for the new section.\r\n\tdslc_section_new_id( dslcModulesSectionCloned[0] );\r\n}\r\n\r\n/**\r\n * Generate new ID for the section provided\r\n *\r\n *\r\n * @param DOM section that needs ID updated (new ID).\r\n * @return void\r\n */\r\nfunction dslc_section_new_id( section ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_section_new_id' );\r\n\r\n\tvar dslc_section_id = LiveComposer.Utils.get_unique_id(); // Generate new section ID.\r\n\r\n\t// Update section ID in data attribute\r\n\tsection.setAttribute( 'data-section-id', dslc_section_id );\r\n\r\n\t// Update section ID in raw base64 code (dslc_code) of the section\r\n\tLiveComposer.Utils.update_section_property_raw( section, 'section_instance_id', dslc_section_id );\r\n}\r\n\r\n\r\n/**\r\n * Row - Import\r\n */\r\nfunction dslc_row_import( rowCode ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_row_import' );\r\n\r\n\t// AJAX Call\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-ajax-import-modules-section',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_modules_section_code : rowCode\r\n\t\t},\r\n\t\tfunction( response ) {\r\n\r\n\t\t\t// Close the import popup/modal\r\n\t\t\tconfirmClose();\r\n\r\n\t\t\t// Add the new section\r\n\t\t\tjQuery('#dslc-main', LiveComposer.Builder.PreviewAreaDocument).append( response.output );\r\n\r\n\t\t\t// Call other functions\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_bg_video();\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\r\n\t\t\t// Check init for rows and module areas\r\n\t\t\tsectionsInitJS();\r\n\t\t\tmoduleareasInitJS();\r\n\r\n\t\t\tdragAndDropInit();\r\n\t\t\twindow.dslc_generate_code();\r\n\r\n\t\t\twindow.dslc_show_publish_button();\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * Deprecated Functions and Fallbacks\r\n */\r\n\r\nfunction dslc_add_modules_section() { addSection(); }\r\nfunction dslc_delete_modules_section( row  ) { dslc_row_delete( row ); }\r\nfunction dslc_edit_modules_section( row ) { dslc_row_edit( row ); }\r\nfunction dslc_copy_modules_section( row ) { dslc_row_copy( row ); }\r\nfunction dslc_import_modules_section( rowCode ) { dslc_row_import( rowCode ); }\r\n\r\n/**\r\n * Check ROWs initialization\r\n *\r\n * @return void\r\n */\r\nexport const sectionsInitJS = () => {\r\n\r\n\t// Select all the ROWs form the main section of the page\r\n\tjQuery( '#dslc-main .dslc-modules-section', LiveComposer.Builder.PreviewAreaDocument ).each( function() {\r\n\r\n\t\t// Check if all the rows have data attribute 'jsinit' set to 'initialized'?\r\n\t\tif ( jQuery( this ).data('jsinit') !== 'initialized' ) {\r\n\r\n\t\t\t// Initialize all the rows without 'jsinit' attribute!\r\n\t\t\tnew Section( this );\r\n\t\t}\r\n\t} );\r\n\r\n}\r\n\r\nexport const sectionsInit = () => {\r\n\tsectionsInitJS();\r\n\tsectionsEventsInit();\r\n\r\n\t/**\r\n\t * Hook - Confirm Row Changes\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-row-edit-save', function(){\r\n\r\n\t\tdslc_row_edit_confirm();\r\n\r\n\t\tjQuery(\".dslca-currently-editing\").removeAttr('style');\r\n\t\tjQuery('.dslca-row-options-filter-hook.dslca-active').removeClass('dslca-active');\r\n\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_responsive_classes( true );\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Cancel Row Changes\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-row-edit-cancel', function(){\r\n\r\n\t\tdslc_row_edit_cancel();\r\n\r\n\t\tjQuery(\".dslca-currently-editing\").removeAttr('style');\r\n\t\tjQuery('.dslca-row-options-filter-hook.dslca-active').removeClass('dslca-active');\r\n\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_responsive_classes( true );\r\n\t});\r\n}\r\n","/**\r\n * Sections container class\r\n */\r\n\r\nimport Sortable from 'sortablejs';\r\n\r\nexport const CSectionsContainer = class{\r\n\r\n\tconstructor (elem) {\r\n\t\tthis.sortable;\r\n\r\n\t\tthis.initSortable(elem);\r\n\t\tthis.reactToSortableOnOff();\r\n\t}\r\n\r\n\r\n\tinitSortable(elem) {\r\n\t\tthis.sortable = Sortable.create( elem, {\r\n\t\t\tgroup: 'sections',\r\n\t\t\tanimation: 350,\r\n\t\t\thandle: '.dslca-move-modules-section-hook',\r\n\t\t\tdraggable: '.dslc-modules-section-dnd',\r\n\t\t\tghostClass: 'dslca-sections-ghost',\r\n\t\t\tchosenClass: 'dslca-sections-dragging',\r\n\t\t\tscroll: true, // or HTMLElement\r\n\t\t\tscrollSensitivity: 150, // px, how near the mouse must be to an edge to start scrolling.\r\n\t\t\tscrollSpeed: 10, // px\r\n\t\t\tbubbleScroll: true, // apply autoscroll to all parent elements, allowing for easier movement\r\n\t\t\tdirection: 'vertical',\r\n\t\t\t// forceFallback: true, // to make Drag + wheel scroll feature.\r\n\r\n\t\t\tsetData: function (dataTransfer, dragEl) {\r\n\t\t\t  dataTransfer.setData( LiveComposer.Utils.msieversion() !== false ? 'Text' : 'text/html', dragEl.innerHTML);\r\n\t\t\t},\r\n\t\t\t// dragging started\r\n\t\t\tonStart: function (evt) {\r\n\t\t\t\t// evt.oldIndex;  // element index within parent\r\n\t\t\t\tjQuery('body').removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress');\r\n\t\t\t\tjQuery('body', LiveComposer.Builder.PreviewAreaWindow.document).removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress');\r\n\t\t\t\t// ui.placeholder.html('<span class=\"dslca-placeholder-help-text\"><span class=\"dslca-placeholder-help-text-inner\">' + DSLCString.str_row_helper_text + '</span></span>');\r\n\t\t\t\t// jQuery( '.dslc-content' ).sortable( \"refreshPositions\" );\r\n\t\t\t},\r\n\t\t\t// dragging ended\r\n\t\t\tonEnd: function (evt) {\r\n\t\t\t\tevt.oldIndex;  // element's old index within parent\r\n\t\t\t\tevt.newIndex;  // element's new index within parent\r\n\r\n\t\t\t\tevt.preventDefault();\r\n\r\n\t\t\t\twindow.dslc_generate_code();\r\n\t\t\t\tLiveComposer.Builder.UI.stopScroller();\r\n\t\t\t\tjQuery('body').removeClass('dslca-drag-in-progress').addClass('dslca-drag-not-in-progress');\r\n\t\t\t\tjQuery('body', LiveComposer.Builder.PreviewAreaWindow.document).removeClass('dslca-drag-in-progress').addClass('dslca-drag-not-in-progress');\r\n\r\n\t\t\t\tjQuery('.dslca-anim-opacity-drop').removeClass('dslca-anim-opacity-drop');\r\n\t\t\t},\r\n\r\n\t\t\t// Element is dropped into the list from another list\r\n\t\t\tonAdd: function (evt) {\r\n\r\n\t\t\t\t/* var itemEl = evt.item;  // dragged HTMLElement\r\n\t\t\t\tevt.from;  // previous list\r\n\r\n\t\t\t\t// If container/column/modules area droped.\r\n\t\t\t\tif ( jQuery(itemEl).data('id') == 'DSLC_M_A' ) {\r\n\r\n\t\t\t\t\tmodulesAreaAdd( jQuery(self.section).find('.dslc-modules-section-wrapper .dslc-modules-section-inner') );\r\n\t\t\t\t\titemEl.remove();\r\n\t\t\t\t} */\r\n\r\n\t\t\t\t// + indexes from onEnd\r\n\t\t\t\t// evt.preventDefault();\r\n\t\t\t\t// evt.stopPropagation(); return false;\r\n\t\t\t},\r\n\r\n\t\t\t// Changed sorting within list\r\n\t\t\tonUpdate: function (evt) {\r\n\t\t\t\tvar itemEl = evt.item;  // dragged HTMLElement\r\n\t\t\t\t// + indexes from onEnd\r\n\t\t\t\t// evt.preventDefault();\r\n\t\t\t\t// evt.stopPropagation(); return false;\r\n\r\n\t\t\t\twindow.dslc_show_publish_button();\r\n\t\t\t},\r\n\r\n\t\t\t// Called by any change to the list (add / update / remove)\r\n\t\t\tonSort: function (evt) {\r\n\r\n\t\t\t\tjQuery( this ).removeClass( \"ui-state-default\" );\r\n\t\t\t\t// same properties as onUpdate\r\n\t\t\t\t// evt.preventDefault();\r\n\t\t\t\t// evt.stopPropagation(); return false;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t// Element is removed from the list into another list\r\n\t\t\tonRemove: function (evt) {\r\n\t\t\t  // same properties as onUpdate\r\n\t\t\t},\r\n\r\n\t\t\t// Attempt to drag a filtered element\r\n\t\t\tonFilter: function (evt) {\r\n\t\t\t\tvar itemEl = evt.item;  // HTMLElement receiving the `mousedown|tapstart` event.\r\n\t\t\t},\r\n\r\n\t\t\t// Event when you move an item in the list or between lists\r\n\t\t\tonMove: function (evt) {\r\n\t\t\t\t// Example: http://jsbin.com/tuyafe/1/edit?js,output\r\n\t\t\t\tevt.dragged; // dragged HTMLElement\r\n\t\t\t\tevt.draggedRect; // TextRectangle {left, top, right  bottom}\r\n\t\t\t\tevt.related; // HTMLElement on which have guided\r\n\t\t\t\tevt.relatedRect; // TextRectangle\r\n\t\t\t\t// return false;  for cancel\r\n\r\n\r\n\t\t\t\t// Add here the function to update underlying class\r\n\t\t\t\t/* if ( jQuery('.dslc-modules-area-empty').find('.dslc-module-front').length > 0 ) {\r\n\r\n\t\t\t\t\tjQuery(this).removeClass('dslc-modules-area-empty').addClass('dslc-modules-area-not-empty');\r\n\r\n\t\t\t\t\tjQuery('.dslca-no-content:not(:visible)', this).show().css({\r\n\t\t\t\t\t\t'-webkit-animation-name' : 'dslcBounceIn',\r\n\t\t\t\t\t\t'-moz-animation-name' : 'dslcBounceIn',\r\n\t\t\t\t\t\t'animation-name' : 'dslcBounceIn',\r\n\t\t\t\t\t\t'animation-duration' : '0.6s',\r\n\t\t\t\t\t\t'-webkit-animation-duration' : '0.6s',\r\n\t\t\t\t\t\tpadding : 0\r\n\t\t\t\t\t}).animate({ padding : '35px 0' }, 300, function(){\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t} */\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treactToSortableOnOff() {\r\n\t\tself = this.sortable;\r\n\r\n\t\t/** Sort option setter */\r\n\t\t/* jQuery(document).on('LC.sortableOff', function(){\r\n\t\t\tif ( undefined !== self.sortable( \"instance\" ) ) {\r\n\t\t\t\tself.sortable('option','disabled', true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tjQuery(document).on('LC.sortableOn', function(){\r\n\t\t\tif ( undefined !== self.sortable( \"instance\" ) ) {\r\n\t\t\t\tself.sortable('option','disabled', false);\r\n\t\t\t}\r\n\t\t}); */\r\n\t}\r\n\r\n}","/**\r\n * Builder settings panel functions providing work with modules\r\n */\r\nimport { showSection } from './uigeneral.js';\r\nimport { moduleOutputAltered } from './module.js';\r\nimport { updatePreset } from \"./presets.js\";\r\nimport { hideModal } from \"./modalwindow.js\";\r\n\r\nvar dslcRegularFontsArray = window.DSLCFonts.regular;\r\nvar dslcGoogleFontsArray = window.DSLCFonts.google;\r\nvar dslcAllFontsArray = dslcRegularFontsArray.concat( dslcGoogleFontsArray );\r\n\r\n// Set current/default icons set\r\nvar dslcIconsCurrentSet = window.DSLCIcons.fontawesome;\r\n\r\n/**\r\n * Modules - Document Ready\r\n */\r\n\r\njQuery(document).ready(function($){\r\n\tdslc_module_options_tooltip();\r\n\twindow.dslc_module_options_font();\r\n\tdslc_module_options_icon();\r\n\tdslc_module_options_icon_returnid()\r\n\tdslc_module_options_text_align();\r\n\tdslc_module_options_checkbox();\r\n\tdslc_module_options_box_shadow();\r\n\tdslc_module_options_text_shadow();\r\n\r\n\t/* Initiate all the color picker controls on the module/section options panel. */\r\n\tvar dslca_options_with_colorpicker = '';\r\n\tdslca_options_with_colorpicker += '.dslca-module-edit-field-colorpicker';\r\n\tdslca_options_with_colorpicker += ', .dslca-modules-section-edit-field-colorpicker';\r\n\tdslca_options_with_colorpicker += ', .dslca-module-edit-option-box-shadow-color';\r\n\tdslca_options_with_colorpicker += ', .dslca-module-edit-option-text-shadow-color';\r\n\r\n\t// Init color picker on click only to not polute DOM with unwanted elements.\r\n\t// It will fire only once (first time) as color picker then put it's own listeners.\r\n\tjQuery(document).on('click', dslca_options_with_colorpicker, function() {\r\n\r\n\t\t// Call the color picker init function.\r\n\t\tdslc_module_options_color( this );\r\n\r\n\t\t// Make sure the color picker popup appears in the right place.\r\n\t\tvar wrapper = jQuery( this ).closest('.dslca-color-option');\r\n\t\tvar optionsPanel = jQuery( '.dslca-module-edit-options-inner');\r\n\t\tvar colorpicker = wrapper.find('.wp-picker-holder');\r\n\t\tvar offset = wrapper.offset();\r\n\t\tvar offsetPopup = offset.left + 15;\r\n\t\tvar windoWidth = window.innerWidth;\r\n\t\tvar popupWidth = 260;\r\n\r\n\t\tif ( windoWidth < offsetPopup + popupWidth ) {\r\n\t\t\toffsetPopup = windoWidth - popupWidth;\r\n\t\t}\r\n\r\n\t\t// Set the right position for the color picker popup on first click.\r\n\t\tcolorpicker.css('left', offsetPopup + 'px' );\r\n\r\n\t\t// Update position left for the color picker on options scroll.\r\n\t\tjQuery(optionsPanel).on('scroll', function(event) {\r\n\t\t\toffset = wrapper.offset();\r\n\t\t\tvar offsetPopup = offset.left + 15;\r\n\t\t\tvar windoWidth = window.innerWidth;\r\n\t\t\tvar popupWidth = 260;\r\n\r\n\t\t\tif ( windoWidth < offsetPopup + popupWidth ) {\r\n\t\t\t\toffsetPopup = windoWidth - popupWidth;\r\n\t\t\t}\r\n\r\n\t\t\tcolorpicker.css('left', offsetPopup + 'px' );\r\n\t\t});\r\n\t});\r\n\r\n\t/* Initiate all the slider controls on the module options panel. */\r\n\tjQuery('.dslca-container').on('mouseenter', '.dslca-module-edit-option-slider', function() {\r\n\r\n\t\t// Fixed: https://github.com/live-composer/live-composer-page-builder/issues/740\r\n\t\tif ( ! jQuery(this).hasClass( 'dslca-module-edit-option-select' ) ) {\r\n        \tdslc_module_options_numeric( this );\r\n\t\t}\r\n\t});\r\n\r\n\t/* Initiate all the slider controls on the row options panel. */\r\n\tjQuery('.dslca-container').on('mouseenter', '.dslca-modules-section-edit-option-slider', function() {\r\n\r\n\t\tdslc_module_options_numeric( this );\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Submit\r\n\t */\r\n\tjQuery('.dslca-module-edit-form').submit( function(e){\r\n\t\te.preventDefault();\r\n\t\tmoduleOutputAltered();\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Tab Switch\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-options-tab-hook', function(e){\r\n\t\te.preventDefault();\r\n\t\telementOptionsTabs( jQuery(this) );\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Reset Responsive Settings\r\n\t */\r\n\t jQuery(document).on( 'click', '.dslca-clear-responsive-options', function(e){\r\n\t\te.preventDefault();\r\n\t\tresetResponsiveOptions();\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Option Section Switch\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-options-filter-hook', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tvar dslcPrev = jQuery('.dslca-options-filter-hook.dslca-active').data('section');\r\n\t\tvar currentSection = jQuery(this).data('section');\r\n\r\n\t\tjQuery('.dslca-options-filter-hook.dslca-active').removeClass('dslca-active');\r\n\t\tjQuery(this).addClass('dslca-active');\r\n\r\n\t\tjQuery('.dslca-container-loader')\r\n\t\tdocument.querySelector( '.dslca-container' ).dataset.currentSection = currentSection;\r\n\r\n\t\tdslc_module_options_section_filter( currentSection );\r\n\r\n\t\t// If previous was responsive reload module\r\n\t\tif ( dslcPrev == 'responsive' ) {\r\n\t\t\t// Show the loader\r\n\t\t\tjQuery('.dslca-container-loader').show();\r\n\r\n\t\t\t// Reset the responsive classes\r\n\t\t\twindow.LiveComposer.Builder.PreviewAreaWindow.dslc_responsive_classes();\r\n\r\n\t\t\t// Reload Module\r\n\t\t\tmoduleOutputAltered(function(){\r\n\t\t\t\t// Hide the loader\r\n\t\t\t\tjQuery('.dslca-container-loader').hide();\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Destroy resizable preview functionality\r\n\t\t\t * when leaving Responsive view.\r\n\t\t\t */\r\n\t\t\tjQuery('#page-builder-preview-area').resizable('destroy').attr('style','');\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Make the preview area resizable\r\n\t\t * when entering Responsive view.\r\n\t\t */\r\n\t\tif ( currentSection == 'responsive' ) {\r\n\t\t\tjQuery('#page-builder-preview-area').resizable();\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Confirm Changes\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-save', function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\tdslc_module_options_confirm_changes(function(){\r\n\r\n\t\t\t// window.LiveComposer.Builder.UI.initInlineEditors({withRemove:true});\r\n\t\t\twindow.LiveComposer.Builder.UI.unloadOptionsDeps();\r\n\t\t\twindow.LiveComposer.Builder.Flags.panelOpened = false;\r\n\r\n\t\t\tjQuery(\"body\", window.LiveComposer.Builder.PreviewAreaDocument).removeClass('module-editing-in-progress');\r\n\r\n\t\t});\r\n\r\n\t\tjQuery('.dslca-options-filter-hook.dslca-active').removeClass('dslca-active');\r\n\r\n\t\tdslc_disable_responsive_view();\r\n\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Cancel Changes\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-cancel', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tdslc_module_options_cancel_changes(function(){\r\n\r\n\t\t\t// window.LiveComposer.Builder.UI.initInlineEditors({withRemove:true});\r\n\t\t\twindow.LiveComposer.Builder.UI.unloadOptionsDeps();\r\n\t\t\twindow.LiveComposer.Builder.Flags.panelOpened = false;\r\n\r\n\t\t\tjQuery(\"body\", window.LiveComposer.Builder.PreviewAreaDocument).removeClass('module-editing-in-progress');\r\n\r\n\t\t});\r\n\r\n\t\tjQuery('.dslca-options-filter-hook.dslca-active').removeClass('dslca-active');\r\n\r\n\t\tdslc_disable_responsive_view();\r\n\t});\r\n});\r\n\r\n/* Editor scripts */\r\nexport const settingsPanelInit = () => {\r\n\tvar self = window.LiveComposer.Builder;\r\n\twindow.LiveComposer.Builder.Helpers.colorpickers = [];\r\n/*\r\n\twindow.LiveComposer.Builder.UI.initInlineEditors = function(params){\r\n\t\tparams = params || {};\r\n\r\n\t\tif ( params.withRemove == true ) {\r\n\t\t\ttry {\r\n\t\t\t\twindow.LiveComposer.Builder.PreviewAreaWindow.tinyMCE.remove();\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.info( 'No tinyMCE code found. Error code: 10181116.' );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twindow.LiveComposer.Builder.PreviewAreaWindow.tinyMCE.init({\r\n\t\t\tselector: '.inline-editor.dslca-editable-content',\r\n\t\t\teditor_deselector: 'mce-content-body',\r\n\t\t\tmenubar: false,\r\n\t\t\tinline: true,\r\n\t\t\tplugins: 'wordpress wplink lists paste',\r\n\t\t\tpaste_as_text: true, // Paste styled text as plain text only. Requires 'paste' in plugins.\r\n\t\t\tpaste_block_drop: true, // Disabled drop action for inline editor to prevent js errors in the console. http://archive.tinymce.com/wiki.php/Plugin3x:paste\r\n\t\t\tstyle_formats: [\r\n\t\t\t\t\t{title: 'Paragraph', format: 'p'},\r\n\t\t\t\t\t{title: 'Header 1', format: 'h1'},\r\n\t\t\t\t\t{title: 'Header 2', format: 'h2'},\r\n\t\t\t\t\t{title: 'Header 3', format: 'h3'},\r\n\t\t\t\t\t{title: 'Header 4', format: 'h4'},\r\n\t\t\t\t\t{title: 'Header 5', format: 'h5'},\r\n\t\t\t\t\t{title: 'Header 6', format: 'h6'},\r\n\t\t\t  ],\r\n\t\t\ttoolbar: 'styleselect | bold italic blockquote | removeformat | bullist numlist '\r\n\t\t});\r\n\t}\r\n*/\r\n\t/* Destroy instanced of sliders, color pickers and other temporary elements */\r\n\twindow.LiveComposer.Builder.UI.clearUtils = function() {\r\n\r\n\t\tif ( window.dslcDebug ) console.log( 'window.LiveComposer.Builder.UI.clearUtils' );\r\n\r\n\t\t// Destroy all Color Pickers\r\n\t\twindow.LiveComposer.Builder.UI.clearColorPickers();\r\n\r\n\t\t// Delete module backups form memory.\r\n\t\tif ( undefined !== window.LiveComposer.Builder.moduleBackup ) {\r\n\t\t\twindow.LiveComposer.Builder.moduleBackup.remove();\r\n\t\t}\r\n\r\n\t\tjQuery('.temp-styles-for-module', window.LiveComposer.Builder.PreviewAreaDocument).remove();\r\n\r\n\t\t// Hide inline editor panel if on [Confirm] or [Cancel] button click.\r\n\t\tjQuery('.mce-tinymce', window.LiveComposer.Builder.PreviewAreaDocument).hide();\r\n\t}\r\n\r\n\twindow.LiveComposer.Builder.UI.clearColorPickers = function() {\r\n\r\n\t\tif ( Array.isArray(self.Helpers.colorpickers ) ) {\r\n\r\n\t\t\tself.Helpers.colorpickers.forEach(function(item){\r\n\t\t\t\t// Do not delete color picker instance from row settings panel,\r\n\t\t\t\t// as it stays on page and not get loaded via Ajax.\r\n\t\t\t\tif ( ! jQuery(item).hasClass('dslca-modules-section-edit-field') ) {\r\n\t\t\t\t\t// Destroy color picker instance.\r\n\t\t\t\t\tjQuery(item).remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tself.Helpers.colorpickers = [];\r\n\t\t}\r\n\r\n\t\t// Delete the color picker events.\r\n\t\tjQuery( 'body' ).off( 'click.wpcolorpicker' );\r\n\t}\r\n\r\n\t/** Options dependencies */\r\n\twindow.LiveComposer.Builder.Helpers.depsHandlers = [];\r\n\r\n\twindow.LiveComposer.Builder.UI.loadOptionsDeps = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tjQuery(\".dslca-module-edit-option\").each(function(){\r\n\r\n\t\t\tvar elem = this;\r\n\t\t\tvar parsed = true;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tvar dep = JSON.parse( LiveComposer.Utils.b64_to_utf8( jQuery(this).data('dep') ) );\r\n\t\t\t} catch(e){\r\n\t\t\t\tparsed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif ( parsed ) {\r\n\t\t\t\tvar handler = function(){\r\n\t\t\t\t\tvar optElem = this;\r\n\t\t\t\t\tvar localDep = {};\r\n\r\n\t\t\t\t\tif ( ( optElem.type == 'radio' || optElem.type == 'checkbox' ) && dep[ optElem.value ] == undefined ) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( optElem.type == 'checkbox' && dep[ optElem.value ] != undefined ) {\r\n\t\t\t\t\t\tlocalDep[ optElem.value ] = dep[ optElem.value ];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlocalDep = dep;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tObject.keys(localDep).forEach(function(opt_val){\r\n\t\t\t\t\t\tlocalDep[ opt_val ].split(',').forEach(function(item){\r\n\t\t\t\t\t\t\tvar opt_wrap = jQuery(\".dslca-module-edit-option-\" + item.trim()).closest('.dslca-module-edit-option');\r\n\t\t\t\t\t\t\tvar checkedCheckbox = true;\r\n\r\n\t\t\t\t\t\t\tif ( optElem.type == 'radio' || optElem.type == 'checkbox' ) {\r\n\t\t\t\t\t\t\t\tcheckedCheckbox = jQuery(optElem).is(\":checked\");\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar section_tab = jQuery('.dslca-module-edit-options-tab-hook.dslca-active').data('id');\r\n\r\n\t\t\t\t\t\t\tif ( optElem.value == opt_val && checkedCheckbox ) {\r\n\t\t\t\t\t\t\t\tif ( opt_wrap.not( \".dependent\" ) ) {\r\n\t\t\t\t\t\t\t\t\topt_wrap.addClass('dependent');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ( opt_wrap.hasClass('dep-hide') ) {\r\n\t\t\t\t\t\t\t\t\topt_wrap.removeClass('dep-hide');\r\n\t\t\t\t\t\t\t\t\topt_wrap.addClass('dep-show');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\topt_wrap.addClass('dep-show');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ( section_tab == opt_wrap.data('tab') ) {\r\n\t\t\t\t\t\t\t\t\topt_wrap.show();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif ( opt_wrap.not( \".dependent\" ) ) {\r\n\t\t\t\t\t\t\t\t\topt_wrap.addClass('dependent');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ( opt_wrap.hasClass('dep-show') ) {\r\n\t\t\t\t\t\t\t\t\topt_wrap.removeClass('dep-show');\r\n\t\t\t\t\t\t\t\t\topt_wrap.addClass('dep-hide');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\topt_wrap.addClass('dep-hide');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\topt_wrap.hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tjQuery(document).on('change dslc-init-deps', '.dslca-module-edit-option > *[data-id=\"' + jQuery(this).data('id') + '\"]', handler);\r\n\t\t\t\twindow.LiveComposer.Builder.Helpers.depsHandlers.push( handler );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tjQuery(\".dslca-module-edit-option input, .dslca-module-edit-option select\").trigger('dslc-init-deps');\r\n\t}\r\n\r\n\twindow.LiveComposer.Builder.UI.unloadOptionsDeps = function() {\r\n\r\n\t\twindow.LiveComposer.Builder.Helpers.depsHandlers.forEach(function(handler){\r\n\r\n\t\t\tjQuery(document).unbind( 'change', handler );\r\n\t\t\tjQuery(document).unbind( 'dslc-init-deps', handler );\r\n\t\t});\r\n\r\n\t\twindow.LiveComposer.Builder.Helpers.depsHandlers = [];\r\n\t}\r\n\r\n\t/**\r\n\t * Creates inline style tag when editing WYSWIG\r\n\t *\r\n\t * @param  {object} params\r\n\t *    params.rule\r\n\t *    params.elems\r\n\t *    params.module_id\r\n\t */\r\n\twindow.LiveComposer.Builder.Helpers.processInlineStyleTag = function( params ) {\r\n\r\n\t\tif ( typeof params != 'object' ) return false;\r\n\r\n\t\tvar resp_prefix = '', resp_postfix = '';\r\n\r\n\t\tif ( params.context.closest(\".dslca-module-edit-option\").data('tab') == 'tablet_responsive' ) {\r\n\r\n\t\t\tresp_prefix = '@media only screen and (max-width: 1024px) and (min-width: 768px) {';\r\n\t\t\tresp_postfix = '}';\r\n\t\t} else if ( params.context.closest(\".dslca-module-edit-option\").data('tab') == 'phone_responsive' ) {\r\n\r\n\t\t\tresp_prefix = '@media only screen and (max-width: 767px) {';\r\n\t\t\tresp_postfix = '}';\r\n\t\t}\r\n\r\n\t\tparams.styleContent = resp_prefix + params.styleContent + resp_postfix;\r\n\r\n\t\tvar id = resp_prefix + params.rule + params.elems;\r\n\t\tid = id.replace(/ /gi, '');\r\n\r\n\t\tif ( window.LiveComposer.Builder.PreviewAreaDocument[0].getElementById(id) == null ) {\r\n\r\n\t\t\tvar styleTag = document.createElement('style');\r\n\t\t\tstyleTag.innerHTML = params.styleContent;\r\n\t\t\tstyleTag.id = id;\r\n\t\t\tstyleTag.className = \"temp-styles-for-module\";\r\n\r\n\t\t\twindow.LiveComposer.Builder.PreviewAreaDocument[0].body.appendChild(styleTag);\r\n\t\t} else {\r\n\r\n\t\t\twindow.LiveComposer.Builder.PreviewAreaDocument[0].getElementById(id).innerHTML = params.styleContent;\r\n\t\t}\r\n\t}\r\n\r\n\twindow.LiveComposer.Builder.UI.shakePanelConfirmButton = function() {\r\n\r\n\t\tjQuery('.dslca-module-edit-save').addClass('lc-shake-effect active');\r\n\r\n\t\tsetTimeout(function(){\r\n\r\n\t\t\tjQuery('.dslca-module-edit-save').removeClass('lc-shake-effect active');\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\tonModuleOptionsChange();\r\n\tonSectionOptionsChange();\r\n\tonFileUploadOptionsChange();\r\n};\r\n\r\nconst onModuleOptionsChange = () => {\r\n\t// Live Preview for Module Settings Change\r\n\tjQuery(document).on( 'change', '.dslca-module-edit-field', function(){\r\n\t\tif ( window.dslcDebug ) console.log( 'on change event for .dslca-module-edit-field' );\r\n\r\n\t\tvar dslcOptionValue = '',\r\n\t\t\tdslcOptionValueOrig = '',\r\n\t\t\tdslcOption = jQuery(this),\r\n\t\t\tdslcOptionID = dslcOption.data('id'),\r\n\t\t\tdslcOptionWrap = dslcOption.closest('.dslca-module-edit-option'),\r\n\t\t\tdslcModule = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\r\n\t\t\tdslcModuleID = dslcModule.data('module'),\r\n\t\t\tdslcModuleOptions = jQuery.find( '.dslca-module-options-front textarea', dslcModule );\r\n\r\n\t\t// Add changed class\r\n\t\tdslcModule.addClass('dslca-module-change-made');\r\n\r\n\t\t// Hide/Show tabs in the module options panel.\r\n\t\t// Required to show/hide particular options tabs based on the current selection.\r\n\t\t// Active only for dropdowns and checkboxes.\r\n\t\tif ( dslcOptionWrap.hasClass('dslca-module-edit-option-select') ||\r\n\t\tdslcOptionWrap.hasClass('dslca-module-edit-option-checkbox') ) {\r\n\t\t\tdslc_module_options_hideshow_tabs();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Refresh on change = true\r\n\t\t *\r\n\t\t * Refresh module HTML from the server on every field value change\r\n\t\t */\r\n\t\tif ( jQuery(this).closest('.dslca-module-edit-option').data('refresh-on-change') == 'active' ) {\r\n\t\t\t/**\r\n\t\t\t * Get the new value\r\n\t\t\t */\r\n\t\t\tif ( dslcOptionWrap.find('.dslca-module-edit-option-checkbox-wrapper').length ) {\r\n\t\t\t\tvar dslcOptionChoices = jQuery('input[type=\"checkbox\"]', dslcOptionWrap);\r\n\t\t\t\tdslcOptionChoices.each(function(){\r\n\t\t\t\t\tif ( jQuery(this).prop('checked') ) {\r\n\t\t\t\t\t\tdslcOptionValue = dslcOptionValue + jQuery(this).val() + ' ';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if ( dslcOption.hasClass('dslca-module-edit-option-radio') ) {\r\n\t\t\t\tvar dslcOptionValue = jQuery.find('.dslca-module-edit-field:checked', dslcOption).val();\r\n\t\t\t} else {\r\n\t\t\t\tvar dslcOptionValue = dslcOption.val();\r\n\t\t\t\t// Post Grid > Thumbnail: Orientation change.\r\n\t\t\t\t// Need to change thumbnail width to get it work as expected\r\n\t\t\t\tif ( dslcOptionID == 'orientation' && dslcOptionValue == 'horizontal' ) {\r\n\t\t\t\t\tvar dslcSliderEl = jQuery('.dslca-module-edit-option-thumb_width .dslca-module-edit-field');\r\n\t\t\t\t\tdslcSliderEl.val('40').trigger('change');\r\n\t\t\t\t} else if ( dslcOptionID == 'orientation' && dslcOptionValue == 'vertical' ) {\r\n\t\t\t\t\tvar dslcSliderEl = jQuery('.dslca-module-edit-option-thumb_width .dslca-module-edit-field');\r\n\t\t\t\t\tdslcSliderEl.val('100').trigger('change');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Change old value with new value\r\n\t\t\t */\r\n\r\n\t\t\tif ( undefined !== dslcOptionValue && null !== dslcOptionValue ) {\r\n\t\t\t\tdslcOptionValue = dslcOptionValue.trim().replace(/<textarea/g, '<lctextarea').replace(/<\\/textarea/g, '</lctextarea');\r\n\t\t\t}\r\n\r\n\t\t\tif ( null === dslcOptionValue ) {\r\n\t\t\t\tdslcOptionValue = '';\r\n\t\t\t}\r\n\r\n\t\t\tjQuery( '.dslca-module-options-front textarea[data-id=\"' + dslcOptionID + '\"]', dslcModule ).val(dslcOptionValue);\r\n\t\t\tjQuery('.dslca-container-loader').show();\r\n\r\n\t\t\tmoduleOutputAltered( function(){\r\n\r\n\t\t\t\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslca-module-change-made');\r\n\r\n\t\t\t\tif ( dslcOptionID == 'css_load_preset' && ! jQuery('body').hasClass('dslca-new-preset-added') ) {\r\n\r\n\t\t\t\t\twindow.dslc_module_options_show( dslcModuleID );\r\n\t\t\t\t\tjQuery('.dslca-container-loader').hide();\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tjQuery('.dslca-container-loader').hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tjQuery('body').removeClass('dslca-new-preset-added');\r\n\r\n\r\n\t\t\t\t// Trigger 'LC.moduleChange' event.\r\n\t\t\t\t// This event can be used by 3-rd party developers to re-init\r\n\t\t\t\t// some of the JavaScript code on modure re-rendering.\r\n\t\t\t\tLiveComposer.Utils.publish( 'LC.moduleChange', {\r\n\t\t\t\t\tmoduleId: dslcModuleID,\r\n\t\t\t\t\toptionID: dslcOptionID,\r\n\t\t\t\t\toptionVal: dslcOption.val()\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t/**\r\n\t\t * Refresh on change = false\r\n\t\t *\r\n\t\t * Do not refresh from the server, but using JS\r\n\t\t */\r\n\t\t} else {\r\n\r\n\t\t\t/**\r\n\t\t\t * Live Preview\r\n\t\t\t */\r\n\r\n\t\t\tif ( dslcOption.hasClass('dslca-module-edit-field-font') ) {\r\n\r\n\t\t\t\tvar dslcFontsToLoad = dslcOption.val();\r\n\t\t\t\tdslcFontsToLoad = dslcFontsToLoad + ':400,100,200,300,500,600,700,800,900';\r\n\r\n\t\t\t\tvar dslcAffectOnChangeEl = dslcOption.data('affect-on-change-el');\r\n\t\t\t\tvar dslcAffectOnChangeRule = dslcOption.data('affect-on-change-rule');\r\n\t\t\t\tvar dslcAffectOnChangeVal = dslcOption.val();\r\n\t\t\t\tvar dslcAffectOnChangeValOrig = dslcAffectOnChangeVal;\r\n\t\t\t\tvar module = jQuery(\".dslca-module-being-edited\", LiveComposer.Builder.PreviewAreaDocument);\r\n\r\n\t\t\t\tif ( dslcOption.val().length && dslcGoogleFontsArray.indexOf( dslcOption.val() ) !== -1  ) {\r\n\r\n\t\t\t\t\t// Call WebFont function from the iframe\r\n\t\t\t\t\tdocument.getElementById('page-builder-frame').contentWindow.WebFont.load({\r\n\t\t\t\t\t\t\tgoogle: {\r\n\t\t\t\t\t\t\t\tfamilies: [ dslcFontsToLoad ]\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tactive : function(familyName, fvd) {\r\n\r\n\t\t\t\t\t\t\t\tif ( jQuery( '.dslca-font-loading' ).closest('.dslca-module-edit-field-font-next').length ) {\r\n\r\n\t\t\t\t\t\t\t\t\tjQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-right');\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tjQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-left');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tvar elems = dslcAffectOnChangeEl.split(',');\r\n\t\t\t\t\t\t\t\tvar styleContent = \"#\" + module[0].id + \" \" + elems.join(\", #\" + module[0].id + \" \") + \" {\" + dslcAffectOnChangeRule + \": \" + dslcAffectOnChangeVal + \"}\";\r\n\r\n\t\t\t\t\t\t\t\tLiveComposer.Builder.Helpers.processInlineStyleTag({\r\n\r\n\t\t\t\t\t\t\t\t\tcontext: dslcOption,\r\n\t\t\t\t\t\t\t\t\trule: dslcAffectOnChangeRule,\r\n\t\t\t\t\t\t\t\t\telems: dslcAffectOnChangeEl,\r\n\t\t\t\t\t\t\t\t\tstyleContent: styleContent\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tinactive : function ( familyName, fvd ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( jQuery( '.dslca-font-loading' ).closest('.dslca-module-edit-field-font-next').length ) {\r\n\r\n\t\t\t\t\t\t\t\t\tjQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-right');\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tjQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-left');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetTimeout( function(){\r\n\r\n\t\t\t\t\t\tif ( jQuery( '.dslca-font-loading.dslca-module-edit-field-font-next' ).length ) {\r\n\r\n\t\t\t\t\t\t\tjQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-right');\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tjQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-left');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar elems = dslcAffectOnChangeEl.split(',');\r\n\t\t\t\t\t\tvar styleContent = \"#\" + module[0].id + \" \" + elems.join(\", #\" + module[0].id + \" \") + \" {\" + dslcAffectOnChangeRule + \": \" + dslcAffectOnChangeVal + \"}\";\r\n\r\n\t\t\t\t\t\tLiveComposer.Builder.Helpers.processInlineStyleTag({\r\n\r\n\t\t\t\t\t\t\tcontext: dslcOption,\r\n\t\t\t\t\t\t\trule: dslcAffectOnChangeRule,\r\n\t\t\t\t\t\t\telems: dslcAffectOnChangeEl,\r\n\t\t\t\t\t\t\tstyleContent: styleContent\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Checkbox\r\n\t\t\t */\r\n\t\t\t} else if ( dslcOption.hasClass('dslca-module-edit-field-checkbox') ) {\r\n\r\n\t\t\t\tvar dslcOptionChoices = jQuery('input[type=\"checkbox\"]', dslcOptionWrap);\r\n\r\n\t\t\t\tdslcOptionChoices.each(function(){\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t@todo This function is specific to borders. Needs review.\r\n\t\t\t\t\t */\r\n\r\n\t\t\t\t\tif ( jQuery(this).prop('checked') ) {\r\n\r\n\t\t\t\t\t\tdslcOptionValue = dslcOptionValue + 'solid ';\r\n\t\t\t\t\t\tdslcOptionValueOrig = dslcOptionValueOrig + jQuery(this).val() + ' ';\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tdslcOptionValue = dslcOptionValue + 'none ';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Here dslcOptionValue will look like: none none none solid.\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * All other option types\r\n\t\t\t */\r\n\t\t\tif ( ! dslcOption.hasClass('dslca-module-edit-field-font') &&\r\n\t\t\t\t\tdslcOption.data('affect-on-change-el') != null &&\r\n\t\t\t\t\tdslcOption.data('affect-on-change-rule') != null\r\n\t\t\t\t\t ) {\r\n\r\n\t\t\t\tvar dslcExt = dslcOption.data('ext') || '';\r\n\t\t\t\tvar dslcAffectOnChangeEl = dslcOption.data('affect-on-change-el');\r\n\t\t\t\tvar dslcAffectOnChangeRule = dslcOption.data('affect-on-change-rule');\r\n\t\t\t\tvar dslcAffectOnChangeVal = dslcOption.val();\r\n\t\t\t\tvar dslcAffectOnChangeValOrig = dslcAffectOnChangeVal;\r\n\r\n\t\t\t\tif ( dslcOption.hasClass('dslca-module-edit-field-checkbox') ) {\r\n\r\n\t\t\t\t\tdslcAffectOnChangeVal = dslcOptionValue;\r\n\t\t\t\t\tdslcAffectOnChangeValOrig = dslcOptionValueOrig;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( dslcOption.hasClass('dslca-module-edit-field-image') ) {\r\n\r\n\t\t\t\t\tdslcAffectOnChangeVal = 'url(\"' + dslcAffectOnChangeVal + '\")';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ( null !== dslcAffectOnChangeVal && dslcAffectOnChangeVal.length < 1 ) && ( dslcAffectOnChangeRule == 'background-color' || dslcAffectOnChangeRule == 'background' ) ) {\r\n\r\n\t\t\t\t\tdslcAffectOnChangeVal = 'transparent';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdslcAffectOnChangeRule.split(',').forEach(function(rule){\r\n\r\n\t\t\t\t\trule = rule.replace(/\\s+/g, '');\r\n\r\n\t\t\t\t\tvar module = jQuery(\".dslca-module-being-edited\", LiveComposer.Builder.PreviewAreaDocument);\r\n\r\n\t\t\t\t\tvar elems = dslcAffectOnChangeEl.split(',');\r\n\t\t\t\t\tvar styleContent = \"#\" + module[0].id + \" \" + elems.join(\", #\" + module[0].id + \" \") + \" {\" + rule + \": \" + dslcAffectOnChangeVal + dslcExt + \"}\";\r\n\r\n\t\t\t\t\tLiveComposer.Builder.Helpers.processInlineStyleTag({\r\n\r\n\t\t\t\t\t\tcontext: dslcOption,\r\n\t\t\t\t\t\trule: rule,\r\n\t\t\t\t\t\telems: dslcAffectOnChangeEl,\r\n\t\t\t\t\t\tstyleContent: styleContent\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Update option\r\n\t\t\t */\r\n\r\n\t\t\tvar dslcOptionToApply = '';\r\n\r\n\t\t\t// Do we work with CSS control or module property?\r\n\t\t\tif ( dslcOptionID.indexOf('css_') !== -1 ) {\r\n\t\t\t\t// Apply CSS property.\r\n\t\t\t\tdslcOptionToApply = dslcAffectOnChangeValOrig;\r\n\t\t\t} else {\r\n\t\t\t\t// Apply module property.\r\n\t\t\t\tdslcOptionToApply = dslcOption.val();\r\n\t\t\t}\r\n\r\n\t\t\tjQuery( '.dslca-module-option-front[data-id=\"' + dslcOptionID + '\"]', dslcModule ).val( dslcOptionToApply );\r\n\r\n\t\t\t// Trigger 'LC.moduleChange' event.\r\n\t\t\t// This event can be used by 3-rd party developers to re-init\r\n\t\t\t// some of the JavaScript code on modure re-rendering.\r\n\t\t\tLiveComposer.Utils.publish( 'LC.moduleChange', {\r\n\r\n\t\t\t\tmoduleId: dslcModule[0].id,\r\n\t\t\t\toptionID: dslcOptionID,\r\n\t\t\t\toptionVal: dslcAffectOnChangeValOrig || dslcOption.val()\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\nconst onSectionOptionsChange = () => {\r\n\t// ROW styling option changes\r\n\tjQuery(document).on( 'change', '.dslca-modules-section-edit-field', function() {\r\n\t\tvar dslcField, dslcFieldID, dslcEl, dslcModulesSection, dslcVal, dslcValReal, dslcValExt, dslcRule, dslcSetting, dslcTargetEl, dslcImgURL;\r\n\r\n\t\tdslcField = jQuery(this);\r\n\t\tdslcFieldID = dslcField.data('id');\r\n\t\tdslcVal = dslcField.val();\r\n\t\tdslcValReal = dslcVal;\r\n\t\tdslcValExt = dslcVal + dslcField.data('ext');\r\n\t\tdslcRule = dslcField.data('css-rule');\r\n\r\n\t\tdslcEl = jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument); // Currently editing element\r\n\t\tdslcTargetEl = dslcEl;\r\n\t\tdslcSetting = jQuery('.dslca-modules-section-settings input[data-id=\"' + dslcFieldID + '\"]', dslcEl );\r\n\r\n\t\tdslcEl.addClass('dslca-modules-section-change-made');\r\n\r\n\t\t// If image/upload field alter the value ( use from data )\r\n\t\tif ( dslcField.hasClass('dslca-modules-section-edit-field-upload') ) {\r\n\r\n\t\t\tif ( dslcVal && dslcVal.length ) {\r\n\r\n\t\t\t\t// dslcVal = dslcField.data('dslca-img-url');\r\n\t\t\t\tdslcVal = jQuery.find('.dslca-modules-section-settings input[data-id=\"dslca-img-url\"]', dslcEl ).val();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( dslcRule == 'background-image' ) {\r\n\r\n\t\t\tdslcVal = 'url(\"' + dslcVal + '\")';\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_bg_video();\r\n\t\t}\r\n\r\n\t\tif ( dslcFieldID == 'bg_image_attachment' ) {\r\n\r\n\t\t\tdslcEl.removeClass('dslc-init-parallax');\r\n\t\t}\r\n\r\n\t\tif ( dslcFieldID == 'border-top' ||\r\n\t\t\tdslcFieldID == 'border-right' ||\r\n\t\t\tdslcFieldID == 'border-bottom' ||\r\n\t\t\tdslcFieldID == 'border-left' ) {\r\n\r\n\t\t\tvar dslcBorderStyle = jQuery('.dslca-modules-section-settings input[data-id=\"border_style\"]').val();\r\n\t\t\tdslcSetting = jQuery('.dslca-modules-section-settings input[data-id=\"border\"]', dslcEl );\r\n\r\n\t\t\tdslcValReal = '';\r\n\r\n\t\t\tvar dslcChecboxesWrap = dslcField.closest('.dslca-modules-section-edit-option-checkbox-wrapper');\r\n\t\t\tdslcChecboxesWrap.find('.dslca-modules-section-edit-field-checkbox').each(function(){\r\n\r\n\t\t\t\tif ( jQuery(this).is(':checked') ) {\r\n\r\n\t\t\t\t\tif ( jQuery(this).data('id') == 'border-top' ) {\r\n\r\n\t\t\t\t\t\tdslcValReal += 'top ';\r\n\t\t\t\t\t} else if ( jQuery(this).data('id') == 'border-right' ) {\r\n\r\n\t\t\t\t\t\tdslcValReal += 'right ';\r\n\t\t\t\t\t} else if ( jQuery(this).data('id') == 'border-bottom' ) {\r\n\r\n\t\t\t\t\t\tdslcValReal += 'bottom ';\r\n\t\t\t\t\t} else if ( jQuery(this).data('id') == 'border-left' ) {\r\n\r\n\t\t\t\t\t\tdslcValReal += 'left ';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif ( dslcField.is(':checked') ) {\r\n\r\n\t\t\t\tif ( dslcField.data('id') == 'border-top' ) {\r\n\r\n\t\t\t\t\tdslcEl.css({ 'border-top-style' : dslcBorderStyle });\r\n\t\t\t\t} else if ( dslcField.data('id') == 'border-right' ) {\r\n\r\n\t\t\t\t\tdslcEl.css({ 'border-right-style' : dslcBorderStyle });\r\n\t\t\t\t} else if ( dslcField.data('id') == 'border-bottom' ) {\r\n\r\n\t\t\t\t\tdslcEl.css({ 'border-bottom-style' : dslcBorderStyle });\r\n\t\t\t\t} else if ( dslcField.data('id') == 'border-left' ) {\r\n\r\n\t\t\t\t\tdslcEl.css({ 'border-left-style' : dslcBorderStyle });\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( dslcField.data('id') == 'border-top' ) {\r\n\r\n\t\t\t\t\tdslcEl.css({ 'border-top-style' : 'hidden' });\r\n\t\t\t\t} else if ( dslcField.data('id') == 'border-right' ) {\r\n\r\n\t\t\t\t\tdslcEl.css({ 'border-right-style' : 'hidden' });\r\n\t\t\t\t} else if ( dslcField.data('id') == 'border-bottom' ) {\r\n\r\n\t\t\t\t\tdslcEl.css({ 'border-bottom-style' : 'hidden' });\r\n\t\t\t\t} else if ( dslcField.data('id') == 'border-left' ) {\r\n\r\n\t\t\t\t\tdslcEl.css({ 'border-left-style' : 'hidden' });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if ( dslcField.hasClass( 'dslca-modules-section-edit-field-checkbox' ) ) {\r\n\r\n\t\t\tvar checkboxes = jQuery(this).closest('.dslca-modules-section-edit-option-checkbox-wrapper').find('.dslca-modules-section-edit-field-checkbox');\r\n\t\t\tvar checkboxesVal = '';\r\n\t\t\tcheckboxes.each(function(){\r\n\r\n\t\t\t\tif ( jQuery(this).prop('checked') ) {\r\n\r\n\t\t\t\t\tcheckboxesVal += jQuery(this).data('val') + ' ';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar dslcValReal = checkboxesVal;\r\n\r\n\t\t\t/* Show On */\r\n\t\t\tif ( dslcField.data('id') == 'show_on' ) {\r\n\r\n\t\t\t\tif ( checkboxesVal.indexOf( 'desktop' ) !== -1 ) {\r\n\r\n\t\t\t\t\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslc-hide-on-desktop');\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslc-hide-on-desktop');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( checkboxesVal.indexOf( 'tablet' ) !== -1 ) {\r\n\r\n\t\t\t\t\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslc-hide-on-tablet');\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslc-hide-on-tablet');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( checkboxesVal.indexOf( 'phone' ) !== -1 ) {\r\n\r\n\t\t\t\t\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslc-hide-on-phone');\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslc-hide-on-phone');\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Section divider flip.\r\n\t\t\tif ( dslcField.data('id') == 'section_divider_bottom_flip' ) {\r\n\t\t\t\tif ( dslcValReal.indexOf( 'horizontally' ) === -1 ) {\r\n\t\t\t\t\tjQuery('.dslc-section-divider[data-divider-pos=\"bottom\"]', dslcEl).removeClass('dslc-flip-hor');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery('.dslc-section-divider[data-divider-pos=\"bottom\"]', dslcEl).addClass('dslc-flip-hor');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( dslcValReal.indexOf( 'vertically' ) === -1 ) {\r\n\t\t\t\t\tjQuery('.dslc-section-divider[data-divider-pos=\"bottom\"]', dslcEl).removeClass('dslc-flip-vert');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery('.dslc-section-divider[data-divider-pos=\"bottom\"]', dslcEl).addClass('dslc-flip-vert');\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( dslcField.data('id') == 'section_divider_top_flip' ) {\r\n\t\t\t\tif ( dslcValReal.indexOf( 'horizontally' ) === -1 ) {\r\n\t\t\t\t\tjQuery('.dslc-section-divider[data-divider-pos=\"top\"]', dslcEl).removeClass('dslc-flip-hor');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery('.dslc-section-divider[data-divider-pos=\"top\"]', dslcEl).addClass('dslc-flip-hor');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( dslcValReal.indexOf( 'vertically' ) === -1 ) {\r\n\t\t\t\t\tjQuery('.dslc-section-divider[data-divider-pos=\"top\"]', dslcEl).removeClass('dslc-flip-vert');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery('.dslc-section-divider[data-divider-pos=\"top\"]', dslcEl).addClass('dslc-flip-vert');\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( dslcFieldID == 'bg_image_attachment' && dslcVal == 'parallax' ) {\r\n\t\t\tdslcEl.addClass( 'dslc-init-parallax' );\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_parallax();\r\n\t\t} else if ( dslcFieldID == 'type' ) {\r\n\t\t\tif ( dslcVal == 'full' ) {\r\n\t\t\t\tdslcEl.addClass('dslc-full');\r\n\t\t\t} else {\r\n\t\t\t\tdslcEl.removeClass('dslc-full');\r\n\t\t\t}\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\r\n\t\t} else if ( dslcFieldID == 'columns_spacing' ) {\r\n\r\n\t\t\tif ( dslcVal == 'nospacing' ) {\r\n\r\n\t\t\t\tdslcEl.addClass('dslc-no-columns-spacing');\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdslcEl.removeClass('dslc-no-columns-spacing');\r\n\t\t\t}\r\n\t\t} else if ( dslcFieldID == 'custom_class' ) {\r\n\r\n\t\t} else if ( dslcFieldID == 'custom_id' ) {\r\n\r\n\t\t} else if ( dslcFieldID == 'bg_video' ) {\r\n\r\n\t\t\tjQuery('.dslc-bg-video video', dslcEl).remove();\r\n\r\n\t\t\tif ( dslcVal && dslcVal.length ) {\r\n\r\n\t\t\t\tvar dslcVideoVal = dslcVal;\r\n\t\t\t\tdslcVideoVal = dslcVideoVal.replace( '.webm', '' );\r\n\t\t\t\tdslcVideoVal = dslcVideoVal.replace( '.mp4', '' );\r\n\t\t\t\tjQuery.find('.dslc-bg-video-inner', dslcEl).text('<video><source type=\"video/mp4\" src=\"' + dslcVideoVal + '.mp4\" /><source type=\"video/webm\" src=\"' + dslcVideoVal + '.webm\" /></video>');\r\n\t\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_bg_video();\r\n\t\t\t}\r\n\r\n\t\t} else if ( dslcFieldID == 'section_divider_top_style' || dslcFieldID == 'section_divider_bottom_style' ) {\r\n\t\t\tlet dividerPosition = 'top';\r\n\t\t\tif ( dslcFieldID == 'section_divider_bottom_style' ) {\r\n\t\t\t\tdividerPosition = 'bottom';\r\n\t\t\t}\r\n\t\t\t// Remove previous divider SVG.\r\n\t\t\tlet inlineStyles = jQuery( '.dslc-section-divider[data-divider-pos=\"' + dividerPosition + '\"] svg', dslcEl ).attr('style');\r\n\t\t\tjQuery( '.dslc-section-divider[data-divider-pos=\"' + dividerPosition + '\"]', dslcEl ).html('');\r\n\r\n\t\t\tif ( dslcVal && dslcVal.length ) {\r\n\t\t\t\tconst divider = jQuery('#dslc-section-dividers', LiveComposer.Builder.PreviewAreaWindow.document).find( 'svg#' + dslcVal ).clone();\r\n\t\t\t\t// Insert new divider SVG.\r\n\t\t\t\tjQuery( '.dslc-section-divider[data-divider-pos=\"' + dividerPosition + '\"]', dslcEl ).html( divider[0] );\r\n\t\t\t\tif ( undefined !== inlineStyles ) {\r\n\t\t\t\t\tjQuery( '.dslc-section-divider[data-divider-pos=\"' + dividerPosition + '\"] svg', dslcEl ).attr('style', inlineStyles);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if ( dslcFieldID == 'bg_image_thumb' ) {\r\n\r\n\t\t\tif ( dslcValReal == 'enabled' ) {\r\n\r\n\t\t\t\tif ( jQuery('#dslca-post-data-thumb').length ) {\r\n\r\n\t\t\t\t\tvar dslcThumbURL = \"url('\" + jQuery('#dslca-post-data-thumb').val() + \"')\";\r\n\t\t\t\t\tdslcTargetEl.css(dslcRule, dslcThumbURL );\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( dslcValReal == 'disabled' ) {\r\n\r\n\t\t\t\tdslcTargetEl.css(dslcRule, 'none' );\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\tif ( dslcField.data('css-element') ) {\r\n\r\n\t\t\t\tdslcTargetEl = jQuery( dslcField.data('css-element'), dslcEl );\r\n\t\t\t}\r\n\r\n\t\t\tdslcRule = dslcRule.replace(/ /g,'').split( ',' );\r\n\t\t\tvar dslcValToApply;\r\n\r\n\t\t\tif ( null != dslcField.data('ext') ) {\r\n\t\t\t\tdslcValToApply = dslcValExt;\r\n\t\t\t} else {\r\n\t\t\t\tdslcValToApply = dslcVal;\r\n\t\t\t}\r\n\r\n\t\t\t// Loop through rules (useful when there are multiple rules)\r\n\t\t\tfor ( var i = 0; i < dslcRule.length; i++ ) {\r\n\t\t\t\tdslcTargetEl.css(dslcRule[i], dslcValToApply);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Update hidden input with new value\r\n\t\tdslcSetting.val( dslcValReal );\r\n\r\n\t\tif ( ! LiveComposer.Builder.Flags.generate_code_after_row_changed ) return false;\r\n\r\n\t\t// window.dslc_generate_code();\r\n\t\t// window.dslc_show_publish_button();\r\n\t});\r\n}\r\n\r\nconst onFileUploadOptionsChange = () => {\r\n\t// Uploading files\r\n\tvar file_frame;\r\n\r\n\tjQuery(document).on('click', '.dslca-module-edit-field-image-add-hook, .dslca-modules-section-edit-field-image-add-hook', function(){\r\n\r\n\t\tvar hook = jQuery(this);\r\n\r\n\t\tif ( hook.hasClass( 'dslca-module-edit-field-image-add-hook' ) ) {\r\n\r\n\t\t\tvar field = hook.siblings('.dslca-module-edit-field-image');\r\n\t\t\tvar removeHook = hook.siblings('.dslca-module-edit-field-image-remove-hook');\r\n\t\t} else {\r\n\r\n\t\t\tvar field = hook.siblings('.dslca-modules-section-edit-field-upload');\r\n\t\t\tvar removeHook = hook.siblings('.dslca-modules-section-edit-field-image-remove-hook');\r\n\t\t}\r\n\r\n\t\t// Whether or not multiple files are allowed\r\n\t\tvar multiple = false;\r\n\r\n\t\t// Create the media frame.\r\n\t\tfile_frame = wp.media.frames.file_frame = wp.media({\r\n\t\t\ttitle: 'Choose Image',\r\n\t\t\tbutton: {\r\n\t\t\t\ttext: 'Confirm',\r\n\t\t\t},\r\n\t\t\tmultiple: multiple\r\n\t\t});\r\n\r\n\t\t// When an image is selected, run a callback.\r\n\t\tfile_frame.on( 'select', function() {\r\n\r\n\t\t\tvar attachment = file_frame.state().get('selection').first().toJSON();\r\n\t\t\t/*\r\n\t\t\tSave image ID as value of the image input.\r\n\t\t\t */\r\n\t\t\t// field.val( attachment.id ).data( 'dslca-img-url', attachment.url ).trigger('change'); - previous version\r\n\t\t\tfield.val( attachment.id );\r\n\r\n\t\t\tvar dataId = hook.parent().attr(\"data-id\");\r\n\r\n\t\t\t/*\r\n\t\t\tSave alt as value of the image input.\r\n\t\t\t */\r\n\t\t\tif ( attachment.alt != '' && dataId == 'image' ) {\r\n\t\t\t\tjQuery('.dslca-module-edit-option-image_alt input[data-id=\"image_alt\"]').val( attachment.alt );\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\tSave alt as value of the image input.\r\n\t\t\t */\r\n\t\t\tif ( attachment.title != '' && dataId == 'image' ) {\r\n\t\t\t\tjQuery('.dslca-module-edit-option-image_title input[data-id=\"image_title\"]').val( attachment.title );\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\tSave image URL as data attribute of input in dslca-modules-section-settings set\r\n\t\t\tWe need URL in 'dslca-img-url' for live preview\r\n\t\t\t */\r\n\t\t\tjQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).find('.dslca-modules-section-settings input[data-id=\"dslca-img-url\"]').val( attachment.url );\r\n\t\t\tfield.trigger('change'); // trigger change only after 'dslca-img-url' is set\r\n\r\n\t\t\thook.hide();\r\n\t\t\tremoveHook.show();\r\n\t\t});\r\n\r\n\t\t// Finally, open the modal\r\n\t\tfile_frame.open();\r\n\t});\r\n\r\n\tjQuery(document).on('click', '.dslca-module-edit-field-image-remove-hook, .dslca-modules-section-edit-field-image-remove-hook', function(){\r\n\r\n\t\tvar hook = jQuery(this);\r\n\r\n\t\tif ( hook.hasClass( 'dslca-module-edit-field-image-remove-hook' ) ) {\r\n\r\n\t\t\tvar field = hook.siblings('.dslca-module-edit-field-image');\r\n\t\t\tvar addHook = hook.siblings('.dslca-module-edit-field-image-add-hook');\r\n\t\t} else {\r\n\r\n\t\t\tvar field = hook.siblings('.dslca-modules-section-edit-field-upload');\r\n\t\t\tvar addHook = hook.siblings('.dslca-modules-section-edit-field-image-add-hook');\r\n\t\t}\r\n\r\n\t\tfield.val('').trigger('change'); // .dslca-modules-section-edit-field\r\n\r\n\t\t/*\r\n\t\tDelete alt and title value.\r\n\t\t */\r\n\t\tvar dataId = hook.parent().attr(\"data-id\");\r\n\r\n\t\tif ( dataId == 'image' ) {\r\n\t\t\tjQuery('.dslca-module-edit-option-image_alt input').attr('value', '').trigger( 'change' );\r\n\t\t\tjQuery('.dslca-module-edit-option-image_alt input').attr('data-val-bckp', '').trigger( 'change' );\r\n\t\t\tjQuery('.dslca-module-edit-option-image_title input').attr('value', '').trigger( 'change' );\r\n\t\t\tjQuery('.dslca-module-edit-option-image_title input').attr('data-val-bckp', '').trigger( 'change' );\r\n\t\t}\r\n\t\thook.hide();\r\n\t\taddHook.show();\r\n\t});\r\n}\r\n\r\n\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Filter Module Options\r\n */\r\nfunction dslc_module_options_section_filter( sectionID ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_section_filter' );\r\n\r\n\t// Hide all options\r\n\tjQuery('.dslca-module-edit-option').hide();\r\n\r\n\t// Show options for current section\r\n\tjQuery('.dslca-module-edit-option[data-section=\"' + sectionID + '\"]').show();\r\n\r\n\t// Recall module options tab\r\n\telementOptionsTabs();\r\n}\r\n\r\nexport const resetResponsiveOptions = () => {\r\n\t// Get active tab (Tablet/Phone)\r\n\tconst currentTab = document.querySelector('.dslca-module-edit-options-tab-hook.dslca-active').dataset.id;\r\n\r\n\tif ( 'tablet_responsive' === currentTab || 'phone_responsive' === currentTab ) {\r\n\t\t// Hide/Show options\r\n\t\tconst activeSettings =  document.querySelectorAll('.dslca-module-edit-option[data-tab=\"' + currentTab + '\"]');\r\n\r\n\t\tactiveSettings.forEach( ( element )=> {\r\n\t\t\tconst optionId =  element.querySelector( '.dslca-module-edit-field' ).dataset.id;\r\n\r\n\t\t\t// Don't want to reset value of the breakpoint enabler.\r\n\t\t\tif ( 'css_res_t' === optionId || 'css_res_p' === optionId ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar control         = jQuery('.dslca-module-edit-option-' + optionId );\r\n\t\t\tvar control_storage = control.find('.dslca-module-edit-field');\r\n\r\n\t\t\t/* // Get the element we are editing\r\n\t\t\tvar module = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument);\r\n\r\n\t\t\t// Get the element id\r\n\t\t\tvar module_id = module[0].id;\r\n\r\n\t\t\tvar responsive_prefix = '';\r\n\r\n\t\t\tif ( 'tablet_responsive' === control.data('tab') ) {\r\n\t\t\t\tresponsive_prefix = 'body.dslc-res-tablet ';\r\n\t\t\t} else if ( 'phone_responsive' === control.data('tab') ) {\r\n\t\t\t\tresponsive_prefix = 'body.dslc-res-phone ';\r\n\t\t\t}\r\n\r\n\t\t\tvar affect_on_change_el = control_storage.data('affect-on-change-el');\r\n\r\n\t\t\tif ( affect_on_change_el === undefined) return;\r\n\r\n\t\t\tvar affect_on_change_elmts = affect_on_change_el.split( ',' );\r\n\r\n\t\t\taffect_on_change_el = '';\r\n\r\n\t\t\t// Loop through elements (useful when there are multiple elements)\r\n\t\t\tfor ( var i = 0; i < affect_on_change_elmts.length; i++ ) {\r\n\r\n\t\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\t\taffect_on_change_el += ', ';\r\n\t\t\t\t}\r\n\r\n\t\t\t\taffect_on_change_el += responsive_prefix + '#' + module_id + ' ' + affect_on_change_elmts[i];\r\n\t\t\t}\r\n\r\n\t\t\tvar affect_on_change_rule  = control_storage.data('affect-on-change-rule').replace(/ /g,'');\r\n\t\t\tvar affect_on_change_rules = affect_on_change_rule.split( ',' );\r\n\r\n\t\t\tvar control_value;\r\n\t\t\tvar control_data_ext = control_storage.data('ext');\r\n\r\n\r\n\t\t\t// Disable\r\n\r\n\t\t\tcontrol_value = dslc_get_control_value(control_id);\r\n\t\t\t// Temporary backup the current value as data attribute\r\n\t\t\tcontrol_storage.data( 'val-bckp', control_value );\r\n\r\n\t\t\t// Loop through rules (useful when there are multiple rules)\r\n\t\t\tfor ( var i = 0; i < affect_on_change_rules.length; i++ ) {\r\n\r\n\t\t\t\t// remove css rule in element inline style\r\n\t\t\t\tjQuery( affect_on_change_el, LiveComposer.Builder.PreviewAreaDocument ).css( affect_on_change_rules[i] , '' );\r\n\t\t\t\t// remove css rule in css block\r\n\t\t\t\tdisable_css_rule ( affect_on_change_el, affect_on_change_rules[i], module_id);\r\n\t\t\t\t// PROBLEM do not work with multiply rules ex.: .dslc-text-module-content,.dslc-text-module-content p\r\n\t\t\t}\r\n */\r\n\t\t\tcontrol_storage.val('').trigger('change');\r\n\t\t} )\r\n\t}\r\n}\r\n\r\n\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Show module options tab\r\n */\r\nexport const elementOptionsTabs = ( dslcTab ) => {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'elementOptionsTabs' );\r\n\r\n\t// Get currently active section\r\n\tvar dslcSectionID = jQuery('.dslca-options-filter-hook.dslca-active').data('section');\r\n\r\n\t// If tab not supplied set to first\r\n\tdslcTab = typeof dslcTab !== 'undefined' ? dslcTab : jQuery('.dslca-module-edit-options-tab-hook[data-section=\"' + dslcSectionID + '\"]:first');\r\n\r\n\t// Get the tab ID\r\n\tvar dslcTabID = dslcTab.data('id');\r\n\r\n\t// Set active class on tab\r\n\tjQuery('.dslca-module-edit-options-tab-hook').removeClass('dslca-active');\r\n\tdslcTab.addClass('dslca-active');\r\n\r\n\t// Show tabs container\r\n\tjQuery('.dslca-module-edit-options-tabs').show();\r\n\r\n\t// Hide/Show tabs hooks\r\n\tjQuery('.dslca-module-edit-options-tab-hook').hide();\r\n\tjQuery('.dslca-module-edit-options-tab-hook[data-section=\"' + dslcSectionID + '\"]').show();\r\n\r\n\tif ( dslcTabID ) {\r\n\r\n\t\t// Hide/Show options\r\n\t\tjQuery('.dslca-module-edit-option').hide();\r\n\t\tjQuery('.dslca-module-edit-option[data-tab=\"' + dslcTabID + '\"]').show();\r\n\r\n\t\t// Hide/Show Tabs\r\n\t\tdslc_module_options_hideshow_tabs();\r\n\r\n\t\t// If only one tab hide the tabs container\r\n\t\tif ( jQuery('.dslca-module-edit-options-tab-hook:visible').length < 2 ) {\r\n\r\n\t\t\tjQuery('.dslca-module-edit-options-tabs').hide();\r\n\t\t} else {\r\n\r\n\t\t\tjQuery('.dslca-module-edit-options-tabs').show();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * If responsive tab, change the width of the dslc-content div\r\n\t\t */\r\n\r\n\t\tdslc_disable_responsive_view();\r\n\r\n\t\t// Tablet\r\n\t\tif ( dslcTabID == DSLCString.str_res_tablet.toLowerCase() + '_responsive' ) {\r\n\r\n\t\t\tjQuery('body').removeClass('dslc-res-big dslc-res-smaller-monitor dslc-res-phone dslc-res-tablet');\r\n\t\t\tjQuery('body').addClass('dslc-res-tablet');\r\n\t\t\tjQuery('html').addClass('dslc-responsive-preview');\r\n\t\t}\r\n\r\n\t\t// Phone\r\n\t\tif ( dslcTabID == DSLCString.str_res_phone.toLowerCase() + '_responsive' ) {\r\n\r\n\t\t\tjQuery('body').removeClass('dslc-res-big dslc-res-smaller-monitor dslc-res-phone dslc-res-tablet');\r\n\t\t\tjQuery('body').addClass('dslc-res-phone');\r\n\t\t\tjQuery('html').addClass('dslc-responsive-preview');\r\n\t\t}\r\n\r\n\t\t// If responsive reload module\r\n\t\tif ( dslcTabID == DSLCString.str_res_tablet.toLowerCase() + '_responsive' || dslcTabID == DSLCString.str_res_phone.toLowerCase() + '_responsive' ) {\r\n\r\n\t\t\t// Show the loader\r\n\t\t\tjQuery('.dslca-container-loader').show();\r\n\r\n\t\t\t// Reload Module\r\n\t\t\tmoduleOutputAltered(function(){\r\n\r\n\t\t\t\t// Hide the loader\r\n\t\t\t\tjQuery('.dslca-container-loader').hide();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// Scroll horizontally options panel to the left (not ready)\r\n\tif ( jQuery('body').hasClass('rtl') ) {\r\n\t\tvar totalWidthOption = 0;\r\n\t\tvar totalWidthGroup = 0;\r\n\t\tvar totalWidth = 0;\r\n\r\n\t\tjQuery('.dslca-module-edit-options-wrapper > .dslca-module-edit-option:visible').each(function(index) {\r\n\t\t\tif ( ! jQuery(this).hasClass('dslca-module-edit-option-hidden') && ! jQuery(this).hasClass('dslca-module-control-group') ) {\r\n\t\t\t\ttotalWidthOption += parseInt(jQuery(this).outerWidth(), 10);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tjQuery('.dslca-module-edit-options-wrapper > .dslca-module-control-group:visible').each(function(index) {\r\n\t\t\ttotalWidthGroup += parseInt(jQuery(this).outerWidth(), 10);\r\n\t\t});\r\n\r\n\t\ttotalWidth = parseInt(totalWidthOption) + parseInt(totalWidthGroup) + 10;\r\n\r\n\t\tjQuery('.dslca-module-edit-options-wrapper').css({\r\n\t\t\t'width': totalWidth + 'px',\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Hide show tabs based on option choices\r\n */\r\nfunction dslc_module_options_hideshow_tabs() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_hideshow_tabs' );\r\n\r\n\tvar dslcSectionID = jQuery('.dslca-options-filter-hook.dslca-active').data('section');\r\n\r\n\tif ( dslcSectionID == 'styling' ) {\r\n\r\n\t\t// Vars\r\n\t\tvar dslcContainer = jQuery('.dslca-module-edit'),\r\n\t\tdslcHeading = true,\r\n\t\tdslcFilters = true,\r\n\t\tdslcCarArrows = true,\r\n\t\tdslcCarCircles = true,\r\n\t\tdslcPagination = true,\r\n\t\tdslcElThumb = true,\r\n\t\tdslcElTitle = true,\r\n\t\tdslcElExcerpt = true,\r\n\t\tdslcElMeta = true,\r\n\t\tdslcElButton = true,\r\n\t\tdslcElCats = true,\r\n\t\tdslcElCount = true,\r\n\t\tdslcElSeparator = true,\r\n\t\tdslcElTags = true,\r\n\t\tdslcElSocial = true,\r\n\t\tdslcElPosition = true,\r\n\t\tdslcElIcon = true,\r\n\t\tdslcElContent = true,\r\n\t\tdslcElPrice = true,\r\n\t\tdslcElPriceSec = true,\r\n\t\tdslcElAddCart = true,\r\n\t\tdslcElDetails = true,\r\n\t\tdslcElQuote = true,\r\n\t\tdslcElAuthorName = true,\r\n\t\tdslcElAuthorPos = true,\r\n\t\tdslcElImage = true,\r\n\t\tdslcElLogo = true;\r\n\r\n\r\n\t\t// Is heading selected?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[value=\"main_heading\"]').is(':checked') )\r\n\t\t\tdslcHeading = false;\r\n\r\n\t\t// Are filters selected?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[value=\"filters\"]').is(':checked') )\r\n\t\t\tdslcFilters = false;\r\n\r\n\t\t// Are arrows selected?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[value=\"arrows\"]').is(':checked') )\r\n\t\t\tdslcCarArrows = false;\r\n\r\n\t\t// Are circles selected?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[value=\"circles\"]').is(':checked') )\r\n\t\t\tdslcCarCircles = false;\r\n\r\n\t\t// Is it a carousel?\r\n\t\tif ( jQuery('.dslca-module-edit-field[data-id=\"type\"]').val() != 'carousel' ) {\r\n\t\t\tdslcCarArrows = false;\r\n\t\t\tdslcCarCircles = false;\r\n\t\t}\r\n\r\n\t\t// Is pagination enabled?\r\n\t\tif ( jQuery('.dslca-module-edit-field[data-id=\"pagination_type\"]').val() == 'disabled' ) {\r\n\t\t\tdslcPagination = false;\r\n\t\t}\r\n\r\n\t\t// Is thumb enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"thumbnail\"]').is(':checked') ) {\r\n\t\t\tdslcElThumb = false;\r\n\t\t}\r\n\r\n\t\t// Is title enabled?\r\n\t\tif ( jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"content\"]').length && ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"title\"]').is(':checked') ) {\r\n\t\t\tdslcElTitle = false;\r\n\t\t}\r\n\r\n\t\t// Is excerpt enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"excerpt\"]').is(':checked') ) {\r\n\t\t\tdslcElExcerpt = false;\r\n\t\t}\r\n\r\n\t\t// Is meta enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"meta\"]').is(':checked') ) {\r\n\t\t\tdslcElMeta = false;\r\n\t\t}\r\n\r\n\t\t// Is button enabled?\r\n\t\tif ( jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"button\"]').length && ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"button\"]').is(':checked') ) {\r\n\t\t\tdslcElButton = false;\r\n\t\t}\r\n\r\n\t\t// Are cats enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"categories\"]').is(':checked') ) {\r\n\t\t\tdslcElCats = false;\r\n\t\t}\r\n\r\n\t\t// Is separator enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"separator\"]').is(':checked') ) {\r\n\t\t\tdslcElSeparator = false;\r\n\t\t}\r\n\r\n\t\t// Is count enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"count\"]').is(':checked') ) {\r\n\t\t\tdslcElCount = false;\r\n\t\t}\r\n\r\n\t\t// Are tags enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"tags\"]').is(':checked') ) {\r\n\t\t\tdslcElTags = false;\r\n\t\t}\r\n\r\n\t\t// Are social link enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"social\"]').is(':checked') ) {\r\n\t\t\tdslcElSocial = false;\r\n\t\t}\r\n\r\n\t\t// Is position enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"position\"]').is(':checked') ) {\r\n\t\t\tdslcElPosition = false;\r\n\t\t}\r\n\r\n\t\t// Is icon enabled?\r\n\t\tif ( jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"icon\"]').length && ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"icon\"]').is(':checked') ) {\r\n\t\t\tdslcElIcon = false;\r\n\t\t}\r\n\r\n\t\t// Is content enabled?\r\n\t\tif (  jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"content\"]').length && ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"content\"]').is(':checked') ) {\r\n\t\t\tdslcElContent = false;\r\n\t\t}\r\n\r\n\t\t// Is price enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"price\"]').is(':checked') ) {\r\n\t\t\tdslcElPrice = false;\r\n\t\t}\r\n\r\n\t\t// Is price secondary enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"price_2\"]').is(':checked') ) {\r\n\t\t\tdslcElPriceSec = false;\r\n\t\t}\r\n\r\n\t\t// Is add to cart enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"addtocart\"]').is(':checked') ) {\r\n\t\t\tdslcElAddCart = false;\r\n\t\t}\r\n\r\n\t\t// Is add to cart enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"details\"]').is(':checked') ) {\r\n\t\t\tdslcElDetails = false;\r\n\t\t}\r\n\r\n\t\t// Is quote enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"quote\"]').is(':checked') ) {\r\n\t\t\tdslcElQuote = false;\r\n\t\t}\r\n\r\n\t\t// Is author name enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"author_name\"]').is(':checked') ) {\r\n\t\t\tdslcElAuthorName = false;\r\n\t\t}\r\n\r\n\t\t// Is author position enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"author_position\"]').is(':checked') ) {\r\n\t\t\tdslcElAuthorPos = false;\r\n\t\t}\r\n\r\n\t\t// Is image enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"image\"]').is(':checked') ) {\r\n\t\t\tdslcElImage = false;\r\n\t\t}\r\n\r\n\t\t// Is logo enabled?\r\n\t\tif ( ! jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"logo\"]').is(':checked') ) {\r\n\t\t\tdslcElLogo = false;\r\n\t\t}\r\n\r\n\r\n\t\t// Show/Hide Heading\r\n\t\tif ( dslcHeading )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"heading_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"heading_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Filters\r\n\t\tif ( dslcFilters )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"filters_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"filters_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Carousel Arrows\r\n\t\tif ( dslcCarArrows )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"carousel_arrows_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"carousel_arrows_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Carousel Circles\r\n\t\tif ( dslcCarCircles )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"carousel_circles_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"carousel_circles_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Pagination\r\n\t\tif ( dslcPagination )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"pagination_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"pagination_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Thumb\r\n\t\tif ( dslcElThumb )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"thumbnail_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"thumbnail_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Title\r\n\t\tif ( dslcElTitle )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"title_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"title_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Excerpt\r\n\t\tif ( dslcElExcerpt )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"excerpt_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"excerpt_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Meta\r\n\t\tif ( dslcElMeta )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"meta_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"meta_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Button\r\n\t\tif ( dslcElButton )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"button_styling\"], .dslca-module-edit-options-tab-hook[data-id=\"primary_button_styling\"],'+\r\n\t\t\t\t' .dslca-module-edit-options-tab-hook[data-id=\"secondary_button_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"button_styling\"], .dslca-module-edit-options-tab-hook[data-id=\"primary_button_styling\"],'+\r\n\t\t\t\t' .dslca-module-edit-options-tab-hook[data-id=\"secondary_button_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Cats\r\n\t\tif ( dslcElCats )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"categories_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"categories_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Separator\r\n\t\tif ( dslcElSeparator )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"separator_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"separator_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Count\r\n\t\tif ( dslcElCount )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"count_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"count_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Tags\r\n\t\tif ( dslcElTags )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"tags_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"tags_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Tags\r\n\t\tif ( dslcElPosition )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"position_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"position_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Tags\r\n\t\tif ( dslcElSocial )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"social_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"social_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Icon\r\n\t\tif ( dslcElIcon )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"icon_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"icon_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Content\r\n\t\tif ( dslcElContent )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"content_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"content_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Price\r\n\t\tif ( dslcElPrice )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"price_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"price_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Price Sec\r\n\t\tif ( dslcElPriceSec )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"price_secondary_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"price_secondary_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Add to Cart\r\n\t\tif ( dslcElAddCart || dslcElDetails )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"other_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"other_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Quote\r\n\t\tif ( dslcElQuote )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"quote_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"quote_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Author Name\r\n\t\tif ( dslcElAuthorName )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"author_name_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"author_name_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Author Position\r\n\t\tif ( dslcElAuthorPos )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"author_position_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"author_position_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Image\r\n\t\tif ( dslcElImage )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"image_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"image_styling\"]').hide();\r\n\r\n\t\t// Show/Hide Quote\r\n\t\tif ( dslcElLogo )\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"logo_styling\"]').show();\r\n\t\telse\r\n\t\t\tjQuery('.dslca-module-edit-options-tab-hook[data-id=\"logo_styling\"]').hide();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Check 'Enable/Disable Custom CSS' control\r\n\t */\r\n\r\n\tif ( jQuery('.dslca-options-filter-hook[data-section=\"styling\"]').hasClass('dslca-active') ) {\r\n\r\n\t\tvar dslcCustomCSS = jQuery('.dslca-module-edit-option[data-id=\"css_custom\"]'),\r\n\t\tdslcCustomCSSVal = dslcCustomCSS.find('select').val();\r\n\r\n\t\tif ( dslcCustomCSSVal == 'enabled' ) {\r\n\r\n\t\t\tjQuery('.dslca-module-edit-option[data-section=\"styling\"]').css({ visibility : 'visible' });\r\n\t\t\tjQuery('.dslca-module-edit-option[data-tab]').css( 'visibility', 'visible' );\r\n\t\t\tjQuery('.dslca-module-edit-options-tabs').show();\r\n\t\t} else {\r\n\t\t\tjQuery('.dslca-module-edit-option[data-section=\"styling\"]').css({ visibility : 'hidden' });\r\n\t\t\tjQuery('.dslca-module-control-group.dslca-module-edit-option').css( 'visibility', 'hidden' );\r\n\t\t\tjQuery('.dslca-module-edit-options-tabs').hide();\r\n\t\t\tdslcCustomCSS.css({ visibility : 'visible' });\r\n\t\t}\r\n\r\n\t} else {\r\n\t\tjQuery('.dslca-module-edit-options-tabs').show();\r\n\t}\r\n\r\n\tif ( jQuery('select.dslca-module-edit-field[data-id=\"css_res_t\"]').val() == 'disabled' ) {\r\n\t\tjQuery('.dslca-module-edit-option[data-id*=\"css_res_t\"]').css( 'visibility', 'hidden' );\r\n\t\tjQuery('.dslca-module-edit-option[data-tab=\"tablet_responsive\"]').css( 'visibility', 'hidden' );\r\n\t} else {\r\n\t\tjQuery('.dslca-module-edit-option[data-id*=\"css_res_t\"]').css( 'visibility', 'visible' );\r\n\t\tjQuery('.dslca-module-edit-option[data-tab=\"tablet_responsive\"]').css( 'visibility', 'visible' );\r\n\t}\r\n\r\n\tif ( jQuery('select.dslca-module-edit-field[data-id=\"css_res_p\"]').val() == 'disabled' ) {\r\n\t\tjQuery('.dslca-module-edit-option[data-id*=\"css_res_p\"]').css( 'visibility', 'hidden' );\r\n\t\tjQuery('.dslca-module-edit-option[data-tab=\"phone_responsive\"]').css( 'visibility', 'hidden' );\r\n\t} else {\r\n\t\tjQuery('.dslca-module-edit-option[data-id*=\"css_res_p\"]').css( 'visibility', 'visible' );\r\n\t\tjQuery('.dslca-module-edit-option[data-tab=\"phone_responsive\"]').css( 'visibility', 'visible' );\r\n\t}\r\n\r\n\tjQuery('.dslca-module-edit-option[data-id=\"css_res_p\"], .dslca-module-edit-option[data-id=\"css_res_t\"]').css( 'visibility', 'visible' );\r\n\r\n\r\n\tif ( jQuery('.dslca-options-filter-hook').hasClass('dslca-active') ) {\r\n\t\tvar section_tab = jQuery('.dslca-options-filter-hook.dslca-active').data('section');\r\n\r\n\t\tif ( jQuery('.dslca-module-edit-option[data-section=\"' + section_tab + '\"]').hasClass('dep-show') ) {\r\n\t\t\tjQuery('.dslca-module-edit-option.dep-show').show();\r\n\t\t}\r\n\r\n\t\tif ( jQuery('.dslca-module-edit-option[data-section=\"' + section_tab + '\"]').hasClass('dep-hide') ) {\r\n\t\t\tjQuery('.dslca-module-edit-option.dep-hide').hide();\r\n\t\t}\r\n\t}\r\n\r\n\tif ( jQuery('.dslca-module-edit-options-tab-hook').hasClass('dslca-active') ) {\r\n\t\tvar data_tab = jQuery('.dslca-module-edit-options-tab-hook.dslca-active').data('id');\r\n\r\n\t\tif ( jQuery('.dslca-module-edit-option[data-tab=\"' + data_tab + '\"]').hasClass('dependent') ) {\r\n\r\n\t\t\tjQuery('.dslca-module-edit-option.dependent').hide();\r\n\t\t\tjQuery('.dslca-module-edit-option[data-tab=\"' + data_tab + '\"].dep-show').show();\r\n\t\t\tjQuery('.dslca-module-edit-option[data-tab=\"' + data_tab + '\"].dep-hide').hide();\r\n\t\t} else {\r\n\r\n\t\t\tjQuery('.dslca-module-edit-option.dependent').hide();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Confirm module options changes\r\n */\r\nfunction dslc_module_options_confirm_changes( callback ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_confirm_changes' );\r\n\r\n\t// Callback\r\n\tcallback = typeof callback !== 'undefined' ? callback : false;\r\n\r\n\t// If slider module\r\n\tif ( jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument).hasClass('dslc-module-DSLC_Sliders') ) {\r\n\r\n\t\tjQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\t// If not slider module\r\n\t} else {\r\n\r\n\t\t// Add class so we know saving is in progress\r\n\t\tjQuery('body').addClass('dslca-module-saving-in-progress');\r\n\r\n\t\t// Reload module with new settings\r\n\t\tmoduleOutputAltered( function(){\r\n\r\n\t\t\t// Update preset\r\n\t\t\tupdatePreset();\r\n\r\n\t\t\twindow.dslc_generate_code();\r\n\r\n\t\t\tjQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\r\n\t\t\t// Remove classes so we know saving finished\r\n\t\t\tjQuery('body').removeClass('dslca-module-saving-in-progress');\r\n\r\n\t\t\t// Clean up options container\r\n\t\t\tjQuery('.dslca-module-edit-options-inner').html('');\r\n\t\t\tjQuery('.dslca-module-edit-options-tabs').html('');\r\n\r\n\t\t\twindow.LiveComposer.Builder.UI.clearUtils();\r\n\r\n\t\t\t// Callback if there's one\r\n\t\t\tif ( callback ) { callback(); }\r\n\t\t});\r\n\t}\r\n\r\n\t// Show modules listing\r\n\tshowSection('.dslca-modules');\r\n\r\n\t// Hide the filter hooks\r\n\tjQuery('.dslca-header .dslca-options-filter-hook').hide();\r\n\r\n\t// Hide the save/cancel actions\r\n\tjQuery('.dslca-module-edit-actions').hide();\r\n\r\n\t// Show the section hooks\r\n\tjQuery('.dslca-header .dslca-go-to-section-hook').show();\r\n\r\n\t// window.dslc_generate_code();\r\n\t// Show the publish button\r\n\twindow.dslc_show_publish_button();\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Cancel module options changes\r\n */\r\nfunction dslc_module_options_cancel_changes( callback ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_cancel_changes' );\r\n\r\n\t// Callback\r\n\tcallback = typeof callback !== 'undefined' ? callback : false;\r\n\r\n\t// Vars\r\n\tvar editedModule = jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument);\r\n\r\n\t// Add backup option values\r\n\tjQuery('.dslca-module-options-front', editedModule).html('').append(window.LiveComposer.Builder.moduleBackup);\r\n\t// window.LiveComposer.Builder.moduleBackup = false;\r\n\r\n\t// Reload module\r\n\tmoduleOutputAltered( function(){\r\n\t\twindow.dslc_generate_code();\r\n\r\n\t\tjQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\r\n\r\n\t\t// Clean up options container\r\n\t\tjQuery('.dslca-module-edit-options-inner').html('');\r\n\t\tjQuery('.dslca-module-edit-options-tabs').html('');\r\n\r\n\t\twindow.LiveComposer.Builder.UI.clearUtils();\r\n\r\n\t\tif ( callback ) { callback(); }\r\n\t});\r\n\r\n\t// Show modules listing\r\n\tshowSection('.dslca-modules');\r\n\r\n\t// Hide the filter hooks\r\n\tjQuery('.dslca-header .dslca-options-filter-hook').hide();\r\n\r\n\t// Hide the save/cancel actions\r\n\tjQuery('.dslca-module-edit-actions').hide();\r\n\r\n\t// Show the section hooks\r\n\tjQuery('.dslca-header .dslca-go-to-section-hook').show();\r\n\r\n\t// Show the publish button\r\n\twindow.dslc_show_publish_button();\r\n\r\n\twindow.LiveComposer.Builder.UI.clearUtils();\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Option Tooltips\r\n */\r\nfunction dslc_module_options_tooltip() {\r\n\r\n\t// Close Tooltip\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-field-ttip-close', function(){\r\n\t\tjQuery('.dslca-module-edit-field-ttip, .dslca-module-edit-field-icon-ttip').hide();\r\n\t});\r\n\r\n\t// Show Tooltip\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-field-ttip-hook', function(){\r\n\r\n\t\tvar dslcTtip = jQuery('.dslca-module-edit-field-ttip'),\r\n\t\tdslcTtipInner = dslcTtip.find('.dslca-module-edit-field-ttip-inner'),\r\n\t\tdslcHook = jQuery(this),\r\n\t\tdslcTtipContent,\r\n\t\tdslcLabel;\r\n\r\n\t\tdslcLabel = dslcHook.parent();\r\n\r\n\t\tif ( dslcLabel.parent().hasClass('dslca-modules-section-edit-option') ) {\r\n\t\t\tdslcTtipContent = dslcHook.closest('.dslca-modules-section-edit-option').find('.dslca-module-edit-field-ttip-content').html();\r\n\t\t} else {\r\n\t\t\tdslcTtipContent = dslcHook.closest('.dslca-module-edit-option').find('.dslca-module-edit-field-ttip-content').html();\r\n\t\t}\r\n\r\n\t\tif ( dslcTtip.is(':visible') ) {\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-ttip').hide();\r\n\t\t} else {\r\n\r\n\t\t\tdslcTtipInner.html( dslcTtipContent );\r\n\r\n\t\t\tvar dslcOffset = dslcHook.offset();\r\n\t\t\tvar dslcTtipHeight = dslcTtip.outerHeight();\r\n\t\t\tvar dslcTtipWidth = dslcTtip.outerWidth();\r\n\t\t\tvar dslcTtipLeft = dslcOffset.left - ( dslcTtipWidth / 2 ) + 6;\r\n\t\t\tvar dslcTtipArrLeft = '50%';\r\n\r\n\t\t\tif ( dslcTtipLeft < 0 ) {\r\n\r\n\t\t\t\tdslcTtipArrLeft = ( dslcTtipWidth / 2 ) + dslcTtipLeft + 'px';\r\n\t\t\t\tdslcTtipLeft = 0;\r\n\t\t\t}\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-ttip').show().css({\r\n\t\t\t\ttop : dslcOffset.top - dslcTtipHeight - 20,\r\n\t\t\t\tleft: dslcTtipLeft\r\n\t\t\t});\r\n\r\n\t\t\tjQuery(\"head\").append(jQuery('<style>.dslca-module-edit-field-ttip:after, .dslca-module-edit-field-ttip:before { left: ' + dslcTtipArrLeft + ' }</style>'));\r\n\t\t}\r\n\t});\r\n\r\n\t// Show Tooltip ( Icon Options )\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-field-icon-ttip-hook', function(){\r\n\r\n\t\tvar dslcTtip = jQuery('.dslca-module-edit-field-icon-ttip');\r\n\t\tvar dslcHook = jQuery(this);\r\n\r\n\t\tif ( dslcTtip.is(':visible') ) {\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-icon-ttip').hide();\r\n\t\t} else {\r\n\r\n\t\t\tvar dslcOffset = dslcHook.offset();\r\n\t\t\tvar dslcTtipHeight = dslcTtip.outerHeight();\r\n\t\t\tvar dslcTtipWidth = dslcTtip.outerWidth();\r\n\t\t\tvar dslcTtipLeft = dslcOffset.left - ( dslcTtipWidth / 2 ) + 6;\r\n\t\t\tvar dslcTtipArrLeft = '50%';\r\n\r\n\t\t\tif ( dslcTtipLeft < 0 ) {\r\n\r\n\t\t\t\tdslcTtipArrLeft = ( dslcTtipWidth / 2 ) + dslcTtipLeft + 'px';\r\n\t\t\t\tdslcTtipLeft = 0;\r\n\t\t\t}\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-icon-ttip').show().css({\r\n\t\t\t\ttop : dslcOffset.top - dslcTtipHeight - 20,\r\n\t\t\t\tleft: dslcTtipLeft\r\n\t\t\t});\r\n\r\n\t\t\tjQuery(\"head\").append(jQuery('<style>.dslca-module-edit-field-icon-ttip:after, .dslca-module-edit-field-icon-ttip:before { left: ' + dslcTtipArrLeft + ' }</style>'));\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Font option type\r\n */\r\nwindow.dslc_module_options_font = function () {\r\n\t// Next Font\r\n\tjQuery(document).off( 'click', '.dslca-module-edit-field-font-next' ).on( 'click', '.dslca-module-edit-field-font-next', nextFont );\r\n\tfunction nextFont(e){\r\n\t\te.preventDefault();\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-font-loading') && ! jQuery(this).siblings('.dslca-font-loading').length ) {\r\n\r\n\t\t\tvar dslcOption = jQuery(this).closest('.dslca-module-edit-option-font');\r\n\t\t\tvar dslcField = jQuery( '.dslca-module-edit-field-font', dslcOption );\r\n\t\t\tvar dslcCurrIndex = dslcAllFontsArray.indexOf( dslcField.val() );\r\n\t\t\tvar dslcNewIndex = dslcCurrIndex + 1;\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-font-suggest', dslcOption).text('');\r\n\r\n\t\t\tdslcField.val( dslcAllFontsArray[dslcNewIndex] ).trigger('change');\r\n\r\n\t\t\tjQuery(this).addClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-chevron-right').addClass('dslc-icon-refresh dslc-icon-spin');\r\n\t\t}\r\n\t};\r\n\r\n\t// Previous Font\r\n\tjQuery(document).off( 'click', '.dslca-module-edit-field-font-prev' ).on( 'click', '.dslca-module-edit-field-font-prev', prevFont );\r\n\tfunction prevFont(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif ( ! jQuery(this).hasClass('dslca-font-loading') && ! jQuery(this).siblings('.dslca-font-loading').length ) {\r\n\r\n\t\t\tvar dslcOption = jQuery(this).closest('.dslca-module-edit-option-font');\r\n\t\t\tvar dslcField = jQuery( '.dslca-module-edit-field-font', dslcOption );\r\n\t\t\tvar dslcCurrIndex = dslcAllFontsArray.indexOf( dslcField.val() );\r\n\t\t\tvar dslcNewIndex = dslcCurrIndex - 1;\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-font-suggest', dslcOption).text('');\r\n\r\n\t\t\tif ( dslcNewIndex < 0 ) {\r\n\r\n\t\t\t\tdslcNewIndex = dslcAllFontsArray.length - 1\r\n\t\t\t}\r\n\r\n\t\t\tdslcField.val( dslcAllFontsArray[dslcNewIndex] ).trigger('change');\r\n\r\n\t\t\tjQuery(this).addClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-chevron-left').addClass('dslc-icon-refresh dslc-icon-spin');\r\n\t\t}\r\n\t};\r\n\r\n\tjQuery(document).off( 'blur', '.dslca-module-edit-field-font' ).on( 'blur', '.dslca-module-edit-field-font', onFieldBlur );\r\n\tfunction onFieldBlur(e) {\r\n\t\tvar dslcOption = jQuery(this).closest('.dslca-module-edit-option');\r\n\t\tjQuery('.dslca-module-edit-field-font-suggest', dslcOption).hide();\r\n\t}\r\n\r\n\tjQuery(document).off( 'keyup', '.dslca-module-edit-field-font' ).on( 'keyup', '.dslca-module-edit-field-font', onKeyUp );\r\n\t// Keyup ( left arrow, right arrow, else )\r\n\tfunction onKeyUp(e) {\r\n\t\tvar dslcField, dslcOption, dslcVal, dslcMatchingFont = false, dslcFont;\r\n\r\n\t\tdslcField = jQuery(this);\r\n\t\tdslcOption = dslcField.closest('.dslca-module-edit-option');\r\n\r\n\t\t// Arrow Up.\r\n\t\tif ( e.which == 38 ) {\r\n\t\t\tjQuery('.dslca-module-edit-field-font-prev', dslcOption).click();\r\n\t\t}\r\n\r\n\t\t// Arrow Down.\r\n\t\tif ( e.which == 40 ) {\r\n\t\t\tjQuery('.dslca-module-edit-field-font-next', dslcOption).click();\r\n\t\t}\r\n\r\n\t\tif ( e.which != 13 && e.which != 38 && e.which != 40 ) {\r\n\r\n\t\t\tdslcVal = dslcField.val();\r\n\r\n\t\t\tvar search = [];\r\n\t\t\tvar re = new RegExp('^' + dslcVal, 'i');\r\n\t\t\tvar dslcFontsAmount = dslcAllFontsArray.length;\r\n\t\t\tvar i = 0;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tif (re.test(dslcAllFontsArray[i])) {\r\n\t\t\t\t\tif ( ! dslcMatchingFont ) {\r\n\t\t\t\t\t\tvar dslcMatchingFont = dslcAllFontsArray[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\ti++; } while (i < dslcFontsAmount);\r\n\r\n\t\t\tif ( ! dslcMatchingFont ) {\r\n\t\t\t\tdslcFont = dslcVal;\r\n\t\t\t\tjQuery('.dslca-module-edit-field-font-suggest', dslcOption).hide();\r\n\t\t\t} else if ( dslcVal !== dslcMatchingFont ) {\r\n\t\t\t\tdslcFont = dslcMatchingFont;\r\n\t\t\t\tjQuery('.dslca-module-edit-field-font-suggest', dslcOption).show();\r\n\t\t\t}\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-font-suggest', dslcOption).text( dslcFont );\r\n\r\n\t\t\tif ( dslcFont.length ){\r\n\t\t\t\tdslcField.val( dslcFont.substring( 0 , dslcField.val().length ) );\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tjQuery(document).off( 'keydown', '.dslca-module-edit-field-font' ).on( 'keydown', '.dslca-module-edit-field-font', onPushEnter );\r\n\t// Key press ( enter = 13 and tab = 9 )\r\n\tfunction onPushEnter(e) {\r\n\t\tif ( e.which == 13 || e.which == 9 ) {\r\n\t\t\tvar dslcField, dslcOption, dslcVal, dslcMatchingFont, dslcFont;\r\n\r\n\t\t\tdslcField = jQuery(this);\r\n\t\t\tdslcOption = dslcField.closest('.dslca-module-edit-option');\r\n\r\n\t\t\tvar suggestedFont = jQuery('.dslca-module-edit-field-font-suggest', dslcOption).text();\r\n\r\n\t\t\tif ( suggestedFont.length ) {\r\n\t\t\t\tjQuery(this).val( jQuery('.dslca-module-edit-field-font-suggest', dslcOption).text() ).trigger('change');\r\n\t\t\t\tjQuery('.dslca-module-edit-field-font-suggest', dslcOption).text('');\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n/*\r\n * MODULES SETTINGS PANEL - Change icon code based on direction (next/previous)\r\n */\r\nfunction dslc_list_icon( object, direction ) {\r\n\r\n\tvar dslcOption = jQuery(object).closest('.dslca-module-edit-option-icon');\r\n\tvar dslcField = jQuery( '.dslca-module-edit-field-icon', dslcOption );\r\n\tvar dslcCurrIndex = dslcIconsCurrentSet.indexOf( dslcField.val() );\r\n\r\n\tif ( direction == 'previous' ) {\r\n\r\n\t\tvar dslcNewIndex = dslcCurrIndex - 1;\r\n\t} else {\r\n\r\n\t\tvar dslcNewIndex = dslcCurrIndex + 1;\r\n\t}\r\n\r\n\tjQuery('.dslca-module-edit-field-icon-suggest', dslcOption).text('');\r\n\r\n\tif ( dslcNewIndex < 0 ) {\r\n\r\n\t\tdslcNewIndex = dslcIconsCurrentSet.length - 1\r\n\t}\r\n\r\n\tdslcField.val( dslcIconsCurrentSet[dslcNewIndex] ).trigger('change');\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Icon option type\r\n */\r\nfunction dslc_module_options_icon() {\r\n\r\n\t// Key Up ( arrow up, arrow down, else )\r\n\r\n\tjQuery(document).on( 'keyup', '.dslca-module-edit-field-icon', function(e) {\r\n\r\n\t\tvar dslcField, dslcOption, dslcVal, dslcIconsArrayGrep, dslcIcon;\r\n\r\n\t\tdslcField = jQuery(this);\r\n\t\tdslcOption = dslcField.closest('.dslca-module-edit-option');\r\n\r\n\t\t// Key pressed: arrow up\r\n\t\tif ( e.which == 38 ) {\r\n\r\n\t\t\tdslc_list_icon(dslcField,'previous');\r\n\t\t}\r\n\r\n\t\t// Key pressed: arrow down\r\n\t\tif ( e.which == 40 ) {\r\n\r\n\t\t\tdslc_list_icon(dslcField,'next');\r\n\t\t}\r\n\r\n\t\tif ( e.which != 13 && e.which != 38 && e.which != 40 ) {\r\n\r\n\t\t\tdslcVal = dslcField.val().toLowerCase();\r\n\t\t\tdslcField.val( dslcVal );\r\n\r\n\t\t\tdslcIconsArrayGrep = jQuery.grep(dslcIconsCurrentSet, function(value, i) {\r\n\t\t\t\treturn ( value.indexOf( dslcVal ) == 0 );\r\n\t\t\t});\r\n\r\n\t\t\tdslcIcon = dslcIconsArrayGrep[0];\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-icon-suggest', dslcOption).text( dslcIcon );\r\n\t\t}\r\n\t});\r\n\r\n\t// Key Press ( Enter )\r\n\r\n\tjQuery(document).on( 'keypress', '.dslca-module-edit-field-icon', function(e) {\r\n\r\n\t\tif ( e.which == 13 ) {\r\n\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar dslcField, dslcOption, dslcVal, dslcIconsArrayGrep, dslcIcon;\r\n\r\n\t\t\tdslcField = jQuery(this);\r\n\t\t\tdslcOption = dslcField.closest('.dslca-module-edit-option');\r\n\r\n\t\t\tjQuery(this).val( jQuery('.dslca-module-edit-field-icon-suggest', dslcOption).text() ).trigger('change');\r\n\r\n\t\t\tjQuery('.dslca-module-edit-field-icon-suggest', dslcOption).text('');\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - return options id\r\n */\r\nfunction dslc_module_options_icon_returnid() {\r\n\r\n\tjQuery(document).on('click', '.dslca-open-modal-hook[data-modal^=\".dslc-list-icons\"]', function(el) {\r\n\t\tjQuery(this).closest('.dslca-module-edit-option-icon').find('input').addClass('icon-modal-active');\r\n\t});\r\n\r\n\tjQuery(document).on('click', '.dslca-modal-icons .icon-item', function(el) {\r\n\r\n\t\t// Get selected item code\r\n\t\tvar selectedIconCode = jQuery(this).find('.icon-item_name').text();\r\n\t\tjQuery('input.icon-modal-active').val(selectedIconCode).change();\r\n\r\n\t\t// Close modal window\r\n\t\thideModal( '', jQuery('.dslca-modal:visible') );\r\n\t\tjQuery('input.icon-modal-active').removeClass('icon-modal-active');\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Text align option type\r\n */\r\nfunction dslc_module_options_text_align() {\r\n\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-option-text-align-hook', function(){\r\n\r\n\t\tvar newOpt = jQuery(this),\r\n\t\totherOpt = jQuery(this).closest('.dslca-module-edit-option-text-align-wrapper').find('.dslca-module-edit-option-text-align-hook'),\r\n\t\tnewVal = newOpt.data('val'),\r\n\t\trealOpt = jQuery(this).closest('.dslca-module-edit-option-text-align-wrapper').siblings('input.dslca-module-edit-field');\r\n\r\n\t\totherOpt.removeClass('dslca-active');\r\n\t\tnewOpt.addClass('dslca-active');\r\n\r\n\t\trealOpt.val( newVal ).trigger('change');\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Checkbox Option Type\r\n */\r\nfunction dslc_module_options_checkbox() {\r\n\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-option-checkbox-hook, .dslca-modules-section-edit-option-checkbox-hook', function(){\r\n\r\n\t\tvar checkFake = jQuery(this);\r\n\t\tvar checkReal = checkFake.siblings('input[type=\"checkbox\"]');\r\n\r\n\t\tif ( checkReal.prop('checked') ) {\r\n\t\t\tcheckReal.prop('checked', false);\r\n\t\t\tcheckFake.find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\r\n\t\t} else {\r\n\t\t\tcheckReal.prop('checked', true);\r\n\t\t\tcheckFake.find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\r\n\t\t}\r\n\r\n\t\tcheckReal.change();\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Box Shadow Option Type\r\n */\r\nfunction dslc_module_options_box_shadow() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_box_shadow' );\r\n\r\n\t/**\r\n\t * Value Change\r\n\t */\r\n\r\n\tjQuery(document).on( 'change', '.dslca-module-edit-option-box-shadow-hor, '+\r\n\t\t'.dslca-module-edit-option-box-shadow-ver, .dslca-module-edit-option-box-shadow-blur, .dslca-module-edit-option-box-shadow-spread,'+\r\n\t\t' .dslca-module-edit-option-box-shadow-color, .dslca-module-edit-option-box-shadow-inset', function(){\r\n\r\n\t\tvar boxShadowWrapper = jQuery(this).closest('.dslca-module-edit-option'),\r\n\t\tboxShadowInput = boxShadowWrapper.find('.dslca-module-edit-field'),\r\n\t\tboxShadowHor = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-hor').val(),\r\n\t\tboxShadowVer = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-ver').val(),\r\n\t\tboxShadowBlur = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-blur').val(),\r\n\t\tboxShadowSpread = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-spread').val(),\r\n\t\tboxShadowColor = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-color').val(),\r\n\t\tboxShadowInset = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-inset').is(':checked');\r\n\r\n\t\tif ( boxShadowInset ) { boxShadowInset = ' inset'; } else { boxShadowInset = ''; }\r\n\r\n\t\tvar boxShadowVal = boxShadowHor + 'px ' + boxShadowVer + 'px ' + boxShadowBlur + 'px ' + boxShadowSpread + 'px ' + boxShadowColor + boxShadowInset;\r\n\r\n\t\tboxShadowInput.val( boxShadowVal ).trigger('change');\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Text Shadow Option Type\r\n */\r\nfunction dslc_module_options_text_shadow() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_text_shadow' );\r\n\r\n\t/**\r\n\t * Value Change\r\n\t */\r\n\r\n\tjQuery(document).on( 'change', '.dslca-module-edit-option-text-shadow-hor, .dslca-module-edit-option-text-shadow-ver,'+\r\n\t\t'.dslca-module-edit-option-text-shadow-blur, .dslca-module-edit-option-text-shadow-color', function(){\r\n\r\n\t\tvar textShadowWrapper = jQuery(this).closest('.dslca-module-edit-option'),\r\n\t\ttextShadowInput = textShadowWrapper.find('.dslca-module-edit-field'),\r\n\t\ttextShadowHor = textShadowWrapper.find('.dslca-module-edit-option-text-shadow-hor').val(),\r\n\t\ttextShadowVer = textShadowWrapper.find('.dslca-module-edit-option-text-shadow-ver').val(),\r\n\t\ttextShadowBlur = textShadowWrapper.find('.dslca-module-edit-option-text-shadow-blur').val(),\r\n\t\ttextShadowColor = textShadowWrapper.find('.dslca-module-edit-option-text-shadow-color').val();\r\n\r\n\t\tvar textShadowVal = textShadowHor + 'px ' + textShadowVer + 'px ' + textShadowBlur + 'px ' + textShadowColor;\r\n\r\n\t\ttextShadowInput.val( textShadowVal ).trigger('change');\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Color Option Type\r\n */\r\nfunction dslc_module_options_color( field ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_color' );\r\n\r\n\tvar dslcColorField,\r\n\tdslcAffectOnChangeEl,\r\n\tdslcAffectOnChangeRule,\r\n\tdslcColorFieldVal,\r\n\tdslcModule,\r\n\tdslcOptionID,\r\n\tdslcCurrColor;\r\n\r\n\t/**\r\n\t * Color Pallete.\r\n\t *\r\n\t * Last three selected colors get stored in the local storage\r\n\t * of the browser under the key 'dslcColors-example.com'.\r\n\t *\r\n\t * Beside latest three custom colors, color palette includes\r\n\t * three predefined/fixed colors: white, black and transparent.\r\n\t */\r\n\r\n\tvar dslcColorPallete = [],\r\n\tcurrStorage,\r\n\tindex;\r\n\r\n\tvar palleteCurrentDommain = 'dslcColors-' + document.domain\r\n\r\n\t// Get three recent colors from the local storage.\r\n\tif ( undefined !== localStorage[ palleteCurrentDommain ] ) {\r\n\t\tcurrStorage = JSON.parse( localStorage[ palleteCurrentDommain ] );\r\n\t\tdslcColorPallete = currStorage;\r\n\t}\r\n\r\n\t// Set default colors if not enough custom colors. Should be six.\r\n\tif ( 1 > dslcColorPallete.length ) {\r\n\t\tdslcColorPallete.push( '#78b' );\r\n\t}\r\n\r\n\tif ( 2 > dslcColorPallete.length ) {\r\n\t\tdslcColorPallete.push( '#ab0' );\r\n\t}\r\n\r\n\tif ( 3 > dslcColorPallete.length ) {\r\n\t\tdslcColorPallete.push( '#de3' );\r\n\t}\r\n\r\n\t// Add the next \"fixed\" colors to the end of the pallete.\r\n\tdslcColorPallete.push( '#fff' );\r\n\tdslcColorPallete.push( '#000' );\r\n\tdslcColorPallete.push( 'rgba(0,0,0,0)' );\r\n\r\n\tvar query = field;\r\n\r\n\t// For each color picker input field.\r\n\tjQuery(query).each( function(){\r\n\r\n\t\t// Set setting the conotrol wrapper.\r\n\t\tvar wrapper = jQuery(this).closest('.dslca-color-option');\r\n\t\tvar input = jQuery(this);\r\n\r\n\t\tdslcCurrColor = jQuery(this).val();\r\n\r\n\t\t/**\r\n\t\t * Init standard WP color pickers (Iris).\r\n\t\t *\r\n\t\t * See: http://automattic.github.io/Iris/\r\n\t\t * See: https://github.com/23r9i0/wp-color-picker-alpha\r\n\t\t */\r\n\t\tinput.wpColorPicker({\r\n\t\t\tmode: 'hsl',\r\n\t\t\tpalettes: dslcColorPallete,\r\n\t\t\tchange: function(event, ui) {\r\n\t\t\t\t// @todo: get the code below into a separate function!\r\n\t\t\t\t// The option field\r\n\t\t\t\tdslcColorField = input;\r\n\r\n\t\t\t\tvar color = input.wpColorPicker('color');\r\n\r\n\t\t\t\t// The new color\r\n\t\t\t\tif ( color == null ) {\r\n\t\t\t\t\tdslcColorFieldVal = '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdslcColorFieldVal = color;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Change current value of option\r\n\t\t\t\tdslcColorField.val( dslcColorFieldVal ).trigger('change');\r\n\r\n\t\t\t\t// Change input field background.\r\n\t\t\t\tdslcColorField.css('background', dslcColorFieldVal);\r\n\r\n\t\t\t\t// Live change\r\n\t\t\t\tdslcAffectOnChangeEl = dslcColorField.data('affect-on-change-el');\r\n\t\t\t\tdslcAffectOnChangeRule = dslcColorField.data('affect-on-change-rule');\r\n\r\n\t\t\t\t// ROWs doesn't have 'dslcAffectOnChangeEl' defined\r\n\t\t\t\tif ( null != dslcAffectOnChangeEl && '.dslca-modules-section-being-edited' !== dslcAffectOnChangeEl ) {\r\n\t\t\t\t\tjQuery( dslcAffectOnChangeEl , window.LiveComposer.Builder.PreviewAreaDocument.find('.dslca-module-being-edited') ).css( dslcAffectOnChangeRule , dslcColorFieldVal );\r\n\t\t\t\t}\r\n\t\t\t\t// Update option\r\n\t\t\t\tdslcModule = jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument);\r\n\t\t\t\tdslcOptionID = dslcColorField.data('id');\r\n\t\t\t\tjQuery('.dslca-module-option-front[data-id=\"' + dslcOptionID + '\"]', dslcModule).val( dslcColorFieldVal );\r\n\r\n\t\t\t\t// Add changed class\r\n\t\t\t\tdslcModule.addClass('dslca-module-change-made');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar colorPickerPopup = wrapper.find('.wp-picker-holder .iris-picker');\r\n\t\tcolorPickerPopup.append('<button type=\"button\" class=\"dslca-colorpicker-apply\">Apply</button>');\r\n\r\n\t\tvar apply = wrapper.find('.dslca-colorpicker-apply');\r\n\r\n\t\tinput.wpColorPicker( 'open' );\r\n\r\n\t\t// If [APPLY] button clicked...\r\n\t\tjQuery(apply).on('click', function() {\r\n\r\n\t\t\t// If new color is not one of the \"fixed\" colors...\r\n\t\t\tif ( '#fff' !== dslcColorFieldVal &&\r\n\t\t\t\t  '#ffffff' !== dslcColorFieldVal &&\r\n\t\t\t\t  '#000' !== dslcColorFieldVal &&\r\n\t\t\t\t  '#000000' !== dslcColorFieldVal &&\r\n\t\t\t\t  'rgba(0,0,0,0)' !== dslcColorFieldVal ) {\r\n\r\n\t\t\t\t// Update pallete colors in the local storage.\r\n\t\t\t\tif ( undefined === localStorage[ palleteCurrentDommain ] ) {\r\n\r\n\t\t\t\t\t// Create new record if no local storage found.\r\n\t\t\t\t\tvar newStorage = [ dslcColorFieldVal ];\r\n\t\t\t\t\tlocalStorage[ palleteCurrentDommain ] = JSON.stringify(newStorage);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Update existing record in the local storage.\r\n\t\t\t\t\tvar newStorage = JSON.parse( localStorage[ palleteCurrentDommain ] );\r\n\r\n\t\t\t\t\tif ( newStorage.indexOf( dslcColorFieldVal ) == -1 ) {\r\n\r\n\t\t\t\t\t\t// Add new color to the head of the pallete array.\r\n\t\t\t\t\t\tnewStorage.unshift( dslcColorFieldVal );\r\n\r\n\t\t\t\t\t\tif ( 3 < newStorage.length ) {\r\n\t\t\t\t\t\t\t// Remove the last color from the pallete.\r\n\t\t\t\t\t\t\tnewStorage.pop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlocalStorage[ palleteCurrentDommain ] = JSON.stringify(newStorage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tinput.wpColorPicker( 'close' );\r\n\t\t});\r\n\r\n\t\t// Save this element to destroy on panel closed.\r\n\t\twindow.LiveComposer.Builder.Helpers.colorpickers.push( jQuery(this) );\r\n\t});\r\n}\r\n\r\n/**\r\n * MODULES SETTINGS PANEL - Numeric Option Type\r\n */\r\nfunction dslc_module_options_numeric( fieldWrapper ) {\r\n\tif ( window.dslcDebug ) console.log( 'dslc_module_options_numeric' );\r\n\r\n\tvar query = fieldWrapper; // || '.dslca-module-edit-option-slider';\r\n\r\n\tjQuery(query).each(function(){\r\n\r\n\t\tvar controlWrapper = jQuery(this);\r\n\r\n\t\t/* Create an empty div to be uses by jQuery as the slider container. */\r\n\t\tif ( 0 === jQuery('.dslca-module-edit-field-slider', controlWrapper).length ) {\r\n\t\t\tcontrolWrapper.append('<div class=\"dslca-module-edit-field-slider\"></div>');\r\n\t\t}\r\n\r\n\t\tvar workingWithModule = true;\r\n\r\n\t\t/* Is the control part of the module setting panel or section settings? */\r\n\t\tif ( controlWrapper.hasClass('dslca-modules-section-edit-option') ) {\r\n\t\t\t// We are working with seciton.\r\n\t\t\tworkingWithModule = false;\r\n\t\t} else {\r\n\t\t\t// We are working with module.\r\n\t\t\tworkingWithModule = true;\r\n\t\t}\r\n\r\n\t\tif ( workingWithModule ) {\r\n\t\t\tvar sliderInput = controlWrapper.find('.dslca-module-edit-field');\r\n\t\t} else {\r\n\t\t\tvar sliderInput = controlWrapper.find('.dslca-modules-section-edit-field');\r\n\t\t}\r\n\r\n\t\t/* Is the control part of the module setting panel or section settings? */\r\n\t\tif ( controlWrapper.hasClass('dslca-modules-section-edit-option') ) {\r\n\t\t\t// We are working with seciton.\r\n\t\t\tvar sliderInput = controlWrapper.find('.dslca-modules-section-edit-field');\r\n\t\t} else {\r\n\t\t\t// We are working with module.\r\n\t\t\tvar sliderInput = controlWrapper.find('.dslca-module-edit-field');\r\n\t\t}\r\n\r\n\t\tvar sliderExt = '',\r\n\t\tsliderControl = controlWrapper.find('.dslca-module-edit-field-slider'),\r\n\t\tcurrentVal    = parseFloat( sliderInput.val() ),\r\n\r\n\t\t// Max value. By default max is 100.\r\n\t\tmax = parseFloat( sliderInput.data('max') ),\r\n\t\t// Min value. By default min is 0.\r\n\t\tmin = parseFloat( sliderInput.data('min') ),\r\n\t\t// Increment value. By default increment is 1.\r\n\t\tinc = parseFloat( sliderInput.data('increment') ),\r\n\t\t// Backup values.\r\n\t\tmax_orig = max,\r\n\t\tmin_orig = min;\r\n\r\n\t\t/**\r\n\t\t * Check if value can't be negative according to module settings.\r\n\t\t */\r\n\t\tvar onlypositive = false;\r\n\r\n\t\tif ( undefined !== sliderInput.data('onlypositive') && 1 === sliderInput.data('onlypositive')  ) {\r\n\t\t\tonlypositive = true;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * If the current slider value gets to the max or min,\r\n\t\t * we set new 'wider' max/min values.\r\n\t\t *\r\n\t\t * This way slider has no fixed top or bottom limit one one hand\r\n\t\t * and works precise enough for both small and big values.\r\n\t\t */\r\n\t\tif ( currentVal >= max ) {\r\n\t\t\tmax = currentVal * 2;\r\n\t\t}\r\n\r\n\t\tif ( ! onlypositive && currentVal <= min ) {\r\n\t\t\tmin = currentVal * 2;\r\n\t\t}\r\n\r\n\t\tsliderControl.slider({\r\n\t\t\tmin : min,\r\n\t\t\tmax : max,\r\n\t\t\tstep: inc,\r\n\t\t\tvalue: sliderInput.val(),\r\n\r\n\t\t\tslide: function(event, ui) {\r\n\t\t\t\tsliderInput.val( ui.value + sliderExt );\r\n\t\t\t\tsliderInput.trigger('change');\r\n\t\t\t},\r\n\r\n\t\t\tchange: function(event, ui) {\r\n\t\t\t\t/**\r\n\t\t\t\t * If the current slider value gets to the max or min,\r\n\t\t\t\t * we reset the slider (destroy/call again) so script above\r\n\t\t\t\t * set new bigger max/min values.\r\n\t\t\t\t *\r\n\t\t\t\t * This way slider has no top or bottom limit one one hand\r\n\t\t\t\t * and precise enough for both small and big values.\r\n\t\t\t\t */\r\n\t\t\t\tif ( ui.value >= max || ui.value <= min ) {\r\n\t\t\t\t\tsliderControl.slider( \"destroy\" );\r\n\t\t\t\t\tdslc_module_options_numeric( controlWrapper );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*\r\n\t\t\tstop: function( event, ui ) {\r\n\t\t\t},\r\n\t\t\tstart: function( event, ui ) {\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Once the slider initiated, show it in HTML.\r\n\t\t * Slider control is hidden by default. We show it on hover only.\r\n\t\t */\r\n\t\tsliderControl.show();\r\n\r\n\t\t/* On mouse leave: Remove empty DIV and destroy the slider. */\r\n\t\tjQuery(controlWrapper).on('mouseleave', function() {\r\n\r\n\t\t\tif ( undefined !== sliderControl.slider( 'instance' ) ) {\r\n\t\t\t\tjQuery(sliderControl).slider( 'destroy' );\r\n\t\t\t}\r\n\r\n\t\t\tsliderControl.remove();\r\n\t\t});\r\n\r\n\r\n\t\tif( sliderInput[0].classList.contains('slider-initiated') ) return;\r\n\t\tsliderInput[0].classList.add(\"slider-initiated\");\r\n\r\n\t\tsliderInput.on('keyup', function(e){\r\n\r\n\t\t\t// In some rare cases we have the next error:\r\n\t\t\t// TypeError: undefined is not an object (evaluating 'a.key.match')\r\n\t\t\tif (undefined === e) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Shift + Up/Down\r\n\t\t\tif( e.shiftKey ) {\r\n\r\n\t\t\t\tif( e.keyCode == 38 ) {\r\n\t\t\t\t\tthis.value = ( parseInt(this.value) || 0 ) + 9;\r\n\t\t\t\t\tsliderInput.trigger('change');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif( e.keyCode == 40 ) {\r\n\t\t\t\t\tthis.value = ( parseInt(this.value) + 0 ) - 9;\r\n\t\t\t\t\tsliderInput.trigger('change');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Backspace, \"-\"\r\n\t\t\tif( e.keyCode == 8 || e.keyCode == 45 ) {\r\n\t\t\t\tsliderInput.trigger('change');\r\n\t\t\t}\r\n\r\n\t\t\t// If number key pressed\r\n\t\t\tif ((e.keyCode >= 48 && e.keyCode <= 57) || (e.keyCode >= 96 && e.keyCode <= 105)) {\r\n\t\t\t\tsliderInput.trigger('change');\r\n\t\t\t}\r\n\r\n\t\t\tvar charCode = (e.which) ? e.which : e.keyCode;\r\n\r\n\t\t\t//@todo more work here\r\n\t\t\tif( ( (charCode >= 48 && charCode <= 57) || (charCode >= 96 && charCode <= 105) ) && e.keyCode != 8 && e.keyCode != 39 && e.keyCode != 37 && e.keyCode != 46 ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// sliderInput.unbind('change');\r\n\t\tsliderInput.on('change', function(e){\r\n\r\n\t\t\tif ( onlypositive && this.value < 0 ) {\r\n\t\t\t\tthis.value = 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar containerWrapper;\r\n\r\n\t\t\tif ( workingWithModule ) {\r\n\t\t\t\tcontainerWrapper = jQuery( e.target.closest('.dslca-module-edit-option-slider') );\r\n\t\t\t} else {\r\n\t\t\t\tcontainerWrapper = jQuery( e.target.closest('.dslca-modules-section-edit-option-slider') );\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Move the slider needle to reflect the value changes\r\n\t\t\t * made via direct input of via keyboard arrow keys.\r\n\t\t\t */\r\n\t\t\tvar currentSliderInstance = containerWrapper.find('.dslca-module-edit-field-slider');\r\n\t\t\tif ( undefined !== currentSliderInstance.slider( 'instance' ) ) {\r\n\t\t\t\tcurrentSliderInstance.slider( 'value', this.value );\r\n\t\t\t}\r\n\r\n\t\t\tif ( workingWithModule ) {\r\n\t\t\t\t// Add changed class to the module.\r\n\t\t\t\tvar module = jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument);\r\n\t\t\t\tmodule.addClass('dslca-module-change-made');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t}); // .each\r\n}\r\n\r\nfunction dslc_disable_responsive_view () {\r\n\tjQuery('html').removeClass('dslc-responsive-preview');\r\n\tjQuery('body').removeClass('dslc-res-big dslc-res-smaller-monitor dslc-res-phone dslc-res-tablet');\r\n\r\n}\r\n\r\n\r\nfunction dslc_filter_module_options( sectionID ) { dslc_module_options_section_filter( sectionID ); }\r\nfunction dslc_confirm_changes( callback ) { dslc_module_options_confirm_changes( callback ); }\r\nfunction dslc_cancel_changes( callback ) { dslc_module_options_cancel_changes( callback ); }\r\nfunction dslc_init_colorpicker() { dslc_module_options_color(); }\r\nfunction dslc_init_options_slider() { dslc_module_options_numeric(); }\r\nfunction dslc_module_edit_options_hideshow_tabs() { dslc_module_options_hideshow_tabs(); }","/*********************************\r\n *\r\n * = TEMPLATES =\r\n *\r\n * - dslc_load_template ( Load Template )\r\n * - dslc_import_template ( Import Template )\r\n * - dslc_save_template ( Save TEmplate )\r\n * - dslc_delete_template ( Delete Template )\r\n *\r\n ***********************************/\r\n\r\nimport { sectionsInitJS } from './sections.js';\r\nimport { dragAndDropInit } from './dragndrop.js';\r\nimport { moduleareasInitJS } from './modulearea.js';\r\nimport { hideModal } from \"./modalwindow.js\";\r\n\r\n/**\r\n * TEMPLATES - Load\r\n */\r\nconst loadTemplateById = ( template ) => {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_load_template' );\r\n\r\n\t// Vars\r\n\tvar dslcModule, dslcModuleID;\r\n\r\n\t// Template preloader\r\n\tjQuery('#wpcontent').prepend('<div class=\"lc-template-loader\"></div>');\r\n\r\n\tvar block = '<div class=\"lc-loader lds-css\"><div class=\"lds-spinner\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>';\r\n\r\n\tjQuery('.lc-template-loader').prepend(block);\r\n\r\n\r\n\t// Ajax call to get template's HTML\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-ajax-load-template',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_template_id : template\r\n\t\t},\r\n\t\tfunction( response ) {\r\n\r\n\t\t\t// Apply the template's HTML\r\n\t\t\tjQuery('#dslc-main', LiveComposer.Builder.PreviewAreaDocument).html( response.output );\r\n\r\n\t\t\tjQuery('.lc-template-loader').remove();\r\n\r\n\t\t\t// Call other functions\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\r\n\r\n\t\t\t// Check init for rows and module areas\r\n\t\t\tsectionsInitJS();\r\n\t\t\tmoduleareasInitJS();\r\n\r\n\t\t\tdragAndDropInit();\r\n\t\t\twindow.dslc_show_publish_button();\r\n\t\t\twindow.dslc_generate_code();\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * TEMPLATES - Import\r\n */\r\nfunction dslc_template_import() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_import_template' );\r\n\r\n\t// Vars\r\n\tvar dslcModule, dslcModuleID;\r\n\r\n\t// Hide the title on the button and show loading animation\r\n\tjQuery('.dslca-modal-templates-import .dslca-modal-title').css({ opacity : 0 });\r\n\tjQuery('.dslca-modal-templates-import .dslca-loading').show();\r\n\r\n\t// Ajax call to load template's HTML\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-ajax-import-template',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_template_code : jQuery('#dslca-import-code').val()\r\n\t\t},\r\n\t\tfunction( response ) {\r\n\r\n\t\t\t// Apply the template's HTML\r\n\t\t\tjQuery('#dslc-main', LiveComposer.Builder.PreviewAreaDocument).html( response.output );\r\n\r\n\t\t\t// Hide the loading on the button and show the title\r\n\t\t\tjQuery('.dslca-modal-templates-import .dslca-loading').hide();\r\n\t\t\tjQuery('.dslca-modal-templates-import .dslca-modal-title').css({ opacity : 1 });\r\n\r\n\t\t\t// Hide the modal\r\n\t\t\thideModal( '', '.dslca-modal-templates-import' );\r\n\r\n\t\t\t// Call other functions\r\n\t\t\tLiveComposer.Builder.PreviewAreaWindow.dslc_bg_video();\r\n\t\t\tdragAndDropInit();\r\n\t\t\twindow.dslc_show_publish_button();\r\n\t\t\twindow.dslc_generate_code();\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * TEMPLATES - SAVE\r\n */\r\nfunction dslc_template_save() {\r\n\tif ( window.dslcDebug ) console.log( 'dslc_save_template' );\r\n\r\n\t// AJAX call to save the template\r\n\tjQuery.post(\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-ajax-save-template',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_template_code : jQuery('#dslca-code').val(),\r\n\t\t\tdslc_template_title : jQuery('#dslca-save-template-title').val()\r\n\t\t},\r\n\t\tfunction( response ) {\r\n\t\t\t// Hide the modal\r\n\t\t\thideModal( '', '.dslca-modal-templates-save' );\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * TEMPLATES - DELETE\r\n */\r\nfunction dslc_template_delete( template ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_delete_template' );\r\n\r\n\t// AJAX call to delete template\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-ajax-delete-template',\r\n\t\t\t_wpnonce : DSLCAjax._wpnonce,\r\n\t\t\tdslc : 'active',\r\n\t\t\tdslc_template_id : template\r\n\t\t},\r\n\t\tfunction( response ) {\r\n\r\n\t\t\t// Remove template from the template listing\r\n\t\t\tjQuery('.dslca-template[data-id=\"' + template + '\"]').fadeOut(200, function(){\r\n\t\t\t\tjQuery(this).remove();\r\n\t\t\t});\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * Deprecated Functions and Fallbacks\r\n */\r\n function dslc_import_template() { dslc_template_import(); }\r\n function dslc_save_template() { dslc_template_save(); }\r\n function dslc_delete_template( template ) { dslc_template_delete( template ); }\r\n\r\n /**\r\n  * TEMPLATES - Document Ready\r\n  */\r\n\r\n export const templatesPanelInit = () => {\r\n\r\n\t/**\r\n\t * Hook - Load Template\r\n\t */\r\n\tlet templateItem = document.querySelectorAll('.dslca-template');\r\n\t// Attach import function to each template item.\r\n\ttemplateItem.forEach(function(element) {\r\n\t\telement.addEventListener('click', event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tlet importButton = event.target.closest(\"[data-id]\");\r\n\t\t\tloadTemplateById( importButton.dataset.id );\r\n\t\t});\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Import Template\r\n\t */\r\n\tjQuery('.dslca-template-import-form').submit(function(e){\r\n\t\te.preventDefault();\r\n\t\tdslc_template_import();\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Save Template\r\n\t */\r\n\tjQuery('.dslca-template-save-form').submit(function(e){\r\n\t\te.preventDefault();\r\n\t\tdslc_template_save();\r\n\t});\r\n\r\n\t/**\r\n\t * Hook - Delete Template\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslca-delete-template-hook', function(e){\r\n\r\n\t\te.stopPropagation();\r\n\t\tdslc_template_delete( jQuery(this).data('id') );\r\n\t});\r\n\r\n}\r\n","/*********************************\r\n *\r\n * = UI - GENERAL =\r\n *\r\n * - dslc_hide_composer ( Hides the composer elements )\r\n * - dslc_show_composer ( Shows the composer elements )\r\n * - dslc_show_publish_button ( Shows the publish button )\r\n * - dslc_show_section now showSection ( Show a specific section )\r\n * - dslc_generate_filters ( Generate origin filters )\r\n * - dslc_filter_origin ( Origin filtering for templates/modules listing )\r\n * - dragAndDropInit ( Initiate drag and drop functionality )\r\n ***********************************/\r\n\r\nimport { elementOptionsTabs } from './settings.panel.js';\r\nimport { CModalWindow } from './modalwindow.class.js';\r\n\r\nimport Sortable from 'sortablejs';\r\n\r\n/**\r\n * Try to detect JS errors in WP Admin part.\r\n */\r\n window.onerror = function( error, file, line, char ) {\r\n\r\n\tdslca_generate_error_report ( error, file, line, char );\r\n}\r\n\r\n/**\r\n * Hook - Open Error Log button\r\n */\r\njQuery(document).on( 'click', '.dslca-show-js-error-hook', function(e){\r\n\r\n\te.preventDefault();\r\n\r\n\tvar errors_container = document.getElementById('dslca-js-errors-report');\r\n\r\n\tif ( ! jQuery('body').hasClass('dslca-saving-in-progress') ) {\r\n\r\n\t\tCModalWindow({\r\n\r\n\t\t\ttitle: '<a href=\"https://livecomposerplugin.com/support/\" target=\"_blank\"><span class=\"dslca-icon dslc-icon-comment\"></span> &nbsp; Get Support Info</a>',\r\n\t\t\tcontent: '<span class=\"dslca-error-report\">' + errors_container.value + '</span>',\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\n/**\r\n * UI - GENERAL - Document Ready\r\n */\r\n\r\njQuery(document).ready(function($) {\r\n\r\n\t/**\r\n\t * Try to detect JS errors in preview area.\r\n\t */\r\n\tjQuery(\"#page-builder-frame\")[0].contentWindow.onerror = function( error, file, line, char ) {\r\n\t\tdslca_generate_error_report ( error, file, line, char );\r\n\t}\r\n\r\n\t// Put JS error log data in a hidden textarea.\r\n\tdslca_update_report_log();\r\n\r\n \tjQuery('body').addClass('dslca-enabled dslca-drag-not-in-progress');\r\n \tjQuery('.dslca-invisible-overlay').hide();\r\n \tjQuery('.dslca-section').eq(0).show();\r\n});\r\n\r\n/**\r\n * Action - \"Currently Editing\" scroll on click\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-currently-editing', function(){\r\n\r\n\tvar activeElement = false,\r\n\tnewOffset = false,\r\n\toutlineColor;\r\n\r\n\tif ( jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).length ) {\r\n\r\n\t\tactiveElement = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument);\r\n\t\toutlineColor = '#5890e5';\r\n\r\n\t} else if ( jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).length ) {\r\n\r\n\t\tactiveElement = jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument);\r\n\t\toutlineColor = '#eabba9';\r\n\t}\r\n\r\n\tif ( activeElement ) {\r\n\t\tnewOffset = activeElement.offset().top - 100;\r\n\t\tif ( newOffset < 0 ) { newOffset = 0; }\r\n\r\n\t\tvar callbacks = [];\r\n\r\n\t\tjQuery( 'html, body', LiveComposer.Builder.PreviewAreaDocument ).animate({ scrollTop: newOffset }, 300, function(){\r\n\t\t\tactiveElement.removeAttr('style');\r\n\t\t});\r\n\t}\r\n\r\n});\r\n\r\n/**\r\n * Save composer code with CMD+S or Ctrl+S\r\n */\r\njQuery(window).keypress( function(e){\r\n\r\n\tif ((e.metaKey || e.ctrlKey) && e.keyCode == 83) {\r\n\r\n\t\tdslc_ajax_save_composer();\r\n\t\te.preventDefault();\r\n        return false;\r\n\t}\r\n});\r\n\r\n/**\r\n * Hook - Hide Composer\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-hide-composer-hook', function(e){\r\n\r\n\te.preventDefault();\r\n\tdslc_hide_composer()\r\n});\r\n\r\n/**\r\n * Hook - Show Composer\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-show-composer-hook', function(e){\r\n\te.preventDefault();\r\n\tdslc_show_composer();\r\n});\r\n\r\n/**\r\n * Hook - Section Show - Modules Listing\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-go-to-modules-hook', function(e){\r\n\te.preventDefault();\r\n\tshowSection( '.dslca-modules' );\r\n});\r\n\r\n/**\r\n * Hook - Section Show - Dynamic\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-go-to-section-hook', function(e){\r\n\r\n\te.preventDefault();\r\n\r\n\t// Do nothing if clicked on active tab\r\n\tif ( jQuery(this).hasClass('dslca-active') ) {\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar sectionTitle = jQuery(this).data('section');\r\n\tshowSection( sectionTitle );\r\n\r\n\tif ( jQuery(this).hasClass('dslca-go-to-section-modules') || jQuery(this).hasClass('dslca-go-to-section-templates')  ) {\r\n\r\n\t\tjQuery(this).addClass('dslca-active').siblings('.dslca-go-to-section-hook').removeClass('dslca-active');\r\n\t}\r\n});\r\n\r\n/**\r\n * Hook - Close Composer\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-close-composer-hook', function(e){\r\n\r\n\te.preventDefault();\r\n\r\n\tvar redirect_url = jQuery(this).attr('href');\r\n\r\n\tif ( ! jQuery('body').hasClass('dslca-saving-in-progress') && jQuery('.dslca-save-composer').is(':visible') ) {\r\n\t\t// Show warning if changes weren't saved.\r\n\t\tCModalWindow({\r\n\r\n\t\t\ttitle: DSLCString.str_exit_title,\r\n\t\t\tcontent: DSLCString.str_exit_descr,\r\n\t\t\tconfirm: function() {\r\n\t\t\t\twindow.location = redirect_url;\r\n\t\t\t}\r\n\t\t});\r\n\t} else {\r\n\t\twindow.location = redirect_url;\r\n\t}\r\n});\r\n\r\n/**\r\n * Submit Form\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-submit', function(){\r\n\tjQuery(this).closest('form').submit();\r\n});\r\n\r\n/**\r\n * Hook - Show Origin Filters\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-section-title', function(e){\r\n\r\n\te.stopPropagation();\r\n\r\n\tif ( jQuery('.dslca-section-title-filter', this).length ) {\r\n\r\n\t\tdslc_generate_filters();\r\n\r\n\t\t// Open filter panel\r\n\t\tjQuery('.dslca-section-title-filter-options').slideToggle(300);\r\n\t}\r\n});\r\n\r\n/**\r\n * Hook - Apply Filter Origin\r\n */\r\n\r\njQuery(document).on( 'click', '.dslca-section-title-filter-options a', function(e){\r\n\r\n\te.preventDefault();\r\n\te.stopPropagation();\r\n\r\n\tvar origin = jQuery(this).data('origin');\r\n\tvar section = jQuery(this).closest('.dslca-section');\r\n\r\n\tif ( section.hasClass('dslca-templates-load') ) {\r\n\t\tjQuery('.dslca-section-title-filter-curr', section).text( jQuery(this).text());\r\n\t} else {\r\n\t\tjQuery('.dslca-section-title-filter-curr', section).text( jQuery(this).text());\r\n\t}\r\n\r\n\tjQuery('.dslca-section-scroller-inner').css({ left : 0 });\r\n\r\n\tdslc_filter_origin( origin, section );\r\n\r\n\t// Close filter panel\r\n\tjQuery('.dslca-section-title-filter-options').slideToggle(300);\r\n});\r\n\r\n\r\n/**\r\n * UI - GENERAL - Hide Composer\r\n */\r\n\r\nfunction dslc_hide_composer() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_hide_composer' );\r\n\r\n\t// Hide \"hide\" button and show \"show\" button\r\n\tjQuery('.dslca-hide-composer-hook').hide();\r\n\tjQuery('.dslca-show-composer-hook').show();\r\n\r\n\t// Add class to know it's hidden\r\n\tjQuery('body').addClass('dslca-composer-hidden');\r\n\tjQuery('body', LiveComposer.Builder.PreviewAreaDocument).addClass('dslca-composer-hidden');\r\n\tLiveComposer.Builder.Flags.uiHidden = true;\r\n\r\n\r\n\t// Hide ( animation ) the main composer area ( at the bottom )\r\n\tjQuery('.dslca-container').css({ bottom : jQuery('.dslca-container').outerHeight() * -1 });\r\n\r\n\t// Hide the header  part of the main composer area ( at the bottom )\r\n\tjQuery('.dslca-header').hide();\r\n\r\n}\r\n\r\n/**\r\n * UI - GENERAL - Show Composer\r\n */\r\n\r\nfunction dslc_show_composer() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_show_composer' );\r\n\r\n\t// Hide the \"show\" button and show the \"hide\" button\r\n\tjQuery('.dslca-show-composer-hook').hide();\r\n\tjQuery('.dslca-hide-composer-hook').show();\r\n\r\n\t// Remove the class from the body so we know it's not hidden\r\n\tjQuery('body').removeClass('dslca-composer-hidden');\r\n\tjQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-composer-hidden');\r\n\tLiveComposer.Builder.Flags.uiHidden = false;\r\n\r\n\r\n\t// Show ( animate ) the main composer area ( at the bottom )\r\n\tjQuery('.dslca-container').css({ bottom : 0 });\r\n\r\n\t// Show the header of the main composer area ( at the bottom )\r\n\tjQuery('.dslca-header').show();\r\n}\r\n\r\n/**\r\n * UI - GENERAL - Show Publish Button\r\n */\r\n\r\nwindow.dslc_show_publish_button = function() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_show_publish_button' );\r\n\r\n\tjQuery('.dslca-save-composer').show().addClass('dslca-init-animation');\r\n\tjQuery('.dslca-save-draft-composer').show().addClass('dslca-init-animation');\r\n}\r\n\r\nexport const hidePublishButton = () => {\r\n\tif ( window.dslcDebug ) console.log( 'hidePublishButton' );\r\n\r\n\tjQuery('.dslca-save-composer').hide();\r\n\tjQuery('.dslca-save-draft-composer').hide();\r\n}\r\n\r\n/**\r\n * UI - GENERAL - Show Section\r\n */\r\n\r\nexport const showSection = ( section ) => {\r\n\tif ( window.dslcDebug ) console.log( 'showSection' );\r\n\r\n\t// Add class to body so we know it's in progress\r\n\t// jQuery('body').addClass('dslca-anim-in-progress');\r\n\r\n\t// Get vars\r\n\tvar sectionTitle = jQuery(section).data('title'),\r\n\tnewColor = jQuery(section).data('bg');\r\n\r\n\t// Hide ( animate ) the container\r\n\tjQuery('.dslca-container').css({ bottom: -500 });\r\n\r\n\t// Hide all sections and show specific section\r\n\tjQuery('.dslca-section').hide();\r\n\tjQuery(section).show();\r\n\r\n\t// Change \"currently editing\"\r\n\tif ( section == '.dslca-module-edit' ) {\r\n\r\n\t\tjQuery('.dslca-currently-editing')\r\n\t\t\t.show()\r\n\t\t\t\t.find('strong')\r\n\t\t\t\t.text( jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).attr('title') + ' element' );\r\n\t} else if ( section == '.dslca-modules-section-edit' ) {\r\n\r\n\t\tjQuery('.dslca-currently-editing')\r\n\t\t\t.show()\r\n\t\t\t.css( 'background-color', '#e5855f' )\r\n\t\t\t\t.find('strong')\r\n\t\t\t\t.text( 'Row' );\r\n\t} else {\r\n\r\n\t\tjQuery('.dslca-currently-editing')\r\n\t\t\t.hide()\r\n\t\t\t\t.find('strong')\r\n\t\t\t\t.text('');\r\n\t}\r\n\r\n\t// Filter module option tabs\r\n\telementOptionsTabs();\r\n\r\n\t// Show ( animate ) the container\r\n\t// setTimeout( function() {\r\n\t\tjQuery('.dslca-container').css({ bottom : 0 });\r\n\t// }, 300 );\r\n\r\n\t// Remove class from body so we know it's finished\r\n\t// jQuery('body').removeClass('dslca-anim-in-progress');\r\n\r\n\t// Set initial background color for the color picker fields\r\n\t// Fixes the bug with section color pickers to keep values from the previously\r\n\t// edited section.\r\n\tjQuery(section).find('input.dslca-module-edit-field-colorpicker').each( function (item) {\r\n\t\tjQuery(this).css('background', jQuery(this).val());\r\n\t});\r\n}\r\n\r\n/**\r\n * UI - GENERAL - Generate Origin Filters\r\n */\r\n\r\nfunction dslc_generate_filters() {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_generate_filters' );\r\n\r\n\t// Vars\r\n\tvar el, filters = [], filtersHTML = '<a html=\"#\" data-origin=\"\">Show All</a>', els = jQuery('.dslca-section:visible .dslca-origin');\r\n\r\n\t// Go through each and generate the filters\r\n\tels.each(function(){\r\n\t\tel = jQuery(this);\r\n\r\n\t\tif ( jQuery.inArray( el.data('origin'), filters ) == -1 ) {\r\n\t\t\tfilters.push( el.data('origin') );\r\n\t\t\tfiltersHTML += '<a href=\"#\" data-origin=\"' + el.data('origin') + '\">' + el.data('origin') + '</a>';\r\n\t\t}\r\n\t});\r\n\r\n\tjQuery('.dslca-section:visible .dslca-section-title-filter-options').html( filtersHTML ).css( 'background', jQuery('.dslca-section:visible').data('bg') );\r\n}\r\n\r\n/**\r\n * UI - GENERAL - Origin Filter\r\n */\r\n\r\nfunction dslc_filter_origin( origin, section ) {\r\n\r\n\tif ( window.dslcDebug ) console.log( 'dslc_filter_origin' );\r\n\r\n\tjQuery('.dslca-origin', section).attr('data-display-module', 'false');\r\n\tjQuery('.dslca-origin[data-origin=\"' + origin + '\"]', section).attr('data-display-module', 'true');\r\n\r\n\tif ( origin == '' ) {\r\n\r\n\t\tjQuery('.dslca-origin', section).attr('data-display-module', 'true');\r\n\t\tjQuery('.dslca-origin.dslca-exclude', section).attr('data-display-module', 'false')\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Prevent drag and drop of the modules\r\n * into the inner content areas of the other modules\r\n */\r\nexport const fixContenteditable = () => {\r\n\r\n\twindow.LiveComposer.Builder.PreviewAreaDocument.on('dragstart', '.dslca-module, .dslc-module-front, .dslc-modules-area, .dslc-modules-section', function (e) {\r\n\r\n\t\tjQuery('[contenteditable]', window.LiveComposer.Builder.PreviewAreaDocument).attr('contenteditable', false);\r\n\t});\r\n\r\n\twindow.LiveComposer.Builder.PreviewAreaDocument.on('dragend mousedown', '.dslca-module, .dslc-module-front, .dslc-modules-area, .dslc-modules-section', function (e) {\r\n\r\n\t\tjQuery('[contenteditable]', window.LiveComposer.Builder.PreviewAreaDocument).attr('contenteditable', true);\r\n\t});\r\n}\r\n\r\n/**\r\n * Disable/Enable module control.\r\n *\r\n * @param  {string} control_id CSS ID of the control we are toggling\r\n * @return {void}\r\n */\r\nfunction dslc_toogle_control ( control_id ) {\r\n\r\n\tif ( control_id === undefined) control_id = false;\r\n\tif ( !control_id ) return;\r\n\r\n\tvar control         = jQuery('.dslca-module-edit-option-' + control_id );\r\n\tvar control_storage = control.find('.dslca-module-edit-field');\r\n\r\n\t// Get the element we are editing\r\n\tvar module = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument);\r\n\r\n\t// Get the element id\r\n\tvar module_id = module[0].id;\r\n\r\n\tvar responsive_prefix = '';\r\n\r\n\tif ( 'tablet_responsive' === control.data('tab') ) {\r\n\t\tresponsive_prefix = 'body.dslc-res-tablet ';\r\n\t} else if ( 'phone_responsive' === control.data('tab') ) {\r\n\t\tresponsive_prefix = 'body.dslc-res-phone ';\r\n\t}\r\n\r\n\tvar affect_on_change_el = control_storage.data('affect-on-change-el');\r\n\r\n\tif ( affect_on_change_el === undefined) return;\r\n\r\n\tvar affect_on_change_elmts = affect_on_change_el.split( ',' );\r\n\r\n\taffect_on_change_el = '';\r\n\r\n\t// Loop through elements (useful when there are multiple elements)\r\n\tfor ( var i = 0; i < affect_on_change_elmts.length; i++ ) {\r\n\r\n\t\tif ( i > 0 ) {\r\n\r\n\t\t\taffect_on_change_el += ', ';\r\n\t\t}\r\n\r\n\t\taffect_on_change_el += responsive_prefix + '#' + module_id + ' ' + affect_on_change_elmts[i];\r\n\t}\r\n\r\n\tvar affect_on_change_rule  = control_storage.data('affect-on-change-rule').replace(/ /g,'');\r\n\tvar affect_on_change_rules = affect_on_change_rule.split( ',' );\r\n\r\n\tvar control_value;\r\n\tvar control_data_ext = control_storage.data('ext');\r\n\r\n\tcontrol.toggleClass('dslca-option-off');\r\n\r\n\tif ( control.hasClass('dslca-option-off')) {\r\n\t\t// Disable\r\n\r\n\t\tcontrol_value = dslc_get_control_value(control_id);\r\n\t\t// Temporary backup the current value as data attribute\r\n\t\tcontrol_storage.data( 'val-bckp', control_value );\r\n\t\t// control_value = dslc_combine_value_and_extension( control_value, control_data_ext);\r\n\r\n\t\t// Loop through rules (useful when there are multiple rules)\r\n\t\tfor ( var i = 0; i < affect_on_change_rules.length; i++ ) {\r\n\r\n\t\t\t// remove css rule in element inline style\r\n\t\t\tjQuery( affect_on_change_el, LiveComposer.Builder.PreviewAreaDocument ).css( affect_on_change_rules[i] , '' );\r\n\t\t\t// remove css rule in css block\r\n\t\t\tdisable_css_rule ( affect_on_change_el, affect_on_change_rules[i], module_id);\r\n\t\t\t// PROBLEM do not work with multiply rules ex.: .dslc-text-module-content,.dslc-text-module-content p\r\n\t\t}\r\n\r\n\t\tcontrol_storage.val('').trigger('change');\r\n\t} else {\r\n\t\t// Enable\r\n\r\n\t\t// Restore value of the data backup attribute\r\n\t\tcontrol_storage.val( control_storage.data('val-bckp') ).trigger('change');\r\n\t\tcontrol_value = dslc_get_control_value(control_id);\r\n\t\tcontrol_value = dslc_combine_value_and_extension( control_value, control_data_ext || '');\r\n\r\n\t\t// Loop through rules (useful when there are multiple rules)\r\n\t\tfor ( var i = 0; i < affect_on_change_rules.length; i++ ) {\r\n\r\n\t\t\tvar styleContent = affect_on_change_el + \"{\" + affect_on_change_rules[i] + \": \" + control_value + \"}\";\r\n\r\n\t\t\tLiveComposer.Builder.Helpers.processInlineStyleTag({\r\n\r\n\t\t\t\tcontext: control,\r\n\t\t\t\trule: affect_on_change_rules[i],\r\n\t\t\t\telems: affect_on_change_el.replace(new RegExp('#' + module_id, 'gi'), '').trim(),\r\n\t\t\t\tstyleContent: styleContent\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\njQuery(document).ready(function($){\r\n\r\n\t// Option Control Toggle\r\n\tjQuery(document).on( 'click', '.dslca-module-edit-option .dslc-control-toggle', function(e){\r\n\r\n\t\te.preventDefault();\r\n\t\tvar control_id = jQuery(e.target).closest('.dslca-module-edit-option').find('.dslca-module-edit-field').data('id');\r\n\t\tdslc_toogle_control ( control_id );\r\n\t});\r\n\r\n\r\n\t// Disable Toggle If the Control Focused\r\n\tjQuery(document).on( 'mousedown', '.dslca-module-edit-option', function(e){\r\n\r\n\t\tvar toggle = jQuery('.dslc-control-toggle');\r\n\t\tif ( ! toggle.is(e.target) // if the target of the click isn't the container...\r\n\t\t     && toggle.has(e.target).length === 0 ) // ... nor a descendant of the container\r\n\t\t{\r\n\r\n\t\t\tif ( jQuery(e.target).closest('.dslca-module-edit-option').hasClass('dslca-option-off') ) {\r\n\r\n\t\t\t\tvar control_id = jQuery(e.target).closest('.dslca-module-edit-option').find('.dslca-module-edit-field').data('id');\r\n\t\t\t\tdslc_toogle_control (control_id);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n\r\nfunction disable_css_rule(selectorCSS, ruleCSS, moduleID) {\r\n\r\n\tvar cssRules;\r\n\tvar target_stylsheet_ID = 'css-for-' + moduleID;\r\n\tvar stylesheet = document.getElementById('page-builder-frame').contentWindow.document.getElementById(target_stylsheet_ID);\r\n\r\n\tselectorCSS = selectorCSS.replace( /\\s\\s+/g, ' ' );\r\n\r\n\tif (stylesheet) {\r\n\r\n\t   stylesheet = stylesheet.sheet;\r\n\r\n\t\tif (stylesheet['rules']) {\r\n\r\n\t\t\tcssRules = 'rules';\r\n\t\t} else if (stylesheet['cssRules']) {\r\n\r\n\t\t\tcssRules = 'cssRules';\r\n\t\t} else {\r\n\r\n\t\t\t//no rules found... browser unknown\r\n\t\t}\r\n\r\n\t\t// Go through each CSS rule (ex.: .content h1 {...})\r\n\t\tfor (var R = 0; R < stylesheet[cssRules].length; R++) {\r\n\r\n\t\t\t// Is current CSS rule equal to the selectorCSS we are looking for?\r\n\t\t\t// (ex.: '.content h1' == '.content h1' )\r\n\t\t\tif (stylesheet[cssRules][R].selectorText == selectorCSS) {\r\n\r\n\t\t\t\t// Get CSS property we are looking for... (ex.: font-size : ...; )\r\n\t\t\t\tif(stylesheet[cssRules][R].style[ruleCSS]){\r\n\r\n\t\t\t\t\t\tstylesheet[cssRules][R].style[ruleCSS] = '';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction dslc_combine_value_and_extension ( value, extension) {\r\n\tif ( '' === value || null === value ) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\t// Check if value do not already include extension\r\n\tif ( value.indexOf(extension) == -1 ) {\r\n\t\tvalue = value + extension;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\nfunction dslc_get_control_value ( control_id ) {\r\n\r\n\tvar control      = jQuery('.dslca-module-edit-option-' + control_id );\r\n\tvar control_type = 'text';\r\n\tvar control_storage = control.find('.dslca-module-edit-field');\r\n\tvar value;\r\n\r\n/*\r\n\tif ( control.hasClass('dslca-module-edit-option-select') ) {\r\n\r\n\t} else {\r\n\t\t// text based controls\r\n\t\tvalue = control_storage.val();\r\n\t}\r\n*/\r\n\tvalue = control_storage.val();\r\n\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Bind keypress events with both parent and iframe pages.\r\n * Function called when content inside iframe is loaded.\r\n *\r\n * @return {void}\r\n */\r\nexport const keypressEvents = () => {\r\n\r\n\tjQuery( [document, LiveComposer.Builder.PreviewAreaWindow.document ] ).unbind('keydown').bind('keydown', function (keydown_event) {\r\n\t\t// Modal window [ESC]/[Enter]\r\n\t\twindow.dslc_modal_keypress_events( keydown_event );\r\n\r\n\t\t// Prevent backspace from navigating back\r\n\t\tdslc_disable_backspace_navigation( keydown_event );\r\n\r\n\t\t// Prompt Modal on F5\r\n\t\tdslc_notice_on_refresh( keydown_event );\r\n\r\n\t\t// Save Page\r\n\t\tdslc_save_page( keydown_event );\r\n\r\n\t\t// CMD button press event.\r\n\t\tdslc_cmd_press( keydown_event );\r\n\r\n\t\t// Events to run when any button preset.\r\n\t\tdslc_keydown( keydown_event );\r\n\t});\r\n\r\n\t// Key UP events.\r\n\tjQuery( [document, LiveComposer.Builder.PreviewAreaWindow.document ] ).unbind('keyup').bind('keyup', function (keyup_event) {\r\n\t\tdslc_cmd_unpress( keyup_event );\r\n\t});\r\n}\r\n\r\n/**\r\n * Action - Prevent backspace from navigating back\r\n */\r\n\r\nfunction dslc_disable_backspace_navigation (event) {\r\n\r\n\tvar doPrevent = false;\r\n\r\n\tif (event.keyCode === 8) {\r\n\r\n\t\tvar d = event.srcElement || event.target;\r\n\r\n\t\tif ( (d.tagName.toUpperCase() === 'INPUT' && (\r\n\t\t\t\td.type.toUpperCase() === 'TEXT' ||\r\n\t\t\t\td.type.toUpperCase() === 'PASSWORD' ||\r\n\t\t\t\td.type.toUpperCase() === 'NUMBER' ||\r\n\t\t\t\td.type.toUpperCase() === 'FILE')\r\n\t\t\t  )\r\n\t\t\t || d.tagName.toUpperCase() === 'TEXTAREA'\r\n\t\t\t || jQuery(d).hasClass('dslca-editable-content')\r\n\t\t\t || jQuery(d).hasClass('dslc-tabs-nav-hook-title')\r\n\t\t\t || jQuery(d).hasClass('dslc-accordion-title') ) {\r\n\r\n\t\t\tdoPrevent = d.readOnly || d.disabled;\r\n\t\t} else {\r\n\r\n\t\t\tdoPrevent = true;\r\n\t\t}\r\n\t}\r\n\r\n\tif (doPrevent) {\r\n\t\tevent.preventDefault();\r\n\t}\r\n}\r\n\r\n/**\r\n * Actions - Prompt Modal on F5\r\n *\r\n * 116  F5\r\n * 81 + event.metaKey = CMD + R\r\n */\r\n\r\nfunction dslc_notice_on_refresh(e) {\r\n\r\n\tif ( e.which == 116 || ( e.which === 82 && e.metaKey ) ) {\r\n\r\n\t\tif ( jQuery('.dslca-save-composer-hook').offsetParent !== null || jQuery('.dslca-module-edit-save').offsetParent !== null ) {\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\tCModalWindow({\r\n\r\n\t\t\t\ttitle: DSLCString.str_refresh_title,\r\n\t\t\t\tcontent: DSLCString.str_refresh_descr,\r\n\t\t\t\tconfirm: function() {\r\n\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t/*dslc_js_confirm( 'disable_lc', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_refresh_title +\r\n\t\t\t '</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_refresh_descr + '</span>', document.URL );*/\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * If Control or Command key is pressed and the S key is pressed run dslc_save_composer.\r\n * 83 is the key code for S.\r\n */\r\nfunction dslc_save_page(e) {\r\n\r\n    if ( e.which == 83 && ( e.metaKey || e.ctrlKey )  ) {\r\n    \tif ( jQuery('.dslca-save-composer-hook').css('display') == 'block' ) {\r\n\t        dslc_save_composer();\r\n\t        e.preventDefault();\r\n\t        return false;\r\n\t    }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * If any key is pressed.\r\n */\r\nfunction dslc_keydown( e ) {\r\n    if ( LiveComposer.Builder.UI.cmdMode ) {\r\n\t\tif ( ! e.metaKey && ! e.ctrlKey ) {\r\n\t\tLiveComposer.Builder.UI.cmdMode = false;\r\n\t\tLiveComposer.Builder.PreviewAreaWindow.document.querySelector('body').classList.remove( 'key-press-cmd' );\r\n\t\t}\r\n    }\r\n}\r\n\r\n/**\r\n * If Command key is pressed.\r\n */\r\nfunction dslc_cmd_press( e ) {\r\n    if ( e.metaKey || e.ctrlKey ) {\r\n\t\tLiveComposer.Builder.UI.cmdMode = true;\r\n\t\tLiveComposer.Builder.PreviewAreaWindow.document.querySelector('body').classList.add( 'key-press-cmd' );\r\n    }\r\n}\r\n\r\n/**\r\n * If Command key is released.\r\n */\r\nfunction dslc_cmd_unpress( e ) {\r\n    if ( e.key === \"Meta\" ) {\r\n\t\tLiveComposer.Builder.UI.cmdMode = false;\r\n\t\tLiveComposer.Builder.PreviewAreaWindow.document.querySelector('body').classList.remove( 'key-press-cmd' );\r\n    }\r\n}\r\n\r\n/**\r\n * Generate report about JS error and save it in a local storage.\r\n * @param  String error Error text\r\n * @param  String file  File with error\r\n * @param  String line  Line with error\r\n * @param  String char  Column with error\r\n * @return void\r\n */\r\nfunction dslca_generate_error_report ( error, file, line, char ) {\r\n\r\n\tvar title = 'JavaScript error detected in a third-party plugin';\r\n\r\n\tif ( file.match(\"wp-content\\/plugins\\/live-composer-page-builder\\/js\") != null ) {\r\n\r\n\t\ttitle = 'Live Composer returned JS error';\r\n\t}\r\n\r\n\tvar error_report = '';\r\n\terror_report += '<br /><strong style=\"color:#E55F5F;\">' + title + '</strong><br />';\r\n\terror_report += error + '<br /> File \"' + file + '\", line ' + line + ', char ' + char + '<br />';\r\n\r\n\tif ( 'undefined' !== typeof(Storage)) {\r\n\t\tlocalStorage.setItem('js_errors_report', error_report);\r\n\t}\r\n}\r\n\r\n/**\r\n * Put in a hidden div#dslca-js-errors-report information from local storage\r\n * @return void\r\n */\r\nfunction dslca_update_report_log() {\r\n\r\n\tvar errors_container = document.getElementById('dslca-js-errors-report');\r\n\tvar error_report = localStorage.getItem('js_errors_report');\r\n\r\n\tif ( null !== error_report ) {\r\n\t\tif ( error_report.includes('lc-extensions') || error_report.includes('page-builder') ) {\r\n\t\t\terrors_container.value = error_report;\r\n\t\t\tlocalStorage.removeItem('js_errors_report');\r\n\t\t\tdocument.querySelector( '.dslca-show-js-error-hook' ).setAttribute('style','visibility:visible');\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// ============================================================\r\njQuery(document).on('editorFrameLoaded', function(){\r\n\r\n\tvar $ = jQuery;\r\n\tvar headerFooter = jQuery('div[data-hf]', LiveComposer.Builder.PreviewAreaDocument);\r\n\tvar overlay = '';\r\n\r\n\theaderFooter.each(function(index, el) {\r\n\t\tvar linkToEdit = jQuery(el).data('editing-link');\r\n\t\tvar hfType = jQuery(el).data('editing-type');\r\n\t\tvar editingLabel = jQuery(el).data('editing-label');\r\n\t\tvar editingSubLabel = jQuery(el).data('editing-sublabel');\r\n\r\n\t\toverlay += '<div class=\"dslc-hf-block-overlay\"><a target=\"_blank\" href=\"' + linkToEdit + '\" class=\"dslc-hf-block-overlay-button dslca-link\">' + editingLabel + '</a>';\r\n\t\tif ( editingSubLabel !== undefined ) {\r\n\t\t\toverlay += ' <span class=\"dslc-hf-block-overlay-text\">' + editingSubLabel + '</span>';\r\n\t\t}\r\n\t\toverlay += '</div>';\r\n\r\n\t\tvar htmlObject = document.createElement('div');\r\n\t\thtmlObject.innerHTML = overlay;\r\n\r\n\t\tel.append( htmlObject );\r\n\t});\r\n\r\n});\r\n","/**\r\n * Custom utils\r\n */\r\n\r\n'use strict';\r\n\r\nconst Utils = {\r\n\taddslashes: function(str)\r\n\t{\r\n\t\t str = str.replace(/\\\\/g, '\\\\\\\\');\r\n\t\t str = str.replace(/\\'/g, '\\\\\\'');\r\n\t\t str = str.replace(/\\\"/g, '\\\\\"');\r\n\t\t str = str.replace(/\\0/g, '\\\\0');\r\n\t\t return str;\r\n\t},\r\n\r\n\tbasename: function(path)\r\n\t{\r\n\t\treturn path.split(/[\\\\/]/).pop();\r\n\t},\r\n\r\n\t/**\r\n\t * Check if browser is IE\r\n\t */\r\n\tmsieversion: function() {\r\n\r\n\t    var ua = window.navigator.userAgent;\r\n\t    var msie = ua.indexOf(\"MSIE \");\r\n\r\n\t    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\\:11\\./))  // If Internet Explorer, return version number\r\n\t    {\r\n\t        return parseInt(ua.substring(msie + 5, ua.indexOf(\".\", msie)));\r\n\t    }\r\n\t    else  // If another browser, return 0\r\n\t    {\r\n\t        return false;\r\n\t    }\r\n\t},\r\n\r\n\t/**\r\n\t * Check if variables in array is desired types\r\n\t * @param  {array} array\r\n\t * @return {boolean}\r\n\t */\r\n\tcheckParams: function(array)\r\n\t{\r\n\t\tif(!Array.isArray(array))\r\n\t\t{\r\n\t\t\tthrow ('Param is not array');\r\n\t\t}\r\n\r\n\t\t/// Instead of switch construction\r\n\t\tvar types = {\r\n\t\t\tinteger: function(param)\r\n\t\t\t{\r\n\t\t\t\treturn isNaN(parseInt(param));\r\n\t\t\t},\r\n\t\t\tfloat: function(param)\r\n\t\t\t{\r\n\t\t\t\treturn isNaN(parseFloat(param));\r\n\t\t\t},\r\n\t\t\tstring: function(param)\r\n\t\t\t{\r\n\t\t\t\treturn param != null && param != undefined && typeof param == 'string';\r\n\t\t\t},\r\n\t\t\tarray: function(param)\r\n\t\t\t{\r\n\t\t\t\treturn Array.isArray(param);\r\n\t\t\t},\r\n\t\t\tobject: function(param)\r\n\t\t\t{\r\n\t\t\t\treturn typeof param == 'object';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/// Check it!\r\n\t\tarray.map(function(item){\r\n\t\t\tif(!types[item[1]](item[0])){\r\n\t\t\t\tthrow('Param ' + item[0] + ' is not ' + item[1]);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Converts UTF-8 to base64\r\n\t *\r\n\t * @param  {string} t utf-8\r\n\t * @return {string}   b64\r\n\t */\r\n\tutf8_to_b64: function(t) {\r\n\r\n\t\treturn window.btoa(unescape(encodeURIComponent(t)));\r\n\t},\r\n\r\n\t/**\r\n\t * Converts base64 to UTF-8\r\n\t *\r\n\t * @param  {string} str in b64\r\n\t * @return {string}   in utf-8\r\n\t */\r\n\tb64_to_utf8: function(str) {\r\n\r\n\t\treturn decodeURIComponent(escape(window.atob(str)));\r\n\t},\r\n\r\n\t/**\r\n\t * Get Page Params\r\n\t *\r\n\t * @return {array}\r\n\t */\r\n\tget_page_params: function() {\r\n\r\n\t\treturn decodeURIComponent(window.location.search.slice(1)).split('&').reduce(function _reduce ( a, b) { b = b.split('='); a[b[0]] = b[1]; return a; }, {});\r\n\t},\r\n\r\n\tget_unique_id: function() {\r\n\r\n\t\treturn Math.random().toString(32).slice(2);\r\n\t},\r\n\r\n\t/**\r\n\t * Update module option in raw JSON code (dslc_code) of the module\r\n\t *\r\n\t * @param  {DOM element} module    Module Element\r\n\t * @param  {string} property_name  Name of the option we change\r\n\t * @param  {string} property_value Value of the option we change\r\n\t * @return {void}\r\n\t */\r\n\tupdate_module_property_raw: function (module, property_name, property_value ) {\r\n\t\t// Hidden textarea element with raw base64 code of the module\r\n\t\t// <textarea class=\"dslca-module-code\">YTo2On....iOjE7fQ==</textarea>\r\n\t\tvar module_code_container = module.getElementsByClassName('dslca-module-code')[0];\r\n\r\n\t\t// Hidden textarea element with value of this particular setting\r\n\t\t// <textarea data-id=\"property_name\">property_value</textarea>\r\n\t\tvar property_container = module.querySelector( '.dslca-module-option-front[data-id=\"' + property_name + '\"]' );\r\n\r\n\t\t// Get module raw code\r\n\t\tvar module_code = module_code_container.value;\r\n\r\n\t\tmodule_code = JSON.parse( module_code );\r\n\t\tmodule_code[property_name] = property_value;\r\n\t\tmodule_code = JSON.stringify( module_code );\r\n\r\n\t\t// Update raw code\r\n\t\tmodule_code_container.value = module_code;\r\n\t\tmodule_code_container.innerText = module_code; // See comment block below\r\n\r\n\t\t// Change the property in hidden textarea as well\r\n\t\tproperty_container.value = property_value;\r\n\t\tproperty_container.innerText  = property_value; // See comment block below\r\n\r\n\t\t/**\r\n\t\t * FireFox will not duplicate textarea value properly using .cloneNode(true)\r\n\t\t * if we don't use .innerHTML statement (Chrome works fine with .value only).\r\n\t\t *\r\n\t\t * See bug report: https://bugzilla.mozilla.org/show_bug.cgi?id=237783\r\n\t\t */\r\n\t},\r\n\r\n\t/**\r\n\t * Update section option in raw JSON code (dslc_code) of the section\r\n\t *\r\n\t * @param  {DOM element} section    `section Element\r\n\t * @param  {string} property_name  Name of the option we change\r\n\t * @param  {string} property_value Value of the option we change\r\n\t * @return {void}\r\n\t */\r\n\tupdate_section_property_raw: function (section, property_name, property_value ) {\r\n\t\t// Hidden textarea element with raw base64 code of the roq\r\n\t\t// <textarea class=\"dslca-section-code\"></textarea>\r\n\t\tvar section_code_container = section.getElementsByClassName('dslca-section-code')[0];\r\n\r\n\t\t// Hidden input element with value of this particular setting\r\n\t\t// <input data-id=\"property_name\">property_value</textarea>\r\n\t\tvar property_container = section.querySelector( '.dslca-modules-section-settings input[data-id=\"' + property_name + '\"]' );\r\n\r\n\t\t// Get module raw code\r\n\t\tvar section_code = section_code_container.value;\r\n\r\n\t\tsection_code = JSON.parse( section_code );\r\n\t\tsection_code[property_name] = property_value;\r\n\t\tsection_code = JSON.stringify( section_code );\r\n\r\n\t\t// Update raw code\r\n\t\tsection_code_container.value = section_code;\r\n\t\tsection_code_container.innerText = section_code; // See comment block below\r\n\r\n\t\t// Change the property in hidden textarea as well\r\n\t\tproperty_container.setAttribute( 'value', property_value );\r\n\t\tproperty_container.setAttribute( 'data-def', property_value );\r\n\t},\r\n\r\n\t/**\r\n\t * Provide custom events publish.\r\n\t * Also echoes all the custom events in the preview iframe as well.\r\n\t *\r\n\t * @param  {string} eventName\r\n\t * @param  {object||string||null||numeric} eventData [description]\r\n\t */\r\n\tpublish: function( eventName, eventData ) {\r\n\r\n\t\teventData = eventData ? eventData : {};\r\n\r\n\t\tthis.checkParams( [\r\n\t\t\t[eventName, 'string'],\r\n\t\t\t[eventData, 'object']\r\n\t\t] );\r\n\r\n\t\tjQuery(document).trigger( {\r\n\t\t\ttype: eventName,\r\n\t\t\tmessage: {details: eventData}\r\n\t\t} );\r\n\r\n\t\tLiveComposer.Builder.PreviewAreaWindow.dslca_publish_event( eventName, eventData );\r\n\t}\r\n};\r\n\r\nexport const untilsInitJs = () => {\r\n\twindow.LiveComposer.Utils = Utils;\r\n}\r\n","/**\n * Anime.js - animatable - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { compositionTypes, noop } from '../core/consts.js';\nimport { scope } from '../core/globals.js';\nimport { isUnd, isKey, stringStartsWith, isObj, mergeObjects, forEachChildren, isStr, isArr } from '../core/helpers.js';\nimport { JSAnimation } from '../animation/animation.js';\nimport { parseEase } from '../easings/eases/parser.js';\n\n/**\n * @import {\n * TargetsParam,\n * AnimatableParams,\n * AnimationParams,\n * TweenParamsOptions,\n * Tween,\n * AnimatableProperty,\n * AnimatableObject,\n * } from '../types/index.js';\n */\n\nclass Animatable {\n  /**\n   * @param {TargetsParam} targets\n   * @param {AnimatableParams} parameters\n   */\n  constructor(targets, parameters) {\n    if (scope.current) scope.current.register(this);\n    const beginHandler = () => {\n      if (this.callbacks.completed) this.callbacks.reset();\n      this.callbacks.play();\n    };\n    const pauseHandler = () => {\n      if (this.callbacks.completed) return;\n      let paused = true;\n      for (let name in this.animations) {\n        const anim = this.animations[name];\n        if (!anim.paused && paused) {\n          paused = false;\n          break;\n        }\n      }\n      if (paused) {\n        this.callbacks.complete();\n      }\n    };\n    /** @type {AnimationParams} */\n    const globalParams = {\n      onBegin: beginHandler,\n      onComplete: pauseHandler,\n      onPause: pauseHandler,\n    };\n    /** @type {AnimationParams} */\n    const callbacksAnimationParams = { v: 1, autoplay: false };\n    const properties = {};\n    this.targets = [];\n    this.animations = {};\n    /** @type {JSAnimation|null} */\n    this.callbacks = null;\n    if (isUnd(targets) || isUnd(parameters)) return;\n    for (let propName in parameters) {\n      const paramValue = parameters[propName];\n      if (isKey(propName)) {\n        properties[propName] = paramValue;\n      } else if (stringStartsWith(propName, 'on')) {\n        callbacksAnimationParams[propName] = paramValue;\n      } else {\n        globalParams[propName] = paramValue;\n      }\n    }\n    this.callbacks = new JSAnimation({ v: 0 }, callbacksAnimationParams);\n    for (let propName in properties) {\n      const propValue = properties[propName];\n      const isObjValue = isObj(propValue);\n      /** @type {TweenParamsOptions} */\n      let propParams = {};\n      let to = '+=0';\n      if (isObjValue) {\n        const unit = propValue.unit;\n        if (isStr(unit)) to += unit;\n      } else {\n        propParams.duration = propValue;\n      }\n      propParams[propName] = isObjValue ? mergeObjects({ to }, propValue) : to;\n      const animParams = mergeObjects(globalParams, propParams);\n      animParams.composition = compositionTypes.replace;\n      animParams.autoplay = false;\n      const animation = this.animations[propName] = new JSAnimation(targets, animParams, null, 0, false).init();\n      if (!this.targets.length) this.targets.push(...animation.targets);\n      /** @type {AnimatableProperty} */\n      this[propName] = (to, duration, ease) => {\n        const tween = /** @type {Tween} */(animation._head);\n        if (isUnd(to) && tween) {\n          const numbers = tween._numbers;\n          if (numbers && numbers.length) {\n            return numbers;\n          } else {\n            return tween._modifier(tween._number);\n          }\n        } else {\n          forEachChildren(animation, (/** @type {Tween} */tween) => {\n            if (isArr(to)) {\n              for (let i = 0, l = /** @type {Array} */(to).length; i < l; i++) {\n                if (!isUnd(tween._numbers[i])) {\n                  tween._fromNumbers[i] = /** @type {Number} */(tween._modifier(tween._numbers[i]));\n                  tween._toNumbers[i] = to[i];\n                }\n              }\n            } else {\n              tween._fromNumber = /** @type {Number} */(tween._modifier(tween._number));\n              tween._toNumber = /** @type {Number} */(to);\n            }\n            if (!isUnd(ease)) tween._ease = parseEase(ease);\n            tween._currentTime = 0;\n          });\n          if (!isUnd(duration)) animation.stretch(duration);\n          animation.reset(true).resume();\n          return this;\n        }\n      };\n    }\n  }\n\n  revert() {\n    for (let propName in this.animations) {\n      this[propName] = noop;\n      this.animations[propName].revert();\n    }\n    this.animations = {};\n    this.targets.length = 0;\n    if (this.callbacks) this.callbacks.revert();\n    return this;\n  }\n}\n\n/**\n * @param {TargetsParam} targets\n * @param {AnimatableParams} parameters\n * @return {AnimatableObject}\n */\nconst createAnimatable = (targets, parameters) => /** @type {AnimatableObject} */ (new Animatable(targets, parameters));\n\nexport { Animatable, createAnimatable };\n","/**\n * Anime.js - animation - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { noop, minValue, valueTypes, tickModes } from '../core/consts.js';\nimport { cloneArray } from '../core/helpers.js';\nimport { render } from '../core/render.js';\n\nconst additive = {\n  animation: null,\n  update: noop,\n};\n\n/**\n * @import {\n *   Tween,\n *   TweenAdditiveLookups,\n * } from '../types/index.js'\n */\n\n/**\n * @typedef AdditiveAnimation\n * @property {Number} duration\n * @property {Number} _offset\n * @property {Number} _delay\n * @property {Tween} _head\n * @property {Tween} _tail\n */\n\n/**\n * @param  {TweenAdditiveLookups} lookups\n * @return {AdditiveAnimation}\n */\nconst addAdditiveAnimation = lookups => {\n  let animation = additive.animation;\n  if (!animation) {\n    animation = {\n      duration: minValue,\n      computeDeltaTime: noop,\n      _offset: 0,\n      _delay: 0,\n      _head: null,\n      _tail: null,\n    };\n    additive.animation = animation;\n    additive.update = () => {\n      lookups.forEach(propertyAnimation => {\n        for (let propertyName in propertyAnimation) {\n          const tweens = propertyAnimation[propertyName];\n          const lookupTween = tweens._head;\n          if (lookupTween) {\n            const valueType = lookupTween._valueType;\n            const additiveValues = valueType === valueTypes.COMPLEX || valueType === valueTypes.COLOR ? cloneArray(lookupTween._fromNumbers) : null;\n            let additiveValue = lookupTween._fromNumber;\n            let tween = tweens._tail;\n            while (tween && tween !== lookupTween) {\n              if (additiveValues) {\n                for (let i = 0, l = tween._numbers.length; i < l; i++) additiveValues[i] += tween._numbers[i];\n              } else {\n                additiveValue += tween._number;\n              }\n              tween = tween._prevAdd;\n            }\n            lookupTween._toNumber = additiveValue;\n            lookupTween._toNumbers = additiveValues;\n          }\n        }\n      });\n      // TODO: Avoid polymorphism here, idealy the additive animation should be a regular animation with a higher priority in the render loop\n      render(animation, 1, 1, 0, tickModes.FORCE);\n    };\n  }\n  return animation;\n};\n\nexport { addAdditiveAnimation, additive };\n","/**\n * Anime.js - animation - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { K, compositionTypes, valueTypes, minValue, tweenTypes } from '../core/consts.js';\nimport { mergeObjects, isUnd, isKey, isObj, round, cloneArray, isNil, addChild, forEachChildren, clampInfinity, normalizeTime, isArr, isNum } from '../core/helpers.js';\nimport { globals } from '../core/globals.js';\nimport { registerTargets } from '../core/targets.js';\nimport { setValue, getTweenType, getFunctionValue, decomposeRawValue, createDecomposedValueTargetObject, getOriginalAnimatableValue, decomposedOriginalValue, getRelativeValue, decomposeTweenValue } from '../core/values.js';\nimport { sanitizePropertyName, cleanInlineStyles } from '../core/styles.js';\nimport { convertValueUnit } from '../core/units.js';\nimport { parseEase } from '../easings/eases/parser.js';\nimport { Timer } from '../timer/timer.js';\nimport { getTweenSiblings, overrideTween, composeTween } from './composition.js';\nimport { additive } from './additive.js';\n\n/**\n * @import {\n *   Tween,\n *   TweenKeyValue,\n *   TweenParamsOptions,\n *   TweenValues,\n *   DurationKeyframes,\n *   PercentageKeyframes,\n *   AnimationParams,\n *   TweenPropValue,\n *   ArraySyntaxValue,\n *   TargetsParam,\n *   TimerParams,\n *   TweenParamValue,\n *   DOMTarget,\n *   TargetsArray,\n *   Callback,\n *   EasingFunction,\n * } from '../types/index.js'\n *\n * @import {\n *   Timeline,\n * } from '../timeline/timeline.js'\n *\n * @import {\n *   Spring,\n * } from '../easings/spring/index.js'\n */\n\n// Defines decomposed values target objects only once and mutate their properties later to avoid GC\n// TODO: Maybe move the objects creation to values.js and use the decompose function to create the base object\nconst fromTargetObject = createDecomposedValueTargetObject();\nconst toTargetObject = createDecomposedValueTargetObject();\nconst inlineStylesStore = {};\nconst toFunctionStore = { func: null };\nconst keyframesTargetArray = [null];\nconst fastSetValuesArray = [null, null];\n/** @type {TweenKeyValue} */\nconst keyObjectTarget = { to: null };\n\nlet tweenId = 0;\nlet keyframes;\n/** @type {TweenParamsOptions & TweenValues} */\nlet key;\n\n/**\n * @param {DurationKeyframes | PercentageKeyframes} keyframes\n * @param {AnimationParams} parameters\n * @return {AnimationParams}\n */\nconst generateKeyframes = (keyframes, parameters) => {\n  /** @type {AnimationParams} */\n  const properties = {};\n  if (isArr(keyframes)) {\n    const propertyNames = [].concat(.../** @type {DurationKeyframes} */(keyframes).map(key => Object.keys(key))).filter(isKey);\n    for (let i = 0, l = propertyNames.length; i < l; i++) {\n      const propName = propertyNames[i];\n      const propArray = /** @type {DurationKeyframes} */(keyframes).map(key => {\n        /** @type {TweenKeyValue} */\n        const newKey = {};\n        for (let p in key) {\n          const keyValue = /** @type {TweenPropValue} */(key[p]);\n          if (isKey(p)) {\n            if (p === propName) {\n              newKey.to = keyValue;\n            }\n          } else {\n            newKey[p] = keyValue;\n          }\n        }\n        return newKey;\n      });\n      properties[propName] = /** @type {ArraySyntaxValue} */(propArray);\n    }\n\n  } else {\n    const totalDuration = /** @type {Number} */(setValue(parameters.duration, globals.defaults.duration));\n    const keys = Object.keys(keyframes)\n    .map(key => { return {o: parseFloat(key) / 100, p: keyframes[key]} })\n    .sort((a, b) => a.o - b.o);\n    keys.forEach(key => {\n      const offset = key.o;\n      const prop = key.p;\n      for (let name in prop) {\n        if (isKey(name)) {\n          let propArray = /** @type {Array} */(properties[name]);\n          if (!propArray) propArray = properties[name] = [];\n          const duration = offset * totalDuration;\n          let length = propArray.length;\n          let prevKey = propArray[length - 1];\n          const keyObj = { to: prop[name] };\n          let durProgress = 0;\n          for (let i = 0; i < length; i++) {\n            durProgress += propArray[i].duration;\n          }\n          if (length === 1) {\n            keyObj.from = prevKey.to;\n          }\n          if (prop.ease) {\n            keyObj.ease = prop.ease;\n          }\n          keyObj.duration = duration - (length ? durProgress : 0);\n          propArray.push(keyObj);\n        }\n      }\n      return key;\n    });\n\n    for (let name in properties) {\n      const propArray = /** @type {Array} */(properties[name]);\n      let prevEase;\n      // let durProgress = 0\n      for (let i = 0, l = propArray.length; i < l; i++) {\n        const prop = propArray[i];\n        // Emulate WAPPI easing parameter position\n        const currentEase = prop.ease;\n        prop.ease = prevEase ? prevEase : undefined;\n        prevEase = currentEase;\n        // durProgress += prop.duration;\n        // if (i === l - 1 && durProgress !== totalDuration) {\n        //   propArray.push({ from: prop.to, ease: prop.ease, duration: totalDuration - durProgress })\n        // }\n      }\n      if (!propArray[0].duration) {\n        propArray.shift();\n      }\n    }\n\n  }\n\n  return properties;\n};\n\nclass JSAnimation extends Timer {\n  /**\n   * @param {TargetsParam} targets\n   * @param {AnimationParams} parameters\n   * @param {Timeline} [parent]\n   * @param {Number} [parentPosition]\n   * @param {Boolean} [fastSet=false]\n   * @param {Number} [index=0]\n   * @param {Number} [length=0]\n   */\n  constructor(\n    targets,\n    parameters,\n    parent,\n    parentPosition,\n    fastSet = false,\n    index = 0,\n    length = 0\n  ) {\n\n    super(/** @type {TimerParams & AnimationParams} */(parameters), parent, parentPosition);\n\n    const parsedTargets = registerTargets(targets);\n    const targetsLength = parsedTargets.length;\n\n    // If the parameters object contains a \"keyframes\" property, convert all the keyframes values to regular properties\n\n    const kfParams = /** @type {AnimationParams} */(parameters).keyframes;\n    const params = /** @type {AnimationParams} */(kfParams ? mergeObjects(generateKeyframes(/** @type {DurationKeyframes} */(kfParams), parameters), parameters) : parameters);\n\n    const {\n      delay,\n      duration,\n      ease,\n      playbackEase,\n      modifier,\n      composition,\n      onRender,\n    } = params;\n\n    const animDefaults = parent ? parent.defaults : globals.defaults;\n    const animaPlaybackEase = setValue(playbackEase, animDefaults.playbackEase);\n    const animEase = animaPlaybackEase ? parseEase(animaPlaybackEase) : null;\n    const hasSpring = !isUnd(ease) && !isUnd(/** @type {Spring} */(ease).ease);\n    const tEasing = hasSpring ? /** @type {Spring} */(ease).ease : setValue(ease, animEase ? 'linear' : animDefaults.ease);\n    const tDuration = hasSpring ? /** @type {Spring} */(ease).settlingDuration : setValue(duration, animDefaults.duration);\n    const tDelay = setValue(delay, animDefaults.delay);\n    const tModifier = modifier || animDefaults.modifier;\n    // If no composition is defined and the targets length is high (>= 1000) set the composition to 'none' (0) for faster tween creation\n    const tComposition = isUnd(composition) && targetsLength >= K ? compositionTypes.none : !isUnd(composition) ? composition : animDefaults.composition;\n    // const absoluteOffsetTime = this._offset;\n    const absoluteOffsetTime = this._offset + (parent ? parent._offset : 0);\n    // This allows targeting the current animation in the spring onComplete callback\n    if (hasSpring) /** @type {Spring} */(ease).parent = this;\n\n    let iterationDuration = NaN;\n    let iterationDelay = NaN;\n    let animationAnimationLength = 0;\n    let shouldTriggerRender = 0;\n\n    for (let targetIndex = 0; targetIndex < targetsLength; targetIndex++) {\n\n      const target = parsedTargets[targetIndex];\n      const ti = index || targetIndex;\n      const tl = length || targetsLength;\n\n      let lastTransformGroupIndex = NaN;\n      let lastTransformGroupLength = NaN;\n\n      for (let p in params) {\n\n        if (isKey(p)) {\n\n          const tweenType = getTweenType(target, p);\n\n          const propName = sanitizePropertyName(p, target, tweenType);\n\n          let propValue = params[p];\n\n          const isPropValueArray = isArr(propValue);\n\n          if (fastSet && !isPropValueArray) {\n            fastSetValuesArray[0] = propValue;\n            fastSetValuesArray[1] = propValue;\n            propValue = fastSetValuesArray;\n          }\n\n          // TODO: Allow nested keyframes inside ObjectValue value (prop: { to: [.5, 1, .75, 2, 3] })\n          // Normalize property values to valid keyframe syntax:\n          // [x, y] to [{to: [x, y]}] or {to: x} to [{to: x}] or keep keys syntax [{}, {}, {}...]\n          // const keyframes = isArr(propValue) ? propValue.length === 2 && !isObj(propValue[0]) ? [{ to: propValue }] : propValue : [propValue];\n          if (isPropValueArray) {\n            const arrayLength = /** @type {Array} */(propValue).length;\n            const isNotObjectValue = !isObj(propValue[0]);\n            // Convert [x, y] to [{to: [x, y]}]\n            if (arrayLength === 2 && isNotObjectValue) {\n              keyObjectTarget.to = /** @type {TweenParamValue} */(/** @type {unknown} */(propValue));\n              keyframesTargetArray[0] = keyObjectTarget;\n              keyframes = keyframesTargetArray;\n            // Convert [x, y, z] to [[x, y], z]\n            } else if (arrayLength > 2 && isNotObjectValue) {\n              keyframes = [];\n              /** @type {Array.<Number>} */(propValue).forEach((v, i) => {\n                if (!i) {\n                  fastSetValuesArray[0] = v;\n                } else if (i === 1) {\n                  fastSetValuesArray[1] = v;\n                  keyframes.push(fastSetValuesArray);\n                } else {\n                  keyframes.push(v);\n                }\n              });\n            } else {\n              keyframes = /** @type {Array.<TweenKeyValue>} */(propValue);\n            }\n          } else {\n            keyframesTargetArray[0] = propValue;\n            keyframes = keyframesTargetArray;\n          }\n\n          let siblings = null;\n          let prevTween = null;\n          let firstTweenChangeStartTime = NaN;\n          let lastTweenChangeEndTime = 0;\n          let tweenIndex = 0;\n\n          for (let l = keyframes.length; tweenIndex < l; tweenIndex++) {\n\n            const keyframe = keyframes[tweenIndex];\n\n            if (isObj(keyframe)) {\n              key = keyframe;\n            } else {\n              keyObjectTarget.to = /** @type {TweenParamValue} */(keyframe);\n              key = keyObjectTarget;\n            }\n\n            toFunctionStore.func = null;\n\n            const computedToValue = getFunctionValue(key.to, target, ti, tl, toFunctionStore);\n\n            let tweenToValue;\n            // Allows function based values to return an object syntax value ({to: v})\n            if (isObj(computedToValue) && !isUnd(computedToValue.to)) {\n              key = computedToValue;\n              tweenToValue = computedToValue.to;\n            } else {\n              tweenToValue = computedToValue;\n            }\n            const tweenFromValue = getFunctionValue(key.from, target, ti, tl);\n            const keyEasing = key.ease;\n            const hasSpring = !isUnd(keyEasing) && !isUnd(/** @type {Spring} */(keyEasing).ease);\n            // Easing are treated differently and don't accept function based value to prevent having to pass a function wrapper that returns an other function all the time\n            const tweenEasing = hasSpring ? /** @type {Spring} */(keyEasing).ease : keyEasing || tEasing;\n            // Calculate default individual keyframe duration by dividing the tl of keyframes\n            const tweenDuration = hasSpring ? /** @type {Spring} */(keyEasing).settlingDuration : getFunctionValue(setValue(key.duration, (l > 1 ? getFunctionValue(tDuration, target, ti, tl) / l : tDuration)), target, ti, tl);\n            // Default delay value should only be applied to the first tween\n            const tweenDelay = getFunctionValue(setValue(key.delay, (!tweenIndex ? tDelay : 0)), target, ti, tl);\n            const computedComposition = getFunctionValue(setValue(key.composition, tComposition), target, ti, tl);\n            const tweenComposition = isNum(computedComposition) ? computedComposition : compositionTypes[computedComposition];\n            // Modifiers are treated differently and don't accept function based value to prevent having to pass a function wrapper\n            const tweenModifier = key.modifier || tModifier;\n            const hasFromvalue = !isUnd(tweenFromValue);\n            const hasToValue = !isUnd(tweenToValue);\n            const isFromToArray = isArr(tweenToValue);\n            const isFromToValue = isFromToArray || (hasFromvalue && hasToValue);\n            const tweenStartTime = prevTween ? lastTweenChangeEndTime + tweenDelay : tweenDelay;\n            // Rounding is necessary here to minimize floating point errors when working in seconds\n            const absoluteStartTime = round(absoluteOffsetTime + tweenStartTime, 12);\n\n            // Force a onRender callback if the animation contains at least one from value and autoplay is set to false\n            if (!shouldTriggerRender && (hasFromvalue || isFromToArray)) shouldTriggerRender = 1;\n\n            let prevSibling = prevTween;\n\n            if (tweenComposition !== compositionTypes.none) {\n              if (!siblings) siblings = getTweenSiblings(target, propName);\n              let nextSibling = siblings._head;\n              // Iterate trough all the next siblings until we find a sibling with an equal or inferior start time\n              while (nextSibling && !nextSibling._isOverridden && nextSibling._absoluteStartTime <= absoluteStartTime) {\n                prevSibling = nextSibling;\n                nextSibling = nextSibling._nextRep;\n                // Overrides all the next siblings if the next sibling starts at the same time of after as the new tween start time\n                if (nextSibling && nextSibling._absoluteStartTime >= absoluteStartTime) {\n                  while (nextSibling) {\n                    overrideTween(nextSibling);\n                    // This will ends both the current while loop and the upper one once all the next sibllings have been overriden\n                    nextSibling = nextSibling._nextRep;\n                  }\n                }\n              }\n            }\n\n            // Decompose values\n            if (isFromToValue) {\n              decomposeRawValue(isFromToArray ? getFunctionValue(tweenToValue[0], target, ti, tl) : tweenFromValue, fromTargetObject);\n              decomposeRawValue(isFromToArray ? getFunctionValue(tweenToValue[1], target, ti, tl, toFunctionStore) : tweenToValue, toTargetObject);\n              if (fromTargetObject.t === valueTypes.NUMBER) {\n                if (prevSibling) {\n                  if (prevSibling._valueType === valueTypes.UNIT) {\n                    fromTargetObject.t = valueTypes.UNIT;\n                    fromTargetObject.u = prevSibling._unit;\n                  }\n                } else {\n                  decomposeRawValue(\n                    getOriginalAnimatableValue(target, propName, tweenType, inlineStylesStore),\n                    decomposedOriginalValue\n                  );\n                  if (decomposedOriginalValue.t === valueTypes.UNIT) {\n                    fromTargetObject.t = valueTypes.UNIT;\n                    fromTargetObject.u = decomposedOriginalValue.u;\n                  }\n                }\n              }\n            } else {\n              if (hasToValue) {\n                decomposeRawValue(tweenToValue, toTargetObject);\n              } else {\n                if (prevTween) {\n                  decomposeTweenValue(prevTween, toTargetObject);\n                } else {\n                  // No need to get and parse the original value if the tween is part of a timeline and has a previous sibling part of the same timeline\n                  decomposeRawValue(parent && prevSibling && prevSibling.parent.parent === parent ? prevSibling._value :\n                  getOriginalAnimatableValue(target, propName, tweenType, inlineStylesStore), toTargetObject);\n                }\n              }\n              if (hasFromvalue) {\n                decomposeRawValue(tweenFromValue, fromTargetObject);\n              } else {\n                if (prevTween) {\n                  decomposeTweenValue(prevTween, fromTargetObject);\n                } else {\n                  decomposeRawValue(parent && prevSibling && prevSibling.parent.parent === parent ? prevSibling._value :\n                  // No need to get and parse the original value if the tween is part of a timeline and has a previous sibling part of the same timeline\n                  getOriginalAnimatableValue(target, propName, tweenType, inlineStylesStore), fromTargetObject);\n                }\n              }\n            }\n\n            // Apply operators\n            if (fromTargetObject.o) {\n              fromTargetObject.n = getRelativeValue(\n                !prevSibling ? decomposeRawValue(\n                  getOriginalAnimatableValue(target, propName, tweenType, inlineStylesStore),\n                  decomposedOriginalValue\n                ).n : prevSibling._toNumber,\n                fromTargetObject.n,\n                fromTargetObject.o\n              );\n            }\n\n            if (toTargetObject.o) {\n              toTargetObject.n = getRelativeValue(fromTargetObject.n, toTargetObject.n, toTargetObject.o);\n            }\n\n            // Values omogenisation in cases of type difference between \"from\" and \"to\"\n            if (fromTargetObject.t !== toTargetObject.t) {\n              if (fromTargetObject.t === valueTypes.COMPLEX || toTargetObject.t === valueTypes.COMPLEX) {\n                const complexValue = fromTargetObject.t === valueTypes.COMPLEX ? fromTargetObject : toTargetObject;\n                const notComplexValue = fromTargetObject.t === valueTypes.COMPLEX ? toTargetObject : fromTargetObject;\n                notComplexValue.t = valueTypes.COMPLEX;\n                notComplexValue.s = cloneArray(complexValue.s);\n                notComplexValue.d = complexValue.d.map(() => notComplexValue.n);\n              } else if (fromTargetObject.t === valueTypes.UNIT || toTargetObject.t === valueTypes.UNIT) {\n                const unitValue = fromTargetObject.t === valueTypes.UNIT ? fromTargetObject : toTargetObject;\n                const notUnitValue = fromTargetObject.t === valueTypes.UNIT ? toTargetObject : fromTargetObject;\n                notUnitValue.t = valueTypes.UNIT;\n                notUnitValue.u = unitValue.u;\n              } else if (fromTargetObject.t === valueTypes.COLOR || toTargetObject.t === valueTypes.COLOR) {\n                const colorValue = fromTargetObject.t === valueTypes.COLOR ? fromTargetObject : toTargetObject;\n                const notColorValue = fromTargetObject.t === valueTypes.COLOR ? toTargetObject : fromTargetObject;\n                notColorValue.t = valueTypes.COLOR;\n                notColorValue.s = colorValue.s;\n                notColorValue.d = [0, 0, 0, 1];\n              }\n            }\n\n            // Unit conversion\n            if (fromTargetObject.u !== toTargetObject.u) {\n              let valueToConvert = toTargetObject.u ? fromTargetObject : toTargetObject;\n              valueToConvert = convertValueUnit(/** @type {DOMTarget} */(target), valueToConvert, toTargetObject.u ? toTargetObject.u : fromTargetObject.u, false);\n              // TODO:\n              // convertValueUnit(target, to.u ? from : to, to.u ? to.u : from.u);\n            }\n\n            // Fill in non existing complex values\n            if (toTargetObject.d && fromTargetObject.d && (toTargetObject.d.length !== fromTargetObject.d.length)) {\n              const longestValue = fromTargetObject.d.length > toTargetObject.d.length ? fromTargetObject : toTargetObject;\n              const shortestValue = longestValue === fromTargetObject ? toTargetObject : fromTargetObject;\n              // TODO: Check if n should be used instead of 0 for default complex values\n              shortestValue.d = longestValue.d.map((/** @type {Number} */_, /** @type {Number} */i) => isUnd(shortestValue.d[i]) ? 0 : shortestValue.d[i]);\n              shortestValue.s = cloneArray(longestValue.s);\n            }\n\n            // Tween factory\n\n            // Rounding is necessary here to minimize floating point errors when working in seconds\n            const tweenUpdateDuration = round(+tweenDuration || minValue, 12);\n\n            // Copy the value of the iniline style if it exist and imediatly nullify it to prevents false positive on other targets\n            let inlineValue = inlineStylesStore[propName];\n            if (!isNil(inlineValue)) inlineStylesStore[propName] = null;\n\n            /** @type {Tween} */\n            const tween = {\n              parent: this,\n              id: tweenId++,\n              property: propName,\n              target: target,\n              _value: null,\n              _func: toFunctionStore.func,\n              _ease: parseEase(tweenEasing),\n              _fromNumbers: cloneArray(fromTargetObject.d),\n              _toNumbers: cloneArray(toTargetObject.d),\n              _strings: cloneArray(toTargetObject.s),\n              _fromNumber: fromTargetObject.n,\n              _toNumber: toTargetObject.n,\n              _numbers: cloneArray(fromTargetObject.d), // For additive tween and animatables\n              _number: fromTargetObject.n, // For additive tween and animatables\n              _unit: toTargetObject.u,\n              _modifier: tweenModifier,\n              _currentTime: 0,\n              _startTime: tweenStartTime,\n              _delay: +tweenDelay,\n              _updateDuration: tweenUpdateDuration,\n              _changeDuration: tweenUpdateDuration,\n              _absoluteStartTime: absoluteStartTime,\n              // NOTE: Investigate bit packing to stores ENUM / BOOL\n              _tweenType: tweenType,\n              _valueType: toTargetObject.t,\n              _composition: tweenComposition,\n              _isOverlapped: 0,\n              _isOverridden: 0,\n              _renderTransforms: 0,\n              _inlineValue: inlineValue,\n              _prevRep: null, // For replaced tween\n              _nextRep: null, // For replaced tween\n              _prevAdd: null, // For additive tween\n              _nextAdd: null, // For additive tween\n              _prev: null,\n              _next: null,\n            };\n\n            if (tweenComposition !== compositionTypes.none) {\n              composeTween(tween, siblings);\n            }\n\n            if (isNaN(firstTweenChangeStartTime)) {\n              firstTweenChangeStartTime = tween._startTime;\n            }\n            // Rounding is necessary here to minimize floating point errors when working in seconds\n            lastTweenChangeEndTime = round(tweenStartTime + tweenUpdateDuration, 12);\n            prevTween = tween;\n            animationAnimationLength++;\n\n            addChild(this, tween);\n\n          }\n\n          // Update animation timings with the added tweens properties\n\n          if (isNaN(iterationDelay) || firstTweenChangeStartTime < iterationDelay) {\n            iterationDelay = firstTweenChangeStartTime;\n          }\n\n          if (isNaN(iterationDuration) || lastTweenChangeEndTime > iterationDuration) {\n            iterationDuration = lastTweenChangeEndTime;\n          }\n\n          // TODO: Find a way to inline tween._renderTransforms = 1 here\n          if (tweenType === tweenTypes.TRANSFORM) {\n            lastTransformGroupIndex = animationAnimationLength - tweenIndex;\n            lastTransformGroupLength = animationAnimationLength;\n          }\n\n        }\n\n      }\n\n      // Set _renderTransforms to last transform property to correctly render the transforms list\n      if (!isNaN(lastTransformGroupIndex)) {\n        let i = 0;\n        forEachChildren(this, (/** @type {Tween} */tween) => {\n          if (i >= lastTransformGroupIndex && i < lastTransformGroupLength) {\n            tween._renderTransforms = 1;\n            if (tween._composition === compositionTypes.blend) {\n              forEachChildren(additive.animation, (/** @type {Tween} */additiveTween) => {\n                if (additiveTween.id === tween.id) {\n                  additiveTween._renderTransforms = 1;\n                }\n              });\n            }\n          }\n          i++;\n        });\n      }\n\n    }\n\n    if (!targetsLength) {\n      console.warn(`No target found. Make sure the element you're trying to animate is accessible before creating your animation.`);\n    }\n\n    if (iterationDelay) {\n      forEachChildren(this, (/** @type {Tween} */tween) => {\n        // If (startTime - delay) equals 0, this means the tween is at the begining of the animation so we need to trim the delay too\n        if (!(tween._startTime - tween._delay)) {\n          tween._delay -= iterationDelay;\n        }\n        tween._startTime -= iterationDelay;\n      });\n      iterationDuration -= iterationDelay;\n    } else {\n      iterationDelay = 0;\n    }\n\n    // Prevents iterationDuration to be NaN if no valid animatable props have been provided\n    // Prevents _iterationCount to be NaN if no valid animatable props have been provided\n    if (!iterationDuration) {\n      iterationDuration = minValue;\n      this.iterationCount = 0;\n    }\n    /** @type {TargetsArray} */\n    this.targets = parsedTargets;\n    /** @type {Number} */\n    this.duration = iterationDuration === minValue ? minValue : clampInfinity(((iterationDuration + this._loopDelay) * this.iterationCount) - this._loopDelay) || minValue;\n    /** @type {Callback<this>} */\n    this.onRender = onRender || animDefaults.onRender;\n    /** @type {EasingFunction} */\n    this._ease = animEase;\n    /** @type {Number} */\n    this._delay = iterationDelay;\n    // NOTE: I'm keeping delay values separated from offsets in timelines because delays can override previous tweens and it could be confusing to debug a timeline with overridden tweens and no associated visible delays.\n    // this._delay = parent ? 0 : iterationDelay;\n    // this._offset += parent ? iterationDelay : 0;\n    /** @type {Number} */\n    this.iterationDuration = iterationDuration;\n\n    if (!this._autoplay && shouldTriggerRender) this.onRender(this);\n  }\n\n  /**\n   * @param  {Number} newDuration\n   * @return {this}\n   */\n  stretch(newDuration) {\n    const currentDuration = this.duration;\n    if (currentDuration === normalizeTime(newDuration)) return this;\n    const timeScale = newDuration / currentDuration;\n    // NOTE: Find a better way to handle the stretch of an animation after stretch = 0\n    forEachChildren(this, (/** @type {Tween} */tween) => {\n      // Rounding is necessary here to minimize floating point errors\n      tween._updateDuration = normalizeTime(tween._updateDuration * timeScale);\n      tween._changeDuration = normalizeTime(tween._changeDuration * timeScale);\n      tween._currentTime *= timeScale;\n      tween._startTime *= timeScale;\n      tween._absoluteStartTime *= timeScale;\n    });\n    return super.stretch(newDuration);\n  }\n\n  /**\n   * @return {this}\n   */\n  refresh() {\n    forEachChildren(this, (/** @type {Tween} */tween) => {\n      const tweenFunc = tween._func;\n      if (tweenFunc) {\n        const ogValue = getOriginalAnimatableValue(tween.target, tween.property, tween._tweenType);\n        decomposeRawValue(ogValue, decomposedOriginalValue);\n        // TODO: Check for from / to Array based values here,\n        decomposeRawValue(tweenFunc(), toTargetObject);\n        tween._fromNumbers = cloneArray(decomposedOriginalValue.d);\n        tween._fromNumber = decomposedOriginalValue.n;\n        tween._toNumbers = cloneArray(toTargetObject.d);\n        tween._strings = cloneArray(toTargetObject.s);\n        // Make sure to apply relative operators https://github.com/juliangarnier/anime/issues/1025\n        tween._toNumber = toTargetObject.o ? getRelativeValue(decomposedOriginalValue.n, toTargetObject.n, toTargetObject.o) : toTargetObject.n;\n      }\n    });\n    // This forces setter animations to render once\n    if (this.duration === minValue) this.restart();\n    return this;\n  }\n\n  /**\n   * Cancel the animation and revert all the values affected by this animation to their original state\n   * @return {this}\n   */\n  revert() {\n    super.revert();\n    return cleanInlineStyles(this);\n  }\n\n  /**\n   * @typedef {this & {then: null}} ResolvedJSAnimation\n   */\n\n  /**\n   * @param  {Callback<ResolvedJSAnimation>} [callback]\n   * @return Promise<this>\n   */\n  then(callback) {\n    return super.then(callback);\n  }\n\n}\n\n/**\n * @param {TargetsParam} targets\n * @param {AnimationParams} parameters\n * @return {JSAnimation}\n */\nconst animate = (targets, parameters) => new JSAnimation(targets, parameters, null, 0, false).init();\n\nexport { JSAnimation, animate };\n","/**\n * Anime.js - animation - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { minValue, compositionTypes, tweenTypes } from '../core/consts.js';\nimport { forEachChildren, removeChild, isUnd, addChild, round, cloneArray } from '../core/helpers.js';\nimport { sanitizePropertyName } from '../core/styles.js';\nimport { engine } from '../engine/engine.js';\nimport { addAdditiveAnimation, additive } from './additive.js';\n\n/**\n * @import {\n *   TweenReplaceLookups,\n *   TweenAdditiveLookups,\n *   TweenPropertySiblings,\n *   Tween,\n *   Target,\n *   TargetsArray,\n *   Renderable,\n * } from '../types/index.js'\n *\n * @import {\n *   JSAnimation,\n * } from '../animation/animation.js'\n*/\n\nconst lookups = {\n  /** @type {TweenReplaceLookups} */\n  _rep: new WeakMap(),\n  /** @type {TweenAdditiveLookups} */\n  _add: new Map(),\n};\n\n/**\n * @param  {Target} target\n * @param  {String} property\n * @param  {String} lookup\n * @return {TweenPropertySiblings}\n */\nconst getTweenSiblings = (target, property, lookup = '_rep') => {\n  const lookupMap = lookups[lookup];\n  let targetLookup = lookupMap.get(target);\n  if (!targetLookup) {\n    targetLookup = {};\n    lookupMap.set(target, targetLookup);\n  }\n  return targetLookup[property] ? targetLookup[property] : targetLookup[property] = {\n    _head: null,\n    _tail: null,\n  }\n};\n\n/**\n * @param  {Tween} p\n * @param  {Tween} c\n * @return {Number|Boolean}\n */\nconst addTweenSortMethod = (p, c) => {\n  return p._isOverridden || p._absoluteStartTime > c._absoluteStartTime;\n};\n\n/**\n * @param {Tween} tween\n */\nconst overrideTween = tween => {\n  tween._isOverlapped = 1;\n  tween._isOverridden = 1;\n  tween._changeDuration = minValue;\n  tween._currentTime = minValue;\n};\n\n/**\n * @param  {Tween} tween\n * @param  {TweenPropertySiblings} siblings\n * @return {Tween}\n */\nconst composeTween = (tween, siblings) => {\n\n  const tweenCompositionType = tween._composition;\n\n  // Handle replaced tweens\n\n  if (tweenCompositionType === compositionTypes.replace) {\n\n    const tweenAbsStartTime = tween._absoluteStartTime;\n\n    addChild(siblings, tween, addTweenSortMethod, '_prevRep', '_nextRep');\n\n    const prevSibling = tween._prevRep;\n\n    // Update the previous siblings for composition replace tweens\n\n    if (prevSibling) {\n\n      const prevParent = prevSibling.parent;\n      const prevAbsEndTime = prevSibling._absoluteStartTime + prevSibling._changeDuration;\n\n      // Handle looped animations tween\n\n      if (\n        // Check if the previous tween is from a different animation\n        tween.parent.id !== prevParent.id &&\n        // Check if the animation has loops\n        prevParent.iterationCount> 1 &&\n        // Check if _absoluteChangeEndTime of last loop overlaps the current tween\n        prevAbsEndTime + (prevParent.duration - prevParent.iterationDuration) > tweenAbsStartTime\n      ) {\n\n        // TODO: Find a way to only override the iterations overlapping with the tween\n        overrideTween(prevSibling);\n\n        let prevPrevSibling = prevSibling._prevRep;\n\n        // If the tween was part of a set of keyframes, override its siblings\n        while (prevPrevSibling && prevPrevSibling.parent.id === prevParent.id) {\n          overrideTween(prevPrevSibling);\n          prevPrevSibling = prevPrevSibling._prevRep;\n        }\n\n      }\n\n      const absoluteUpdateStartTime = tweenAbsStartTime - tween._delay;\n\n      if (prevAbsEndTime > absoluteUpdateStartTime) {\n\n        const prevChangeStartTime = prevSibling._startTime;\n        const prevTLOffset = prevAbsEndTime - (prevChangeStartTime + prevSibling._updateDuration);\n        // Rounding is necessary here to minimize floating point errors when working in seconds\n        const updatedPrevChangeDuration = round(absoluteUpdateStartTime - prevTLOffset - prevChangeStartTime, 12);\n\n        prevSibling._changeDuration = updatedPrevChangeDuration;\n        prevSibling._currentTime = updatedPrevChangeDuration;\n        prevSibling._isOverlapped = 1;\n\n        // Override the previous tween if its new _changeDuration is lower than minValue\n        // TODO: See if it's even neceseeary to test against minValue, checking for 0 might be enough\n        if (updatedPrevChangeDuration < minValue) {\n          overrideTween(prevSibling);\n        }\n      }\n\n      // Pause (and cancel) the parent if it only contains overlapped tweens\n\n      let pausePrevParentAnimation = true;\n\n      forEachChildren(prevParent, (/** @type Tween */t) => {\n        if (!t._isOverlapped) pausePrevParentAnimation = false;\n      });\n\n      if (pausePrevParentAnimation) {\n        const prevParentTL = prevParent.parent;\n        if (prevParentTL) {\n          let pausePrevParentTL = true;\n          forEachChildren(prevParentTL, (/** @type JSAnimation */a) => {\n            if (a !== prevParent) {\n              forEachChildren(a, (/** @type Tween */t) => {\n                if (!t._isOverlapped) pausePrevParentTL = false;\n              });\n            }\n          });\n          if (pausePrevParentTL) {\n            prevParentTL.cancel();\n          }\n        } else {\n          prevParent.cancel();\n          // Previously, calling .cancel() on a timeline child would affect the render order of other children\n          // Worked around this by marking it as .completed and using .pause() for safe removal in the engine loop\n          // This is no longer needed since timeline tween composition is now handled separately\n          // Keeping this here for reference\n          // prevParent.completed = true;\n          // prevParent.pause();\n        }\n      }\n\n    }\n\n    // let nextSibling = tween._nextRep;\n\n    // // All the next siblings are automatically overridden\n\n    // if (nextSibling && nextSibling._absoluteStartTime >= tweenAbsStartTime) {\n    //   while (nextSibling) {\n    //     overrideTween(nextSibling);\n    //     nextSibling = nextSibling._nextRep;\n    //   }\n    // }\n\n    // if (nextSibling && nextSibling._absoluteStartTime < tweenAbsStartTime) {\n    //   while (nextSibling) {\n    //     overrideTween(nextSibling);\n    //     console.log(tween.id, nextSibling.id);\n    //     nextSibling = nextSibling._nextRep;\n    //   }\n    // }\n\n  // Handle additive tweens composition\n\n  } else if (tweenCompositionType === compositionTypes.blend) {\n\n    const additiveTweenSiblings = getTweenSiblings(tween.target, tween.property, '_add');\n    const additiveAnimation = addAdditiveAnimation(lookups._add);\n\n    let lookupTween = additiveTweenSiblings._head;\n\n    if (!lookupTween) {\n      lookupTween = { ...tween };\n      lookupTween._composition = compositionTypes.replace;\n      lookupTween._updateDuration = minValue;\n      lookupTween._startTime = 0;\n      lookupTween._numbers = cloneArray(tween._fromNumbers);\n      lookupTween._number = 0;\n      lookupTween._next = null;\n      lookupTween._prev = null;\n      addChild(additiveTweenSiblings, lookupTween);\n      addChild(additiveAnimation, lookupTween);\n    }\n\n    // Convert the values of TO to FROM and set TO to 0\n\n    const toNumber = tween._toNumber;\n    tween._fromNumber = lookupTween._fromNumber - toNumber;\n    tween._toNumber = 0;\n    tween._numbers = cloneArray(tween._fromNumbers);\n    tween._number = 0;\n    lookupTween._fromNumber = toNumber;\n\n    if (tween._toNumbers) {\n      const toNumbers = cloneArray(tween._toNumbers);\n      if (toNumbers) {\n        toNumbers.forEach((value, i) => {\n          tween._fromNumbers[i] = lookupTween._fromNumbers[i] - value;\n          tween._toNumbers[i] = 0;\n        });\n      }\n      lookupTween._fromNumbers = toNumbers;\n    }\n\n    addChild(additiveTweenSiblings, tween, null, '_prevAdd', '_nextAdd');\n\n  }\n\n  return tween;\n\n};\n\n/**\n * @param  {Tween} tween\n * @return {Tween}\n */\nconst removeTweenSliblings = tween => {\n  const tweenComposition = tween._composition;\n  if (tweenComposition !== compositionTypes.none) {\n    const tweenTarget = tween.target;\n    const tweenProperty = tween.property;\n    const replaceTweensLookup = lookups._rep;\n    const replaceTargetProps = replaceTweensLookup.get(tweenTarget);\n    const tweenReplaceSiblings = replaceTargetProps[tweenProperty];\n    removeChild(tweenReplaceSiblings, tween, '_prevRep', '_nextRep');\n    if (tweenComposition === compositionTypes.blend) {\n      const addTweensLookup = lookups._add;\n      const addTargetProps = addTweensLookup.get(tweenTarget);\n      if (!addTargetProps) return;\n      const additiveTweenSiblings = addTargetProps[tweenProperty];\n      const additiveAnimation = additive.animation;\n      removeChild(additiveTweenSiblings, tween, '_prevAdd', '_nextAdd');\n      // If only one tween is left in the additive lookup, it's the tween lookup\n      const lookupTween = additiveTweenSiblings._head;\n      if (lookupTween && lookupTween === additiveTweenSiblings._tail) {\n        removeChild(additiveTweenSiblings, lookupTween, '_prevAdd', '_nextAdd');\n        removeChild(additiveAnimation, lookupTween);\n        let shouldClean = true;\n        for (let prop in addTargetProps) {\n          if (addTargetProps[prop]._head) {\n            shouldClean = false;\n            break;\n          }\n        }\n        if (shouldClean) {\n          addTweensLookup.delete(tweenTarget);\n        }\n      }\n    }\n  }\n  return tween;\n};\n\n/**\n * @param  {TargetsArray} targetsArray\n * @param  {JSAnimation} animation\n * @param  {String} [propertyName]\n * @return {Boolean}\n */\nconst removeTargetsFromJSAnimation = (targetsArray, animation, propertyName) => {\n  let tweensMatchesTargets = false;\n  forEachChildren(animation, (/**@type {Tween} */tween) => {\n    const tweenTarget = tween.target;\n    if (targetsArray.includes(tweenTarget)) {\n      const tweenName = tween.property;\n      const tweenType = tween._tweenType;\n      const normalizePropName = sanitizePropertyName(propertyName, tweenTarget, tweenType);\n      if (!normalizePropName || normalizePropName && normalizePropName === tweenName) {\n        // Make sure to flag the previous CSS transform tween to renderTransform\n        if (tween.parent._tail === tween &&\n            tween._tweenType === tweenTypes.TRANSFORM &&\n            tween._prev &&\n            tween._prev._tweenType === tweenTypes.TRANSFORM\n        ) {\n          tween._prev._renderTransforms = 1;\n        }\n        // Removes the tween from the selected animation\n        removeChild(animation, tween);\n        // Detach the tween from its siblings to make sure blended tweens are correctlly removed\n        removeTweenSliblings(tween);\n        tweensMatchesTargets = true;\n      }\n    }\n  }, true);\n  return tweensMatchesTargets;\n};\n\n/**\n * @param  {TargetsArray} targetsArray\n * @param  {Renderable} [renderable]\n * @param  {String} [propertyName]\n */\nconst removeTargetsFromRenderable = (targetsArray, renderable, propertyName) => {\n  const parent = /** @type {Renderable|typeof engine} **/(renderable ? renderable : engine);\n  let removeMatches;\n  if (parent._hasChildren) {\n    let iterationDuration = 0;\n    forEachChildren(parent, (/** @type {Renderable} */child) => {\n      if (!child._hasChildren) {\n        removeMatches = removeTargetsFromJSAnimation(targetsArray, /** @type {JSAnimation} */(child), propertyName);\n        // Remove the child from its parent if no tweens and no children left after the removal\n        if (removeMatches && !child._head) {\n          child.cancel();\n          removeChild(parent, child);\n        } else {\n          // Calculate the new iterationDuration value to handle onComplete with last child in render()\n          const childTLOffset = child._offset + child._delay;\n          const childDur = childTLOffset + child.duration;\n          if (childDur > iterationDuration) {\n            iterationDuration = childDur;\n          }\n        }\n      }\n      // Make sure to also remove engine's children targets\n      // NOTE: Avoid recursion?\n      if (child._head) {\n        removeTargetsFromRenderable(targetsArray, child, propertyName);\n      } else {\n        child._hasChildren = false;\n      }\n    }, true);\n    // Update iterationDuration value to handle onComplete with last child in render()\n    if (!isUnd(/** @type {Renderable} */(parent).iterationDuration)) {\n      /** @type {Renderable} */(parent).iterationDuration = iterationDuration;\n    }\n  } else {\n    removeMatches = removeTargetsFromJSAnimation(\n      targetsArray,\n      /** @type {JSAnimation} */(parent),\n      propertyName\n    );\n  }\n  if (removeMatches && !parent._head) {\n    parent._hasChildren = false;\n    // Cancel the parent if there are no tweens and no children left after the removal\n    // We have to check if the .cancel() method exist to handle cases where the parent is the engine itself\n    if (/** @type {Renderable} */(parent).cancel) /** @type {Renderable} */(parent).cancel();\n  }\n};\n\nexport { composeTween, getTweenSiblings, overrideTween, removeTargetsFromRenderable, removeTweenSliblings };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { K, maxFps, minValue, tickModes } from './consts.js';\nimport { round } from './helpers.js';\n\n/**\n * @import {\n *   Tickable,\n *   Tween,\n * } from '../types/index.js'\n*/\n\n/*\n * Base class to control framerate and playback rate.\n * Inherited by Engine, Timer, Animation and Timeline.\n */\nclass Clock {\n\n  /** @param {Number} [initTime] */\n  constructor(initTime = 0) {\n    /** @type {Number} */\n    this.deltaTime = 0;\n    /** @type {Number} */\n    this._currentTime = initTime;\n    /** @type {Number} */\n    this._elapsedTime = initTime;\n    /** @type {Number} */\n    this._startTime = initTime;\n    /** @type {Number} */\n    this._lastTime = initTime;\n    /** @type {Number} */\n    this._scheduledTime = 0;\n    /** @type {Number} */\n    this._frameDuration = round(K / maxFps, 0);\n    /** @type {Number} */\n    this._fps = maxFps;\n    /** @type {Number} */\n    this._speed = 1;\n    /** @type {Boolean} */\n    this._hasChildren = false;\n    /** @type {Tickable|Tween} */\n    this._head = null;\n    /** @type {Tickable|Tween} */\n    this._tail = null;\n  }\n\n  get fps() {\n    return this._fps;\n  }\n\n  set fps(frameRate) {\n    const previousFrameDuration = this._frameDuration;\n    const fr = +frameRate;\n    const fps = fr < minValue ? minValue : fr;\n    const frameDuration = round(K / fps, 0);\n    this._fps = fps;\n    this._frameDuration = frameDuration;\n    this._scheduledTime += frameDuration - previousFrameDuration;\n  }\n\n  get speed() {\n    return this._speed;\n  }\n\n  set speed(playbackRate) {\n    const pbr = +playbackRate;\n    this._speed = pbr < minValue ? minValue : pbr;\n  }\n\n  /**\n   * @param  {Number} time\n   * @return {tickModes}\n   */\n  requestTick(time) {\n    const scheduledTime = this._scheduledTime;\n    const elapsedTime = this._elapsedTime;\n    this._elapsedTime += (time - elapsedTime);\n    // If the elapsed time is lower than the scheduled time\n    // this means not enough time has passed to hit one frameDuration\n    // so skip that frame\n    if (elapsedTime < scheduledTime) return tickModes.NONE;\n    const frameDuration = this._frameDuration;\n    const frameDelta = elapsedTime - scheduledTime;\n    // Ensures that _scheduledTime progresses in steps of at least 1 frameDuration.\n    // Skips ahead if the actual elapsed time is higher.\n    this._scheduledTime += frameDelta < frameDuration ? frameDuration : frameDelta;\n    return tickModes.AUTO;\n  }\n\n  /**\n   * @param  {Number} time\n   * @return {Number}\n   */\n  computeDeltaTime(time) {\n    const delta = time - this._lastTime;\n    this.deltaTime = delta;\n    this._lastTime = time;\n    return delta;\n  }\n\n}\n\nexport { Clock };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { rgbExecRgx, rgbaExecRgx, hslExecRgx, hslaExecRgx } from './consts.js';\nimport { isRgb, isHex, isHsl, isUnd, round } from './helpers.js';\n\n/**\n * @import {\n *   ColorArray,\n * } from '../types/index.js'\n*/\n\n/**\n * RGB / RGBA Color value string -> RGBA values array\n * @param  {String} rgbValue\n * @return {ColorArray}\n */\nconst rgbToRgba = rgbValue => {\n  const rgba = rgbExecRgx.exec(rgbValue) || rgbaExecRgx.exec(rgbValue);\n  const a = !isUnd(rgba[4]) ? +rgba[4] : 1;\n  return [\n    +rgba[1],\n    +rgba[2],\n    +rgba[3],\n    a\n  ]\n};\n\n/**\n * HEX3 / HEX3A / HEX6 / HEX6A Color value string -> RGBA values array\n * @param  {String} hexValue\n * @return {ColorArray}\n */\nconst hexToRgba = hexValue => {\n  const hexLength = hexValue.length;\n  const isShort = hexLength === 4 || hexLength === 5;\n  return [\n    +('0x' + hexValue[1] + hexValue[isShort ? 1 : 2]),\n    +('0x' + hexValue[isShort ? 2 : 3] + hexValue[isShort ? 2 : 4]),\n    +('0x' + hexValue[isShort ? 3 : 5] + hexValue[isShort ? 3 : 6]),\n    ((hexLength === 5 || hexLength === 9) ? +(+('0x' + hexValue[isShort ? 4 : 7] + hexValue[isShort ? 4 : 8]) / 255).toFixed(3) : 1)\n  ]\n};\n\n/**\n * @param  {Number} p\n * @param  {Number} q\n * @param  {Number} t\n * @return {Number}\n */\nconst hue2rgb = (p, q, t) => {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  return t < 1 / 6 ? p + (q - p) * 6 * t :\n         t < 1 / 2 ? q :\n         t < 2 / 3 ? p + (q - p) * (2 / 3 - t) * 6 :\n         p;\n};\n\n/**\n * HSL / HSLA Color value string -> RGBA values array\n * @param  {String} hslValue\n * @return {ColorArray}\n */\nconst hslToRgba = hslValue => {\n  const hsla = hslExecRgx.exec(hslValue) || hslaExecRgx.exec(hslValue);\n  const h = +hsla[1] / 360;\n  const s = +hsla[2] / 100;\n  const l = +hsla[3] / 100;\n  const a = !isUnd(hsla[4]) ? +hsla[4] : 1;\n  let r, g, b;\n  if (s === 0) {\n    r = g = b = l;\n  } else {\n    const q = l < .5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n    r = round(hue2rgb(p, q, h + 1 / 3) * 255, 0);\n    g = round(hue2rgb(p, q, h) * 255, 0);\n    b = round(hue2rgb(p, q, h - 1 / 3) * 255, 0);\n  }\n  return [r, g, b, a];\n};\n\n/**\n * All in one color converter that converts a color string value into an array of RGBA values\n * @param  {String} colorString\n * @return {ColorArray}\n */\nconst convertColorStringValuesToRgbaArray = colorString => {\n  return isRgb(colorString) ? rgbToRgba(colorString) :\n         isHex(colorString) ? hexToRgba(colorString) :\n         isHsl(colorString) ? hslToRgba(colorString) :\n         [0, 0, 0, 1];\n};\n\nexport { convertColorStringValuesToRgbaArray };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\n// Environments\n\n// TODO: Do we need to check if we're running inside a worker ?\nconst isBrowser = typeof window !== 'undefined';\n\n/** @type {Window & {AnimeJS: Array}|null} */\nconst win = isBrowser ? /** @type {Window & {AnimeJS: Array}} */(/** @type {unknown} */(window)) : null;\n\n/** @type {Document|null} */\nconst doc = isBrowser ? document : null;\n\n// Enums\n\n/** @enum {Number} */\nconst tweenTypes = {\n  OBJECT: 0,\n  ATTRIBUTE: 1,\n  CSS: 2,\n  TRANSFORM: 3,\n  CSS_VAR: 4,\n};\n\n/** @enum {Number} */\nconst valueTypes = {\n  NUMBER: 0,\n  UNIT: 1,\n  COLOR: 2,\n  COMPLEX: 3,\n};\n\n/** @enum {Number} */\nconst tickModes = {\n  NONE: 0,\n  AUTO: 1,\n  FORCE: 2,\n};\n\n/** @enum {Number} */\nconst compositionTypes = {\n  replace: 0,\n  none: 1,\n  blend: 2,\n};\n\n// Cache symbols\n\nconst isRegisteredTargetSymbol = Symbol();\nconst isDomSymbol = Symbol();\nconst isSvgSymbol = Symbol();\nconst transformsSymbol = Symbol();\nconst morphPointsSymbol = Symbol();\nconst proxyTargetSymbol = Symbol();\n\n// Numbers\n\nconst minValue = 1e-11;\nconst maxValue = 1e12;\nconst K = 1e3;\nconst maxFps = 120;\n\n// Strings\n\nconst emptyString = '';\nconst cssVarPrefix = 'var(';\n\nconst shortTransforms = /*#__PURE__*/ (() => {\n  const map = new Map();\n  map.set('x', 'translateX');\n  map.set('y', 'translateY');\n  map.set('z', 'translateZ');\n  return map;\n})();\n\nconst validTransforms = [\n  'translateX',\n  'translateY',\n  'translateZ',\n  'rotate',\n  'rotateX',\n  'rotateY',\n  'rotateZ',\n  'scale',\n  'scaleX',\n  'scaleY',\n  'scaleZ',\n  'skew',\n  'skewX',\n  'skewY',\n  'matrix',\n  'matrix3d',\n  'perspective',\n];\n\nconst transformsFragmentStrings = /*#__PURE__*/ validTransforms.reduce((a, v) => ({...a, [v]: v + '('}), {});\n\n// Functions\n\n/** @return {void} */\nconst noop = () => {};\n\n// Regex\n\nconst hexTestRgx = /(^#([\\da-f]{3}){1,2}$)|(^#([\\da-f]{4}){1,2}$)/i;\nconst rgbExecRgx = /rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i;\nconst rgbaExecRgx = /rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(-?\\d+|-?\\d*.\\d+)\\s*\\)/i;\nconst hslExecRgx = /hsl\\(\\s*(-?\\d+|-?\\d*.\\d+)\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*\\)/i;\nconst hslaExecRgx = /hsla\\(\\s*(-?\\d+|-?\\d*.\\d+)\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*,\\s*(-?\\d+|-?\\d*.\\d+)%\\s*,\\s*(-?\\d+|-?\\d*.\\d+)\\s*\\)/i;\n// export const digitWithExponentRgx = /[-+]?\\d*\\.?\\d+(?:[eE][-+]?\\d+)?/g;\nconst digitWithExponentRgx = /[-+]?\\d*\\.?\\d+(?:e[-+]?\\d)?/gi;\n// export const unitsExecRgx = /^([-+]?\\d*\\.?\\d+(?:[eE][-+]?\\d+)?)+([a-z]+|%)$/i;\nconst unitsExecRgx = /^([-+]?\\d*\\.?\\d+(?:e[-+]?\\d+)?)([a-z]+|%)$/i;\nconst lowerCaseRgx = /([a-z])([A-Z])/g;\nconst transformsExecRgx = /(\\w+)(\\([^)]+\\)+)/g; // Match inline transforms with cacl() values, returns the value wrapped in ()\nconst relativeValuesExecRgx = /(\\*=|\\+=|-=)/;\nconst cssVariableMatchRgx = /var\\(\\s*(--[\\w-]+)(?:\\s*,\\s*([^)]+))?\\s*\\)/;\n\nexport { K, compositionTypes, cssVarPrefix, cssVariableMatchRgx, digitWithExponentRgx, doc, emptyString, hexTestRgx, hslExecRgx, hslaExecRgx, isBrowser, isDomSymbol, isRegisteredTargetSymbol, isSvgSymbol, lowerCaseRgx, maxFps, maxValue, minValue, morphPointsSymbol, noop, proxyTargetSymbol, relativeValuesExecRgx, rgbExecRgx, rgbaExecRgx, shortTransforms, tickModes, transformsExecRgx, transformsFragmentStrings, transformsSymbol, tweenTypes, unitsExecRgx, validTransforms, valueTypes, win };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { isBrowser, win, noop, maxFps, K, compositionTypes, doc } from './consts.js';\n\n/**\n * @import {\n *   DefaultsParams,\n *   DOMTarget,\n * } from '../types/index.js'\n *\n * @import {\n *   Scope,\n * } from '../scope/index.js'\n*/\n\n/** @type {DefaultsParams} */\nconst defaults = {\n  id: null,\n  keyframes: null,\n  playbackEase: null,\n  playbackRate: 1,\n  frameRate: maxFps,\n  loop: 0,\n  reversed: false,\n  alternate: false,\n  autoplay: true,\n  persist: false,\n  duration: K,\n  delay: 0,\n  loopDelay: 0,\n  ease: 'out(2)',\n  composition: compositionTypes.replace,\n  modifier: v => v,\n  onBegin: noop,\n  onBeforeUpdate: noop,\n  onUpdate: noop,\n  onLoop: noop,\n  onPause: noop,\n  onComplete: noop,\n  onRender: noop,\n};\n\nconst scope = {\n  /** @type {Scope} */\n  current: null,\n  /** @type {Document|DOMTarget} */\n  root: doc,\n};\n\nconst globals = {\n  /** @type {DefaultsParams} */\n  defaults,\n  /** @type {Number} */\n  precision: 4,\n  /** @type {Number} equals 1 in ms mode, 0.001 in s mode */\n  timeScale: 1,\n  /** @type {Number} */\n  tickThreshold: 200,\n};\n\nconst globalVersions = { version: '4.2.2', engine: null };\n\nif (isBrowser) {\n  if (!win.AnimeJS) win.AnimeJS = [];\n  win.AnimeJS.push(globalVersions);\n}\n\nexport { defaults, globalVersions, globals, scope };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { isBrowser, maxValue, minValue, hexTestRgx, lowerCaseRgx } from './consts.js';\nimport { globals } from './globals.js';\n\n/**\n * @import {\n *   Target,\n *   DOMTarget,\n * } from '../types/index.js'\n*/\n\n// Strings\n\n/**\n * @param  {String} str\n * @return {String}\n */\nconst toLowerCase = str => str.replace(lowerCaseRgx, '$1-$2').toLowerCase();\n\n/**\n * Prioritize this method instead of regex when possible\n * @param  {String} str\n * @param  {String} sub\n * @return {Boolean}\n */\nconst stringStartsWith = (str, sub) => str.indexOf(sub) === 0;\n\n// Note: Date.now is used instead of performance.now since it is precise enough for timings calculations, performs slightly faster and works in Node.js environement.\nconst now = Date.now;\n\n// Types checkers\n\nconst isArr = Array.isArray;\n/**@param {any} a @return {a is Record<String, any>} */\nconst isObj = a => a && a.constructor === Object;\n/**@param {any} a @return {a is Number} */\nconst isNum = a => typeof a === 'number' && !isNaN(a);\n/**@param {any} a @return {a is String} */\nconst isStr = a => typeof a === 'string';\n/**@param {any} a @return {a is Function} */\nconst isFnc = a => typeof a === 'function';\n/**@param {any} a @return {a is undefined} */\nconst isUnd = a => typeof a === 'undefined';\n/**@param {any} a @return {a is null | undefined} */\nconst isNil = a => isUnd(a) || a === null;\n/**@param {any} a @return {a is SVGElement} */\nconst isSvg = a => isBrowser && a instanceof SVGElement;\n/**@param {any} a @return {Boolean} */\nconst isHex = a => hexTestRgx.test(a);\n/**@param {any} a @return {Boolean} */\nconst isRgb = a => stringStartsWith(a, 'rgb');\n/**@param {any} a @return {Boolean} */\nconst isHsl = a => stringStartsWith(a, 'hsl');\n/**@param {any} a @return {Boolean} */\nconst isCol = a => isHex(a) || isRgb(a) || isHsl(a);\n/**@param {any} a @return {Boolean} */\nconst isKey = a => !globals.defaults.hasOwnProperty(a);\n\n// SVG\n\n// Consider the following as CSS animation\n// CSS opacity animation has better default values (opacity: 1 instead of 0))\n// rotate is more commonly intended to be used as a transform\nconst svgCssReservedProperties = ['opacity', 'rotate', 'overflow', 'color'];\n\n/**\n * @param  {Target} el\n * @param  {String} propertyName\n * @return {Boolean}\n */\nconst isValidSVGAttribute = (el, propertyName) => {\n  if (svgCssReservedProperties.includes(propertyName)) return false;\n  if (el.getAttribute(propertyName) || propertyName in el) {\n    if (propertyName === 'scale') { // Scale\n      const elParentNode = /** @type {SVGGeometryElement} */(/** @type {DOMTarget} */(el).parentNode);\n      // Only consider scale as a valid SVG attribute on filter element\n      return elParentNode && elParentNode.tagName === 'filter';\n    }\n    return true;\n  }\n};\n\n// Number\n\n/**\n * @param  {Number|String} str\n * @return {Number}\n */\nconst parseNumber = str => isStr(str) ?\n  parseFloat(/** @type {String} */(str)) :\n  /** @type {Number} */(str);\n\n// Math\n\nconst pow = Math.pow;\nconst sqrt = Math.sqrt;\nconst sin = Math.sin;\nconst cos = Math.cos;\nconst abs = Math.abs;\nconst exp = Math.exp;\nconst ceil = Math.ceil;\nconst floor = Math.floor;\nconst asin = Math.asin;\nconst max = Math.max;\nconst atan2 = Math.atan2;\nconst PI = Math.PI;\nconst _round = Math.round;\n\n/**\n * Clamps a value between min and max bounds\n *\n * @param  {Number} v - Value to clamp\n * @param  {Number} min - Minimum boundary\n * @param  {Number} max - Maximum boundary\n * @return {Number}\n */\nconst clamp = (v, min, max) => v < min ? min : v > max ? max : v;\n\nconst powCache = {};\n\n/**\n * Rounds a number to specified decimal places\n *\n * @param  {Number} v - Value to round\n * @param  {Number} decimalLength - Number of decimal places\n * @return {Number}\n */\nconst round = (v, decimalLength) => {\n  if (decimalLength < 0) return v;\n  if (!decimalLength) return _round(v);\n  let p = powCache[decimalLength];\n  if (!p) p = powCache[decimalLength] = 10 ** decimalLength;\n  return _round(v * p) / p;\n};\n\n/**\n * Snaps a value to nearest increment or array value\n *\n * @param  {Number} v - Value to snap\n * @param  {Number|Array<Number>} increment - Step size or array of snap points\n * @return {Number}\n */\nconst snap = (v, increment) => isArr(increment) ? increment.reduce((closest, cv) => (abs(cv - v) < abs(closest - v) ? cv : closest)) : increment ? _round(v / increment) * increment : v;\n\n/**\n * Linear interpolation between two values\n *\n * @param  {Number} start - Starting value\n * @param  {Number} end - Ending value\n * @param  {Number} factor - Interpolation factor in the range [0, 1]\n * @return {Number} The interpolated value\n */\nconst lerp = (start, end, factor) => start + (end - start) * factor;\n\n/**\n * Replaces infinity with maximum safe value\n *\n * @param  {Number} v - Value to check\n * @return {Number}\n */\nconst clampInfinity = v => v === Infinity ? maxValue : v === -Infinity ? -maxValue : v;\n\n/**\n * Normalizes time value with minimum threshold\n *\n * @param  {Number} v - Time value to normalize\n * @return {Number}\n */\nconst normalizeTime = v => v <= minValue ? minValue : clampInfinity(round(v, 11));\n\n// Arrays\n\n/**\n * @template T\n * @param    {T[]} a\n * @return   {T[]}\n */\nconst cloneArray = a => isArr(a) ? [ ...a ] : a;\n\n// Objects\n\n/**\n * @template T\n * @template U\n * @param    {T} o1\n * @param    {U} o2\n * @return   {T & U}\n */\nconst mergeObjects = (o1, o2) => {\n  const merged = /** @type {T & U} */({ ...o1 });\n  for (let p in o2) {\n    const o1p = /** @type {T & U} */(o1)[p];\n    merged[p] = isUnd(o1p) ? /** @type {T & U} */(o2)[p] : o1p;\n  }  return merged;\n};\n\n// Linked lists\n\n/**\n * @param  {Object} parent\n * @param  {Function} callback\n * @param  {Boolean} [reverse]\n * @param  {String} [prevProp]\n * @param  {String} [nextProp]\n * @return {void}\n */\nconst forEachChildren = (parent, callback, reverse, prevProp = '_prev', nextProp = '_next') => {\n  let next = parent._head;\n  let adjustedNextProp = nextProp;\n  if (reverse) {\n    next = parent._tail;\n    adjustedNextProp = prevProp;\n  }\n  while (next) {\n    const currentNext = next[adjustedNextProp];\n    callback(next);\n    next = currentNext;\n  }\n};\n\n/**\n * @param  {Object} parent\n * @param  {Object} child\n * @param  {String} [prevProp]\n * @param  {String} [nextProp]\n * @return {void}\n */\nconst removeChild = (parent, child, prevProp = '_prev', nextProp = '_next') => {\n  const prev = child[prevProp];\n  const next = child[nextProp];\n  prev ? prev[nextProp] = next : parent._head = next;\n  next ? next[prevProp] = prev : parent._tail = prev;\n  child[prevProp] = null;\n  child[nextProp] = null;\n};\n\n/**\n * @param  {Object} parent\n * @param  {Object} child\n * @param  {Function} [sortMethod]\n * @param  {String} prevProp\n * @param  {String} nextProp\n * @return {void}\n */\nconst addChild = (parent, child, sortMethod, prevProp = '_prev', nextProp = '_next') => {\n  let prev = parent._tail;\n  while (prev && sortMethod && sortMethod(prev, child)) prev = prev[prevProp];\n  const next = prev ? prev[nextProp] : parent._head;\n  prev ? prev[nextProp] = child : parent._head = child;\n  next ? next[prevProp] = child : parent._tail = child;\n  child[prevProp] = prev;\n  child[nextProp] = next;\n};\n\nexport { PI, _round, abs, addChild, asin, atan2, ceil, clamp, clampInfinity, cloneArray, cos, exp, floor, forEachChildren, isArr, isCol, isFnc, isHex, isHsl, isKey, isNil, isNum, isObj, isRgb, isStr, isSvg, isUnd, isValidSVGAttribute, lerp, max, mergeObjects, normalizeTime, now, parseNumber, pow, removeChild, round, sin, snap, sqrt, stringStartsWith, toLowerCase };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { globals } from './globals.js';\nimport { minValue, tickModes, valueTypes, compositionTypes, tweenTypes, transformsSymbol, transformsFragmentStrings, emptyString } from './consts.js';\nimport { forEachChildren, round, now, clamp, lerp } from './helpers.js';\n\n/**\n *   @import {\n *   Tickable,\n *   Renderable,\n *   CallbackArgument,\n *   Tween,\n *   DOMTarget,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   JSAnimation,\n * } from '../animation/animation.js'\n*/\n\n/**\n * @import {\n *   Timeline,\n * } from '../timeline/timeline.js'\n*/\n\n/**\n * @param  {Tickable} tickable\n * @param  {Number} time\n * @param  {Number} muteCallbacks\n * @param  {Number} internalRender\n * @param  {tickModes} tickMode\n * @return {Number}\n */\nconst render = (tickable, time, muteCallbacks, internalRender, tickMode) => {\n\n  const parent = tickable.parent;\n  const duration = tickable.duration;\n  const completed = tickable.completed;\n  const iterationDuration = tickable.iterationDuration;\n  const iterationCount = tickable.iterationCount;\n  const _currentIteration = tickable._currentIteration;\n  const _loopDelay = tickable._loopDelay;\n  const _reversed = tickable._reversed;\n  const _alternate = tickable._alternate;\n  const _hasChildren = tickable._hasChildren;\n  const tickableDelay = tickable._delay;\n  const tickablePrevAbsoluteTime = tickable._currentTime; // TODO: rename ._currentTime to ._absoluteCurrentTime\n\n  const tickableEndTime = tickableDelay + iterationDuration;\n  const tickableAbsoluteTime = time - tickableDelay;\n  const tickablePrevTime = clamp(tickablePrevAbsoluteTime, -tickableDelay, duration);\n  const tickableCurrentTime = clamp(tickableAbsoluteTime, -tickableDelay, duration);\n  const deltaTime = tickableAbsoluteTime - tickablePrevAbsoluteTime;\n  const isCurrentTimeAboveZero = tickableCurrentTime > 0;\n  const isCurrentTimeEqualOrAboveDuration = tickableCurrentTime >= duration;\n  const isSetter = duration <= minValue;\n  const forcedTick = tickMode === tickModes.FORCE;\n\n  let isOdd = 0;\n  let iterationElapsedTime = tickableAbsoluteTime;\n  // Render checks\n  // Used to also check if the children have rendered in order to trigger the onRender callback on the parent timer\n  let hasRendered = 0;\n\n  // Execute the \"expensive\" iterations calculations only when necessary\n  if (iterationCount > 1) {\n    // bitwise NOT operator seems to be generally faster than Math.floor() across browsers\n    const currentIteration = ~~(tickableCurrentTime / (iterationDuration + (isCurrentTimeEqualOrAboveDuration ? 0 : _loopDelay)));\n    tickable._currentIteration = clamp(currentIteration, 0, iterationCount);\n    // Prevent the iteration count to go above the max iterations when reaching the end of the animation\n    if (isCurrentTimeEqualOrAboveDuration) tickable._currentIteration--;\n    isOdd = tickable._currentIteration % 2;\n    iterationElapsedTime = tickableCurrentTime % (iterationDuration + _loopDelay) || 0;\n  }\n\n  // Checks if exactly one of _reversed and (_alternate && isOdd) is true\n  const isReversed = _reversed ^ (_alternate && isOdd);\n  const _ease = /** @type {Renderable} */(tickable)._ease;\n  let iterationTime = isCurrentTimeEqualOrAboveDuration ? isReversed ? 0 : duration : isReversed ? iterationDuration - iterationElapsedTime : iterationElapsedTime;\n  if (_ease) iterationTime = iterationDuration * _ease(iterationTime / iterationDuration) || 0;\n  const isRunningBackwards = (parent ? parent.backwards : tickableAbsoluteTime < tickablePrevAbsoluteTime) ? !isReversed : !!isReversed;\n\n  tickable._currentTime = tickableAbsoluteTime;\n  tickable._iterationTime = iterationTime;\n  tickable.backwards = isRunningBackwards;\n\n  if (isCurrentTimeAboveZero && !tickable.began) {\n    tickable.began = true;\n    if (!muteCallbacks && !(parent && (isRunningBackwards || !parent.began))) {\n      tickable.onBegin(/** @type {CallbackArgument} */(tickable));\n    }\n  } else if (tickableAbsoluteTime <= 0) {\n    tickable.began = false;\n  }\n\n  // Only triggers onLoop for tickable without children, otherwise call the the onLoop callback in the tick function\n  // Make sure to trigger the onLoop before rendering to allow .refresh() to pickup the current values\n  if (!muteCallbacks && !_hasChildren && isCurrentTimeAboveZero && tickable._currentIteration !== _currentIteration) {\n    tickable.onLoop(/** @type {CallbackArgument} */(tickable));\n  }\n\n  if (\n    forcedTick ||\n    tickMode === tickModes.AUTO && (\n      time >= tickableDelay && time <= tickableEndTime || // Normal render\n      time <= tickableDelay && tickablePrevTime > tickableDelay || // Playhead is before the animation start time so make sure the animation is at its initial state\n      time >= tickableEndTime && tickablePrevTime !== duration // Playhead is after the animation end time so make sure the animation is at its end state\n    ) ||\n    iterationTime >= tickableEndTime && tickablePrevTime !== duration ||\n    iterationTime <= tickableDelay && tickablePrevTime > 0 ||\n    time <= tickablePrevTime && tickablePrevTime === duration && completed || // Force a render if a seek occurs on an completed animation\n    isCurrentTimeEqualOrAboveDuration && !completed && isSetter // This prevents 0 duration tickables to be skipped\n  ) {\n\n    if (isCurrentTimeAboveZero) {\n      // Trigger onUpdate callback before rendering\n      tickable.computeDeltaTime(tickablePrevTime);\n      if (!muteCallbacks) tickable.onBeforeUpdate(/** @type {CallbackArgument} */(tickable));\n    }\n\n    // Start tweens rendering\n    if (!_hasChildren) {\n\n      // Time has jumped more than globals.tickThreshold so consider this tick manual\n      const forcedRender = forcedTick || (isRunningBackwards ? deltaTime * -1 : deltaTime) >= globals.tickThreshold;\n      const absoluteTime = tickable._offset + (parent ? parent._offset : 0) + tickableDelay + iterationTime;\n\n      // Only Animation can have tweens, Timer returns undefined\n      let tween = /** @type {Tween} */(/** @type {JSAnimation} */(tickable)._head);\n      let tweenTarget;\n      let tweenStyle;\n      let tweenTargetTransforms;\n      let tweenTargetTransformsProperties;\n      let tweenTransformsNeedUpdate = 0;\n\n      while (tween) {\n\n        const tweenComposition = tween._composition;\n        const tweenCurrentTime = tween._currentTime;\n        const tweenChangeDuration = tween._changeDuration;\n        const tweenAbsEndTime = tween._absoluteStartTime + tween._changeDuration;\n        const tweenNextRep = tween._nextRep;\n        const tweenPrevRep = tween._prevRep;\n        const tweenHasComposition = tweenComposition !== compositionTypes.none;\n\n        if ((forcedRender || (\n            (tweenCurrentTime !== tweenChangeDuration || absoluteTime <= tweenAbsEndTime + (tweenNextRep ? tweenNextRep._delay : 0)) &&\n            (tweenCurrentTime !== 0 || absoluteTime >= tween._absoluteStartTime)\n          )) && (!tweenHasComposition || (\n            !tween._isOverridden &&\n            (!tween._isOverlapped || absoluteTime <= tweenAbsEndTime) &&\n            (!tweenNextRep || (tweenNextRep._isOverridden || absoluteTime <= tweenNextRep._absoluteStartTime)) &&\n            (!tweenPrevRep || (tweenPrevRep._isOverridden || (absoluteTime >= (tweenPrevRep._absoluteStartTime + tweenPrevRep._changeDuration) + tween._delay)))\n          ))\n        ) {\n\n          const tweenNewTime = tween._currentTime = clamp(iterationTime - tween._startTime, 0, tweenChangeDuration);\n          const tweenProgress = tween._ease(tweenNewTime / tween._updateDuration);\n          const tweenModifier = tween._modifier;\n          const tweenValueType = tween._valueType;\n          const tweenType = tween._tweenType;\n          const tweenIsObject = tweenType === tweenTypes.OBJECT;\n          const tweenIsNumber = tweenValueType === valueTypes.NUMBER;\n          // Only round the in-between frames values if the final value is a string\n          const tweenPrecision = (tweenIsNumber && tweenIsObject) || tweenProgress === 0 || tweenProgress === 1 ? -1 : globals.precision;\n\n          // Recompose tween value\n          /** @type {String|Number} */\n          let value;\n          /** @type {Number} */\n          let number;\n\n          if (tweenIsNumber) {\n            value = number = /** @type {Number} */(tweenModifier(round(lerp(tween._fromNumber, tween._toNumber,  tweenProgress), tweenPrecision )));\n          } else if (tweenValueType === valueTypes.UNIT) {\n            // Rounding the values speed up string composition\n            number = /** @type {Number} */(tweenModifier(round(lerp(tween._fromNumber, tween._toNumber,  tweenProgress), tweenPrecision)));\n            value = `${number}${tween._unit}`;\n          } else if (tweenValueType === valueTypes.COLOR) {\n            const fn = tween._fromNumbers;\n            const tn = tween._toNumbers;\n            const r = round(clamp(/** @type {Number} */(tweenModifier(lerp(fn[0], tn[0], tweenProgress))), 0, 255), 0);\n            const g = round(clamp(/** @type {Number} */(tweenModifier(lerp(fn[1], tn[1], tweenProgress))), 0, 255), 0);\n            const b = round(clamp(/** @type {Number} */(tweenModifier(lerp(fn[2], tn[2], tweenProgress))), 0, 255), 0);\n            const a = clamp(/** @type {Number} */(tweenModifier(round(lerp(fn[3], tn[3], tweenProgress), tweenPrecision))), 0, 1);\n            value = `rgba(${r},${g},${b},${a})`;\n            if (tweenHasComposition) {\n              const ns = tween._numbers;\n              ns[0] = r;\n              ns[1] = g;\n              ns[2] = b;\n              ns[3] = a;\n            }\n          } else if (tweenValueType === valueTypes.COMPLEX) {\n            value = tween._strings[0];\n            for (let j = 0, l = tween._toNumbers.length; j < l; j++) {\n              const n = /** @type {Number} */(tweenModifier(round(lerp(tween._fromNumbers[j], tween._toNumbers[j], tweenProgress), tweenPrecision)));\n              const s = tween._strings[j + 1];\n              value += `${s ? n + s : n}`;\n              if (tweenHasComposition) {\n                tween._numbers[j] = n;\n              }\n            }\n          }\n\n          // For additive tweens and Animatables\n          if (tweenHasComposition) {\n            tween._number = number;\n          }\n\n          if (!internalRender && tweenComposition !== compositionTypes.blend) {\n\n            const tweenProperty = tween.property;\n            tweenTarget = tween.target;\n\n            if (tweenIsObject) {\n              tweenTarget[tweenProperty] = value;\n            } else if (tweenType === tweenTypes.ATTRIBUTE) {\n              /** @type {DOMTarget} */(tweenTarget).setAttribute(tweenProperty, /** @type {String} */(value));\n            } else {\n              tweenStyle = /** @type {DOMTarget} */(tweenTarget).style;\n              if (tweenType === tweenTypes.TRANSFORM) {\n                if (tweenTarget !== tweenTargetTransforms) {\n                  tweenTargetTransforms = tweenTarget;\n                  // NOTE: Referencing the cachedTransforms in the tween property directly can be a little bit faster but appears to increase memory usage.\n                  tweenTargetTransformsProperties = tweenTarget[transformsSymbol];\n                }\n                tweenTargetTransformsProperties[tweenProperty] = value;\n                tweenTransformsNeedUpdate = 1;\n              } else if (tweenType === tweenTypes.CSS) {\n                tweenStyle[tweenProperty] = value;\n              } else if (tweenType === tweenTypes.CSS_VAR) {\n                tweenStyle.setProperty(tweenProperty,/** @type {String} */(value));\n              }\n            }\n\n            if (isCurrentTimeAboveZero) hasRendered = 1;\n\n          } else {\n            // Used for composing timeline tweens without having to do a real render\n            tween._value = value;\n          }\n\n        }\n\n        // NOTE: Possible improvement: Use translate(x,y) / translate3d(x,y,z) syntax\n        // to reduce memory usage on string composition\n        if (tweenTransformsNeedUpdate && tween._renderTransforms) {\n          let str = emptyString;\n          for (let key in tweenTargetTransformsProperties) {\n            str += `${transformsFragmentStrings[key]}${tweenTargetTransformsProperties[key]}) `;\n          }\n          tweenStyle.transform = str;\n          tweenTransformsNeedUpdate = 0;\n        }\n\n        tween = tween._next;\n      }\n\n      if (!muteCallbacks && hasRendered) {\n        /** @type {JSAnimation} */(tickable).onRender(/** @type {JSAnimation} */(tickable));\n      }\n    }\n\n    if (!muteCallbacks && isCurrentTimeAboveZero) {\n      tickable.onUpdate(/** @type {CallbackArgument} */(tickable));\n    }\n\n  }\n\n  // End tweens rendering\n\n  // Handle setters on timeline differently and allow re-trigering the onComplete callback when seeking backwards\n  if (parent && isSetter) {\n    if (!muteCallbacks && (\n      // (tickableAbsoluteTime > 0 instead) of (tickableAbsoluteTime >= duration) to prevent floating point precision issues\n      // see: https://github.com/juliangarnier/anime/issues/1088\n      (parent.began && !isRunningBackwards && tickableAbsoluteTime > 0 && !completed) ||\n      (isRunningBackwards && tickableAbsoluteTime <= minValue && completed)\n    )) {\n      tickable.onComplete(/** @type {CallbackArgument} */(tickable));\n      tickable.completed = !isRunningBackwards;\n    }\n  // If currentTime is both above 0 and at least equals to duration, handles normal onComplete or infinite loops\n  } else if (isCurrentTimeAboveZero && isCurrentTimeEqualOrAboveDuration) {\n    if (iterationCount === Infinity) {\n      // Offset the tickable _startTime with its duration to reset _currentTime to 0 and continue the infinite timer\n      tickable._startTime += tickable.duration;\n    } else if (tickable._currentIteration >= iterationCount - 1) {\n      // By setting paused to true, we tell the engine loop to not render this tickable and removes it from the list on the next tick\n      tickable.paused = true;\n      if (!completed && !_hasChildren) {\n        // If the tickable has children, triggers onComplete() only when all children have completed in the tick function\n        tickable.completed = true;\n        if (!muteCallbacks && !(parent && (isRunningBackwards || !parent.began))) {\n          tickable.onComplete(/** @type {CallbackArgument} */(tickable));\n          tickable._resolve(/** @type {CallbackArgument} */(tickable));\n        }\n      }\n    }\n  // Otherwise set the completed flag to false\n  } else {\n    tickable.completed = false;\n  }\n\n  // NOTE: hasRendered * direction (negative for backwards) this way we can remove the tickable.backwards property completly ?\n  return hasRendered;\n};\n\n/**\n * @param  {Tickable} tickable\n * @param  {Number} time\n * @param  {Number} muteCallbacks\n * @param  {Number} internalRender\n * @param  {Number} tickMode\n * @return {void}\n */\nconst tick = (tickable, time, muteCallbacks, internalRender, tickMode) => {\n  const _currentIteration = tickable._currentIteration;\n  render(tickable, time, muteCallbacks, internalRender, tickMode);\n  if (tickable._hasChildren) {\n    const tl = /** @type {Timeline} */(tickable);\n    const tlIsRunningBackwards = tl.backwards;\n    const tlChildrenTime = internalRender ? time : tl._iterationTime;\n    const tlCildrenTickTime = now();\n\n    let tlChildrenHasRendered = 0;\n    let tlChildrenHaveCompleted = true;\n\n    // If the timeline has looped forward, we need to manually triggers children skipped callbacks\n    if (!internalRender && tl._currentIteration !== _currentIteration) {\n      const tlIterationDuration = tl.iterationDuration;\n      forEachChildren(tl, (/** @type {JSAnimation} */child) => {\n        if (!tlIsRunningBackwards) {\n          // Force an internal render to trigger the callbacks if the child has not completed on loop\n          if (!child.completed && !child.backwards && child._currentTime < child.iterationDuration) {\n            render(child, tlIterationDuration, muteCallbacks, 1, tickModes.FORCE);\n          }\n          // Reset their began and completed flags to allow retrigering callbacks on the next iteration\n          child.began = false;\n          child.completed = false;\n        } else {\n          const childDuration = child.duration;\n          const childStartTime = child._offset + child._delay;\n          const childEndTime = childStartTime + childDuration;\n          // Triggers the onComplete callback on reverse for children on the edges of the timeline\n          if (!muteCallbacks && childDuration <= minValue && (!childStartTime || childEndTime === tlIterationDuration)) {\n            child.onComplete(child);\n          }\n        }\n      });\n      if (!muteCallbacks) tl.onLoop(/** @type {CallbackArgument} */(tl));\n    }\n\n    forEachChildren(tl, (/** @type {JSAnimation} */child) => {\n      const childTime = round((tlChildrenTime - child._offset) * child._speed, 12); // Rounding is needed when using seconds\n      const childTickMode = child._fps < tl._fps ? child.requestTick(tlCildrenTickTime) : tickMode;\n      tlChildrenHasRendered += render(child, childTime, muteCallbacks, internalRender, childTickMode);\n      if (!child.completed && tlChildrenHaveCompleted) tlChildrenHaveCompleted = false;\n    }, tlIsRunningBackwards);\n\n    // Renders on timeline are triggered by its children so it needs to be set after rendering the children\n    if (!muteCallbacks && tlChildrenHasRendered) tl.onRender(/** @type {CallbackArgument} */(tl));\n\n    // Triggers the timeline onComplete() once all chindren all completed and the current time has reached the end\n    if ((tlChildrenHaveCompleted || tlIsRunningBackwards) && tl._currentTime >= tl.duration) {\n      // Make sure the paused flag is false in case it has been skipped in the render function\n      tl.paused = true;\n      if (!tl.completed) {\n        tl.completed = true;\n        if (!muteCallbacks) {\n          tl.onComplete(/** @type {CallbackArgument} */(tl));\n          tl._resolve(/** @type {CallbackArgument} */(tl));\n        }\n      }\n    }\n  }\n};\n\nexport { render, tick };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { tweenTypes, shortTransforms, isDomSymbol, transformsSymbol, transformsFragmentStrings, emptyString } from './consts.js';\nimport { forEachChildren, isSvg, toLowerCase, isNil } from './helpers.js';\n\n/**\n * @import {\n *   JSAnimation,\n * } from '../animation/animation.js'\n*/\n\n/**\n* @import {\n*   Target,\n*   DOMTarget,\n*   Renderable,\n*   Tween,\n* } from '../types/index.js'\n*/\n\nconst propertyNamesCache = {};\n\n/**\n * @param  {String} propertyName\n * @param  {Target} target\n * @param  {tweenTypes} tweenType\n * @return {String}\n */\nconst sanitizePropertyName = (propertyName, target, tweenType) => {\n  if (tweenType === tweenTypes.TRANSFORM) {\n    const t = shortTransforms.get(propertyName);\n    return t ? t : propertyName;\n  } else if (\n    tweenType === tweenTypes.CSS ||\n    // Handle special cases where properties like \"strokeDashoffset\" needs to be set as \"stroke-dashoffset\"\n    // but properties like \"baseFrequency\" should stay in lowerCamelCase\n    (tweenType === tweenTypes.ATTRIBUTE && (isSvg(target) && propertyName in /** @type {DOMTarget} */(target).style))\n  ) {\n    const cachedPropertyName = propertyNamesCache[propertyName];\n    if (cachedPropertyName) {\n      return cachedPropertyName;\n    } else {\n      const lowerCaseName = propertyName ? toLowerCase(propertyName) : propertyName;\n      propertyNamesCache[propertyName] = lowerCaseName;\n      return lowerCaseName;\n    }\n  } else {\n    return propertyName;\n  }\n};\n\n/**\n * @template {Renderable} T\n * @param {T} renderable\n * @return {T}\n */\nconst cleanInlineStyles = renderable => {\n  // Allow cleanInlineStyles() to be called on timelines\n  if (renderable._hasChildren) {\n    forEachChildren(renderable, cleanInlineStyles, true);\n  } else {\n    const animation = /** @type {JSAnimation} */(renderable);\n    animation.pause();\n    forEachChildren(animation, (/** @type {Tween} */tween) => {\n      const tweenProperty = tween.property;\n      const tweenTarget = tween.target;\n      if (tweenTarget[isDomSymbol]) {\n        const targetStyle = /** @type {DOMTarget} */(tweenTarget).style;\n        const originalInlinedValue = tween._inlineValue;\n        const tweenHadNoInlineValue = isNil(originalInlinedValue) || originalInlinedValue === emptyString;\n        if (tween._tweenType === tweenTypes.TRANSFORM) {\n          const cachedTransforms = tweenTarget[transformsSymbol];\n          if (tweenHadNoInlineValue) {\n            delete cachedTransforms[tweenProperty];\n          } else {\n            cachedTransforms[tweenProperty] = originalInlinedValue;\n          }\n          if (tween._renderTransforms) {\n            if (!Object.keys(cachedTransforms).length) {\n              targetStyle.removeProperty('transform');\n            } else {\n              let str = emptyString;\n              for (let key in cachedTransforms) {\n                str += transformsFragmentStrings[key] + cachedTransforms[key] + ') ';\n              }\n              targetStyle.transform = str;\n            }\n          }\n        } else {\n          if (tweenHadNoInlineValue) {\n            targetStyle.removeProperty(toLowerCase(tweenProperty));\n          } else {\n            targetStyle[tweenProperty] = originalInlinedValue;\n          }\n        }\n        if (animation._tail === tween) {\n          animation.targets.forEach(t => {\n            if (t.getAttribute && t.getAttribute('style') === emptyString) {\n              t.removeAttribute('style');\n            }          });\n        }\n      }\n    });\n  }\n  return renderable;\n};\n\nexport { cleanInlineStyles, sanitizePropertyName };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { scope } from './globals.js';\nimport { isRegisteredTargetSymbol, isDomSymbol, isSvgSymbol, transformsSymbol, isBrowser } from './consts.js';\nimport { isSvg, isNil, isArr, isStr } from './helpers.js';\n\n/**\n* @import {\n*   DOMTarget,\n*   DOMTargetsParam,\n*   JSTargetsArray,\n*   TargetsParam,\n*   JSTargetsParam,\n*   TargetsArray,\n*   DOMTargetsArray,\n* } from '../types/index.js'\n*/\n\n/**\n * @param  {DOMTargetsParam|TargetsParam} v\n * @return {NodeList|HTMLCollection}\n */\nfunction getNodeList(v) {\n  const n = isStr(v) ? scope.root.querySelectorAll(v) : v;\n  if (n instanceof NodeList || n instanceof HTMLCollection) return n;\n}\n\n/**\n * @overload\n * @param  {DOMTargetsParam} targets\n * @return {DOMTargetsArray}\n *\n * @overload\n * @param  {JSTargetsParam} targets\n * @return {JSTargetsArray}\n *\n * @overload\n * @param  {TargetsParam} targets\n * @return {TargetsArray}\n *\n * @param  {DOMTargetsParam|JSTargetsParam|TargetsParam} targets\n */\nfunction parseTargets(targets) {\n  if (isNil(targets)) return /** @type {TargetsArray} */([]);\n  if (!isBrowser) return /** @type {JSTargetsArray} */(isArr(targets) && targets.flat(Infinity) || [targets]);\n  if (isArr(targets)) {\n    const flattened = targets.flat(Infinity);\n    /** @type {TargetsArray} */\n    const parsed = [];\n    for (let i = 0, l = flattened.length; i < l; i++) {\n      const item = flattened[i];\n      if (!isNil(item)) {\n        const nodeList = getNodeList(item);\n        if (nodeList) {\n          for (let j = 0, jl = nodeList.length; j < jl; j++) {\n            const subItem = nodeList[j];\n            if (!isNil(subItem)) {\n              let isDuplicate = false;\n              for (let k = 0, kl = parsed.length; k < kl; k++) {\n                if (parsed[k] === subItem) {\n                  isDuplicate = true;\n                  break;\n                }\n              }\n              if (!isDuplicate) {\n                parsed.push(subItem);\n              }\n            }\n          }\n        } else {\n          let isDuplicate = false;\n          for (let j = 0, jl = parsed.length; j < jl; j++) {\n            if (parsed[j] === item) {\n              isDuplicate = true;\n              break;\n            }\n          }\n          if (!isDuplicate) {\n            parsed.push(item);\n          }\n        }\n      }\n    }\n    return parsed;\n  }\n  const nodeList = getNodeList(targets);\n  if (nodeList) return /** @type {DOMTargetsArray} */(Array.from(nodeList));\n  return /** @type {TargetsArray} */([targets]);\n}\n\n/**\n * @overload\n * @param  {DOMTargetsParam} targets\n * @return {DOMTargetsArray}\n *\n * @overload\n * @param  {JSTargetsParam} targets\n * @return {JSTargetsArray}\n *\n * @overload\n * @param  {TargetsParam} targets\n * @return {TargetsArray}\n *\n * @param  {DOMTargetsParam|JSTargetsParam|TargetsParam} targets\n */\nfunction registerTargets(targets) {\n  const parsedTargetsArray = parseTargets(targets);\n  const parsedTargetsLength = parsedTargetsArray.length;\n  if (parsedTargetsLength) {\n    for (let i = 0; i < parsedTargetsLength; i++) {\n      const target = parsedTargetsArray[i];\n      if (!target[isRegisteredTargetSymbol]) {\n        target[isRegisteredTargetSymbol] = true;\n        const isSvgType = isSvg(target);\n        const isDom = /** @type {DOMTarget} */(target).nodeType || isSvgType;\n        if (isDom) {\n          target[isDomSymbol] = true;\n          target[isSvgSymbol] = isSvgType;\n          target[transformsSymbol] = {};\n        }\n      }\n    }\n  }\n  return parsedTargetsArray;\n}\n\nexport { getNodeList, parseTargets, registerTargets };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { transformsSymbol, transformsExecRgx } from './consts.js';\nimport { isUnd, stringStartsWith } from './helpers.js';\n\n/**\n* @import {\n*   DOMTarget,\n* } from '../types/index.js'\n*/\n\n/**\n * @param  {DOMTarget} target\n * @param  {String} propName\n * @param  {Object} animationInlineStyles\n * @return {String}\n */\nconst parseInlineTransforms = (target, propName, animationInlineStyles) => {\n  const inlineTransforms = target.style.transform;\n  let inlinedStylesPropertyValue;\n  if (inlineTransforms) {\n    const cachedTransforms = target[transformsSymbol];\n    let t; while (t = transformsExecRgx.exec(inlineTransforms)) {\n      const inlinePropertyName = t[1];\n      // const inlinePropertyValue = t[2];\n      const inlinePropertyValue = t[2].slice(1, -1);\n      cachedTransforms[inlinePropertyName] = inlinePropertyValue;\n      if (inlinePropertyName === propName) {\n        inlinedStylesPropertyValue = inlinePropertyValue;\n        // Store the new parsed inline styles if animationInlineStyles is provided\n        if (animationInlineStyles) {\n          animationInlineStyles[propName] = inlinePropertyValue;\n        }\n      }\n    }\n  }\n  return inlineTransforms && !isUnd(inlinedStylesPropertyValue) ? inlinedStylesPropertyValue :\n    stringStartsWith(propName, 'scale') ? '1' :\n    stringStartsWith(propName, 'rotate') || stringStartsWith(propName, 'skew') ? '0deg' : '0px';\n};\n\nexport { parseInlineTransforms };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { valueTypes, doc } from './consts.js';\nimport { isUnd, PI } from './helpers.js';\n\nconst angleUnitsMap = { 'deg': 1, 'rad': 180 / PI, 'turn': 360 };\nconst convertedValuesCache = {};\n\n/**\n* @import {\n*   DOMTarget,\n*   TweenDecomposedValue,\n* } from '../types/index.js'\n*/\n\n/**\n * @param  {DOMTarget} el\n * @param  {TweenDecomposedValue} decomposedValue\n * @param  {String} unit\n * @param  {Boolean} [force]\n * @return {TweenDecomposedValue}\n */\nconst convertValueUnit = (el, decomposedValue, unit, force = false) => {\n  const currentUnit = decomposedValue.u;\n  const currentNumber = decomposedValue.n;\n  if (decomposedValue.t === valueTypes.UNIT && currentUnit === unit) { // TODO: Check if checking against the same unit string is necessary\n    return decomposedValue;\n  }\n  const cachedKey = currentNumber + currentUnit + unit;\n  const cached = convertedValuesCache[cachedKey];\n  if (!isUnd(cached) && !force) {\n    decomposedValue.n = cached;\n  } else {\n    let convertedValue;\n    if (currentUnit in angleUnitsMap) {\n      convertedValue = currentNumber * angleUnitsMap[currentUnit] / angleUnitsMap[unit];\n    } else {\n      const baseline = 100;\n      const tempEl = /** @type {DOMTarget} */(el.cloneNode());\n      const parentNode = el.parentNode;\n      const parentEl = (parentNode && (parentNode !== doc)) ? parentNode : doc.body;\n      parentEl.appendChild(tempEl);\n      const elStyle = tempEl.style;\n      elStyle.width = baseline + currentUnit;\n      const currentUnitWidth = /** @type {HTMLElement} */(tempEl).offsetWidth || baseline;\n      elStyle.width = baseline + unit;\n      const newUnitWidth = /** @type {HTMLElement} */(tempEl).offsetWidth || baseline;\n      const factor = currentUnitWidth / newUnitWidth;\n      parentEl.removeChild(tempEl);\n      convertedValue = factor * currentNumber;\n    }\n    decomposedValue.n = convertedValue;\n    convertedValuesCache[cachedKey] = convertedValue;\n  }\n  decomposedValue.t === valueTypes.UNIT;\n  decomposedValue.u = unit;\n  return decomposedValue;\n};\n\nexport { convertValueUnit };\n","/**\n * Anime.js - core - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { tweenTypes, isDomSymbol, isSvgSymbol, validTransforms, shortTransforms, valueTypes, unitsExecRgx, digitWithExponentRgx, proxyTargetSymbol, cssVarPrefix, cssVariableMatchRgx, emptyString } from './consts.js';\nimport { isUnd, isValidSVGAttribute, stringStartsWith, isCol, isFnc, isStr, cloneArray } from './helpers.js';\nimport { parseInlineTransforms } from './transforms.js';\nimport { convertColorStringValuesToRgbaArray } from './colors.js';\n\n/**\n* @import {\n*   Target,\n*   DOMTarget,\n*   Tween,\n*   TweenPropValue,\n*   TweenDecomposedValue,\n* } from '../types/index.js'\n*/\n\n/**\n * @template T, D\n * @param {T|undefined} targetValue\n * @param {D} defaultValue\n * @return {T|D}\n */\nconst setValue = (targetValue, defaultValue) => {\n  return isUnd(targetValue) ? defaultValue : targetValue;\n};\n\n/**\n * @param  {TweenPropValue} value\n * @param  {Target} target\n * @param  {Number} index\n * @param  {Number} total\n * @param  {Object} [store]\n * @return {any}\n */\nconst getFunctionValue = (value, target, index, total, store) => {\n  let func;\n  if (isFnc(value)) {\n    func = () => {\n      const computed = /** @type {Function} */(value)(target, index, total);\n      // Fallback to 0 if the function returns undefined / NaN / null / false / 0\n      return !isNaN(+computed) ? +computed : computed || 0;\n    };\n  } else if (isStr(value) && stringStartsWith(value, cssVarPrefix)) {\n    func = () => {\n      const match = value.match(cssVariableMatchRgx);\n      const cssVarName = match[1];\n      const fallbackValue = match[2];\n      let computed = getComputedStyle(/** @type {HTMLElement} */(target))?.getPropertyValue(cssVarName);\n      // Use fallback if CSS variable is not set or empty\n      if ((!computed || computed.trim() === emptyString) && fallbackValue) {\n        computed = fallbackValue.trim();\n      }\n      return computed || 0;\n    };\n  } else {\n    return value;\n  }\n  if (store) store.func = func;\n  return func();\n};\n\n/**\n * @param  {Target} target\n * @param  {String} prop\n * @return {tweenTypes}\n */\nconst getTweenType = (target, prop) => {\n  return !target[isDomSymbol] ? tweenTypes.OBJECT :\n    // Handle SVG attributes\n    target[isSvgSymbol] && isValidSVGAttribute(target, prop) ? tweenTypes.ATTRIBUTE :\n    // Handle CSS Transform properties differently than CSS to allow individual animations\n    validTransforms.includes(prop) || shortTransforms.get(prop) ? tweenTypes.TRANSFORM :\n    // CSS variables\n    stringStartsWith(prop, '--') ? tweenTypes.CSS_VAR :\n    // All other CSS properties\n    prop in /** @type {DOMTarget} */(target).style ? tweenTypes.CSS :\n    // Handle other DOM Attributes\n    prop in target ? tweenTypes.OBJECT :\n    tweenTypes.ATTRIBUTE;\n};\n\n/**\n * @param  {DOMTarget} target\n * @param  {String} propName\n * @param  {Object} animationInlineStyles\n * @return {String}\n */\nconst getCSSValue = (target, propName, animationInlineStyles) => {\n  const inlineStyles = target.style[propName];\n  if (inlineStyles && animationInlineStyles) {\n    animationInlineStyles[propName] = inlineStyles;\n  }\n  const value = inlineStyles || getComputedStyle(target[proxyTargetSymbol] || target).getPropertyValue(propName);\n  return value === 'auto' ? '0' : value;\n};\n\n/**\n * @param {Target} target\n * @param {String} propName\n * @param {tweenTypes} [tweenType]\n * @param {Object|void} [animationInlineStyles]\n * @return {String|Number}\n */\nconst getOriginalAnimatableValue = (target, propName, tweenType, animationInlineStyles) => {\n  const type = !isUnd(tweenType) ? tweenType : getTweenType(target, propName);\n  return type === tweenTypes.OBJECT ? target[propName] || 0 :\n         type === tweenTypes.ATTRIBUTE ? /** @type {DOMTarget} */(target).getAttribute(propName) :\n         type === tweenTypes.TRANSFORM ? parseInlineTransforms(/** @type {DOMTarget} */(target), propName, animationInlineStyles) :\n         type === tweenTypes.CSS_VAR ? getCSSValue(/** @type {DOMTarget} */(target), propName, animationInlineStyles).trimStart() :\n         getCSSValue(/** @type {DOMTarget} */(target), propName, animationInlineStyles);\n};\n\n/**\n * @param  {Number} x\n * @param  {Number} y\n * @param  {String} operator\n * @return {Number}\n */\nconst getRelativeValue = (x, y, operator) => {\n  return operator === '-' ? x - y :\n         operator === '+' ? x + y :\n         x * y;\n};\n\n/** @return {TweenDecomposedValue} */\nconst createDecomposedValueTargetObject = () => {\n  return {\n    /** @type {valueTypes} */\n    t: valueTypes.NUMBER,\n    n: 0,\n    u: null,\n    o: null,\n    d: null,\n    s: null,\n  }\n};\n\n/**\n * @param  {String|Number} rawValue\n * @param  {TweenDecomposedValue} targetObject\n * @return {TweenDecomposedValue}\n */\nconst decomposeRawValue = (rawValue, targetObject) => {\n  /** @type {valueTypes} */\n  targetObject.t = valueTypes.NUMBER;\n  targetObject.n = 0;\n  targetObject.u = null;\n  targetObject.o = null;\n  targetObject.d = null;\n  targetObject.s = null;\n  if (!rawValue) return targetObject;\n  const num = +rawValue;\n  if (!isNaN(num)) {\n    // It's a number\n    targetObject.n = num;\n    return targetObject;\n  } else {\n    // let str = /** @type {String} */(rawValue).trim();\n    let str = /** @type {String} */(rawValue);\n    // Parsing operators (+=, -=, *=) manually is much faster than using regex here\n    if (str[1] === '=') {\n      targetObject.o = str[0];\n      str = str.slice(2);\n    }\n    // Skip exec regex if the value type is complex or color to avoid long regex backtracking\n    const unitMatch = str.includes(' ') ? false : unitsExecRgx.exec(str);\n    if (unitMatch) {\n      // Has a number and a unit\n      targetObject.t = valueTypes.UNIT;\n      targetObject.n = +unitMatch[1];\n      targetObject.u = unitMatch[2];\n      return targetObject;\n    } else if (targetObject.o) {\n      // Has an operator (+=, -=, *=)\n      targetObject.n = +str;\n      return targetObject;\n    } else if (isCol(str)) {\n      // Is a color\n      targetObject.t = valueTypes.COLOR;\n      targetObject.d = convertColorStringValuesToRgbaArray(str);\n      return targetObject;\n    } else {\n      // Is a more complex string (generally svg coords, calc() or filters CSS values)\n      const matchedNumbers = str.match(digitWithExponentRgx);\n      targetObject.t = valueTypes.COMPLEX;\n      targetObject.d = matchedNumbers ? matchedNumbers.map(Number) : [];\n      targetObject.s = str.split(digitWithExponentRgx) || [];\n      return targetObject;\n    }\n  }\n};\n\n/**\n * @param  {Tween} tween\n * @param  {TweenDecomposedValue} targetObject\n * @return {TweenDecomposedValue}\n */\nconst decomposeTweenValue = (tween, targetObject) => {\n  targetObject.t = tween._valueType;\n  targetObject.n = tween._toNumber;\n  targetObject.u = tween._unit;\n  targetObject.o = null;\n  targetObject.d = cloneArray(tween._toNumbers);\n  targetObject.s = cloneArray(tween._strings);\n  return targetObject;\n};\n\nconst decomposedOriginalValue = createDecomposedValueTargetObject();\n\nexport { createDecomposedValueTargetObject, decomposeRawValue, decomposeTweenValue, decomposedOriginalValue, getFunctionValue, getOriginalAnimatableValue, getRelativeValue, getTweenType, setValue };\n","/**\n * Anime.js - draggable - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { globals, scope } from '../core/globals.js';\nimport { doc, win, noop, maxValue, compositionTypes } from '../core/consts.js';\nimport { parseTargets } from '../core/targets.js';\nimport { isUnd, isObj, isArr, now, atan2, round, max, snap, clamp, isNum, abs, sqrt, cos, sin, isFnc } from '../core/helpers.js';\nimport { setValue } from '../core/values.js';\nimport { mapRange } from '../utils/number.js';\nimport { Timer } from '../timer/timer.js';\nimport { JSAnimation } from '../animation/animation.js';\nimport { removeTargetsFromRenderable } from '../animation/composition.js';\nimport { Animatable } from '../animatable/animatable.js';\nimport { parseEase, eases } from '../easings/eases/parser.js';\nimport { spring } from '../easings/spring/index.js';\nimport { get, set } from '../utils/target.js';\n\n/**\n * @import {\n *   DOMTarget,\n *   DOMTargetSelector,\n *   DraggableCursorParams,\n *   DraggableDragThresholdParams,\n *   TargetsParam,\n *   DraggableParams,\n *   EasingFunction,\n *   Callback,\n *   AnimatableParams,\n *   DraggableAxisParam,\n *   AnimatableObject,\n *   EasingParam,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   Spring,\n * } from '../easings/spring/index.js'\n*/\n\n/**\n * @param {Event} e\n */\nconst preventDefault = e => {\n  if (e.cancelable) e.preventDefault();\n};\n\nclass DOMProxy {\n  /** @param {Object} el */\n  constructor(el) {\n    this.el = el;\n    this.zIndex = 0;\n    this.parentElement = null;\n    this.classList = {\n      add: noop,\n      remove: noop,\n    };\n  }\n\n  get x() { return this.el.x || 0 };\n  set x(v) { this.el.x = v; };\n\n  get y() { return this.el.y || 0 };\n  set y(v) { this.el.y = v; };\n\n  get width() { return this.el.width || 0 };\n  set width(v) { this.el.width = v; };\n\n  get height() { return this.el.height || 0 };\n  set height(v) { this.el.height = v; };\n\n  getBoundingClientRect() {\n    return {\n      top: this.y,\n      right: this.x,\n      bottom: this.y + this.height,\n      left: this.x + this.width,\n    }\n  }\n}\n\nclass Transforms {\n  /**\n   * @param {DOMTarget|DOMProxy} $el\n   */\n  constructor($el) {\n    this.$el = $el;\n    this.inlineTransforms = [];\n    this.point = new DOMPoint();\n    this.inversedMatrix = this.getMatrix().inverse();\n  }\n\n  /**\n   * @param {Number} x\n   * @param {Number} y\n   * @return {DOMPoint}\n   */\n  normalizePoint(x, y) {\n    this.point.x = x;\n    this.point.y = y;\n    return this.point.matrixTransform(this.inversedMatrix);\n  }\n\n  /**\n   * @callback TraverseParentsCallback\n   * @param {DOMTarget} $el\n   * @param {Number} i\n   */\n\n  /**\n   * @param {TraverseParentsCallback} cb\n   */\n  traverseUp(cb) {\n    let $el = /** @type {DOMTarget|Document} */(this.$el.parentElement), i = 0;\n    while ($el && $el !== doc) {\n      cb(/** @type {DOMTarget} */($el), i);\n      $el = /** @type {DOMTarget} */($el.parentElement);\n      i++;\n    }\n  }\n\n  getMatrix() {\n    const matrix = new DOMMatrix();\n    this.traverseUp($el => {\n      const transformValue = getComputedStyle($el).transform;\n      if (transformValue) {\n        const elMatrix = new DOMMatrix(transformValue);\n        matrix.preMultiplySelf(elMatrix);\n      }\n    });\n    return matrix;\n  }\n\n  remove() {\n    this.traverseUp(($el, i) => {\n      this.inlineTransforms[i] = $el.style.transform;\n      $el.style.transform = 'none';\n    });\n  }\n\n  revert() {\n    this.traverseUp(($el, i) => {\n      const ct = this.inlineTransforms[i];\n      if (ct === '') {\n        $el.style.removeProperty('transform');\n      } else {\n        $el.style.transform = ct;\n      }\n    });\n  }\n}\n\n/**\n * @template {Array<Number>|DOMTargetSelector|String|Number|Boolean|Function|DraggableCursorParams|DraggableDragThresholdParams} T\n * @param {T | ((draggable: Draggable) => T)} value\n * @param {Draggable} draggable\n * @return {T}\n */\nconst parseDraggableFunctionParameter = (value, draggable) => value && isFnc(value) ? /** @type {Function} */(value)(draggable) : /** @type {T} */(value);\n\nlet zIndex = 0;\n\nclass Draggable {\n  /**\n   * @param {TargetsParam} target\n   * @param {DraggableParams} [parameters]\n   */\n  constructor(target, parameters = {}) {\n    if (!target) return;\n    if (scope.current) scope.current.register(this);\n    const paramX = parameters.x;\n    const paramY = parameters.y;\n    const trigger = parameters.trigger;\n    const modifier = parameters.modifier;\n    const ease = parameters.releaseEase;\n    const customEase = ease && parseEase(ease);\n    const hasSpring = !isUnd(ease) && !isUnd(/** @type {Spring} */(ease).ease);\n    const xProp = /** @type {String} */(isObj(paramX) && !isUnd(/** @type {Object} */(paramX).mapTo) ? /** @type {Object} */(paramX).mapTo : 'translateX');\n    const yProp = /** @type {String} */(isObj(paramY) && !isUnd(/** @type {Object} */(paramY).mapTo) ? /** @type {Object} */(paramY).mapTo : 'translateY');\n    const container = parseDraggableFunctionParameter(parameters.container, this);\n    this.containerArray = isArr(container) ? container : null;\n    this.$container = /** @type {HTMLElement} */(container && !this.containerArray ? parseTargets(/** @type {DOMTarget} */(container))[0] : doc.body);\n    this.useWin = this.$container === doc.body;\n    /** @type {Window | HTMLElement} */\n    this.$scrollContainer = this.useWin ? win : this.$container;\n    this.$target = /** @type {HTMLElement} */(isObj(target) ? new DOMProxy(target) : parseTargets(target)[0]);\n    this.$trigger = /** @type {HTMLElement} */(parseTargets(trigger ? trigger : target)[0]);\n    this.fixed = get(this.$target, 'position') === 'fixed';\n    // Refreshable parameters\n    this.isFinePointer = true;\n    /** @type {[Number, Number, Number, Number]} */\n    this.containerPadding = [0, 0, 0, 0];\n    /** @type {Number} */\n    this.containerFriction = 0;\n    /** @type {Number} */\n    this.releaseContainerFriction = 0;\n    /** @type {Number|Array<Number>} */\n    this.snapX = 0;\n    /** @type {Number|Array<Number>} */\n    this.snapY = 0;\n    /** @type {Number} */\n    this.scrollSpeed = 0;\n    /** @type {Number} */\n    this.scrollThreshold = 0;\n    /** @type {Number} */\n    this.dragSpeed = 0;\n    /** @type {Number} */\n    this.dragThreshold = 3;\n    /** @type {Number} */\n    this.maxVelocity = 0;\n    /** @type {Number} */\n    this.minVelocity = 0;\n    /** @type {Number} */\n    this.velocityMultiplier = 0;\n    /** @type {Boolean|DraggableCursorParams} */\n    this.cursor = false;\n    /** @type {Spring} */\n    this.releaseXSpring = hasSpring ? /** @type {Spring} */(ease) : spring({\n      mass: setValue(parameters.releaseMass, 1),\n      stiffness: setValue(parameters.releaseStiffness, 80),\n      damping: setValue(parameters.releaseDamping, 20),\n    });\n    /** @type {Spring} */\n    this.releaseYSpring = hasSpring ? /** @type {Spring} */(ease) : spring({\n      mass: setValue(parameters.releaseMass, 1),\n      stiffness: setValue(parameters.releaseStiffness, 80),\n      damping: setValue(parameters.releaseDamping, 20),\n    });\n    /** @type {EasingFunction} */\n    this.releaseEase = customEase || eases.outQuint;\n    /** @type {Boolean} */\n    this.hasReleaseSpring = hasSpring;\n    /** @type {Callback<this>} */\n    this.onGrab = parameters.onGrab || noop;\n    /** @type {Callback<this>} */\n    this.onDrag = parameters.onDrag || noop;\n    /** @type {Callback<this>} */\n    this.onRelease = parameters.onRelease || noop;\n    /** @type {Callback<this>} */\n    this.onUpdate = parameters.onUpdate || noop;\n    /** @type {Callback<this>} */\n    this.onSettle = parameters.onSettle || noop;\n    /** @type {Callback<this>} */\n    this.onSnap = parameters.onSnap || noop;\n    /** @type {Callback<this>} */\n    this.onResize = parameters.onResize || noop;\n    /** @type {Callback<this>} */\n    this.onAfterResize = parameters.onAfterResize || noop;\n    /** @type {[Number, Number]} */\n    this.disabled = [0, 0];\n    /** @type {AnimatableParams} */\n    const animatableParams = {};\n    if (modifier) animatableParams.modifier = modifier;\n    if (isUnd(paramX) || paramX === true) {\n      animatableParams[xProp] = 0;\n    } else if (isObj(paramX)) {\n      const paramXObject = /** @type {DraggableAxisParam} */(paramX);\n      const animatableXParams = {};\n      if (paramXObject.modifier) animatableXParams.modifier = paramXObject.modifier;\n      if (paramXObject.composition) animatableXParams.composition = paramXObject.composition;\n      animatableParams[xProp] = animatableXParams;\n    } else if (paramX === false) {\n      animatableParams[xProp] = 0;\n      this.disabled[0] = 1;\n    }\n    if (isUnd(paramY) || paramY === true) {\n      animatableParams[yProp] = 0;\n    } else if (isObj(paramY)) {\n      const paramYObject = /** @type {DraggableAxisParam} */(paramY);\n      const animatableYParams = {};\n      if (paramYObject.modifier) animatableYParams.modifier = paramYObject.modifier;\n      if (paramYObject.composition) animatableYParams.composition = paramYObject.composition;\n      animatableParams[yProp] = animatableYParams;\n    } else if (paramY === false) {\n      animatableParams[yProp] = 0;\n      this.disabled[1] = 1;\n    }\n    /** @type {AnimatableObject} */\n    this.animate = /** @type {AnimatableObject} */(new Animatable(this.$target, animatableParams));\n    // Internal props\n    this.xProp = xProp;\n    this.yProp = yProp;\n    this.destX = 0;\n    this.destY = 0;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.scroll = {x: 0, y: 0};\n    /** @type {[Number, Number, Number, Number]} */\n    this.coords = [this.x, this.y, 0, 0]; // x, y, temp x, temp y\n    /** @type {[Number, Number]} */\n    this.snapped = [0, 0]; // x, y\n    /** @type {[Number, Number, Number, Number, Number, Number, Number, Number]} */\n    this.pointer = [0, 0, 0, 0, 0, 0, 0, 0]; // x1, y1, x2, y2, temp x1, temp y1, temp x2, temp y2\n    /** @type {[Number, Number]} */\n    this.scrollView = [0, 0]; // w, h\n    /** @type {[Number, Number, Number, Number]} */\n    this.dragArea = [0, 0, 0, 0]; // x, y, w, h\n    /** @type {[Number, Number, Number, Number]} */\n    this.containerBounds = [-maxValue, maxValue, maxValue, -maxValue]; // t, r, b, l\n    /** @type {[Number, Number, Number, Number]} */\n    this.scrollBounds = [0, 0, 0, 0]; // t, r, b, l\n    /** @type {[Number, Number, Number, Number]} */\n    this.targetBounds = [0, 0, 0, 0]; // t, r, b, l\n    /** @type {[Number, Number]} */\n    this.window = [0, 0]; // w, h\n    /** @type {[Number, Number, Number]} */\n    this.velocityStack = [0, 0, 0];\n    /** @type {Number} */\n    this.velocityStackIndex = 0;\n    /** @type {Number} */\n    this.velocityTime = now();\n    /** @type {Number} */\n    this.velocity = 0;\n    /** @type {Number} */\n    this.angle = 0;\n    /** @type {JSAnimation} */\n    this.cursorStyles = null;\n    /** @type {JSAnimation} */\n    this.triggerStyles = null;\n    /** @type {JSAnimation} */\n    this.bodyStyles = null;\n    /** @type {JSAnimation} */\n    this.targetStyles = null;\n    /** @type {JSAnimation} */\n    this.touchActionStyles = null;\n    this.transforms = new Transforms(this.$target);\n    this.overshootCoords = { x: 0, y: 0 };\n    this.overshootTicker = new Timer({\n      autoplay: false,\n      onUpdate: () => {\n        this.updated = true;\n        this.manual = true;\n        // Use a duration of 1 to prevent the animatable from completing immediately to prevent issues with onSettle()\n        // https://github.com/juliangarnier/anime/issues/1045\n        if (!this.disabled[0]) this.animate[this.xProp](this.overshootCoords.x, 1);\n        if (!this.disabled[1]) this.animate[this.yProp](this.overshootCoords.y, 1);\n      },\n      onComplete: () => {\n        this.manual = false;\n        if (!this.disabled[0]) this.animate[this.xProp](this.overshootCoords.x, 0);\n        if (!this.disabled[1]) this.animate[this.yProp](this.overshootCoords.y, 0);\n      },\n    }, null, 0).init();\n    this.updateTicker = new Timer({ autoplay: false, onUpdate: () => this.update() }, null,0,).init();\n    this.contained = !isUnd(container);\n    this.manual = false;\n    this.grabbed = false;\n    this.dragged = false;\n    this.updated = false;\n    this.released = false;\n    this.canScroll = false;\n    this.enabled = false;\n    this.initialized = false;\n    this.activeProp = this.disabled[1] ? xProp : yProp;\n    this.animate.callbacks.onRender = () => {\n      const hasUpdated = this.updated;\n      const hasMoved = this.grabbed && hasUpdated;\n      const hasReleased = !hasMoved && this.released;\n      const x = this.x;\n      const y = this.y;\n      const dx = x - this.coords[2];\n      const dy = y - this.coords[3];\n      this.deltaX = dx;\n      this.deltaY = dy;\n      this.coords[2] = x;\n      this.coords[3] = y;\n      // Check if dx or dy are not 0 to check if the draggable has actually moved\n      // https://github.com/juliangarnier/anime/issues/1032\n      if (hasUpdated && (dx || dy)) {\n        this.onUpdate(this);\n      }\n      if (!hasReleased) {\n        this.updated = false;\n      } else {\n        this.computeVelocity(dx, dy);\n        this.angle = atan2(dy, dx);\n      }\n    };\n    this.animate.callbacks.onComplete = () => {\n      if ((!this.grabbed && this.released)) {\n        // Set released to false before calling onSettle to avoid recursion\n        this.released = false;\n      }\n      if (!this.manual) {\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.velocity = 0;\n        this.velocityStack[0] = 0;\n        this.velocityStack[1] = 0;\n        this.velocityStack[2] = 0;\n        this.velocityStackIndex = 0;\n        this.onSettle(this);\n      }\n    };\n    this.resizeTicker = new Timer({\n      autoplay: false,\n      duration: 150 * globals.timeScale,\n      onComplete: () => {\n        this.onResize(this);\n        this.refresh();\n        this.onAfterResize(this);\n      },\n    }).init();\n    this.parameters = parameters;\n    this.resizeObserver = new ResizeObserver(() => {\n      if (this.initialized) {\n        this.resizeTicker.restart();\n      } else {\n        this.initialized = true;\n      }\n    });\n    this.enable();\n    this.refresh();\n    this.resizeObserver.observe(this.$container);\n    if (!isObj(target)) this.resizeObserver.observe(this.$target);\n  }\n\n  /**\n   * @param  {Number} dx\n   * @param  {Number} dy\n   * @return {Number}\n   */\n  computeVelocity(dx, dy) {\n    const prevTime = this.velocityTime;\n    const curTime = now();\n    const elapsed = curTime - prevTime;\n    if (elapsed < 17) return this.velocity;\n    this.velocityTime = curTime;\n    const velocityStack = this.velocityStack;\n    const vMul = this.velocityMultiplier;\n    const minV = this.minVelocity;\n    const maxV = this.maxVelocity;\n    const vi = this.velocityStackIndex;\n    velocityStack[vi] = round(clamp((sqrt(dx * dx + dy * dy) / elapsed) * vMul, minV, maxV), 5);\n    const velocity = max(velocityStack[0], velocityStack[1], velocityStack[2]);\n    this.velocity = velocity;\n    this.velocityStackIndex = (vi + 1) % 3;\n    return velocity;\n  }\n\n  /**\n   * @param {Number}  x\n   * @param {Boolean} [muteUpdateCallback]\n   * @return {this}\n   */\n  setX(x, muteUpdateCallback = false) {\n    if (this.disabled[0]) return;\n    const v = round(x, 5);\n    this.overshootTicker.pause();\n    this.manual = true;\n    this.updated = !muteUpdateCallback;\n    this.destX = v;\n    this.snapped[0] = snap(v, this.snapX);\n    this.animate[this.xProp](v, 0);\n    this.manual = false;\n    return this;\n  }\n\n  /**\n   * @param {Number}  y\n   * @param {Boolean} [muteUpdateCallback]\n   * @return {this}\n   */\n  setY(y, muteUpdateCallback = false) {\n    if (this.disabled[1]) return;\n    const v = round(y, 5);\n    this.overshootTicker.pause();\n    this.manual = true;\n    this.updated = !muteUpdateCallback;\n    this.destY = v;\n    this.snapped[1] = snap(v, this.snapY);\n    this.animate[this.yProp](v, 0);\n    this.manual = false;\n    return this;\n  }\n\n  get x() {\n    return round(/** @type {Number} */(this.animate[this.xProp]()), globals.precision);\n  }\n\n  set x(x) {\n    this.setX(x, false);\n  }\n\n  get y() {\n    return round(/** @type {Number} */(this.animate[this.yProp]()), globals.precision);\n  }\n\n  set y(y) {\n    this.setY(y, false);\n  }\n\n  get progressX() {\n    return mapRange(this.x, this.containerBounds[3], this.containerBounds[1], 0, 1);\n  }\n\n  set progressX(x) {\n    this.setX(mapRange(x, 0, 1, this.containerBounds[3], this.containerBounds[1]), false);\n  }\n\n  get progressY() {\n    return mapRange(this.y, this.containerBounds[0], this.containerBounds[2], 0, 1);\n  }\n\n  set progressY(y) {\n    this.setY(mapRange(y, 0, 1, this.containerBounds[0], this.containerBounds[2]), false);\n  }\n\n  updateScrollCoords() {\n    const sx = round(this.useWin ? win.scrollX : this.$container.scrollLeft, 0);\n    const sy = round(this.useWin ? win.scrollY : this.$container.scrollTop, 0);\n    const [ cpt, cpr, cpb, cpl ] = this.containerPadding;\n    const threshold = this.scrollThreshold;\n    this.scroll.x = sx;\n    this.scroll.y = sy;\n    this.scrollBounds[0] = sy - this.targetBounds[0] + cpt - threshold;\n    this.scrollBounds[1] = sx - this.targetBounds[1] - cpr + threshold;\n    this.scrollBounds[2] = sy - this.targetBounds[2] - cpb + threshold;\n    this.scrollBounds[3] = sx - this.targetBounds[3] + cpl - threshold;\n  }\n\n  updateBoundingValues() {\n    const $container = this.$container;\n    // Return early if no $container defined to prevents error when reading scrollWidth / scrollHeight\n    // https://github.com/juliangarnier/anime/issues/1064\n    if (!$container) return;\n    const cx = this.x;\n    const cy = this.y;\n    const cx2 = this.coords[2];\n    const cy2 =  this.coords[3];\n    // Prevents interfering with the scroll area in cases the target is outside of the container\n    // Make sure the temp coords are also adjuset to prevents wrong delta calculation on updates\n    this.coords[2] = 0;\n    this.coords[3] = 0;\n    this.setX(0, true);\n    this.setY(0, true);\n    this.transforms.remove();\n    const iw = this.window[0] = win.innerWidth;\n    const ih = this.window[1] = win.innerHeight;\n    const uw = this.useWin;\n    const sw = $container.scrollWidth;\n    const sh = $container.scrollHeight;\n    const fx = this.fixed;\n    const transformContainerRect = $container.getBoundingClientRect();\n    const [ cpt, cpr, cpb, cpl ] = this.containerPadding;\n    this.dragArea[0] = uw ? 0 : transformContainerRect.left;\n    this.dragArea[1] = uw ? 0 : transformContainerRect.top;\n    this.scrollView[0] = uw ? clamp(sw, iw, sw) : sw;\n    this.scrollView[1] = uw ? clamp(sh, ih, sh) : sh;\n    this.updateScrollCoords();\n    const { width, height, left, top, right, bottom } = $container.getBoundingClientRect();\n    this.dragArea[2] = round(uw ? clamp(width, iw, iw) : width, 0);\n    this.dragArea[3] = round(uw ? clamp(height, ih, ih) : height, 0);\n    const containerOverflow = get($container, 'overflow');\n    const visibleOverflow = containerOverflow === 'visible';\n    const hiddenOverflow = containerOverflow === 'hidden';\n    this.canScroll = fx ? false :\n      this.contained &&\n      (($container === doc.body && visibleOverflow) || (!hiddenOverflow && !visibleOverflow)) &&\n      (sw > this.dragArea[2] + cpl - cpr || sh > this.dragArea[3] + cpt - cpb) &&\n      (!this.containerArray || (this.containerArray && !isArr(this.containerArray)));\n    if (this.contained) {\n      const sx = this.scroll.x;\n      const sy = this.scroll.y;\n      const canScroll = this.canScroll;\n      const targetRect = this.$target.getBoundingClientRect();\n      const hiddenLeft = canScroll ? uw ? 0 : $container.scrollLeft : 0;\n      const hiddenTop = canScroll ? uw ? 0 : $container.scrollTop : 0;\n      const hiddenRight = canScroll ? this.scrollView[0] - hiddenLeft - width : 0;\n      const hiddenBottom = canScroll ? this.scrollView[1] - hiddenTop - height : 0;\n      this.targetBounds[0] = round((targetRect.top + sy) - (uw ? 0 : top), 0);\n      this.targetBounds[1] = round((targetRect.right + sx) - (uw ? iw : right), 0);\n      this.targetBounds[2] = round((targetRect.bottom + sy) - (uw ? ih : bottom), 0);\n      this.targetBounds[3] = round((targetRect.left + sx) - (uw ? 0 : left), 0);\n      if (this.containerArray) {\n        this.containerBounds[0] = this.containerArray[0] + cpt;\n        this.containerBounds[1] = this.containerArray[1] - cpr;\n        this.containerBounds[2] = this.containerArray[2] - cpb;\n        this.containerBounds[3] = this.containerArray[3] + cpl;\n      } else {\n        this.containerBounds[0] = -round(targetRect.top - (fx ? clamp(top, 0, ih) : top) + hiddenTop - cpt, 0);\n        this.containerBounds[1] = -round(targetRect.right - (fx ? clamp(right, 0, iw) : right) - hiddenRight + cpr, 0);\n        this.containerBounds[2] = -round(targetRect.bottom - (fx ? clamp(bottom, 0, ih) : bottom) - hiddenBottom + cpb, 0);\n        this.containerBounds[3] = -round(targetRect.left - (fx ? clamp(left, 0, iw) : left) + hiddenLeft - cpl, 0);\n      }\n    }\n    this.transforms.revert();\n    // Restore coordinates\n    this.coords[2] = cx2;\n    this.coords[3] = cy2;\n    this.setX(cx, true);\n    this.setY(cy, true);\n  }\n\n  /**\n   * @param  {Array} bounds\n   * @param  {Number} x\n   * @param  {Number} y\n   * @return {Number}\n   */\n  isOutOfBounds(bounds, x, y) {\n    // Returns 0 if not OB, 1 if x is OB, 2 if y is OB, 3 if both x and y are OB\n    if (!this.contained) return 0;\n    const [ bt, br, bb, bl ] = bounds;\n    const [ dx, dy ] = this.disabled;\n    const obx = !dx && x < bl || !dx && x > br;\n    const oby = !dy && y < bt || !dy && y > bb;\n    return obx && !oby ? 1 : !obx && oby ? 2 : obx && oby ? 3 : 0;\n  }\n\n  refresh() {\n    const params = this.parameters;\n    const paramX = params.x;\n    const paramY = params.y;\n    const container = parseDraggableFunctionParameter(params.container, this);\n    const cp = parseDraggableFunctionParameter(params.containerPadding, this) || 0;\n    const containerPadding = /** @type {[Number, Number, Number, Number]} */(isArr(cp) ? cp : [cp, cp, cp, cp]);\n    const cx = this.x;\n    const cy = this.y;\n    const parsedCursorStyles = parseDraggableFunctionParameter(params.cursor, this);\n    const cursorStyles = { onHover: 'grab', onGrab: 'grabbing' };\n    if (parsedCursorStyles) {\n      const { onHover, onGrab } = /** @type {DraggableCursorParams} */(parsedCursorStyles);\n      if (onHover) cursorStyles.onHover = onHover;\n      if (onGrab) cursorStyles.onGrab = onGrab;\n    }\n    const parsedDragThreshold = parseDraggableFunctionParameter(params.dragThreshold, this);\n    const dragThreshold = { mouse: 3, touch: 7 };\n    if (isNum(parsedDragThreshold)) {\n      dragThreshold.mouse = parsedDragThreshold;\n      dragThreshold.touch = parsedDragThreshold;\n    } else if (parsedDragThreshold) {\n      const { mouse, touch } = parsedDragThreshold;\n      if (!isUnd(mouse)) dragThreshold.mouse = mouse;\n      if (!isUnd(touch)) dragThreshold.touch = touch;\n    }\n    this.containerArray = isArr(container) ? container : null;\n    this.$container = /** @type {HTMLElement} */(container && !this.containerArray ? parseTargets(/** @type {DOMTarget} */(container))[0] : doc.body);\n    this.useWin = this.$container === doc.body;\n    /** @type {Window | HTMLElement} */\n    this.$scrollContainer = this.useWin ? win : this.$container;\n    this.isFinePointer = matchMedia('(pointer:fine)').matches;\n    this.containerPadding = setValue(containerPadding, [0, 0, 0, 0]);\n    this.containerFriction = clamp(setValue(parseDraggableFunctionParameter(params.containerFriction, this), .8), 0, 1);\n    this.releaseContainerFriction = clamp(setValue(parseDraggableFunctionParameter(params.releaseContainerFriction, this), this.containerFriction), 0, 1);\n    this.snapX = parseDraggableFunctionParameter(isObj(paramX) && !isUnd(paramX.snap) ? paramX.snap : params.snap, this);\n    this.snapY = parseDraggableFunctionParameter(isObj(paramY) && !isUnd(paramY.snap) ? paramY.snap : params.snap, this);\n    this.scrollSpeed = setValue(parseDraggableFunctionParameter(params.scrollSpeed, this), 1.5);\n    this.scrollThreshold = setValue(parseDraggableFunctionParameter(params.scrollThreshold, this), 20);\n    this.dragSpeed = setValue(parseDraggableFunctionParameter(params.dragSpeed, this), 1);\n    this.dragThreshold = this.isFinePointer ? dragThreshold.mouse : dragThreshold.touch;\n    this.minVelocity = setValue(parseDraggableFunctionParameter(params.minVelocity, this), 0);\n    this.maxVelocity = setValue(parseDraggableFunctionParameter(params.maxVelocity, this), 50);\n    this.velocityMultiplier = setValue(parseDraggableFunctionParameter(params.velocityMultiplier, this), 1);\n    this.cursor = parsedCursorStyles === false ? false : cursorStyles;\n    this.updateBoundingValues();\n\n    // const ob = this.isOutOfBounds(this.containerBounds, this.x, this.y);\n    // if (ob === 1 || ob === 3) this.progressX = px;\n    // if (ob === 2 || ob === 3) this.progressY = py;\n\n    // if (this.initialized && this.contained) {\n    //   if (this.progressX !== px) this.progressX = px;\n    //   if (this.progressY !== py) this.progressY = py;\n    // }\n\n    const [ bt, br, bb, bl ] = this.containerBounds;\n    this.setX(clamp(cx, bl, br), true);\n    this.setY(clamp(cy, bt, bb), true);\n  }\n\n  update() {\n    this.updateScrollCoords();\n    if (this.canScroll) {\n      const [ cpt, cpr, cpb, cpl ] = this.containerPadding;\n      const [ sw, sh ] = this.scrollView;\n      const daw = this.dragArea[2];\n      const dah = this.dragArea[3];\n      const csx = this.scroll.x;\n      const csy = this.scroll.y;\n      const nsw = this.$container.scrollWidth;\n      const nsh = this.$container.scrollHeight;\n      const csw = this.useWin ? clamp(nsw, this.window[0], nsw) : nsw;\n      const csh = this.useWin ? clamp(nsh, this.window[1], nsh) : nsh;\n      const swd = sw - csw;\n      const shd = sh - csh;\n      // Handle cases where the scrollarea dimensions changes during drag\n      if (this.dragged && swd > 0) {\n        this.coords[0] -= swd;\n        this.scrollView[0] = csw;\n      }\n      if (this.dragged && shd > 0) {\n        this.coords[1] -= shd;\n        this.scrollView[1] = csh;\n      }\n      // Handle autoscroll when target is at the edges of the scroll bounds\n      const s = this.scrollSpeed * 10;\n      const threshold = this.scrollThreshold;\n      const [ x, y ] = this.coords;\n      const [ st, sr, sb, sl ] = this.scrollBounds;\n      const t = round(clamp((y - st + cpt) / threshold, -1, 0) * s, 0);\n      const r = round(clamp((x - sr - cpr) / threshold, 0, 1) * s, 0);\n      const b = round(clamp((y - sb - cpb) / threshold, 0, 1) * s, 0);\n      const l = round(clamp((x - sl + cpl) / threshold, -1, 0) * s, 0);\n      if (t || b || l || r) {\n        const [nx, ny] = this.disabled;\n        let scrollX = csx;\n        let scrollY = csy;\n        if (!nx) {\n          scrollX = round(clamp(csx + (l || r), 0, sw - daw), 0);\n          this.coords[0] -= csx - scrollX;\n        }\n        if (!ny) {\n          scrollY = round(clamp(csy + (t || b), 0, sh - dah), 0);\n          this.coords[1] -= csy - scrollY;\n        }\n        // Note: Safari mobile requires to use different scroll methods depending if using the window or not\n        if (this.useWin) {\n          this.$scrollContainer.scrollBy(-(csx - scrollX), -(csy - scrollY));\n        } else {\n          this.$scrollContainer.scrollTo(scrollX, scrollY);\n        }\n      }\n    }\n    const [ ct, cr, cb, cl ] = this.containerBounds;\n    const [ px1, py1, px2, py2, px3, py3 ] = this.pointer;\n    this.coords[0] += (px1 - px3) * this.dragSpeed;\n    this.coords[1] += (py1 - py3) * this.dragSpeed;\n    this.pointer[4] = px1;\n    this.pointer[5] = py1;\n    const [ cx, cy ] = this.coords;\n    const [ sx, sy ] = this.snapped;\n    const cf = (1 - this.containerFriction) * this.dragSpeed;\n    this.setX(cx > cr ? cr + (cx - cr) * cf : cx < cl ? cl + (cx - cl) * cf : cx, false);\n    this.setY(cy > cb ? cb + (cy - cb) * cf : cy < ct ? ct + (cy - ct) * cf : cy, false);\n    this.computeVelocity(px1 - px3, py1 - py3);\n    this.angle = atan2(py1 - py2, px1 - px2);\n    const [ nsx, nsy ] = this.snapped;\n    if (nsx !== sx && this.snapX || nsy !== sy && this.snapY) {\n      this.onSnap(this);\n    }\n  }\n\n  stop() {\n    this.updateTicker.pause();\n    this.overshootTicker.pause();\n    // Pauses the in bounds onRelease animations\n    for (let prop in this.animate.animations) this.animate.animations[prop].pause();\n    removeTargetsFromRenderable([this], null, 'x');\n    removeTargetsFromRenderable([this], null, 'y');\n    removeTargetsFromRenderable([this], null, 'progressX');\n    removeTargetsFromRenderable([this], null, 'progressY');\n    removeTargetsFromRenderable([this.scroll]); // Removes any active animations on the container scroll\n    removeTargetsFromRenderable([this.overshootCoords]); // Removes active overshoot animations\n    return this;\n  }\n\n  /**\n   * @param {Number} [duration]\n   * @param {Number} [gap]\n   * @param {EasingParam} [ease]\n   * @return {this}\n   */\n  scrollInView(duration, gap = 0, ease = eases.inOutQuad) {\n    this.updateScrollCoords();\n    const x = this.destX;\n    const y = this.destY;\n    const scroll = this.scroll;\n    const scrollBounds = this.scrollBounds;\n    const canScroll = this.canScroll;\n    if (!this.containerArray && this.isOutOfBounds(scrollBounds, x, y)) {\n      const [ st, sr, sb, sl ] = scrollBounds;\n      const t = round(clamp(y - st, -maxValue, 0), 0);\n      const r = round(clamp(x - sr, 0, maxValue), 0);\n      const b = round(clamp(y - sb, 0, maxValue), 0);\n      const l = round(clamp(x - sl, -maxValue, 0), 0);\n      new JSAnimation(scroll, {\n        x: round(scroll.x + (l ? l - gap : r ? r + gap : 0), 0),\n        y: round(scroll.y + (t ? t - gap : b ? b + gap : 0), 0),\n        duration: isUnd(duration) ? 350 * globals.timeScale : duration,\n        ease,\n        onUpdate: () => {\n          this.canScroll = false;\n          this.$scrollContainer.scrollTo(scroll.x, scroll.y);\n        }\n      }).init().then(() => {\n        this.canScroll = canScroll;\n      });\n    }\n    return this;\n  }\n\n  handleHover() {\n    if (this.isFinePointer && this.cursor && !this.cursorStyles) {\n      this.cursorStyles = set(this.$trigger, {\n        cursor: /** @type {DraggableCursorParams} */(this.cursor).onHover\n      });\n    }\n  }\n\n  /**\n   * @param  {Number} [duration]\n   * @param  {Number} [gap]\n   * @param  {EasingParam} [ease]\n   * @return {this}\n   */\n  animateInView(duration, gap = 0, ease = eases.inOutQuad) {\n    this.stop();\n    this.updateBoundingValues();\n    const x = this.x;\n    const y = this.y;\n    const [ cpt, cpr, cpb, cpl ] = this.containerPadding;\n    const bt = this.scroll.y - this.targetBounds[0] + cpt + gap;\n    const br = this.scroll.x - this.targetBounds[1] - cpr - gap;\n    const bb = this.scroll.y - this.targetBounds[2] - cpb - gap;\n    const bl = this.scroll.x - this.targetBounds[3] + cpl + gap;\n    const ob = this.isOutOfBounds([bt, br, bb, bl], x, y);\n    if (ob) {\n      const [ disabledX, disabledY ] = this.disabled;\n      const destX = clamp(snap(x, this.snapX), bl, br);\n      const destY = clamp(snap(y, this.snapY), bt, bb);\n      const dur = isUnd(duration) ? 350 * globals.timeScale : duration;\n      if (!disabledX && (ob === 1 || ob === 3)) this.animate[this.xProp](destX, dur, ease);\n      if (!disabledY && (ob === 2 || ob === 3)) this.animate[this.yProp](destY, dur, ease);\n    }\n    return this;\n  }\n\n  /**\n   * @param {MouseEvent|TouchEvent} e\n   */\n  handleDown(e) {\n    const $eTarget = /** @type {HTMLElement} */(e.target);\n    if (this.grabbed || /** @type {HTMLInputElement} */($eTarget).type === 'range') return;\n\n    e.stopPropagation();\n\n    this.grabbed = true;\n    this.released = false;\n    this.stop();\n    this.updateBoundingValues();\n    const touches = /** @type {TouchEvent} */(e).changedTouches;\n    const eventX = touches ? touches[0].clientX : /** @type {MouseEvent} */(e).clientX;\n    const eventY = touches ? touches[0].clientY : /** @type {MouseEvent} */(e).clientY;\n    const { x, y } = this.transforms.normalizePoint(eventX, eventY);\n    const [ ct, cr, cb, cl ] = this.containerBounds;\n    const cf = (1 - this.containerFriction) * this.dragSpeed;\n    const cx = this.x;\n    const cy = this.y;\n    this.coords[0] = this.coords[2] = !cf ? cx : cx > cr ? cr + (cx - cr) / cf : cx < cl ? cl + (cx - cl) / cf : cx;\n    this.coords[1] = this.coords[3] = !cf ? cy : cy > cb ? cb + (cy - cb) / cf : cy < ct ? ct + (cy - ct) / cf : cy;\n    this.pointer[0] = x;\n    this.pointer[1] = y;\n    this.pointer[2] = x;\n    this.pointer[3] = y;\n    this.pointer[4] = x;\n    this.pointer[5] = y;\n    this.pointer[6] = x;\n    this.pointer[7] = y;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.velocity = 0;\n    this.velocityStack[0] = 0;\n    this.velocityStack[1] = 0;\n    this.velocityStack[2] = 0;\n    this.velocityStackIndex = 0;\n    this.angle = 0;\n    if (this.targetStyles) {\n      this.targetStyles.revert();\n      this.targetStyles = null;\n    }\n    const z = /** @type {Number} */(get(this.$target, 'zIndex', false));\n    zIndex = (z > zIndex ? z : zIndex) + 1;\n    this.targetStyles = set(this.$target, { zIndex });\n    if (this.triggerStyles) {\n      this.triggerStyles.revert();\n      this.triggerStyles = null;\n    }\n    if (this.cursorStyles) {\n      this.cursorStyles.revert();\n      this.cursorStyles = null;\n    }\n    if (this.isFinePointer && this.cursor) {\n      this.bodyStyles = set(doc.body, {\n        cursor: /** @type {DraggableCursorParams} */(this.cursor).onGrab\n      });\n    }\n    this.scrollInView(100, 0, eases.out(3));\n    this.onGrab(this);\n\n    doc.addEventListener('touchmove', this);\n    doc.addEventListener('touchend', this);\n    doc.addEventListener('touchcancel', this);\n    doc.addEventListener('mousemove', this);\n    doc.addEventListener('mouseup', this);\n    doc.addEventListener('selectstart', this);\n  }\n\n  /**\n   * @param {MouseEvent|TouchEvent} e\n   */\n  handleMove(e) {\n    if (!this.grabbed) return;\n    const touches = /** @type {TouchEvent} */(e).changedTouches;\n    const eventX = touches ? touches[0].clientX : /** @type {MouseEvent} */(e).clientX;\n    const eventY = touches ? touches[0].clientY : /** @type {MouseEvent} */(e).clientY;\n    const { x, y } = this.transforms.normalizePoint(eventX, eventY);\n    const movedX = x - this.pointer[6];\n    const movedY = y - this.pointer[7];\n\n    let $parent = /** @type {HTMLElement} */(e.target);\n    let isAtTop = false;\n    let isAtBottom = false;\n    let canTouchScroll = false;\n\n    while (touches && $parent && $parent !== this.$trigger) {\n      const overflowY = get($parent, 'overflow-y');\n      if (overflowY !== 'hidden' && overflowY !== 'visible') {\n        const { scrollTop, scrollHeight, clientHeight } = $parent;\n        if (scrollHeight > clientHeight) {\n          canTouchScroll = true;\n          isAtTop = scrollTop <= 3;\n          isAtBottom = scrollTop >= (scrollHeight - clientHeight) - 3;\n          break;\n        }\n      }\n      $parent = $parent.parentElement;\n    }\n\n    if (canTouchScroll && ((!isAtTop && !isAtBottom) || (isAtTop && movedY < 0) || (isAtBottom && movedY > 0))) {\n\n      this.pointer[0] = x;\n      this.pointer[1] = y;\n      this.pointer[2] = x;\n      this.pointer[3] = y;\n      this.pointer[4] = x;\n      this.pointer[5] = y;\n      this.pointer[6] = x;\n      this.pointer[7] = y;\n\n    } else {\n\n      preventDefault(e);\n\n      // Needed to prevents click on handleUp\n      if (!this.triggerStyles) this.triggerStyles = set(this.$trigger, { pointerEvents: 'none' });\n      // Needed to prevent page scroll while dragging on touch devvice\n      this.$trigger.addEventListener('touchstart', preventDefault, { passive: false });\n      this.$trigger.addEventListener('touchmove', preventDefault, { passive: false });\n      this.$trigger.addEventListener('touchend', preventDefault);\n\n      // Don't check for a miminim distance move if already dragging\n      if (this.dragged || (!this.disabled[0] && abs(movedX) > this.dragThreshold) || (!this.disabled[1] && abs(movedY) > this.dragThreshold)) {\n        this.updateTicker.resume();\n        this.pointer[2] = this.pointer[0];\n        this.pointer[3] = this.pointer[1];\n        this.pointer[0] = x;\n        this.pointer[1] = y;\n        this.dragged = true;\n        this.released = false;\n        this.onDrag(this);\n      }\n    }\n  }\n\n  handleUp() {\n\n    if (!this.grabbed) return;\n\n    this.updateTicker.pause();\n\n    if (this.triggerStyles) {\n      this.triggerStyles.revert();\n      this.triggerStyles = null;\n    }\n\n    if (this.bodyStyles) {\n      this.bodyStyles.revert();\n      this.bodyStyles = null;\n    }\n\n    const [ disabledX, disabledY ] = this.disabled;\n    const [ px1, py1, px2, py2, px3, py3 ] = this.pointer;\n    const [ ct, cr, cb, cl ] = this.containerBounds;\n    const [ sx, sy ] = this.snapped;\n    const springX = this.releaseXSpring;\n    const springY = this.releaseYSpring;\n    const releaseEase = this.releaseEase;\n    const hasReleaseSpring = this.hasReleaseSpring;\n    const overshootCoords = this.overshootCoords;\n    const cx = this.x;\n    const cy = this.y;\n    const pv = this.computeVelocity(px1 - px3, py1 - py3);\n    const pa = this.angle = atan2(py1 - py2, px1 - px2);\n    const ds = pv * 150;\n    const cf = (1 - this.releaseContainerFriction) * this.dragSpeed;\n    const nx = cx + (cos(pa) * ds);\n    const ny = cy + (sin(pa) * ds);\n    const bx = nx > cr ? cr + (nx - cr) * cf : nx < cl ? cl + (nx - cl) * cf : nx;\n    const by = ny > cb ? cb + (ny - cb) * cf : ny < ct ? ct + (ny - ct) * cf : ny;\n    const dx = this.destX = clamp(round(snap(bx, this.snapX), 5), cl, cr);\n    const dy = this.destY = clamp(round(snap(by, this.snapY), 5), ct, cb);\n    const ob = this.isOutOfBounds(this.containerBounds, nx, ny);\n\n    let durationX = 0;\n    let durationY = 0;\n    let easeX = releaseEase;\n    let easeY = releaseEase;\n    let longestReleaseDuration = 0;\n\n    overshootCoords.x = cx;\n    overshootCoords.y = cy;\n\n    if (!disabledX) {\n      const directionX = dx === cr ? cx > cr ? -1 : 1 : cx < cl ? -1 : 1;\n      const distanceX = round(cx - dx, 0);\n      springX.velocity = disabledY && hasReleaseSpring ? distanceX ? (ds * directionX) / abs(distanceX) : 0 : pv;\n      const { ease, settlingDuration, restDuration } = springX;\n      durationX = cx === dx ? 0 : hasReleaseSpring ? settlingDuration : settlingDuration - (restDuration * globals.timeScale);\n      if (hasReleaseSpring) easeX = ease;\n      if (durationX > longestReleaseDuration) longestReleaseDuration = durationX;\n    }\n\n    if (!disabledY) {\n      const directionY = dy === cb ? cy > cb ? -1 : 1 : cy < ct ? -1 : 1;\n      const distanceY = round(cy - dy, 0);\n      springY.velocity = disabledX && hasReleaseSpring ? distanceY ? (ds * directionY) / abs(distanceY) : 0 : pv;\n      const { ease, settlingDuration, restDuration } = springY;\n      durationY = cy === dy ? 0 : hasReleaseSpring ? settlingDuration : settlingDuration - (restDuration * globals.timeScale);\n      if (hasReleaseSpring) easeY = ease;\n      if (durationY > longestReleaseDuration) longestReleaseDuration = durationY;\n    }\n\n    if (!hasReleaseSpring && ob && cf && (durationX || durationY)) {\n\n        const composition = compositionTypes.blend;\n\n        new JSAnimation(overshootCoords, {\n          x: { to: bx, duration: durationX * .65 },\n          y: { to: by, duration: durationY * .65 },\n          ease: releaseEase,\n          composition,\n        }).init();\n\n        new JSAnimation(overshootCoords, {\n          x: { to: dx, duration: durationX },\n          y: { to: dy, duration: durationY },\n          ease: releaseEase,\n          composition,\n        }).init();\n\n        this.overshootTicker.stretch(max(durationX, durationY)).restart();\n\n    } else {\n\n      if (!disabledX) this.animate[this.xProp](dx, durationX, easeX);\n      if (!disabledY) this.animate[this.yProp](dy, durationY, easeY);\n\n    }\n\n    this.scrollInView(longestReleaseDuration, this.scrollThreshold, releaseEase);\n\n    let hasSnapped = false;\n\n    if (dx !== sx) {\n      this.snapped[0] = dx;\n      if (this.snapX) hasSnapped = true;\n    }\n\n    if (dy !== sy && this.snapY) {\n      this.snapped[1] = dy;\n      if (this.snapY) hasSnapped = true;\n    }\n\n    if (hasSnapped) this.onSnap(this);\n\n    this.grabbed = false;\n    this.dragged = false;\n    this.updated = true;\n    this.released = true;\n\n    // It's important to trigger the callback after the release animations to be able to cancel them\n    this.onRelease(this);\n\n    this.$trigger.removeEventListener('touchstart', preventDefault);\n    this.$trigger.removeEventListener('touchmove', preventDefault);\n    this.$trigger.removeEventListener('touchend', preventDefault);\n\n    doc.removeEventListener('touchmove', this);\n    doc.removeEventListener('touchend', this);\n    doc.removeEventListener('touchcancel', this);\n    doc.removeEventListener('mousemove', this);\n    doc.removeEventListener('mouseup', this);\n    doc.removeEventListener('selectstart', this);\n  }\n\n  reset() {\n    this.stop();\n    this.resizeTicker.pause();\n    this.grabbed = false;\n    this.dragged = false;\n    this.updated = false;\n    this.released = false;\n    this.canScroll = false;\n    this.setX(0, true);\n    this.setY(0, true);\n    this.coords[0] = 0;\n    this.coords[1] = 0;\n    this.pointer[0] = 0;\n    this.pointer[1] = 0;\n    this.pointer[2] = 0;\n    this.pointer[3] = 0;\n    this.pointer[4] = 0;\n    this.pointer[5] = 0;\n    this.pointer[6] = 0;\n    this.pointer[7] = 0;\n    this.velocity = 0;\n    this.velocityStack[0] = 0;\n    this.velocityStack[1] = 0;\n    this.velocityStack[2] = 0;\n    this.velocityStackIndex = 0;\n    this.angle = 0;\n    return this;\n  }\n\n  enable() {\n    if (!this.enabled) {\n      this.enabled = true;\n      this.$target.classList.remove('is-disabled');\n      this.touchActionStyles = set(this.$trigger, {\n        touchAction: this.disabled[0] ? 'pan-x' : this.disabled[1] ? 'pan-y' : 'none'\n      });\n      this.$trigger.addEventListener('touchstart', this, { passive: true });\n      this.$trigger.addEventListener('mousedown', this, { passive: true });\n      this.$trigger.addEventListener('mouseenter', this);\n    }\n    return this;\n  }\n\n  disable() {\n    this.enabled = false;\n    this.grabbed = false;\n    this.dragged = false;\n    this.updated = false;\n    this.released = false;\n    this.canScroll = false;\n    this.touchActionStyles.revert();\n    if (this.cursorStyles) {\n      this.cursorStyles.revert();\n      this.cursorStyles = null;\n    }\n    if (this.triggerStyles) {\n      this.triggerStyles.revert();\n      this.triggerStyles = null;\n    }\n    if (this.bodyStyles) {\n      this.bodyStyles.revert();\n      this.bodyStyles = null;\n    }\n    if (this.targetStyles) {\n      this.targetStyles.revert();\n      this.targetStyles = null;\n    }\n    this.$target.classList.add('is-disabled');\n    this.$trigger.removeEventListener('touchstart', this);\n    this.$trigger.removeEventListener('mousedown', this);\n    this.$trigger.removeEventListener('mouseenter', this);\n    doc.removeEventListener('touchmove', this);\n    doc.removeEventListener('touchend', this);\n    doc.removeEventListener('touchcancel', this);\n    doc.removeEventListener('mousemove', this);\n    doc.removeEventListener('mouseup', this);\n    doc.removeEventListener('selectstart', this);\n    return this;\n  }\n\n  revert() {\n    this.reset();\n    this.disable();\n    this.$target.classList.remove('is-disabled');\n    this.updateTicker.revert();\n    this.overshootTicker.revert();\n    this.resizeTicker.revert();\n    this.animate.revert();\n    this.resizeObserver.disconnect();\n    return this;\n  }\n\n  /**\n   * @param {Event} e\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case 'mousedown':\n        this.handleDown(/** @type {MouseEvent} */(e));\n        break;\n      case 'touchstart':\n        this.handleDown(/** @type {TouchEvent} */(e));\n        break;\n      case 'mousemove':\n        this.handleMove(/** @type {MouseEvent} */(e));\n        break;\n      case 'touchmove':\n        this.handleMove(/** @type {TouchEvent} */(e));\n        break;\n      case 'mouseup':\n        this.handleUp();\n        break;\n      case 'touchend':\n        this.handleUp();\n        break;\n      case 'touchcancel':\n        this.handleUp();\n        break;\n      case 'mouseenter':\n        this.handleHover();\n        break;\n      case 'selectstart':\n        preventDefault(e);\n        break;\n    }\n  }\n}\n\n/**\n * @param {TargetsParam} target\n * @param {DraggableParams} [parameters]\n * @return {Draggable}\n */\nconst createDraggable = (target, parameters) => new Draggable(target, parameters);\n\nexport { Draggable, createDraggable };\n","/**\n * Anime.js - easings - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { abs } from '../../core/helpers.js';\nimport { none } from '../none.js';\n\n/**\n * @import {\n *   EasingFunction,\n * } from '../../types/index.js'\n*/\n\n/**\n * Cubic Bezier solver adapted from https://github.com/gre/bezier-easing\n * (c) 2014 Gatan Renaudeau\n */\n\n/**\n * @param  {Number} aT\n * @param  {Number} aA1\n * @param  {Number} aA2\n * @return {Number}\n */\nconst calcBezier = (aT, aA1, aA2) => (((1 - 3 * aA2 + 3 * aA1) * aT + (3 * aA2 - 6 * aA1)) * aT + (3 * aA1)) * aT;\n\n/**\n * @param  {Number} aX\n * @param  {Number} mX1\n * @param  {Number} mX2\n * @return {Number}\n */\nconst binarySubdivide = (aX, mX1, mX2) => {\n  let aA = 0, aB = 1, currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (abs(currentX) > .0000001 && ++i < 100);\n  return currentT;\n};\n\n/**\n * @param  {Number} [mX1] The x coordinate of the first point\n * @param  {Number} [mY1] The y coordinate of the first point\n * @param  {Number} [mX2] The x coordinate of the second point\n * @param  {Number} [mY2] The y coordinate of the second point\n * @return {EasingFunction}\n */\n\nconst cubicBezier = (mX1 = 0.5, mY1 = 0.0, mX2 = 0.5, mY2 = 1.0) => (mX1 === mY1 && mX2 === mY2) ? none :\n  t => t === 0 || t === 1 ? t :\n  calcBezier(binarySubdivide(t, mX1, mX2), mY1, mY2);\n\nexport { cubicBezier };\n","/**\n * Anime.js - easings - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { emptyString, minValue } from '../../core/consts.js';\nimport { pow, sin, sqrt, cos, isStr, stringStartsWith, isFnc, clamp, asin, PI } from '../../core/helpers.js';\nimport { none } from '../none.js';\n\n/**\n * @import {\n *   EasingFunction,\n *   EasingFunctionWithParams,\n *   EasingParam,\n *   BackEasing,\n *   ElasticEasing,\n *   PowerEasing,\n * } from '../../types/index.js'\n*/\n\n\n/** @type {PowerEasing} */\nconst easeInPower = (p = 1.68) => t => pow(t, +p);\n\n/**\n * @callback EaseType\n * @param {EasingFunction} Ease\n * @return {EasingFunction}\n */\n\n/** @type {Record<String, EaseType>} */\nconst easeTypes = {\n  in: easeIn => t => easeIn(t),\n  out: easeIn => t => 1 - easeIn(1 - t),\n  inOut: easeIn => t => t < .5 ? easeIn(t * 2) / 2 : 1 - easeIn(t * -2 + 2) / 2,\n  outIn: easeIn => t => t < .5 ? (1 - easeIn(1 - t * 2)) / 2 : (easeIn(t * 2 - 1) + 1) / 2,\n};\n\n/**\n * Easing functions adapted and simplified from https://robertpenner.com/easing/\n * (c) 2001 Robert Penner\n */\n\nconst halfPI = PI / 2;\nconst doublePI = PI * 2;\n\n/** @type {Record<String, EasingFunctionWithParams|EasingFunction>} */\nconst easeInFunctions = {\n  [emptyString]: easeInPower,\n  Quad: easeInPower(2),\n  Cubic: easeInPower(3),\n  Quart: easeInPower(4),\n  Quint: easeInPower(5),\n  /** @type {EasingFunction} */\n  Sine: t => 1 - cos(t * halfPI),\n  /** @type {EasingFunction} */\n  Circ: t => 1 - sqrt(1 - t * t),\n  /** @type {EasingFunction} */\n  Expo: t => t ? pow(2, 10 * t - 10) : 0,\n  /** @type {EasingFunction} */\n  Bounce: t => {\n    let pow2, b = 4;\n    while (t < ((pow2 = pow(2, --b)) - 1) / 11);\n    return 1 / pow(4, 3 - b) - 7.5625 * pow((pow2 * 3 - 2) / 22 - t, 2);\n  },\n  /** @type {BackEasing} */\n  Back: (overshoot = 1.7) => t => (+overshoot + 1) * t * t * t - +overshoot * t * t,\n  /** @type {ElasticEasing} */\n  Elastic: (amplitude = 1, period = .3) => {\n    const a = clamp(+amplitude, 1, 10);\n    const p = clamp(+period, minValue, 2);\n    const s = (p / doublePI) * asin(1 / a);\n    const e = doublePI / p;\n    return t => t === 0 || t === 1 ? t : -a * pow(2, -10 * (1 - t)) * sin(((1 - t) - s) * e);\n  }\n};\n\n/**\n * @typedef  {Object} EasesFunctions\n * @property {typeof none} linear\n * @property {typeof none} none\n * @property {PowerEasing} in\n * @property {PowerEasing} out\n * @property {PowerEasing} inOut\n * @property {PowerEasing} outIn\n * @property {EasingFunction} inQuad\n * @property {EasingFunction} outQuad\n * @property {EasingFunction} inOutQuad\n * @property {EasingFunction} outInQuad\n * @property {EasingFunction} inCubic\n * @property {EasingFunction} outCubic\n * @property {EasingFunction} inOutCubic\n * @property {EasingFunction} outInCubic\n * @property {EasingFunction} inQuart\n * @property {EasingFunction} outQuart\n * @property {EasingFunction} inOutQuart\n * @property {EasingFunction} outInQuart\n * @property {EasingFunction} inQuint\n * @property {EasingFunction} outQuint\n * @property {EasingFunction} inOutQuint\n * @property {EasingFunction} outInQuint\n * @property {EasingFunction} inSine\n * @property {EasingFunction} outSine\n * @property {EasingFunction} inOutSine\n * @property {EasingFunction} outInSine\n * @property {EasingFunction} inCirc\n * @property {EasingFunction} outCirc\n * @property {EasingFunction} inOutCirc\n * @property {EasingFunction} outInCirc\n * @property {EasingFunction} inExpo\n * @property {EasingFunction} outExpo\n * @property {EasingFunction} inOutExpo\n * @property {EasingFunction} outInExpo\n * @property {EasingFunction} inBounce\n * @property {EasingFunction} outBounce\n * @property {EasingFunction} inOutBounce\n * @property {EasingFunction} outInBounce\n * @property {BackEasing} inBack\n * @property {BackEasing} outBack\n * @property {BackEasing} inOutBack\n * @property {BackEasing} outInBack\n * @property {ElasticEasing} inElastic\n * @property {ElasticEasing} outElastic\n * @property {ElasticEasing} inOutElastic\n * @property {ElasticEasing} outInElastic\n */\n\nconst eases = (/*#__PURE__ */ (() => {\n  const list = { linear: none, none: none };\n  for (let type in easeTypes) {\n    for (let name in easeInFunctions) {\n      const easeIn = easeInFunctions[name];\n      const easeType = easeTypes[type];\n      list[type + name] = /** @type {EasingFunctionWithParams|EasingFunction} */(\n        name === emptyString || name === 'Back' || name === 'Elastic' ?\n        (a, b) => easeType(/** @type {EasingFunctionWithParams} */(easeIn)(a, b)) :\n        easeType(/** @type {EasingFunction} */(easeIn))\n      );\n    }\n  }\n  return /** @type {EasesFunctions} */(list);\n})());\n\n/** @type {Record<String, EasingFunction>} */\nconst easesLookups = { linear: none, none: none };\n\n/**\n * @param  {String} string\n * @return {EasingFunction}\n */\nconst parseEaseString = (string) => {\n  if (easesLookups[string]) return easesLookups[string];\n  if (string.indexOf('(') <= -1) {\n    const hasParams = easeTypes[string] || string.includes('Back') || string.includes('Elastic');\n    const parsedFn = /** @type {EasingFunction} */(hasParams ? /** @type {EasingFunctionWithParams} */(eases[string])() : eases[string]);\n    return parsedFn ? easesLookups[string] = parsedFn : none;\n  } else {\n    const split = string.slice(0, -1).split('(');\n    const parsedFn = /** @type {EasingFunctionWithParams} */(eases[split[0]]);\n    return parsedFn ? easesLookups[string] = parsedFn(...split[1].split(',')) : none;\n  }\n};\n\nconst deprecated = ['steps(', 'irregular(', 'linear(', 'cubicBezier('];\n\n/**\n * @param  {EasingParam} ease\n * @return {EasingFunction}\n */\nconst parseEase = ease => {\n  if (isStr(ease)) {\n    for (let i = 0, l = deprecated.length; i < l; i++) {\n      if (stringStartsWith(ease, deprecated[i])) {\n        console.warn(`String syntax for \\`ease: \"${ease}\"\\` has been removed from the core and replaced by importing and passing the easing function directly: \\`ease: ${ease}\\``);\n        return none;\n      }\n    }\n  }\n  const easeFunc = isFnc(ease) ? ease : isStr(ease) ? parseEaseString(/** @type {String} */(ease)) : none;\n  return easeFunc;\n};\n\nexport { easeInPower, easeTypes, eases, parseEase, parseEaseString };\n","/**\n * Anime.js - easings - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nexport { cubicBezier } from './cubic-bezier/index.js';\nexport { steps } from './steps/index.js';\nexport { linear } from './linear/index.js';\nexport { irregular } from './irregular/index.js';\nexport { Spring, createSpring, spring } from './spring/index.js';\nexport { eases } from './eases/parser.js';\n","/**\n * Anime.js - easings - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { clamp } from '../../core/helpers.js';\nimport { linear } from '../linear/index.js';\n\n/**\n * @import {\n *   EasingFunction,\n * } from '../../types/index.js'\n*/\n\n/**\n * Generate random steps\n * @param  {Number} [length] - The number of steps\n * @param  {Number} [randomness] - How strong the randomness is\n * @return {EasingFunction}\n */\nconst irregular = (length = 10, randomness = 1) => {\n  const values = [0];\n  const total = length - 1;\n  for (let i = 1; i < total; i++) {\n    const previousValue = values[i - 1];\n    const spacing = i / total;\n    const segmentEnd = (i + 1) / total;\n    const randomVariation = spacing + (segmentEnd - spacing) * Math.random();\n    // Mix the even spacing and random variation based on the randomness parameter\n    const randomValue = spacing * (1 - randomness) + randomVariation * randomness;\n    values.push(clamp(randomValue, previousValue, 1));\n  }\n  values.push(1);\n  return linear(...values);\n};\n\nexport { irregular };\n","/**\n * Anime.js - easings - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { isStr, parseNumber, isUnd } from '../../core/helpers.js';\nimport { none } from '../none.js';\n\n/**\n * @import {\n *   EasingFunction,\n * } from '../../types/index.js'\n*/\n\n/**\n * Without parameters, the linear function creates a non-eased transition.\n * Parameters, if used, creates a piecewise linear easing by interpolating linearly between the specified points.\n *\n * @param  {...(String|Number)} args - Points\n * @return {EasingFunction}\n */\nconst linear = (...args) => {\n  const argsLength = args.length;\n  if (!argsLength) return none;\n  const totalPoints = argsLength - 1;\n  const firstArg = args[0];\n  const lastArg = args[totalPoints];\n  const xPoints = [0];\n  const yPoints = [parseNumber(firstArg)];\n  for (let i = 1; i < totalPoints; i++) {\n    const arg = args[i];\n    const splitValue = isStr(arg) ?\n    /** @type {String} */(arg).trim().split(' ') :\n    [arg];\n    const value = splitValue[0];\n    const percent = splitValue[1];\n    xPoints.push(!isUnd(percent) ? parseNumber(percent) / 100 : i / totalPoints);\n    yPoints.push(parseNumber(value));\n  }\n  yPoints.push(parseNumber(lastArg));\n  xPoints.push(1);\n  return function easeLinear(t) {\n    for (let i = 1, l = xPoints.length; i < l; i++) {\n      const currentX = xPoints[i];\n      if (t <= currentX) {\n        const prevX = xPoints[i - 1];\n        const prevY = yPoints[i - 1];\n        return prevY + (yPoints[i] - prevY) * (t - prevX) / (currentX - prevX);\n      }\n    }\n    return yPoints[yPoints.length - 1];\n  }\n};\n\nexport { linear };\n","/**\n * Anime.js - easings - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\n/**\n * @import {\n *   EasingFunction,\n * } from '../types/index.js'\n*/\n\n/** @type {EasingFunction} */\nconst none = t => t;\n\nexport { none };\n","/**\n * Anime.js - easings - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { K, minValue, noop } from '../../core/consts.js';\nimport { globals } from '../../core/globals.js';\nimport { isUnd, clamp, pow, PI, round, sqrt, abs, exp, cos, sin } from '../../core/helpers.js';\nimport { setValue } from '../../core/values.js';\n\n/**\n * @import {\n *   JSAnimation,\n * } from '../../animation/animation.js'\n */\n\n/**\n * @import {\n *   EasingFunction,\n *   SpringParams,\n *   Callback,\n * } from '../../types/index.js'\n*/\n\n/*\n * Spring easing solver adapted from https://webkit.org/demos/spring/spring.js\n * (c) 2016 Webkit - Apple Inc\n */\n\nconst maxSpringParamValue = K * 10;\n\nclass Spring {\n  /**\n   * @param {SpringParams} [parameters]\n   */\n  constructor(parameters = {}) {\n    const hasBounceOrDuration = !isUnd(parameters.bounce) || !isUnd(parameters.duration);\n    this.timeStep = .02; // Interval fed to the solver to calculate duration\n    this.restThreshold = .0005; // Values below this threshold are considered resting position\n    this.restDuration = 200; // Duration in ms used to check if the spring is resting after reaching restThreshold\n    this.maxDuration = 60000; // The maximum allowed spring duration in ms (default 1 min)\n    this.maxRestSteps = this.restDuration / this.timeStep / K; // How many steps allowed after reaching restThreshold before stopping the duration calculation\n    this.maxIterations = this.maxDuration / this.timeStep / K; // Calculate the maximum iterations allowed based on maxDuration\n    this.bn = clamp(setValue(parameters.bounce, .5), -1, 1); // The bounce percentage between -1 and 1.\n    this.pd = clamp(setValue(parameters.duration, 628), 10 * globals.timeScale, maxSpringParamValue * globals.timeScale); // The perceived duration\n    this.m = clamp(setValue(parameters.mass, 1), 1, maxSpringParamValue);\n    this.s = clamp(setValue(parameters.stiffness, 100), minValue, maxSpringParamValue);\n    this.d = clamp(setValue(parameters.damping, 10), minValue, maxSpringParamValue);\n    this.v = clamp(setValue(parameters.velocity, 0), -maxSpringParamValue, maxSpringParamValue);\n    this.w0 = 0;\n    this.zeta = 0;\n    this.wd = 0;\n    this.b = 0;\n    this.completed = false;\n    this.solverDuration = 0;\n    this.settlingDuration = 0;\n    /** @type {JSAnimation} */\n    this.parent = null;\n    /** @type {Callback<JSAnimation>} */\n    this.onComplete = parameters.onComplete || noop;\n    if (hasBounceOrDuration) this.calculateSDFromBD();\n    this.compute();\n    /** @type {EasingFunction} */\n    this.ease = t => {\n      const currentTime = t * this.settlingDuration;\n      const completed = this.completed;\n      const perceivedTime = this.pd;\n      if (currentTime >= perceivedTime && !completed) {\n        this.completed = true;\n        this.onComplete(this.parent);\n      }\n      if (currentTime < perceivedTime && completed) {\n        this.completed = false;\n      }\n      return t === 0 || t === 1 ? t : this.solve(t * this.solverDuration);\n    };\n  }\n\n  /** @type {EasingFunction} */\n  solve(time) {\n    const { zeta, w0, wd, b } = this;\n    let t = time;\n    if (zeta < 1) {\n      // Underdamped\n      t = exp(-t * zeta * w0) * (1 * cos(wd * t) + b * sin(wd * t));\n    } else if (zeta === 1) {\n      // Critically damped\n      t = (1 + b * t) * exp(-t * w0);\n    } else {\n      // Overdamped\n      // Using exponential instead of cosh and sinh functions to prevent Infinity\n      // Original exp(-zeta * w0 * t) * (cosh(wd * t) + b * sinh(wd * t))\n      t = ((1 + b) * exp((-zeta * w0 + wd) * t) + (1 - b) * exp((-zeta * w0 - wd) * t)) / 2;\n    }\n    return 1 - t;\n  }\n\n  calculateSDFromBD() {\n    // Apple's SwiftUI perceived spring duration implementation https://developer.apple.com/videos/play/wwdc2023/10158/?time=1010\n    // Equations taken from Kevin Grajeda's article https://www.kvin.me/posts/effortless-ui-spring-animations\n    const pds = globals.timeScale === 1 ? this.pd / K : this.pd;\n    // Mass and velocity should be set to their default values\n    this.m = 1;\n    this.v = 0;\n    // Stiffness = (2  perceptualDuration)\n    this.s = pow((2 * PI) / pds, 2);\n    if (this.bn >= 0) {\n      // For bounce  0 (critically damped to underdamped)\n      // damping = ((1 - bounce)  4)  perceptualDuration\n      this.d = ((1 - this.bn) * 4 * PI) / pds;\n    } else {\n      // For bounce < 0 (overdamped)\n      // damping = 4  (perceptualDuration  (1 + bounce))\n      // Note: (1 + bounce) is positive since bounce is negative\n      this.d = (4 * PI) / (pds * (1 + this.bn));\n    }\n    this.s = round(clamp(this.s, minValue, maxSpringParamValue), 3);\n    this.d = round(clamp(this.d, minValue, 300), 3); // Clamping to 300 is needed to prevent insane values in the solver\n  }\n\n  calculateBDFromSD() {\n    // Calculate perceived duration and bounce from stiffness and damping\n    // Note: We assumes m = 1 and v = 0 for these calculations\n    const pds = (2 * PI) / sqrt(this.s);\n    this.pd = pds * (globals.timeScale === 1 ? K : 1);\n    const zeta = this.d / (2 * sqrt(this.s));\n    if (zeta <= 1) {\n      // Critically damped to underdamped\n      this.bn = 1 - (this.d * pds) / (4 * PI);\n    } else {\n      // Overdamped\n      this.bn = (4 * PI) / (this.d * pds) - 1;\n    }\n    this.bn = round(clamp(this.bn, -1, 1), 3);\n    this.pd = round(clamp(this.pd, 10 * globals.timeScale, maxSpringParamValue * globals.timeScale), 3);\n  }\n\n  compute() {\n    const { maxRestSteps, maxIterations, restThreshold, timeStep, m, d, s, v } = this;\n    const w0 = this.w0 = clamp(sqrt(s / m), minValue, K);\n    const bouncedZeta = this.zeta = d / (2 * sqrt(s * m));\n    // Calculate wd based on damping type\n    if (bouncedZeta < 1) {\n      // Underdamped\n      this.wd = w0 * sqrt(1 - bouncedZeta * bouncedZeta);\n      this.b = (bouncedZeta * w0 + -v) / this.wd;\n    } else if (bouncedZeta === 1) {\n      // Critically damped\n      this.wd = 0;\n      this.b = -v + w0;\n    } else {\n      // Overdamped\n      this.wd = w0 * sqrt(bouncedZeta * bouncedZeta - 1);\n      this.b = (bouncedZeta * w0 + -v) / this.wd;\n    }\n\n    let solverTime = 0;\n    let restSteps = 0;\n    let iterations = 0;\n    while (restSteps <= maxRestSteps && iterations <= maxIterations) {\n      if (abs(1 - this.solve(solverTime)) < restThreshold) {\n        restSteps++;\n      } else {\n        restSteps = 0;\n      }\n      this.solverDuration = solverTime;\n      solverTime += timeStep;\n      iterations++;\n    }\n    this.settlingDuration = round(this.solverDuration * K, 0) * globals.timeScale;\n  }\n\n  get bounce() {\n    return this.bn;\n  }\n\n  set bounce(v) {\n    this.bn = clamp(setValue(v, 1), -1, 1);\n    this.calculateSDFromBD();\n    this.compute();\n  }\n\n  get duration() {\n    return this.pd;\n  }\n\n  set duration(v) {\n    this.pd = clamp(setValue(v, 1), 10 * globals.timeScale, maxSpringParamValue * globals.timeScale);\n    this.calculateSDFromBD();\n    this.compute();\n  }\n\n  get stiffness() {\n    return this.s;\n  }\n\n  set stiffness(v) {\n    this.s = clamp(setValue(v, 100), minValue, maxSpringParamValue);\n    this.calculateBDFromSD();\n    this.compute();\n  }\n\n  get damping() {\n    return this.d;\n  }\n\n  set damping(v) {\n    this.d = clamp(setValue(v, 10), minValue, maxSpringParamValue);\n    this.calculateBDFromSD();\n    this.compute();\n  }\n\n  get mass() {\n    return this.m;\n  }\n\n  set mass(v) {\n    this.m = clamp(setValue(v, 1), 1, maxSpringParamValue);\n    this.compute();\n  }\n\n  get velocity() {\n    return this.v;\n  }\n\n  set velocity(v) {\n    this.v = clamp(setValue(v, 0), -maxSpringParamValue, maxSpringParamValue);\n    this.compute();\n  }\n}\n\n/**\n * @param {SpringParams} [parameters]\n * @returns {Spring}\n */\nconst spring = (parameters) => new Spring(parameters);\n\n/**\n * @deprecated createSpring() is deprecated use spring() instead\n *\n * @param {SpringParams} [parameters]\n * @returns {Spring}\n */\nconst createSpring = (parameters) => {\n  console.warn('createSpring() is deprecated use spring() instead');\n  return new Spring(parameters);\n};\n\nexport { Spring, createSpring, spring };\n","/**\n * Anime.js - easings - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { ceil, floor, clamp } from '../../core/helpers.js';\n\n/**\n * @import {\n *   EasingFunction,\n * } from '../../types/index.js'\n*/\n\n/**\n * Steps ease implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n * Only covers 'end' and 'start' jumpterms\n * @param  {Number} steps\n * @param  {Boolean} [fromStart]\n * @return {EasingFunction}\n */\nconst steps = (steps = 10, fromStart) => {\n  const roundMethod = fromStart ? ceil : floor;\n  return t => roundMethod(clamp(t, 0, 1) * steps) * (1 / steps);\n};\n\nexport { steps };\n","/**\n * Anime.js - engine - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { globalVersions, defaults, globals } from '../core/globals.js';\nimport { isBrowser, doc, tickModes, K } from '../core/consts.js';\nimport { now, removeChild, forEachChildren } from '../core/helpers.js';\nimport { Clock } from '../core/clock.js';\nimport { tick } from '../core/render.js';\nimport { additive } from '../animation/additive.js';\n\n/**\n * @import {\n *   DefaultsParams,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   Tickable,\n * } from '../types/index.js'\n*/\n\nconst engineTickMethod = /*#__PURE__*/ (() => isBrowser ? requestAnimationFrame : setImmediate)();\nconst engineCancelMethod = /*#__PURE__*/ (() => isBrowser ? cancelAnimationFrame : clearImmediate)();\n\nclass Engine extends Clock {\n\n  /** @param {Number} [initTime] */\n  constructor(initTime) {\n    super(initTime);\n    this.useDefaultMainLoop = true;\n    this.pauseOnDocumentHidden = true;\n    /** @type {DefaultsParams} */\n    this.defaults = defaults;\n    // this.paused = isBrowser && doc.hidden ? true  : false;\n    this.paused = true;\n    /** @type {Number|NodeJS.Immediate} */\n    this.reqId = 0;\n  }\n\n  update() {\n    const time = this._currentTime = now();\n    if (this.requestTick(time)) {\n      this.computeDeltaTime(time);\n      const engineSpeed = this._speed;\n      const engineFps = this._fps;\n      let activeTickable = /** @type {Tickable} */(this._head);\n      while (activeTickable) {\n        const nextTickable = activeTickable._next;\n        if (!activeTickable.paused) {\n          tick(\n            activeTickable,\n            (time - activeTickable._startTime) * activeTickable._speed * engineSpeed,\n            0, // !muteCallbacks\n            0, // !internalRender\n            activeTickable._fps < engineFps ? activeTickable.requestTick(time) : tickModes.AUTO\n          );\n        } else {\n          removeChild(this, activeTickable);\n          this._hasChildren = !!this._tail;\n          activeTickable._running = false;\n          if (activeTickable.completed && !activeTickable._cancelled) {\n            activeTickable.cancel();\n          }\n        }\n        activeTickable = nextTickable;\n      }\n      additive.update();\n    }\n  }\n\n  wake() {\n    if (this.useDefaultMainLoop && !this.reqId) {\n      // Imediatly request a tick to update engine._elapsedTime and get accurate offsetPosition calculation in timer.js\n      this.requestTick(now());\n      this.reqId = engineTickMethod(tickEngine);\n    }\n    return this;\n  }\n\n  pause() {\n    if (!this.reqId) return;\n    this.paused = true;\n    return killEngine();\n  }\n\n  resume() {\n    if (!this.paused) return;\n    this.paused = false;\n    forEachChildren(this, (/** @type {Tickable} */child) => child.resetTime());\n    return this.wake();\n  }\n\n  // Getter and setter for speed\n  get speed() {\n    return this._speed * (globals.timeScale === 1 ? 1 : K);\n  }\n\n  set speed(playbackRate) {\n    this._speed = playbackRate * globals.timeScale;\n    forEachChildren(this, (/** @type {Tickable} */child) => child.speed = child._speed);\n  }\n\n  // Getter and setter for timeUnit\n  get timeUnit() {\n    return globals.timeScale === 1 ? 'ms' : 's';\n  }\n\n  set timeUnit(unit) {\n    const secondsScale = 0.001;\n    const isSecond = unit === 's';\n    const newScale = isSecond ? secondsScale : 1;\n    if (globals.timeScale !== newScale) {\n      globals.timeScale = newScale;\n      globals.tickThreshold = 200 * newScale;\n      const scaleFactor = isSecond ? secondsScale : K;\n      /** @type {Number} */\n      (this.defaults.duration) *= scaleFactor;\n      this._speed *= scaleFactor;\n    }\n  }\n\n  // Getter and setter for precision\n  get precision() {\n    return globals.precision;\n  }\n\n  set precision(precision) {\n    globals.precision = precision;\n  }\n\n}\n\nconst engine = /*#__PURE__*/(() => {\n  const engine = new Engine(now());\n  if (isBrowser) {\n    globalVersions.engine = engine;\n    doc.addEventListener('visibilitychange', () => {\n      if (!engine.pauseOnDocumentHidden) return;\n      doc.hidden ? engine.pause() : engine.resume();\n    });\n  }\n  return engine;\n})();\n\n\nconst tickEngine = () => {\n  if (engine._head) {\n    engine.reqId = engineTickMethod(tickEngine);\n    engine.update();\n  } else {\n    engine.reqId = 0;\n  }\n};\n\nconst killEngine = () => {\n  engineCancelMethod(/** @type {NodeJS.Immediate & Number} */(engine.reqId));\n  engine.reqId = 0;\n  return engine;\n};\n\nexport { engine };\n","/**\n * Anime.js - events - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { noop, doc, isDomSymbol, relativeValuesExecRgx, win } from '../core/consts.js';\nimport { scope, globals } from '../core/globals.js';\nimport { isUnd, isNum, addChild, forEachChildren, round, isStr, isObj, removeChild, clamp, lerp, isFnc } from '../core/helpers.js';\nimport { parseTargets } from '../core/targets.js';\nimport { setValue, getRelativeValue, decomposeRawValue, decomposedOriginalValue } from '../core/values.js';\nimport { convertValueUnit } from '../core/units.js';\nimport { Timer } from '../timer/timer.js';\nimport { get, set } from '../utils/target.js';\nimport { sync } from '../utils/time.js';\nimport { none } from '../easings/none.js';\nimport { parseEase } from '../easings/eases/parser.js';\n\n/**\n * @import {\n *   TargetsParam,\n *   EasingFunction,\n *   Callback,\n *   EasingParam,\n *   ScrollThresholdValue,\n *   ScrollObserverParams,\n *   Tickable,\n *   ScrollThresholdParam,\n *   ScrollThresholdCallback,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   JSAnimation,\n * } from '../animation/animation.js'\n*/\n\n/**\n * @import {\n *   WAAPIAnimation,\n * } from '../waapi/waapi.js'\n*/\n\n/**\n * @import {\n *   Timeline,\n * } from '../timeline/timeline.js'\n*/\n\n/**\n * @return {Number}\n */\nconst getMaxViewHeight = () => {\n  const $el = doc.createElement('div');\n  doc.body.appendChild($el);\n  $el.style.height = '100lvh';\n  const height = $el.offsetHeight;\n  doc.body.removeChild($el);\n  return height;\n};\n\n/**\n * @template {ScrollThresholdValue|String|Number|Boolean|Function|Object} T\n * @param {T | ((observer: ScrollObserver) => T)} value\n * @param {ScrollObserver} scroller\n * @return {T}\n */\nconst parseScrollObserverFunctionParameter = (value, scroller) => value && isFnc(value) ? /** @type {Function} */(value)(scroller) : /** @type {T} */(value);\n\nconst scrollContainers = new Map();\n\nclass ScrollContainer {\n  /**\n   * @param {HTMLElement} $el\n   */\n  constructor($el) {\n    /** @type {HTMLElement} */\n    this.element = $el;\n    /** @type {Boolean} */\n    this.useWin = this.element === doc.body;\n    /** @type {Number} */\n    this.winWidth = 0;\n    /** @type {Number} */\n    this.winHeight = 0;\n    /** @type {Number} */\n    this.width = 0;\n    /** @type {Number} */\n    this.height = 0;\n    /** @type {Number} */\n    this.left = 0;\n    /** @type {Number} */\n    this.top = 0;\n    /** @type {Number} */\n    this.scale = 1;\n    /** @type {Number} */\n    this.zIndex = 0;\n    /** @type {Number} */\n    this.scrollX = 0;\n    /** @type {Number} */\n    this.scrollY = 0;\n    /** @type {Number} */\n    this.prevScrollX = 0;\n    /** @type {Number} */\n    this.prevScrollY = 0;\n    /** @type {Number} */\n    this.scrollWidth = 0;\n    /** @type {Number} */\n    this.scrollHeight = 0;\n    /** @type {Number} */\n    this.velocity = 0;\n    /** @type {Boolean} */\n    this.backwardX = false;\n    /** @type {Boolean} */\n    this.backwardY = false;\n    /** @type {Timer} */\n    this.scrollTicker = new Timer({\n      autoplay: false,\n      onBegin: () => this.dataTimer.resume(),\n      onUpdate: () => {\n        const backwards = this.backwardX || this.backwardY;\n        forEachChildren(this, (/** @type {ScrollObserver} */child) => child.handleScroll(), backwards);\n      },\n      onComplete: () => this.dataTimer.pause()\n    }).init();\n    /** @type {Timer} */\n    this.dataTimer = new Timer({\n      autoplay: false,\n      frameRate: 30,\n      onUpdate: (/** @type {Timer} */self) => {\n        const dt = self.deltaTime;\n        const px = this.prevScrollX;\n        const py = this.prevScrollY;\n        const nx = this.scrollX;\n        const ny = this.scrollY;\n        const dx = px - nx;\n        const dy = py - ny;\n        this.prevScrollX = nx;\n        this.prevScrollY = ny;\n        if (dx) this.backwardX = px > nx;\n        if (dy) this.backwardY = py > ny;\n        this.velocity = round(dt > 0 ? Math.sqrt(dx * dx + dy * dy) / dt : 0, 5);\n      }\n    }).init();\n    /** @type {Timer} */\n    this.resizeTicker = new Timer({\n      autoplay: false,\n      duration: 250 * globals.timeScale,\n      onComplete: () => {\n        this.updateWindowBounds();\n        this.refreshScrollObservers();\n        this.handleScroll();\n      }\n    }).init();\n    /** @type {Timer} */\n    this.wakeTicker = new Timer({\n      autoplay: false,\n      duration: 500 * globals.timeScale,\n      onBegin: () => {\n        this.scrollTicker.resume();\n      },\n      onComplete: () => {\n        this.scrollTicker.pause();\n      }\n    }).init();\n    /** @type {ScrollObserver} */\n    this._head = null;\n    /** @type {ScrollObserver} */\n    this._tail = null;\n    this.updateScrollCoords();\n    this.updateWindowBounds();\n    this.updateBounds();\n    this.refreshScrollObservers();\n    this.handleScroll();\n    this.resizeObserver = new ResizeObserver(() => this.resizeTicker.restart());\n    this.resizeObserver.observe(this.element);\n    (this.useWin ? win : this.element).addEventListener('scroll', this, false);\n  }\n\n  updateScrollCoords() {\n    const useWin = this.useWin;\n    const $el = this.element;\n    this.scrollX = round(useWin ? win.scrollX : $el.scrollLeft, 0);\n    this.scrollY = round(useWin ? win.scrollY : $el.scrollTop, 0);\n  }\n\n  updateWindowBounds() {\n    this.winWidth = win.innerWidth;\n    this.winHeight = getMaxViewHeight();\n  }\n\n  updateBounds() {\n    const style = getComputedStyle(this.element);\n    const $el = this.element;\n    this.scrollWidth = $el.scrollWidth + parseFloat(style.marginLeft) + parseFloat(style.marginRight);\n    this.scrollHeight = $el.scrollHeight + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n    this.updateWindowBounds();\n    let width, height;\n    if (this.useWin) {\n      width = this.winWidth;\n      height = this.winHeight;\n    } else {\n      const elRect = $el.getBoundingClientRect();\n      width = $el.clientWidth;\n      height = $el.clientHeight;\n      this.top = elRect.top;\n      this.left = elRect.left;\n      this.scale = elRect.width ? width / elRect.width : (elRect.height ? height / elRect.height : 1);\n    }\n    this.width = width;\n    this.height = height;\n  }\n\n  refreshScrollObservers() {\n    forEachChildren(this, (/** @type {ScrollObserver} */child) => {\n      if (child._debug) {\n        child.removeDebug();\n      }\n    });\n    this.updateBounds();\n    forEachChildren(this, (/** @type {ScrollObserver} */child) => {\n      child.refresh();\n      if (child._debug) {\n        child.debug();\n      }\n    });\n  }\n\n  refresh() {\n    this.updateWindowBounds();\n    this.updateBounds();\n    this.refreshScrollObservers();\n    this.handleScroll();\n  }\n\n  handleScroll() {\n    this.updateScrollCoords();\n    this.wakeTicker.restart();\n  }\n\n  /**\n   * @param {Event} e\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case 'scroll':\n        this.handleScroll();\n        break;\n    }\n  }\n\n  revert() {\n    this.scrollTicker.cancel();\n    this.dataTimer.cancel();\n    this.resizeTicker.cancel();\n    this.wakeTicker.cancel();\n    this.resizeObserver.disconnect();\n    (this.useWin ? win : this.element).removeEventListener('scroll', this);\n    scrollContainers.delete(this.element);\n  }\n}\n\n/**\n * @param {TargetsParam} target\n * @return {ScrollContainer}\n */\nconst registerAndGetScrollContainer = target => {\n  const $el = /** @type {HTMLElement} */(target ? parseTargets(target)[0] || doc.body : doc.body);\n  let scrollContainer = scrollContainers.get($el);\n  if (!scrollContainer) {\n    scrollContainer = new ScrollContainer($el);\n    scrollContainers.set($el, scrollContainer);\n  }\n  return scrollContainer;\n};\n\n/**\n * @param {HTMLElement} $el\n * @param {Number|string} v\n * @param {Number} size\n * @param {Number} [under]\n * @param {Number} [over]\n * @return {Number}\n */\nconst convertValueToPx = ($el, v, size, under, over) => {\n  const clampMin = v === 'min';\n  const clampMax = v === 'max';\n  const value = v === 'top' || v === 'left' || v === 'start' || clampMin ? 0 :\n                v === 'bottom' || v === 'right' || v === 'end' || clampMax ? '100%' :\n                v === 'center' ? '50%' :\n                v;\n  const { n, u } = decomposeRawValue(value, decomposedOriginalValue);\n  let px = n;\n  if (u === '%') {\n    px = (n / 100) * size;\n  } else if (u) {\n    px = convertValueUnit($el, decomposedOriginalValue, 'px', true).n;\n  }\n  if (clampMax && under < 0) px += under;\n  if (clampMin && over > 0) px += over;\n  return px;\n};\n\n/**\n * @param {HTMLElement} $el\n * @param {ScrollThresholdValue} v\n * @param {Number} size\n * @param {Number} [under]\n * @param {Number} [over]\n * @return {Number}\n */\nconst parseBoundValue = ($el, v, size, under, over) => {\n  /** @type {Number} */\n  let value;\n  if (isStr(v)) {\n    const matchedOperator = relativeValuesExecRgx.exec(/** @type {String} */(v));\n    if (matchedOperator) {\n      const splitter = matchedOperator[0];\n      const operator = splitter[0];\n      const splitted = /** @type {String} */(v).split(splitter);\n      const clampMin = splitted[0] === 'min';\n      const clampMax = splitted[0] === 'max';\n      const valueAPx = convertValueToPx($el, splitted[0], size, under, over);\n      const valueBPx = convertValueToPx($el, splitted[1], size, under, over);\n      if (clampMin) {\n        const min = getRelativeValue(convertValueToPx($el, 'min', size), valueBPx, operator);\n        value = min < valueAPx ? valueAPx : min;\n      } else if (clampMax) {\n        const max = getRelativeValue(convertValueToPx($el, 'max', size), valueBPx, operator);\n        value = max > valueAPx ? valueAPx : max;\n      } else {\n        value = getRelativeValue(valueAPx, valueBPx, operator);\n      }\n    } else {\n      value = convertValueToPx($el, v, size, under, over);\n    }\n  } else {\n    value = /** @type {Number} */(v);\n  }\n  return round(value, 0);\n};\n\n/**\n * @param {JSAnimation} linked\n * @return {HTMLElement}\n */\nconst getAnimationDomTarget = linked => {\n  let $linkedTarget;\n  const linkedTargets = linked.targets;\n  for (let i = 0, l = linkedTargets.length; i < l; i++) {\n    const target = linkedTargets[i];\n    if (target[isDomSymbol]) {\n      $linkedTarget = /** @type {HTMLElement} */(target);\n      break;\n    }\n  }\n  return $linkedTarget;\n};\n\nlet scrollerIndex = 0;\n\nconst debugColors = ['#FF4B4B','#FF971B','#FFC730','#F9F640','#7AFF5A','#18FF74','#17E09B','#3CFFEC','#05DBE9','#33B3F1','#638CF9','#C563FE','#FF4FCF','#F93F8A'];\n\nclass ScrollObserver {\n  /**\n   * @param {ScrollObserverParams} parameters\n   */\n  constructor(parameters = {}) {\n    if (scope.current) scope.current.register(this);\n    const syncMode = setValue(parameters.sync, 'play pause');\n    const ease = syncMode ? parseEase(/** @type {EasingParam} */(syncMode)) : null;\n    const isLinear = syncMode && (syncMode === 'linear' || syncMode === none);\n    const isEase = syncMode && !(ease === none && !isLinear);\n    const isSmooth = syncMode && (isNum(syncMode) || syncMode === true || isLinear);\n    const isMethods = syncMode && (isStr(syncMode) && !isEase && !isSmooth);\n    const syncMethods = isMethods ? /** @type {String} */(syncMode).split(' ').map(\n      (/** @type {String} */m) => () => {\n        const linked = this.linked;\n        return linked && linked[m] ? linked[m]() : null;\n      }\n    ) : null;\n    const biDirSync = isMethods && syncMethods.length > 2;\n    /** @type {Number} */\n    this.index = scrollerIndex++;\n    /** @type {String|Number} */\n    this.id = !isUnd(parameters.id) ? parameters.id : this.index;\n    /** @type {ScrollContainer} */\n    this.container = registerAndGetScrollContainer(parameters.container);\n    /** @type {HTMLElement} */\n    this.target = null;\n    /** @type {Tickable|WAAPIAnimation} */\n    this.linked = null;\n    /** @type {Boolean} */\n    this.repeat = null;\n    /** @type {Boolean} */\n    this.horizontal = null;\n    /** @type {ScrollThresholdParam|ScrollThresholdValue|ScrollThresholdCallback} */\n    this.enter = null;\n    /** @type {ScrollThresholdParam|ScrollThresholdValue|ScrollThresholdCallback} */\n    this.leave = null;\n    /** @type {Boolean} */\n    this.sync = isEase || isSmooth || !!syncMethods;\n    /** @type {EasingFunction} */\n    this.syncEase = isEase ? ease : null;\n    /** @type {Number} */\n    this.syncSmooth = isSmooth ? syncMode === true || isLinear ? 1 : /** @type {Number} */(syncMode) : null;\n    /** @type {Callback<ScrollObserver>} */\n    this.onSyncEnter = syncMethods && !biDirSync && syncMethods[0] ? syncMethods[0] : noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onSyncLeave = syncMethods && !biDirSync && syncMethods[1] ? syncMethods[1] : noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onSyncEnterForward = syncMethods && biDirSync && syncMethods[0] ? syncMethods[0] : noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onSyncLeaveForward = syncMethods && biDirSync && syncMethods[1] ? syncMethods[1] : noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onSyncEnterBackward = syncMethods && biDirSync && syncMethods[2] ? syncMethods[2] : noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onSyncLeaveBackward = syncMethods && biDirSync && syncMethods[3] ? syncMethods[3] : noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onEnter = parameters.onEnter || noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onLeave = parameters.onLeave || noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onEnterForward = parameters.onEnterForward || noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onLeaveForward = parameters.onLeaveForward || noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onEnterBackward = parameters.onEnterBackward || noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onLeaveBackward = parameters.onLeaveBackward || noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onUpdate = parameters.onUpdate || noop;\n    /** @type {Callback<ScrollObserver>} */\n    this.onSyncComplete = parameters.onSyncComplete || noop;\n    /** @type {Boolean} */\n    this.reverted = false;\n    /** @type {Boolean} */\n    this.ready = false;\n    /** @type {Boolean} */\n    this.completed = false;\n    /** @type {Boolean} */\n    this.began = false;\n    /** @type {Boolean} */\n    this.isInView = false;\n    /** @type {Boolean} */\n    this.forceEnter = false;\n    /** @type {Boolean} */\n    this.hasEntered = false;\n    /** @type {Number} */\n    this.offset = 0;\n    /** @type {Number} */\n    this.offsetStart = 0;\n    /** @type {Number} */\n    this.offsetEnd = 0;\n    /** @type {Number} */\n    this.distance = 0;\n    /** @type {Number} */\n    this.prevProgress = 0;\n    /** @type {Array} */\n    this.thresholds = ['start', 'end', 'end', 'start'];\n    /** @type {[Number, Number, Number, Number]} */\n    this.coords = [0, 0, 0, 0];\n    /** @type {JSAnimation} */\n    this.debugStyles = null;\n    /** @type {HTMLElement} */\n    this.$debug = null;\n    /** @type {ScrollObserverParams} */\n    this._params = parameters;\n    /** @type {Boolean} */\n    this._debug = setValue(parameters.debug, false);\n    /** @type {ScrollObserver} */\n    this._next = null;\n    /** @type {ScrollObserver} */\n    this._prev = null;\n    addChild(this.container, this);\n    // Wait for the next frame to add to the container in order to handle calls to link()\n    sync(() => {\n      if (this.reverted) return;\n      if (!this.target) {\n        const target = /** @type {HTMLElement} */(parseTargets(parameters.target)[0]);\n        this.target = target || doc.body;\n        this.refresh();\n      }\n      if (this._debug) this.debug();\n    });\n  }\n\n  /**\n   * @param {Tickable|WAAPIAnimation} linked\n   */\n  link(linked) {\n    if (linked) {\n      // Make sure to pause the linked object in case it's added later\n      linked.pause();\n      this.linked = linked;\n      // Forces WAAPI Animation to persist; otherwise, they will stop syncing on finish.\n      if (!isUnd(/** @type {WAAPIAnimation} */(linked))) /** @type {WAAPIAnimation} */(linked).persist = true;\n      // Try to use a target of the linked object if no target parameters specified\n      if (!this._params.target) {\n        /** @type {HTMLElement} */\n        let $linkedTarget;\n        if (!isUnd(/** @type {JSAnimation} */(linked).targets)) {\n          $linkedTarget = getAnimationDomTarget(/** @type {JSAnimation} */(linked));\n        } else {\n          forEachChildren(/** @type {Timeline} */(linked), (/** @type {JSAnimation} */child) => {\n            if (child.targets && !$linkedTarget) {\n              $linkedTarget = getAnimationDomTarget(/** @type {JSAnimation} */(child));\n            }\n          });\n        }\n        // Fallback to body if no target found\n        this.target = $linkedTarget || doc.body;\n        this.refresh();\n      }\n    }\n    return this;\n  }\n\n  get velocity() {\n    return this.container.velocity;\n  }\n\n  get backward() {\n    return this.horizontal ? this.container.backwardX : this.container.backwardY;\n  }\n\n  get scroll() {\n    return this.horizontal ? this.container.scrollX : this.container.scrollY;\n  }\n\n  get progress() {\n    const p = (this.scroll - this.offsetStart) / this.distance;\n    return p === Infinity || isNaN(p) ? 0 : round(clamp(p, 0, 1), 6);\n  }\n\n  refresh() {\n    // This flag is used to prevent running handleScroll() outside of this.refresh() with values not yet calculated\n    this.ready = true;\n    this.reverted = false;\n    const params = this._params;\n    this.repeat = setValue(parseScrollObserverFunctionParameter(params.repeat, this), true);\n    this.horizontal = setValue(parseScrollObserverFunctionParameter(params.axis, this), 'y') === 'x';\n    this.enter = setValue(parseScrollObserverFunctionParameter(params.enter, this), 'end start');\n    this.leave = setValue(parseScrollObserverFunctionParameter(params.leave, this), 'start end');\n    this.updateBounds();\n    this.handleScroll();\n    return this;\n  }\n\n  removeDebug() {\n    if (this.$debug) {\n      this.$debug.parentNode.removeChild(this.$debug);\n      this.$debug = null;\n    }\n    if (this.debugStyles) {\n      this.debugStyles.revert();\n      this.$debug = null;\n    }\n    return this;\n  }\n\n  debug() {\n    this.removeDebug();\n    const container = this.container;\n    const isHori = this.horizontal;\n    const $existingDebug = container.element.querySelector(':scope > .animejs-onscroll-debug');\n    const $debug = doc.createElement('div');\n    const $thresholds = doc.createElement('div');\n    const $triggers = doc.createElement('div');\n    const color = debugColors[this.index % debugColors.length];\n    const useWin = container.useWin;\n    const containerWidth = useWin ? container.winWidth : container.width;\n    const containerHeight = useWin ? container.winHeight : container.height;\n    const scrollWidth = container.scrollWidth;\n    const scrollHeight = container.scrollHeight;\n    const size = this.container.width > 360 ? 320 : 260;\n    const offLeft = isHori ? 0 : 10;\n    const offTop = isHori ? 10 : 0;\n    const half = isHori ? 24 : size / 2;\n    const labelHeight = isHori ? half : 15;\n    const labelWidth = isHori ? 60 : half;\n    const labelSize = isHori ? labelWidth : labelHeight;\n    const repeat = isHori ? 'repeat-x' : 'repeat-y';\n    /**\n     * @param {Number} v\n     * @return {String}\n     */\n    const gradientOffset = v => isHori ? '0px '+(v)+'px' : (v)+'px'+' 2px';\n    /**\n     * @param {String} c\n     * @return {String}\n     */\n    const lineCSS = (c) => `linear-gradient(${isHori ? 90 : 0}deg, ${c} 2px, transparent 1px)`;\n    /**\n     * @param {String} p\n     * @param {Number} l\n     * @param {Number} t\n     * @param {Number} w\n     * @param {Number} h\n     * @return {String}\n     */\n    const baseCSS = (p, l, t, w, h) => `position:${p};left:${l}px;top:${t}px;width:${w}px;height:${h}px;`;\n    $debug.style.cssText = `${baseCSS('absolute', offLeft, offTop, isHori ? scrollWidth : size, isHori ? size : scrollHeight)}\n      pointer-events: none;\n      z-index: ${this.container.zIndex++};\n      display: flex;\n      flex-direction: ${isHori ? 'column' : 'row'};\n      filter: drop-shadow(0px 1px 0px rgba(0,0,0,.75));\n    `;\n    $thresholds.style.cssText = `${baseCSS('sticky', 0, 0, isHori ? containerWidth : half, isHori ? half : containerHeight)}`;\n    if (!$existingDebug) {\n      $thresholds.style.cssText += `background:\n        ${lineCSS('#FFFF')}${gradientOffset(half-10)} / ${isHori ? '100px 100px' : '100px 100px'} ${repeat},\n        ${lineCSS('#FFF8')}${gradientOffset(half-10)} / ${isHori ? '10px 10px' : '10px 10px'} ${repeat};\n      `;\n    }\n    $triggers.style.cssText = `${baseCSS('relative', 0, 0, isHori ? scrollWidth : half, isHori ? half : scrollHeight)}`;\n    if (!$existingDebug) {\n      $triggers.style.cssText += `background:\n        ${lineCSS('#FFFF')}${gradientOffset(0)} / ${isHori ? '100px 10px' : '10px 100px'} ${repeat},\n        ${lineCSS('#FFF8')}${gradientOffset(0)} / ${isHori ? '10px 0px' : '0px 10px'} ${repeat};\n      `;\n    }\n    const labels = [' enter: ', ' leave: '];\n    this.coords.forEach((v, i) => {\n      const isView = i > 1;\n      const value = (isView ? 0 : this.offset) + v;\n      const isTail = i % 2;\n      const isFirst = value < labelSize;\n      const isOver = value > (isView ? isHori ? containerWidth : containerHeight : isHori ? scrollWidth : scrollHeight) - labelSize;\n      const isFlip = (isView ? isTail && !isFirst : !isTail && !isFirst) || isOver;\n      const $label = doc.createElement('div');\n      const $text = doc.createElement('div');\n      const dirProp = isHori ? isFlip ? 'right' : 'left' : isFlip ? 'bottom' : 'top';\n      const flipOffset = isFlip ? (isHori ? labelWidth : labelHeight) + (!isView ? isHori ? -1 : -2 : isHori ? -1 : isOver ? 0 : -2) : !isView ? isHori ? 1 : 0 : isHori ? 1 : 0;\n      // $text.innerHTML = `${!isView ? '' : labels[isTail] + ' '}${this.id}: ${this.thresholds[i]} ${isView ? '' : labels[isTail]}`;\n      $text.innerHTML = `${this.id}${labels[isTail]}${this.thresholds[i]}`;\n      $label.style.cssText = `${baseCSS('absolute', 0, 0, labelWidth, labelHeight)}\n        display: flex;\n        flex-direction: ${isHori ? 'column' : 'row'};\n        justify-content: flex-${isView ? 'start' : 'end'};\n        align-items: flex-${isFlip ? 'end' : 'start'};\n        border-${dirProp}: 2px ${isTail ? 'solid' : 'solid'} ${color};\n      `;\n      $text.style.cssText = `\n        overflow: hidden;\n        max-width: ${(size / 2) - 10}px;\n        height: ${labelHeight};\n        margin-${isHori ? isFlip ? 'right' : 'left' : isFlip ? 'bottom' : 'top'}: -2px;\n        padding: 1px;\n        font-family: ui-monospace, monospace;\n        font-size: 10px;\n        letter-spacing: -.025em;\n        line-height: 9px;\n        font-weight: 600;\n        text-align: ${isHori && isFlip || !isHori && !isView ? 'right' : 'left'};\n        white-space: pre;\n        text-overflow: ellipsis;\n        color: ${isTail ? color : 'rgba(0,0,0,.75)'};\n        background-color: ${isTail ? 'rgba(0,0,0,.65)' : color};\n        border: 2px solid ${isTail ? color : 'transparent'};\n        border-${isHori ? isFlip ? 'top-left' : 'top-right' : isFlip ? 'top-left' : 'bottom-left'}-radius: 5px;\n        border-${isHori ? isFlip ? 'bottom-left' : 'bottom-right' : isFlip ? 'top-right' : 'bottom-right'}-radius: 5px;\n      `;\n      $label.appendChild($text);\n      let position = value - flipOffset + (isHori ? 1 : 0);\n      $label.style[isHori ? 'left' : 'top'] = `${position}px`;\n      // $label.style[isHori ? 'left' : 'top'] = value - flipOffset + (!isFlip && isFirst && !isView ? 1 : isFlip ? 0 : -2) + 'px';\n      (isView ? $thresholds : $triggers).appendChild($label);\n    });\n\n    $debug.appendChild($thresholds);\n    $debug.appendChild($triggers);\n    container.element.appendChild($debug);\n\n    if (!$existingDebug) $debug.classList.add('animejs-onscroll-debug');\n    this.$debug = $debug;\n    const containerPosition = get(container.element, 'position');\n    if (containerPosition === 'static') {\n      this.debugStyles = set(container.element, { position: 'relative '});\n    }\n\n  }\n\n  updateBounds() {\n    if (this._debug) {\n      this.removeDebug();\n    }\n    let stickys;\n    const $target = this.target;\n    const container = this.container;\n    const isHori = this.horizontal;\n    const linked = this.linked;\n    let linkedTime;\n    let $el = $target;\n    // let offsetX = 0;\n    // let offsetY = 0;\n    // let $offsetParent = $el;\n    /** @type {Element} */\n    if (linked) {\n      linkedTime = linked.currentTime;\n      linked.seek(0, true);\n    }\n    /* Old implementation to get offset and targetSize before fixing https://github.com/juliangarnier/anime/issues/1021\n    // const isContainerStatic = get(container.element, 'position') === 'static' ? set(container.element, { position: 'relative '}) : false;\n    // while ($el && $el !== container.element && $el !== doc.body) {\n    //   const isSticky = get($el, 'position') === 'sticky' ?\n    //                    set($el, { position: 'static' }) :\n    //                    false;\n    //   if ($el === $offsetParent) {\n    //     offsetX += $el.offsetLeft || 0;\n    //     offsetY += $el.offsetTop || 0;\n    //     $offsetParent = $el.offsetParent;\n    //   }\n    //   $el = /** @type {HTMLElement} */($el.parentElement);\n    //   if (isSticky) {\n    //     if (!stickys) stickys = [];\n    //     stickys.push(isSticky);\n    //   }\n    // }\n    // if (isContainerStatic) isContainerStatic.revert();\n    // const offset = isHori ? offsetX : offsetY;\n    // const targetSize = isHori ? $target.offsetWidth : $target.offsetHeight;\n\n    while ($el && $el !== container.element && $el !== doc.body) {\n      const isSticky = get($el, 'position') === 'sticky' ? set($el, { position: 'static' }) : false;\n      $el = $el.parentElement;\n      if (isSticky) {\n        if (!stickys) stickys = [];\n        stickys.push(isSticky);\n      }\n    }\n    const rect = $target.getBoundingClientRect();\n    const scale = container.scale;\n    const offset = (isHori ? rect.left + container.scrollX - container.left : rect.top + container.scrollY - container.top) * scale;\n    const targetSize = (isHori ? rect.width : rect.height) * scale;\n    const containerSize = isHori ? container.width : container.height;\n    const scrollSize = isHori ? container.scrollWidth : container.scrollHeight;\n    const maxScroll = scrollSize - containerSize;\n    const enter = this.enter;\n    const leave = this.leave;\n\n    /** @type {ScrollThresholdValue} */\n    let enterTarget = 'start';\n    /** @type {ScrollThresholdValue} */\n    let leaveTarget = 'end';\n    /** @type {ScrollThresholdValue} */\n    let enterContainer = 'end';\n    /** @type {ScrollThresholdValue} */\n    let leaveContainer = 'start';\n\n    if (isStr(enter)) {\n      const splitted = /** @type {String} */(enter).split(' ');\n      enterContainer = splitted[0];\n      enterTarget = splitted.length > 1 ? splitted[1] : enterTarget;\n    } else if (isObj(enter)) {\n      const e = /** @type {ScrollThresholdParam} */(enter);\n      if (!isUnd(e.container)) enterContainer = e.container;\n      if (!isUnd(e.target)) enterTarget = e.target;\n    } else if (isNum(enter)) {\n      enterContainer = /** @type {Number} */(enter);\n    }\n\n    if (isStr(leave)) {\n      const splitted = /** @type {String} */(leave).split(' ');\n      leaveContainer = splitted[0];\n      leaveTarget = splitted.length > 1 ? splitted[1] : leaveTarget;\n    } else if (isObj(leave)) {\n      const t = /** @type {ScrollThresholdParam} */(leave);\n      if (!isUnd(t.container)) leaveContainer = t.container;\n      if (!isUnd(t.target)) leaveTarget = t.target;\n    } else if (isNum(leave)) {\n      leaveContainer = /** @type {Number} */(leave);\n    }\n\n    const parsedEnterTarget = parseBoundValue($target, enterTarget, targetSize);\n    const parsedLeaveTarget = parseBoundValue($target, leaveTarget, targetSize);\n    const under = (parsedEnterTarget + offset) - containerSize;\n    const over = (parsedLeaveTarget + offset) - maxScroll;\n    const parsedEnterContainer = parseBoundValue($target, enterContainer, containerSize, under, over);\n    const parsedLeaveContainer = parseBoundValue($target, leaveContainer, containerSize, under, over);\n    const offsetStart = parsedEnterTarget + offset - parsedEnterContainer;\n    const offsetEnd = parsedLeaveTarget + offset - parsedLeaveContainer;\n    const scrollDelta = offsetEnd - offsetStart;\n    this.offset = offset;\n    this.offsetStart = offsetStart;\n    this.offsetEnd = offsetEnd;\n    this.distance = scrollDelta <= 0 ? 0 : scrollDelta;\n    this.thresholds = [enterTarget, leaveTarget, enterContainer, leaveContainer];\n    this.coords = [parsedEnterTarget, parsedLeaveTarget, parsedEnterContainer, parsedLeaveContainer];\n    if (stickys) {\n      stickys.forEach(sticky => sticky.revert());\n    }\n    if (linked) {\n      linked.seek(linkedTime, true);\n    }\n    if (this._debug) {\n      this.debug();\n    }\n  }\n\n  handleScroll() {\n    if (!this.ready) return;\n    const linked = this.linked;\n    const sync = this.sync;\n    const syncEase = this.syncEase;\n    const syncSmooth = this.syncSmooth;\n    const shouldSeek = linked && (syncEase || syncSmooth);\n    const isHori = this.horizontal;\n    const container = this.container;\n    const scroll = this.scroll;\n    const isBefore = scroll <= this.offsetStart;\n    const isAfter = scroll >= this.offsetEnd;\n    const isInView = !isBefore && !isAfter;\n    const isOnTheEdge = scroll === this.offsetStart || scroll === this.offsetEnd;\n    const forceEnter = !this.hasEntered && isOnTheEdge;\n    const $debug = this._debug && this.$debug;\n    let hasUpdated = false;\n    let syncCompleted = false;\n    let p = this.progress;\n\n    if (isBefore && this.began) {\n      this.began = false;\n    }\n\n    if (p > 0 && !this.began) {\n      this.began = true;\n    }\n\n    if (shouldSeek) {\n      const lp = linked.progress;\n      if (syncSmooth && isNum(syncSmooth)) {\n        if (/** @type {Number} */(syncSmooth) < 1) {\n          const step = 0.0001;\n          const snap = lp < p && p === 1 ? step : lp > p && !p ? -step : 0;\n          p = round(lerp(lp, p, lerp(.01, .2, /** @type {Number} */(syncSmooth))) + snap, 6);\n        }\n      } else if (syncEase) {\n        p = syncEase(p);\n      }\n      hasUpdated = p !== this.prevProgress;\n      syncCompleted = lp === 1;\n      if (hasUpdated && !syncCompleted && (syncSmooth && lp)) {\n        container.wakeTicker.restart();\n      }\n    }\n\n    if ($debug) {\n      const sticky = isHori ? container.scrollY : container.scrollX;\n      $debug.style[isHori ? 'top' : 'left'] = sticky + 10 + 'px';\n    }\n\n    // Trigger enter callbacks if already in view or when entering the view\n    if ((isInView && !this.isInView) || (forceEnter && !this.forceEnter && !this.hasEntered)) {\n      if (isInView) this.isInView = true;\n      if (!this.forceEnter || !this.hasEntered) {\n        if ($debug && isInView) $debug.style.zIndex = `${this.container.zIndex++}`;\n        this.onSyncEnter(this);\n        this.onEnter(this);\n        if (this.backward) {\n          this.onSyncEnterBackward(this);\n          this.onEnterBackward(this);\n        } else {\n          this.onSyncEnterForward(this);\n          this.onEnterForward(this);\n        }\n        this.hasEntered = true;\n        if (forceEnter) this.forceEnter = true;\n      } else if (isInView) {\n        this.forceEnter = false;\n      }\n    }\n\n    if (isInView || !isInView && this.isInView) {\n      hasUpdated = true;\n    }\n\n    if (hasUpdated) {\n      if (shouldSeek) linked.seek(linked.duration * p);\n      this.onUpdate(this);\n    }\n\n    if (!isInView && this.isInView) {\n      this.isInView = false;\n      this.onSyncLeave(this);\n      this.onLeave(this);\n      if (this.backward) {\n        this.onSyncLeaveBackward(this);\n        this.onLeaveBackward(this);\n      } else {\n        this.onSyncLeaveForward(this);\n        this.onLeaveForward(this);\n      }\n      if (sync && !syncSmooth) {\n        syncCompleted = true;\n      }\n    }\n\n    if (p >= 1 && this.began && !this.completed && (sync && syncCompleted || !sync)) {\n      if (sync) {\n        this.onSyncComplete(this);\n      }\n      this.completed = true;\n      if ((!this.repeat && !linked) || (!this.repeat && linked && linked.completed)) {\n        this.revert();\n      }\n    }\n\n    if (p < 1 && this.completed) {\n      this.completed = false;\n    }\n\n    this.prevProgress = p;\n  }\n\n  revert() {\n    if (this.reverted) return;\n    const container = this.container;\n    removeChild(container, this);\n    if (!container._head) {\n      container.revert();\n    }\n    if (this._debug) {\n      this.removeDebug();\n    }\n    this.reverted = true;\n    this.ready = false;\n    return this;\n  }\n\n}\n\n/**\n * @param {ScrollObserverParams} [parameters={}]\n * @return {ScrollObserver}\n */\nconst onScroll = (parameters = {}) => new ScrollObserver(parameters);\n\nexport { ScrollObserver, onScroll, scrollContainers };\n","/**\n * Anime.js - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nexport { Timer, createTimer } from './timer/timer.js';\nexport { JSAnimation, animate } from './animation/animation.js';\nexport { Timeline, createTimeline } from './timeline/timeline.js';\nexport { Animatable, createAnimatable } from './animatable/animatable.js';\nexport { Draggable, createDraggable } from './draggable/draggable.js';\nexport { Scope, createScope } from './scope/scope.js';\nexport { ScrollObserver, onScroll, scrollContainers } from './events/scroll.js';\nexport { engine } from './engine/engine.js';\nimport * as index from './easings/index.js';\nexport { index as easings };\nimport * as index$1 from './utils/index.js';\nexport { index$1 as utils };\nimport * as index$2 from './svg/index.js';\nexport { index$2 as svg };\nimport * as index$3 from './text/index.js';\nexport { index$3 as text };\nexport { WAAPIAnimation, waapi } from './waapi/waapi.js';\nexport { cubicBezier } from './easings/cubic-bezier/index.js';\nexport { steps } from './easings/steps/index.js';\nexport { linear } from './easings/linear/index.js';\nexport { irregular } from './easings/irregular/index.js';\nexport { Spring, createSpring, spring } from './easings/spring/index.js';\nexport { eases } from './easings/eases/parser.js';\nexport { clamp, damp, degToRad, lerp, mapRange, padEnd, padStart, radToDeg, round, roundPad, snap, wrap } from './utils/chainable.js';\nexport { createSeededRandom, random, randomPick, shuffle } from './utils/random.js';\nexport { keepTime, sync } from './utils/time.js';\nexport { cleanInlineStyles } from './core/styles.js';\nexport { registerTargets as $ } from './core/targets.js';\nexport { get, remove, set } from './utils/target.js';\nexport { stagger } from './utils/stagger.js';\nexport { createMotionPath } from './svg/motionpath.js';\nexport { createDrawable } from './svg/drawable.js';\nexport { morphTo } from './svg/morphto.js';\nexport { TextSplitter, split, splitText } from './text/split.js';\n","/**\n * Anime.js - scope - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { doc, win } from '../core/consts.js';\nimport { globals, scope } from '../core/globals.js';\nimport { mergeObjects, isFnc } from '../core/helpers.js';\nimport { parseTargets } from '../core/targets.js';\nimport { keepTime } from '../utils/time.js';\n\n/**\n * @import {\n *   Tickable,\n *   ScopeParams,\n *   DOMTarget,\n *   ReactRef,\n *   AngularRef,\n *   DOMTargetSelector,\n *   DefaultsParams,\n *   ScopeConstructorCallback,\n *   ScopeCleanupCallback,\n *   Revertible,\n *   ScopeMethod,\n *   ScopedCallback,\n * } from '../types/index.js'\n*/\n\nclass Scope {\n  /** @param {ScopeParams} [parameters] */\n  constructor(parameters = {}) {\n    if (scope.current) scope.current.register(this);\n    const rootParam = parameters.root;\n    /** @type {Document|DOMTarget} */\n    let root = doc;\n    if (rootParam) {\n      root = /** @type {ReactRef} */(rootParam).current ||\n             /** @type {AngularRef} */(rootParam).nativeElement ||\n             parseTargets(/** @type {DOMTargetSelector} */(rootParam))[0] ||\n             doc;\n    }\n    const scopeDefaults = parameters.defaults;\n    const globalDefault = globals.defaults;\n    const mediaQueries = parameters.mediaQueries;\n    /** @type {DefaultsParams} */\n    this.defaults = scopeDefaults ? mergeObjects(scopeDefaults, globalDefault) : globalDefault;\n    /** @type {Document|DOMTarget} */\n    this.root = root;\n    /** @type {Array<ScopeConstructorCallback>} */\n    this.constructors = [];\n    /** @type {Array<ScopeCleanupCallback>} */\n    this.revertConstructors = [];\n    /** @type {Array<Revertible>} */\n    this.revertibles = [];\n    /** @type {Array<ScopeConstructorCallback | ((scope: this) => Tickable)>} */\n    this.constructorsOnce = [];\n    /** @type {Array<ScopeCleanupCallback>} */\n    this.revertConstructorsOnce = [];\n    /** @type {Array<Revertible>} */\n    this.revertiblesOnce = [];\n    /** @type {Boolean} */\n    this.once = false;\n    /** @type {Number} */\n    this.onceIndex = 0;\n    /** @type {Record<String, ScopeMethod>} */\n    this.methods = {};\n    /** @type {Record<String, Boolean>} */\n    this.matches = {};\n    /** @type {Record<String, MediaQueryList>} */\n    this.mediaQueryLists = {};\n    /** @type {Record<String, any>} */\n    this.data = {};\n    if (mediaQueries) {\n      for (let mq in mediaQueries) {\n        const _mq = win.matchMedia(mediaQueries[mq]);\n        this.mediaQueryLists[mq] = _mq;\n        _mq.addEventListener('change', this);\n      }\n    }\n  }\n\n  /**\n   * @param {Revertible} revertible\n   */\n  register(revertible) {\n    const store = this.once ? this.revertiblesOnce : this.revertibles;\n    store.push(revertible);\n  }\n\n  /**\n   * @template T\n   * @param {ScopedCallback<T>} cb\n   * @return {T}\n   */\n  execute(cb) {\n    let activeScope = scope.current;\n    let activeRoot = scope.root;\n    let activeDefaults = globals.defaults;\n    scope.current = this;\n    scope.root = this.root;\n    globals.defaults = this.defaults;\n    const mqs = this.mediaQueryLists;\n    for (let mq in mqs) this.matches[mq] = mqs[mq].matches;\n    const returned = cb(this);\n    scope.current = activeScope;\n    scope.root = activeRoot;\n    globals.defaults = activeDefaults;\n    return returned;\n  }\n\n  /**\n   * @return {this}\n   */\n  refresh() {\n    this.onceIndex = 0;\n    this.execute(() => {\n      let i = this.revertibles.length;\n      let y = this.revertConstructors.length;\n      while (i--) this.revertibles[i].revert();\n      while (y--) this.revertConstructors[y](this);\n      this.revertibles.length = 0;\n      this.revertConstructors.length = 0;\n      this.constructors.forEach((/** @type {ScopeConstructorCallback} */constructor) => {\n        const revertConstructor = constructor(this);\n        if (isFnc(revertConstructor)) {\n          this.revertConstructors.push(revertConstructor);\n        }\n      });\n    });\n    return this;\n  }\n\n  /**\n   * @overload\n   * @param {String} a1\n   * @param {ScopeMethod} a2\n   * @return {this}\n   *\n   * @overload\n   * @param {ScopeConstructorCallback} a1\n   * @return {this}\n   *\n   * @param {String|ScopeConstructorCallback} a1\n   * @param {ScopeMethod} [a2]\n   */\n  add(a1, a2) {\n    this.once = false;\n    if (isFnc(a1)) {\n      const constructor = /** @type {ScopeConstructorCallback} */(a1);\n      this.constructors.push(constructor);\n      this.execute(() => {\n        const revertConstructor = constructor(this);\n        if (isFnc(revertConstructor)) {\n          this.revertConstructors.push(revertConstructor);\n        }\n      });\n    } else {\n      this.methods[/** @type {String} */(a1)] = (/** @type {any} */...args) => this.execute(() => a2(...args));\n    }\n    return this;\n  }\n\n  /**\n   * @param {ScopeConstructorCallback} scopeConstructorCallback\n   * @return {this}\n   */\n  addOnce(scopeConstructorCallback) {\n    this.once = true;\n    if (isFnc(scopeConstructorCallback)) {\n      const currentIndex = this.onceIndex++;\n      const tracked = this.constructorsOnce[currentIndex];\n      if (tracked) return this;\n      const constructor = /** @type {ScopeConstructorCallback} */(scopeConstructorCallback);\n      this.constructorsOnce[currentIndex] = constructor;\n      this.execute(() => {\n        const revertConstructor = constructor(this);\n        if (isFnc(revertConstructor)) {\n          this.revertConstructorsOnce.push(revertConstructor);\n        }\n      });\n    }\n    return this;\n  }\n\n  /**\n   * @param  {(scope: this) => Tickable} cb\n   * @return {Tickable}\n   */\n  keepTime(cb) {\n    this.once = true;\n    const currentIndex = this.onceIndex++;\n    const tracked = /** @type {(scope: this) => Tickable} */(this.constructorsOnce[currentIndex]);\n    if (isFnc(tracked)) return tracked(this);\n    const constructor = /** @type {(scope: this) => Tickable} */(keepTime(cb));\n    this.constructorsOnce[currentIndex] = constructor;\n    let trackedTickable;\n    this.execute(() => {\n      trackedTickable = constructor(this);\n    });\n    return trackedTickable;\n  }\n\n  /**\n   * @param {Event} e\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case 'change':\n        this.refresh();\n        break;\n    }\n  }\n\n  revert() {\n    const revertibles = this.revertibles;\n    const revertConstructors = this.revertConstructors;\n    const revertiblesOnce = this.revertiblesOnce;\n    const revertConstructorsOnce = this.revertConstructorsOnce;\n    const mqs = this.mediaQueryLists;\n    let i = revertibles.length;\n    let j = revertConstructors.length;\n    let k = revertiblesOnce.length;\n    let l = revertConstructorsOnce.length;\n    while (i--) revertibles[i].revert();\n    while (j--) revertConstructors[j](this);\n    while (k--) revertiblesOnce[k].revert();\n    while (l--) revertConstructorsOnce[l](this);\n    for (let mq in mqs) mqs[mq].removeEventListener('change', this);\n    revertibles.length = 0;\n    revertConstructors.length = 0;\n    this.constructors.length = 0;\n    revertiblesOnce.length = 0;\n    revertConstructorsOnce.length = 0;\n    this.constructorsOnce.length = 0;\n    this.onceIndex = 0;\n    this.matches = {};\n    this.methods = {};\n    this.mediaQueryLists = {};\n    this.data = {};\n  }\n}\n\n/**\n * @param {ScopeParams} [params]\n * @return {Scope}\n */\nconst createScope = params => new Scope(params);\n\nexport { Scope, createScope };\n","/**\n * Anime.js - svg - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { proxyTargetSymbol, K } from '../core/consts.js';\nimport { isFnc, sqrt } from '../core/helpers.js';\nimport { parseTargets } from '../core/targets.js';\n\n/**\n * @import {\n *   TargetsParam,\n *   DrawableSVGGeometry,\n * } from '../types/index.js'\n*/\n\n/**\n * @param {SVGGeometryElement} [$el]\n * @return {Number}\n */\nconst getScaleFactor = $el => {\n  let scaleFactor = 1;\n  if ($el && $el.getCTM) {\n    const ctm = $el.getCTM();\n    if (ctm) {\n      const scaleX = sqrt(ctm.a * ctm.a + ctm.b * ctm.b);\n      const scaleY = sqrt(ctm.c * ctm.c + ctm.d * ctm.d);\n      scaleFactor = (scaleX + scaleY) / 2;\n    }\n  }\n  return scaleFactor;\n};\n\n/**\n * Creates a proxy that wraps an SVGGeometryElement and adds drawing functionality.\n * @param {SVGGeometryElement} $el - The SVG element to transform into a drawable\n * @param {number} start - Starting position (0-1)\n * @param {number} end - Ending position (0-1)\n * @return {DrawableSVGGeometry} - Returns a proxy that preserves the original element's type with additional 'draw' attribute functionality\n */\nconst createDrawableProxy = ($el, start, end) => {\n  const pathLength = K;\n  const computedStyles = getComputedStyle($el);\n  const strokeLineCap = computedStyles.strokeLinecap;\n  // @ts-ignore\n  const $scalled = computedStyles.vectorEffect === 'non-scaling-stroke' ? $el : null;\n  let currentCap = strokeLineCap;\n\n  const proxy = new Proxy($el, {\n    get(target, property) {\n      const value = target[property];\n      if (property === proxyTargetSymbol) return target;\n      if (property === 'setAttribute') {\n        return (...args) => {\n          if (args[0] === 'draw') {\n            const value = args[1];\n            const values = value.split(' ');\n            const v1 = +values[0];\n            const v2 = +values[1];\n            // TOTO: Benchmark if performing two slices is more performant than one split\n            // const spaceIndex = value.indexOf(' ');\n            // const v1 = round(+value.slice(0, spaceIndex), precision);\n            // const v2 = round(+value.slice(spaceIndex + 1), precision);\n            const scaleFactor = getScaleFactor($scalled);\n            const os = v1 * -pathLength * scaleFactor;\n            const d1 = (v2 * pathLength * scaleFactor) + os;\n            const d2 = (pathLength * scaleFactor +\n                      ((v1 === 0 && v2 === 1) || (v1 === 1 && v2 === 0) ? 0 : 10 * scaleFactor) - d1);\n            if (strokeLineCap !== 'butt') {\n              const newCap = v1 === v2 ? 'butt' : strokeLineCap;\n              if (currentCap !== newCap) {\n                target.style.strokeLinecap = `${newCap}`;\n                currentCap = newCap;\n              }\n            }\n            target.setAttribute('stroke-dashoffset', `${os}`);\n            target.setAttribute('stroke-dasharray', `${d1} ${d2}`);\n          }\n          return Reflect.apply(value, target, args);\n        };\n      }\n\n      if (isFnc(value)) {\n        return (...args) => Reflect.apply(value, target, args);\n      } else {\n        return value;\n      }\n    }\n  });\n\n  if ($el.getAttribute('pathLength') !== `${pathLength}`) {\n    $el.setAttribute('pathLength', `${pathLength}`);\n    proxy.setAttribute('draw', `${start} ${end}`);\n  }\n\n  return /** @type {DrawableSVGGeometry} */(proxy);\n};\n\n/**\n * Creates drawable proxies for multiple SVG elements.\n * @param {TargetsParam} selector - CSS selector, SVG element, or array of elements and selectors\n * @param {number} [start=0] - Starting position (0-1)\n * @param {number} [end=0] - Ending position (0-1)\n * @return {Array<DrawableSVGGeometry>} - Array of proxied elements with drawing functionality\n */\nconst createDrawable = (selector, start = 0, end = 0) => {\n  const els = parseTargets(selector);\n  return els.map($el => createDrawableProxy(\n    /** @type {SVGGeometryElement} */($el),\n    start,\n    end\n  ));\n};\n\nexport { createDrawable };\n","/**\n * Anime.js - svg - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { isSvg } from '../core/helpers.js';\nimport { parseTargets } from '../core/targets.js';\n\n/**\n * @import {\n *   TargetsParam,\n * } from '../types/index.js'\n*/\n\n/**\n * @param  {TargetsParam} path\n * @return {SVGGeometryElement|void}\n */\nconst getPath = path => {\n  const parsedTargets = parseTargets(path);\n  const $parsedSvg = /** @type {SVGGeometryElement} */(parsedTargets[0]);\n  if (!$parsedSvg || !isSvg($parsedSvg)) return console.warn(`${path} is not a valid SVGGeometryElement`);\n  return $parsedSvg;\n};\n\nexport { getPath };\n","/**\n * Anime.js - svg - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nexport { createMotionPath } from './motionpath.js';\nexport { createDrawable } from './drawable.js';\nexport { morphTo } from './morphto.js';\n","/**\n * Anime.js - svg - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { morphPointsSymbol } from '../core/consts.js';\nimport { round } from '../core/helpers.js';\nimport { getPath } from './helpers.js';\n\n/**\n * @import {\n *   TargetsParam,\n *   FunctionValue\n * } from '../types/index.js'\n*/\n\n/**\n * @param  {TargetsParam} path2\n * @param  {Number} [precision]\n * @return {FunctionValue}\n */\nconst morphTo = (path2, precision = .33) => ($path1) => {\n  const tagName1 = ($path1.tagName || '').toLowerCase();\n  if (!tagName1.match(/^(path|polygon|polyline)$/)) {\n    throw new Error(`Can't morph a <${$path1.tagName}> SVG element. Use <path>, <polygon> or <polyline>.`);\n  }\n  const $path2 = /** @type {SVGGeometryElement} */(getPath(path2));\n  if (!$path2) {\n    throw new Error(\"Can't morph to an invalid target. 'path2' must resolve to an existing <path>, <polygon> or <polyline> SVG element.\");\n  }\n  const tagName2 = ($path2.tagName || '').toLowerCase();\n  if (!tagName2.match(/^(path|polygon|polyline)$/)) {\n    throw new Error(`Can't morph a <${$path2.tagName}> SVG element. Use <path>, <polygon> or <polyline>.`);\n  }\n  const isPath = $path1.tagName === 'path';\n  const separator = isPath ? ' ' : ',';\n  const previousPoints = $path1[morphPointsSymbol];\n  if (previousPoints) $path1.setAttribute(isPath ? 'd' : 'points', previousPoints);\n\n  let v1 = '', v2 = '';\n\n  if (!precision) {\n    v1 = $path1.getAttribute(isPath ? 'd' : 'points');\n    v2 = $path2.getAttribute(isPath ? 'd' : 'points');\n  } else {\n    const length1 = /** @type {SVGGeometryElement} */($path1).getTotalLength();\n    const length2 = $path2.getTotalLength();\n    const maxPoints = Math.max(Math.ceil(length1 * precision), Math.ceil(length2 * precision));\n    for (let i = 0; i < maxPoints; i++) {\n      const t = i / (maxPoints - 1);\n      const pointOnPath1 = /** @type {SVGGeometryElement} */($path1).getPointAtLength(length1 * t);\n      const pointOnPath2 = $path2.getPointAtLength(length2 * t);\n      const prefix = isPath ? (i === 0 ? 'M' : 'L') : '';\n      v1 += prefix + round(pointOnPath1.x, 3) + separator + pointOnPath1.y + ' ';\n      v2 += prefix + round(pointOnPath2.x, 3) + separator + pointOnPath2.y + ' ';\n    }\n  }\n\n  $path1[morphPointsSymbol] = v2;\n\n  return [v1, v2];\n};\n\nexport { morphTo };\n","/**\n * Anime.js - svg - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { isSvgSymbol } from '../core/consts.js';\nimport { atan2, PI } from '../core/helpers.js';\nimport { getPath } from './helpers.js';\n\n/**\n * @import {\n *   TargetsParam,\n *   FunctionValue,\n *   TweenObjectValue,\n *   TweenModifier,\n * } from '../types/index.js'\n*/\n\n// Motion path animation\n\n/**\n * @param {SVGGeometryElement} $path\n * @param {Number} totalLength\n * @param {Number} progress\n * @param {Number} lookup\n * @param {Boolean} shouldClamp\n * @return {DOMPoint}\n */\nconst getPathPoint = ($path, totalLength, progress, lookup, shouldClamp) => {\n  const point = progress + lookup;\n  const pointOnPath = shouldClamp\n    ? Math.max(0, Math.min(point, totalLength)) // Clamp between 0 and totalLength\n    : (point % totalLength + totalLength) % totalLength; // Wrap around\n  return $path.getPointAtLength(pointOnPath);\n};\n\n/**\n * @param {SVGGeometryElement} $path\n * @param {String} pathProperty\n * @param {Number} [offset=0]\n * @return {FunctionValue}\n */\nconst getPathProgess = ($path, pathProperty, offset = 0) => {\n  return $el => {\n    const totalLength = +($path.getTotalLength());\n    const inSvg = $el[isSvgSymbol];\n    const ctm = $path.getCTM();\n    const shouldClamp = offset === 0;\n    /** @type {TweenObjectValue} */\n    return {\n      from: 0,\n      to: totalLength,\n      /** @type {TweenModifier} */\n      modifier: progress => {\n        const offsetLength = offset * totalLength;\n        const newProgress = progress + offsetLength;\n        if (pathProperty === 'a') {\n          const p0 = getPathPoint($path, totalLength, newProgress, -1, shouldClamp);\n          const p1 = getPathPoint($path, totalLength, newProgress, 1, shouldClamp);\n          return atan2(p1.y - p0.y, p1.x - p0.x) * 180 / PI;\n        } else {\n          const p = getPathPoint($path, totalLength, newProgress, 0, shouldClamp);\n          return pathProperty === 'x' ?\n            inSvg || !ctm ? p.x : p.x * ctm.a + p.y * ctm.c + ctm.e :\n            inSvg || !ctm ? p.y : p.x * ctm.b + p.y * ctm.d + ctm.f\n        }\n      }\n    }\n  }\n};\n\n/**\n * @param {TargetsParam} path\n * @param {Number} [offset=0]\n */\nconst createMotionPath = (path, offset = 0) => {\n  const $path = getPath(path);\n  if (!$path) return;\n  return {\n    translateX: getPathProgess($path, 'x', offset),\n    translateY: getPathProgess($path, 'y', offset),\n    rotate: getPathProgess($path, 'a', offset),\n  }\n};\n\nexport { createMotionPath };\n","/**\n * Anime.js - text - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nexport { TextSplitter, split, splitText } from './split.js';\n","/**\n * Anime.js - text - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { isBrowser, doc } from '../core/consts.js';\nimport { scope } from '../core/globals.js';\nimport { isArr, isObj, isFnc, isUnd, isStr, isNum } from '../core/helpers.js';\nimport { getNodeList } from '../core/targets.js';\nimport { setValue } from '../core/values.js';\nimport { keepTime } from '../utils/time.js';\n\n/**\n * @import {\n *   Tickable,\n *   DOMTarget,\n *   SplitTemplateParams,\n *   SplitFunctionValue,\n *   TextSplitterParams,\n * } from '../types/index.js'\n*/\n\nconst segmenter = (typeof Intl !== 'undefined') && Intl.Segmenter;\nconst valueRgx = /\\{value\\}/g;\nconst indexRgx = /\\{i\\}/g;\nconst whiteSpaceGroupRgx = /(\\s+)/;\nconst whiteSpaceRgx = /^\\s+$/;\nconst lineType = 'line';\nconst wordType = 'word';\nconst charType = 'char';\nconst dataLine = `data-line`;\n\n/**\n * @typedef {Object} Segment\n * @property {String} segment\n * @property {Boolean} [isWordLike]\n */\n\n/**\n * @typedef {Object} Segmenter\n * @property {function(String): Iterable<Segment>} segment\n */\n\n/** @type {Segmenter} */\nlet wordSegmenter = null;\n/** @type {Segmenter} */\nlet graphemeSegmenter = null;\nlet $splitTemplate = null;\n\n/**\n * @param  {Segment} seg\n * @return {Boolean}\n */\nconst isSegmentWordLike = seg => {\n  return seg.isWordLike ||\n         seg.segment === ' ' || // Consider spaces as words first, then handle them diffrently later\n         isNum(+seg.segment);   // Safari doesn't considers numbers as words\n};\n\n/**\n * @param {HTMLElement} $el\n */\nconst setAriaHidden = $el => $el.setAttribute('aria-hidden', 'true');\n\n/**\n * @param {DOMTarget} $el\n * @param {String} type\n * @return {Array<HTMLElement>}\n */\nconst getAllTopLevelElements = ($el, type) => [.../** @type {*} */($el.querySelectorAll(`[data-${type}]:not([data-${type}] [data-${type}])`))];\n\nconst debugColors = { line: '#00D672', word: '#FF4B4B', char: '#5A87FF' };\n\n/**\n * @param {HTMLElement} $el\n */\nconst filterEmptyElements = $el => {\n  if (!$el.childElementCount && !$el.textContent.trim()) {\n    const $parent = $el.parentElement;\n    $el.remove();\n    if ($parent) filterEmptyElements($parent);\n  }\n};\n\n/**\n * @param {HTMLElement} $el\n * @param {Number} lineIndex\n * @param {Set<HTMLElement>} bin\n * @returns {Set<HTMLElement>}\n */\nconst filterLineElements = ($el, lineIndex, bin) => {\n  const dataLineAttr = $el.getAttribute(dataLine);\n  if (dataLineAttr !== null && +dataLineAttr !== lineIndex || $el.tagName === 'BR') bin.add($el);\n  let i = $el.childElementCount;\n  while (i--) filterLineElements(/** @type {HTMLElement} */($el.children[i]), lineIndex, bin);\n  return bin;\n};\n\n/**\n * @param  {'line'|'word'|'char'} type\n * @param  {SplitTemplateParams} params\n * @return {String}\n */\nconst generateTemplate = (type, params = {}) => {\n  let template = ``;\n  const classString = isStr(params.class) ? ` class=\"${params.class}\"` : '';\n  const cloneType = setValue(params.clone, false);\n  const wrapType = setValue(params.wrap, false);\n  const overflow = wrapType ? wrapType === true ? 'clip' : wrapType : cloneType ? 'clip' : false;\n  if (wrapType) template += `<span${overflow ? ` style=\"overflow:${overflow};\"` : ''}>`;\n  template += `<span${classString}${cloneType ? ` style=\"position:relative;\"` : ''} data-${type}=\"{i}\">`;\n  if (cloneType) {\n    const left = cloneType === 'left' ? '-100%' : cloneType === 'right' ? '100%' : '0';\n    const top = cloneType === 'top' ? '-100%' : cloneType === 'bottom' ? '100%' : '0';\n    template += `<span>{value}</span>`;\n    template += `<span inert style=\"position:absolute;top:${top};left:${left};white-space:nowrap;\">{value}</span>`;\n  } else {\n    template += `{value}`;\n  }\n  template += `</span>`;\n  if (wrapType) template += `</span>`;\n  return template;\n};\n\n/**\n * @param  {String|SplitFunctionValue} htmlTemplate\n * @param  {Array<HTMLElement>} store\n * @param  {Node|HTMLElement} node\n * @param  {DocumentFragment} $parentFragment\n * @param  {'line'|'word'|'char'} type\n * @param  {Boolean} debug\n * @param  {Number} lineIndex\n * @param  {Number} [wordIndex]\n * @param  {Number} [charIndex]\n * @return {HTMLElement}\n */\nconst processHTMLTemplate = (htmlTemplate, store, node, $parentFragment, type, debug, lineIndex, wordIndex, charIndex) => {\n  const isLine = type === lineType;\n  const isChar = type === charType;\n  const className = `_${type}_`;\n  const template = isFnc(htmlTemplate) ? htmlTemplate(node) : htmlTemplate;\n  const displayStyle = isLine ? 'block' : 'inline-block';\n  $splitTemplate.innerHTML = template\n    .replace(valueRgx, `<i class=\"${className}\"></i>`)\n    .replace(indexRgx, `${isChar ? charIndex : isLine ? lineIndex : wordIndex}`);\n  const $content = $splitTemplate.content;\n  const $highestParent = /** @type {HTMLElement} */($content.firstElementChild);\n  const $split = /** @type {HTMLElement} */($content.querySelector(`[data-${type}]`)) || $highestParent;\n  const $replacables = /** @type {NodeListOf<HTMLElement>} */($content.querySelectorAll(`i.${className}`));\n  const replacablesLength = $replacables.length;\n  if (replacablesLength) {\n    $highestParent.style.display = displayStyle;\n    $split.style.display = displayStyle;\n    $split.setAttribute(dataLine, `${lineIndex}`);\n    if (!isLine) {\n      $split.setAttribute('data-word', `${wordIndex}`);\n      if (isChar) $split.setAttribute('data-char', `${charIndex}`);\n    }\n    let i = replacablesLength;\n    while (i--) {\n      const $replace = $replacables[i];\n      const $closestParent = $replace.parentElement;\n      $closestParent.style.display = displayStyle;\n      if (isLine) {\n        $closestParent.innerHTML = /** @type {HTMLElement} */(node).innerHTML;\n      } else {\n        $closestParent.replaceChild(node.cloneNode(true), $replace);\n      }\n    }\n    store.push($split);\n    $parentFragment.appendChild($content);\n  } else {\n    console.warn(`The expression \"{value}\" is missing from the provided template.`);\n  }\n  if (debug) $highestParent.style.outline = `1px dotted ${debugColors[type]}`;\n  return $highestParent;\n};\n\n/**\n * A class that splits text into words and wraps them in span elements while preserving the original HTML structure.\n * @class\n */\nclass TextSplitter {\n  /**\n   * @param  {HTMLElement|NodeList|String|Array<HTMLElement>} target\n   * @param  {TextSplitterParams} [parameters]\n   */\n  constructor(target, parameters = {}) {\n    // Only init segmenters when needed\n    if (!wordSegmenter) wordSegmenter = segmenter ? new segmenter([], { granularity: wordType }) : {\n      segment: (text) => {\n        const segments = [];\n        const words = text.split(whiteSpaceGroupRgx);\n        for (let i = 0, l = words.length; i < l; i++) {\n          const segment = words[i];\n          segments.push({\n            segment,\n            isWordLike: !whiteSpaceRgx.test(segment), // Consider non-whitespace as word-like\n          });\n        }\n        return segments;\n      }\n    };\n    if (!graphemeSegmenter) graphemeSegmenter = segmenter ? new segmenter([], { granularity: 'grapheme' }) : {\n      segment: text => [...text].map(char => ({ segment: char }))\n    };\n    if (!$splitTemplate && isBrowser) $splitTemplate = doc.createElement('template');\n    if (scope.current) scope.current.register(this);\n    const { words, chars, lines, accessible, includeSpaces, debug } = parameters;\n    const $target = /** @type {HTMLElement} */((target = isArr(target) ? target[0] : target) && /** @type {Node} */(target).nodeType ? target : (getNodeList(target) || [])[0]);\n    const lineParams = lines === true ? {} : lines;\n    const wordParams = words === true || isUnd(words) ? {} : words;\n    const charParams = chars === true ? {} : chars;\n    this.debug = setValue(debug, false);\n    this.includeSpaces = setValue(includeSpaces, false);\n    this.accessible = setValue(accessible, true);\n    this.linesOnly = lineParams && (!wordParams && !charParams);\n    /** @type {String|false|SplitFunctionValue} */\n    this.lineTemplate = isObj(lineParams) ? generateTemplate(lineType, /** @type {SplitTemplateParams} */(lineParams)) : lineParams;\n    /** @type {String|false|SplitFunctionValue} */\n    this.wordTemplate = isObj(wordParams) || this.linesOnly ? generateTemplate(wordType, /** @type {SplitTemplateParams} */(wordParams)) : wordParams;\n    /** @type {String|false|SplitFunctionValue} */\n    this.charTemplate = isObj(charParams) ? generateTemplate(charType, /** @type {SplitTemplateParams} */(charParams)) : charParams;\n    this.$target = $target;\n    this.html = $target && $target.innerHTML;\n    this.lines = [];\n    this.words = [];\n    this.chars = [];\n    this.effects = [];\n    this.effectsCleanups = [];\n    this.cache = null;\n    this.ready = false;\n    this.width = 0;\n    this.resizeTimeout = null;\n    const handleSplit = () => this.html && (lineParams || wordParams || charParams) && this.split();\n    // Make sure this is declared before calling handleSplit() in case revert() is called inside an effect callback\n    this.resizeObserver = new ResizeObserver(() => {\n      // Use a setTimeout instead of a Timer for better tree shaking\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = setTimeout(() => {\n        const currentWidth = /** @type {HTMLElement} */($target).offsetWidth;\n        if (currentWidth === this.width) return;\n        this.width = currentWidth;\n        handleSplit();\n      }, 150);\n    });\n    // Only declare the font ready promise when splitting by lines and not alreay split\n    if (this.lineTemplate && !this.ready) {\n      doc.fonts.ready.then(handleSplit);\n    } else {\n      handleSplit();\n    }\n    $target ? this.resizeObserver.observe($target) : console.warn('No Text Splitter target found.');\n  }\n\n  /**\n   * @param  {(...args: any[]) => Tickable | (() => void)} effect\n   * @return this\n   */\n  addEffect(effect) {\n    if (!isFnc(effect)) return console.warn('Effect must return a function.');\n    const refreshableEffect = keepTime(effect);\n    this.effects.push(refreshableEffect);\n    if (this.ready) this.effectsCleanups[this.effects.length - 1] = refreshableEffect(this);\n    return this;\n  }\n\n  revert() {\n    clearTimeout(this.resizeTimeout);\n    this.lines.length = this.words.length = this.chars.length = 0;\n    this.resizeObserver.disconnect();\n    // Make sure to revert the effects after disconnecting the resizeObserver to avoid triggering it in the process\n    this.effectsCleanups.forEach(cleanup => isFnc(cleanup) ? cleanup(this) : cleanup.revert && cleanup.revert());\n    this.$target.innerHTML = this.html;\n    return this;\n  }\n\n  /**\n   * Recursively processes a node and its children\n   * @param {Node} node\n   */\n  splitNode(node) {\n    const wordTemplate = this.wordTemplate;\n    const charTemplate = this.charTemplate;\n    const includeSpaces = this.includeSpaces;\n    const debug = this.debug;\n    const nodeType = node.nodeType;\n    if (nodeType === 3) {\n      const nodeText = node.nodeValue;\n      // If the nodeText is only whitespace, leave it as is\n      if (nodeText.trim()) {\n        const tempWords = [];\n        const words = this.words;\n        const chars = this.chars;\n        const wordSegments = wordSegmenter.segment(nodeText);\n        const $wordsFragment = doc.createDocumentFragment();\n        let prevSeg = null;\n        for (const wordSegment of wordSegments) {\n          const segment = wordSegment.segment;\n          const isWordLike = isSegmentWordLike(wordSegment);\n          // Determine if this segment should be a new word, first segment always becomes a new word\n          if (!prevSeg || (isWordLike && (prevSeg && (isSegmentWordLike(prevSeg))))) {\n            tempWords.push(segment);\n          } else {\n            // Only concatenate if both current and previous are non-word-like and don't contain spaces\n            const lastWordIndex = tempWords.length - 1;\n            const lastWord = tempWords[lastWordIndex];\n            if (!lastWord.includes(' ') && !segment.includes(' ')) {\n              tempWords[lastWordIndex] += segment;\n            } else {\n              tempWords.push(segment);\n            }\n          }\n          prevSeg = wordSegment;\n        }\n\n        for (let i = 0, l = tempWords.length; i < l; i++) {\n          const word = tempWords[i];\n          if (!word.trim()) {\n            // Preserve whitespace only if includeSpaces is false and if the current space is not the first node\n            if (i && includeSpaces) continue;\n            $wordsFragment.appendChild(doc.createTextNode(word));\n          } else {\n            const nextWord = tempWords[i + 1];\n            const hasWordFollowingSpace = includeSpaces && nextWord && !nextWord.trim();\n            const wordToProcess = word;\n            const charSegments = charTemplate ? graphemeSegmenter.segment(wordToProcess) : null;\n            const $charsFragment = charTemplate ? doc.createDocumentFragment() : doc.createTextNode(hasWordFollowingSpace ? word + '\\xa0' : word);\n            if (charTemplate) {\n              const charSegmentsArray = [...charSegments];\n              for (let j = 0, jl = charSegmentsArray.length; j < jl; j++) {\n                const charSegment = charSegmentsArray[j];\n                const isLastChar = j === jl - 1;\n                // If this is the last character and includeSpaces is true with a following space, append the space\n                const charText = isLastChar && hasWordFollowingSpace ? charSegment.segment + '\\xa0' : charSegment.segment;\n                const $charNode = doc.createTextNode(charText);\n                processHTMLTemplate(charTemplate, chars, $charNode, /** @type {DocumentFragment} */($charsFragment), charType, debug, -1, words.length, chars.length);\n              }\n            }\n            if (wordTemplate) {\n              processHTMLTemplate(wordTemplate, words, $charsFragment, $wordsFragment, wordType, debug, -1, words.length, chars.length);\n              // Chars elements must be re-parsed in the split() method if both words and chars are parsed\n            } else if (charTemplate) {\n              $wordsFragment.appendChild($charsFragment);\n            } else {\n              $wordsFragment.appendChild(doc.createTextNode(word));\n            }\n            // Skip the next iteration if we included a space\n            if (hasWordFollowingSpace) i++;\n          }\n        }\n        node.parentNode.replaceChild($wordsFragment, node);\n      }\n    } else if (nodeType === 1) {\n      // Converting to an array is necessary to work around childNodes pottential mutation\n      const childNodes = /** @type {Array<Node>} */([.../** @type {*} */(node.childNodes)]);\n      for (let i = 0, l = childNodes.length; i < l; i++) this.splitNode(childNodes[i]);\n    }\n  }\n\n  /**\n   * @param {Boolean} clearCache\n   * @return {this}\n   */\n  split(clearCache = false) {\n    const $el = this.$target;\n    const isCached = !!this.cache && !clearCache;\n    const lineTemplate = this.lineTemplate;\n    const wordTemplate = this.wordTemplate;\n    const charTemplate = this.charTemplate;\n    const fontsReady = doc.fonts.status !== 'loading';\n    const canSplitLines = lineTemplate && fontsReady;\n    this.ready = !lineTemplate || fontsReady;\n    if (canSplitLines || clearCache) {\n      // No need to revert effects animations here since it's already taken care by the refreshable\n      this.effectsCleanups.forEach(cleanup => isFnc(cleanup) && cleanup(this));\n    }\n    if (!isCached) {\n      if (clearCache) {\n        $el.innerHTML = this.html;\n        this.words.length = this.chars.length = 0;\n      }\n      this.splitNode($el);\n      this.cache = $el.innerHTML;\n    }\n    if (canSplitLines) {\n      if (isCached) $el.innerHTML = this.cache;\n      this.lines.length = 0;\n      if (wordTemplate) this.words = getAllTopLevelElements($el, wordType);\n    }\n    // Always reparse characters after a line reset or if both words and chars are activated\n    if (charTemplate && (canSplitLines || wordTemplate)) {\n      this.chars = getAllTopLevelElements($el, charType);\n    }\n    // Words are used when lines only and prioritized over chars\n    const elementsArray = this.words.length ? this.words : this.chars;\n    let y, linesCount = 0;\n    for (let i = 0, l = elementsArray.length; i < l; i++) {\n      const $el = elementsArray[i];\n      const { top, height } = $el.getBoundingClientRect();\n      if (y && top - y > height * .5) linesCount++;\n      $el.setAttribute(dataLine, `${linesCount}`);\n      const nested = $el.querySelectorAll(`[${dataLine}]`);\n      let c = nested.length;\n      while (c--) nested[c].setAttribute(dataLine, `${linesCount}`);\n      y = top;\n    }\n    if (canSplitLines) {\n      const linesFragment = doc.createDocumentFragment();\n      const parents = new Set();\n      const clones = [];\n      for (let lineIndex = 0; lineIndex < linesCount + 1; lineIndex++) {\n        const $clone = /** @type {HTMLElement} */($el.cloneNode(true));\n        filterLineElements($clone, lineIndex, new Set()).forEach($el => {\n          const $parent = $el.parentElement;\n          if ($parent) parents.add($parent);\n          $el.remove();\n        });\n        clones.push($clone);\n      }\n      parents.forEach(filterEmptyElements);\n      for (let cloneIndex = 0, clonesLength = clones.length; cloneIndex < clonesLength; cloneIndex++) {\n        processHTMLTemplate(lineTemplate, this.lines, clones[cloneIndex], linesFragment, lineType, this.debug, cloneIndex);\n      }\n      $el.innerHTML = '';\n      $el.appendChild(linesFragment);\n      if (wordTemplate) this.words = getAllTopLevelElements($el, wordType);\n      if (charTemplate) this.chars = getAllTopLevelElements($el, charType);\n    }\n    // Remove the word wrappers and clear the words array if lines split only\n    if (this.linesOnly) {\n      const words = this.words;\n      let w = words.length;\n      while (w--) {\n        const $word = words[w];\n        $word.replaceWith($word.textContent);\n      }\n      words.length = 0;\n    }\n    if (this.accessible && (canSplitLines || !isCached)) {\n      const $accessible = doc.createElement('span');\n      // Make the accessible element visually-hidden (https://www.scottohara.me/blog/2017/04/14/inclusively-hidden.html)\n      $accessible.style.cssText = `position:absolute;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%);width:1px;height:1px;white-space:nowrap;`;\n      // $accessible.setAttribute('tabindex', '-1');\n      $accessible.innerHTML = this.html;\n      $el.insertBefore($accessible, $el.firstChild);\n      this.lines.forEach(setAriaHidden);\n      this.words.forEach(setAriaHidden);\n      this.chars.forEach(setAriaHidden);\n    }\n    this.width = /** @type {HTMLElement} */($el).offsetWidth;\n    if (canSplitLines || clearCache) {\n      this.effects.forEach((effect, i) => this.effectsCleanups[i] = effect(this));\n    }\n    return this;\n  }\n\n  refresh() {\n    this.split(true);\n  }\n}\n\n/**\n * @param  {HTMLElement|NodeList|String|Array<HTMLElement>} target\n * @param  {TextSplitterParams} [parameters]\n * @return {TextSplitter}\n */\nconst splitText = (target, parameters) => new TextSplitter(target, parameters);\n\n/**\n * @deprecated text.split() is deprecated, import splitText() directly, or text.splitText()\n *\n * @param  {HTMLElement|NodeList|String|Array<HTMLElement>} target\n * @param  {TextSplitterParams} [parameters]\n * @return {TextSplitter}\n */\nconst split = (target, parameters) => {\n  console.warn('text.split() is deprecated, import splitText() directly, or text.splitText()');\n  return new TextSplitter(target, parameters);\n};\n\nexport { TextSplitter, split, splitText };\n","/**\n * Anime.js - timeline - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { relativeValuesExecRgx, minValue } from '../core/consts.js';\nimport { isUnd, isNum, stringStartsWith, isNil } from '../core/helpers.js';\nimport { getRelativeValue } from '../core/values.js';\n\n/**\n * @import {\n *   Tickable,\n *   TimelinePosition,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   Timeline,\n * } from './timeline.js'\n*/\n\n/**\n * Timeline's children offsets positions parser\n * @param  {Timeline} timeline\n * @param  {String} timePosition\n * @return {Number}\n */\nconst getPrevChildOffset = (timeline, timePosition) => {\n  if (stringStartsWith(timePosition, '<')) {\n    const goToPrevAnimationOffset = timePosition[1] === '<';\n    const prevAnimation = /** @type {Tickable} */(timeline._tail);\n    const prevOffset = prevAnimation ? prevAnimation._offset + prevAnimation._delay : 0;\n    return goToPrevAnimationOffset ? prevOffset : prevOffset + prevAnimation.duration;\n  }\n};\n\n/**\n * @param  {Timeline} timeline\n * @param  {TimelinePosition} [timePosition]\n * @return {Number}\n */\nconst parseTimelinePosition = (timeline, timePosition) => {\n  let tlDuration = timeline.iterationDuration;\n  if (tlDuration === minValue) tlDuration = 0;\n  if (isUnd(timePosition)) return tlDuration;\n  if (isNum(+timePosition)) return +timePosition;\n  const timePosStr = /** @type {String} */(timePosition);\n  const tlLabels = timeline ? timeline.labels : null;\n  const hasLabels = !isNil(tlLabels);\n  const prevOffset = getPrevChildOffset(timeline, timePosStr);\n  const hasSibling = !isUnd(prevOffset);\n  const matchedRelativeOperator = relativeValuesExecRgx.exec(timePosStr);\n  if (matchedRelativeOperator) {\n    const fullOperator = matchedRelativeOperator[0];\n    const split = timePosStr.split(fullOperator);\n    const labelOffset = hasLabels && split[0] ? tlLabels[split[0]] : tlDuration;\n    const parsedOffset = hasSibling ? prevOffset : hasLabels ? labelOffset : tlDuration;\n    const parsedNumericalOffset = +split[1];\n    return getRelativeValue(parsedOffset, parsedNumericalOffset, fullOperator[0]);\n  } else {\n    return hasSibling ? prevOffset :\n           hasLabels ? !isUnd(tlLabels[timePosStr]) ? tlLabels[timePosStr] :\n           tlDuration : tlDuration;\n  }\n};\n\nexport { parseTimelinePosition };\n","/**\n * Anime.js - timeline - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { globals } from '../core/globals.js';\nimport { minValue, compositionTypes, tickModes } from '../core/consts.js';\nimport { mergeObjects, isObj, isFnc, isUnd, isStr, normalizeTime, forEachChildren, isNum, addChild, clampInfinity } from '../core/helpers.js';\nimport { setValue } from '../core/values.js';\nimport { parseTargets } from '../core/targets.js';\nimport { tick } from '../core/render.js';\nimport { cleanInlineStyles } from '../core/styles.js';\nimport { removeTargetsFromRenderable } from '../animation/composition.js';\nimport { JSAnimation } from '../animation/animation.js';\nimport { Timer } from '../timer/timer.js';\nimport { parseEase } from '../easings/eases/parser.js';\nimport { parseTimelinePosition } from './position.js';\n\n/**\n * @import {\n *   TargetsParam,\n *   Callback,\n *   Tickable,\n *   TimerParams,\n *   AnimationParams,\n *   Target,\n *   Renderable,\n *   TimelineParams,\n *   DefaultsParams,\n *   TimelinePosition,\n *   StaggerFunction,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   WAAPIAnimation,\n * } from '../waapi/waapi.js'\n*/\n\n/**\n * @param {Timeline} tl\n * @return {Number}\n */\nfunction getTimelineTotalDuration(tl) {\n  return clampInfinity(((tl.iterationDuration + tl._loopDelay) * tl.iterationCount) - tl._loopDelay) || minValue;\n}\n\n/**\n * @overload\n * @param  {TimerParams} childParams\n * @param  {Timeline} tl\n * @param  {Number} timePosition\n * @return {Timeline}\n *\n * @overload\n * @param  {AnimationParams} childParams\n * @param  {Timeline} tl\n * @param  {Number} timePosition\n * @param  {TargetsParam} targets\n * @param  {Number} [index]\n * @param  {Number} [length]\n * @return {Timeline}\n *\n * @param  {TimerParams|AnimationParams} childParams\n * @param  {Timeline} tl\n * @param  {Number} timePosition\n * @param  {TargetsParam} [targets]\n * @param  {Number} [index]\n * @param  {Number} [length]\n */\nfunction addTlChild(childParams, tl, timePosition, targets, index, length) {\n  const isSetter = isNum(childParams.duration) && /** @type {Number} */(childParams.duration) <= minValue;\n  // Offset the tl position with -minValue for 0 duration animations or .set() calls in order to align their end value with the defined position\n  const adjustedPosition = isSetter ? timePosition - minValue : timePosition;\n  tick(tl, adjustedPosition, 1, 1, tickModes.AUTO);\n  const tlChild = targets ?\n    new JSAnimation(targets,/** @type {AnimationParams} */(childParams), tl, adjustedPosition, false, index, length) :\n    new Timer(/** @type {TimerParams} */(childParams), tl, adjustedPosition);\n  tlChild.init(true);\n  // TODO: Might be better to insert at a position relative to startTime?\n  addChild(tl, tlChild);\n  forEachChildren(tl, (/** @type {Renderable} */child) => {\n    const childTLOffset = child._offset + child._delay;\n    const childDur = childTLOffset + child.duration;\n    if (childDur > tl.iterationDuration) tl.iterationDuration = childDur;\n  });\n  tl.duration = getTimelineTotalDuration(tl);\n  return tl;\n}\n\nclass Timeline extends Timer {\n\n  /**\n   * @param {TimelineParams} [parameters]\n   */\n  constructor(parameters = {}) {\n    super(/** @type {TimerParams&TimelineParams} */(parameters), null, 0);\n    /** @type {Number} */\n    this.duration = 0; // TL duration starts at 0 and grows when adding children\n    /** @type {Record<String, Number>} */\n    this.labels = {};\n    const defaultsParams = parameters.defaults;\n    const globalDefaults = globals.defaults;\n    /** @type {DefaultsParams} */\n    this.defaults = defaultsParams ? mergeObjects(defaultsParams, globalDefaults) : globalDefaults;\n    /** @type {Callback<this>} */\n    this.onRender = parameters.onRender || globalDefaults.onRender;\n    const tlPlaybackEase = setValue(parameters.playbackEase, globalDefaults.playbackEase);\n    this._ease = tlPlaybackEase ? parseEase(tlPlaybackEase) : null;\n    /** @type {Number} */\n    this.iterationDuration = 0;\n  }\n\n  /**\n   * @overload\n   * @param {TargetsParam} a1\n   * @param {AnimationParams} a2\n   * @param {TimelinePosition|StaggerFunction<Number|String>} [a3]\n   * @return {this}\n   *\n   * @overload\n   * @param {TimerParams} a1\n   * @param {TimelinePosition} [a2]\n   * @return {this}\n   *\n   * @param {TargetsParam|TimerParams} a1\n   * @param {TimelinePosition|AnimationParams} a2\n   * @param {TimelinePosition|StaggerFunction<Number|String>} [a3]\n   */\n  add(a1, a2, a3) {\n    const isAnim = isObj(a2);\n    const isTimer = isObj(a1);\n    if (isAnim || isTimer) {\n      this._hasChildren = true;\n      if (isAnim) {\n        const childParams = /** @type {AnimationParams} */(a2);\n        // Check for function for children stagger positions\n        if (isFnc(a3)) {\n          const staggeredPosition = a3;\n          const parsedTargetsArray = parseTargets(/** @type {TargetsParam} */(a1));\n          // Store initial duration before adding new children that will change the duration\n          const tlDuration = this.duration;\n          // Store initial _iterationDuration before adding new children that will change the duration\n          const tlIterationDuration = this.iterationDuration;\n          // Store the original id in order to add specific indexes to the new animations ids\n          const id = childParams.id;\n          let i = 0;\n          /** @type {Number} */\n          const parsedLength = (parsedTargetsArray.length);\n          parsedTargetsArray.forEach((/** @type {Target} */target) => {\n            // Create a new parameter object for each staggered children\n            const staggeredChildParams = { ...childParams };\n            // Reset the duration of the timeline iteration before each stagger to prevent wrong start value calculation\n            this.duration = tlDuration;\n            this.iterationDuration = tlIterationDuration;\n            if (!isUnd(id)) staggeredChildParams.id = id + '-' + i;\n            addTlChild(\n              staggeredChildParams,\n              this,\n              parseTimelinePosition(this, staggeredPosition(target, i, parsedLength, this)),\n              target,\n              i,\n              parsedLength\n            );\n            i++;\n          });\n        } else {\n          addTlChild(\n            childParams,\n            this,\n            parseTimelinePosition(this, a3),\n            /** @type {TargetsParam} */(a1),\n          );\n        }\n      } else {\n        // It's a Timer\n        addTlChild(\n          /** @type TimerParams */(a1),\n          this,\n          parseTimelinePosition(this,a2),\n        );\n      }\n      return this.init(true);\n    }\n  }\n\n  /**\n   * @overload\n   * @param {Tickable} [synced]\n   * @param {TimelinePosition} [position]\n   * @return {this}\n   *\n   * @overload\n   * @param {globalThis.Animation} [synced]\n   * @param {TimelinePosition} [position]\n   * @return {this}\n   *\n   * @overload\n   * @param {WAAPIAnimation} [synced]\n   * @param {TimelinePosition} [position]\n   * @return {this}\n   *\n   * @param {Tickable|WAAPIAnimation|globalThis.Animation} [synced]\n   * @param {TimelinePosition} [position]\n   */\n  sync(synced, position) {\n    if (isUnd(synced) || synced && isUnd(synced.pause)) return this;\n    synced.pause();\n    const duration = +(/** @type {globalThis.Animation} */(synced).effect ? /** @type {globalThis.Animation} */(synced).effect.getTiming().duration : /** @type {Tickable} */(synced).duration);\n    return this.add(synced, { currentTime: [0, duration], duration, ease: 'linear' }, position);\n  }\n\n  /**\n   * @param  {TargetsParam} targets\n   * @param  {AnimationParams} parameters\n   * @param  {TimelinePosition} [position]\n   * @return {this}\n   */\n  set(targets, parameters, position) {\n    if (isUnd(parameters)) return this;\n    parameters.duration = minValue;\n    parameters.composition = compositionTypes.replace;\n    return this.add(targets, parameters, position);\n  }\n\n  /**\n   * @param {Callback<Timer>} callback\n   * @param {TimelinePosition} [position]\n   * @return {this}\n   */\n  call(callback, position) {\n    if (isUnd(callback) || callback && !isFnc(callback)) return this;\n    return this.add({ duration: 0, onComplete: () => callback(this) }, position);\n  }\n\n  /**\n   * @param {String} labelName\n   * @param {TimelinePosition} [position]\n   * @return {this}\n   *\n   */\n  label(labelName, position) {\n    if (isUnd(labelName) || labelName && !isStr(labelName)) return this;\n    this.labels[labelName] = parseTimelinePosition(this, position);\n    return this;\n  }\n\n  /**\n   * @param  {TargetsParam} targets\n   * @param  {String} [propertyName]\n   * @return {this}\n   */\n  remove(targets, propertyName) {\n    removeTargetsFromRenderable(parseTargets(targets), this, propertyName);\n    return this;\n  }\n\n  /**\n   * @param  {Number} newDuration\n   * @return {this}\n   */\n  stretch(newDuration) {\n    const currentDuration = this.duration;\n    if (currentDuration === normalizeTime(newDuration)) return this;\n    const timeScale = newDuration / currentDuration;\n    const labels = this.labels;\n    forEachChildren(this, (/** @type {JSAnimation} */child) => child.stretch(child.duration * timeScale));\n    for (let labelName in labels) labels[labelName] *= timeScale;\n    return super.stretch(newDuration);\n  }\n\n  /**\n   * @return {this}\n   */\n  refresh() {\n    forEachChildren(this, (/** @type {JSAnimation} */child) => {\n      if (child.refresh) child.refresh();\n    });\n    return this;\n  }\n\n  /**\n   * @return {this}\n   */\n  revert() {\n    super.revert();\n    forEachChildren(this, (/** @type {JSAnimation} */child) => child.revert, true);\n    return cleanInlineStyles(this);\n  }\n\n  /**\n   * @typedef {this & {then: null}} ResolvedTimeline\n   */\n\n  /**\n   * @param  {Callback<ResolvedTimeline>} [callback]\n   * @return Promise<this>\n   */\n  then(callback) {\n    return super.then(callback);\n  }\n}\n\n/**\n * @param {TimelineParams} [parameters]\n * @return {Timeline}\n */\nconst createTimeline = parameters => new Timeline(parameters).init();\n\nexport { Timeline, createTimeline };\n","/**\n * Anime.js - timer - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { minValue, noop, maxValue, compositionTypes, tickModes } from '../core/consts.js';\nimport { isFnc, isUnd, now, clampInfinity, clamp, round, forEachChildren, addChild, normalizeTime, floor } from '../core/helpers.js';\nimport { globals, scope } from '../core/globals.js';\nimport { setValue } from '../core/values.js';\nimport { tick } from '../core/render.js';\nimport { removeTweenSliblings, composeTween, getTweenSiblings } from '../animation/composition.js';\nimport { Clock } from '../core/clock.js';\nimport { engine } from '../engine/engine.js';\n\n/**\n * @import {\n *   Callback,\n *   TimerParams,\n *   Renderable,\n *   Tween,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   ScrollObserver,\n * } from '../events/scroll.js'\n*/\n\n/**\n * @import {\n *   Timeline,\n * } from '../timeline/timeline.js'\n*/\n\n/**\n * @param  {Timer} timer\n * @return {Timer}\n */\nconst resetTimerProperties = timer => {\n  timer.paused = true;\n  timer.began = false;\n  timer.completed = false;\n  return timer;\n};\n\n/**\n * @param  {Timer} timer\n * @return {Timer}\n */\nconst reviveTimer = timer => {\n  if (!timer._cancelled) return timer;\n  if (timer._hasChildren) {\n    forEachChildren(timer, reviveTimer);\n  } else {\n    forEachChildren(timer, (/** @type {Tween} tween */tween) => {\n      if (tween._composition !== compositionTypes.none) {\n        composeTween(tween, getTweenSiblings(tween.target, tween.property));\n      }\n    });\n  }\n  timer._cancelled = 0;\n  return timer;\n};\n\nlet timerId = 0;\n\n/**\n * Base class used to create Timers, Animations and Timelines\n */\nclass Timer extends Clock {\n  /**\n   * @param {TimerParams} [parameters]\n   * @param {Timeline} [parent]\n   * @param {Number} [parentPosition]\n   */\n  constructor(parameters = {}, parent = null, parentPosition = 0) {\n\n    super(0);\n\n    const {\n      id,\n      delay,\n      duration,\n      reversed,\n      alternate,\n      loop,\n      loopDelay,\n      autoplay,\n      frameRate,\n      playbackRate,\n      onComplete,\n      onLoop,\n      onPause,\n      onBegin,\n      onBeforeUpdate,\n      onUpdate,\n    } = parameters;\n\n    if (scope.current) scope.current.register(this);\n\n    const timerInitTime = parent ? 0 : engine._elapsedTime;\n    const timerDefaults = parent ? parent.defaults : globals.defaults;\n    const timerDelay = /** @type {Number} */(isFnc(delay) || isUnd(delay) ? timerDefaults.delay : +delay);\n    const timerDuration = isFnc(duration) || isUnd(duration) ? Infinity : +duration;\n    const timerLoop = setValue(loop, timerDefaults.loop);\n    const timerLoopDelay = setValue(loopDelay, timerDefaults.loopDelay);\n    const timerIterationCount = timerLoop === true ||\n                                timerLoop === Infinity ||\n                                /** @type {Number} */(timerLoop) < 0 ? Infinity :\n                                /** @type {Number} */(timerLoop) + 1;\n\n    let offsetPosition = 0;\n\n    if (parent) {\n      offsetPosition = parentPosition;\n    } else {\n      // Make sure to tick the engine once if not currently running to get up to date engine._elapsedTime\n      // to avoid big gaps with the following offsetPosition calculation\n      if (!engine.reqId) engine.requestTick(now());\n      // Make sure to scale the offset position with globals.timeScale to properly handle seconds unit\n      offsetPosition = (engine._elapsedTime - engine._startTime) * globals.timeScale;\n    }\n\n    // Timer's parameters\n    this.id = !isUnd(id) ? id : ++timerId;\n    /** @type {Timeline} */\n    this.parent = parent;\n    // Total duration of the timer\n    this.duration = clampInfinity(((timerDuration + timerLoopDelay) * timerIterationCount) - timerLoopDelay) || minValue;\n    /** @type {Boolean} */\n    this.backwards = false;\n    /** @type {Boolean} */\n    this.paused = true;\n    /** @type {Boolean} */\n    this.began = false;\n    /** @type {Boolean} */\n    this.completed = false;\n    /** @type {Callback<this>} */\n    this.onBegin = onBegin || timerDefaults.onBegin;\n    /** @type {Callback<this>} */\n    this.onBeforeUpdate = onBeforeUpdate || timerDefaults.onBeforeUpdate;\n    /** @type {Callback<this>} */\n    this.onUpdate = onUpdate || timerDefaults.onUpdate;\n    /** @type {Callback<this>} */\n    this.onLoop = onLoop || timerDefaults.onLoop;\n    /** @type {Callback<this>} */\n    this.onPause = onPause || timerDefaults.onPause;\n    /** @type {Callback<this>} */\n    this.onComplete = onComplete || timerDefaults.onComplete;\n    /** @type {Number} */\n    this.iterationDuration = timerDuration; // Duration of one loop\n    /** @type {Number} */\n    this.iterationCount = timerIterationCount; // Number of loops\n    /** @type {Boolean|ScrollObserver} */\n    this._autoplay = parent ? false : setValue(autoplay, timerDefaults.autoplay);\n    /** @type {Number} */\n    this._offset = offsetPosition;\n    /** @type {Number} */\n    this._delay = timerDelay;\n    /** @type {Number} */\n    this._loopDelay = timerLoopDelay;\n    /** @type {Number} */\n    this._iterationTime = 0;\n    /** @type {Number} */\n    this._currentIteration = 0; // Current loop index\n    /** @type {Function} */\n    this._resolve = noop; // Used by .then()\n    /** @type {Boolean} */\n    this._running = false;\n    /** @type {Number} */\n    this._reversed = +setValue(reversed, timerDefaults.reversed);\n    /** @type {Number} */\n    this._reverse = this._reversed;\n    /** @type {Number} */\n    this._cancelled = 0;\n    /** @type {Boolean} */\n    this._alternate = setValue(alternate, timerDefaults.alternate);\n    /** @type {Renderable} */\n    this._prev = null;\n    /** @type {Renderable} */\n    this._next = null;\n\n    // Clock's parameters\n    /** @type {Number} */\n    this._elapsedTime = timerInitTime;\n    /** @type {Number} */\n    this._startTime = timerInitTime;\n    /** @type {Number} */\n    this._lastTime = timerInitTime;\n    /** @type {Number} */\n    this._fps = setValue(frameRate, timerDefaults.frameRate);\n    /** @type {Number} */\n    this._speed = setValue(playbackRate, timerDefaults.playbackRate);\n  }\n\n  get cancelled() {\n    return !!this._cancelled;\n  }\n\n  set cancelled(cancelled) {\n    cancelled ? this.cancel() : this.reset(true).play();\n  }\n\n  get currentTime() {\n    return clamp(round(this._currentTime, globals.precision), -this._delay, this.duration);\n  }\n\n  set currentTime(time) {\n    const paused = this.paused;\n    // Pausing the timer is necessary to avoid time jumps on a running instance\n    this.pause().seek(+time);\n    if (!paused) this.resume();\n  }\n\n  get iterationCurrentTime() {\n    return round(this._iterationTime, globals.precision);\n  }\n\n  set iterationCurrentTime(time) {\n    this.currentTime = (this.iterationDuration * this._currentIteration) + time;\n  }\n\n  get progress() {\n    return clamp(round(this._currentTime / this.duration, 10), 0, 1);\n  }\n\n  set progress(progress) {\n    this.currentTime = this.duration * progress;\n  }\n\n  get iterationProgress() {\n    return clamp(round(this._iterationTime / this.iterationDuration, 10), 0, 1);\n  }\n\n  set iterationProgress(progress) {\n    const iterationDuration = this.iterationDuration;\n    this.currentTime = (iterationDuration * this._currentIteration) + (iterationDuration * progress);\n  }\n\n  get currentIteration() {\n    return this._currentIteration;\n  }\n\n  set currentIteration(iterationCount) {\n    this.currentTime = (this.iterationDuration * clamp(+iterationCount, 0, this.iterationCount - 1));\n  }\n\n  get reversed() {\n    return !!this._reversed;\n  }\n\n  set reversed(reverse) {\n    reverse ? this.reverse() : this.play();\n  }\n\n  get speed() {\n    return super.speed;\n  }\n\n  set speed(playbackRate) {\n    super.speed = playbackRate;\n    this.resetTime();\n  }\n\n  /**\n   * @param  {Boolean} [softReset]\n   * @return {this}\n   */\n  reset(softReset = false) {\n    // If cancelled, revive the timer before rendering in order to have propertly composed tweens siblings\n    reviveTimer(this);\n    if (this._reversed && !this._reverse) this.reversed = false;\n    // Rendering before updating the completed flag to prevent skips and to make sure the properties are not overridden\n    // Setting the iterationTime at the end to force the rendering to happend backwards, otherwise calling .reset() on Timelines might not render children in the right order\n    // NOTE: This is only required for Timelines and might be better to move to the Timeline class?\n    this._iterationTime = this.iterationDuration;\n    // Set tickMode to tickModes.FORCE to force rendering\n    tick(this, 0, 1, ~~softReset, tickModes.FORCE);\n    // Reset timer properties after revive / render to make sure the props are not updated again\n    resetTimerProperties(this);\n    // Also reset children properties\n    if (this._hasChildren) {\n      forEachChildren(this, resetTimerProperties);\n    }\n    return this;\n  }\n\n  /**\n   * @param  {Boolean} internalRender\n   * @return {this}\n   */\n  init(internalRender = false) {\n    this.fps = this._fps;\n    this.speed = this._speed;\n    // Manually calling .init() on timelines should render all children intial state\n    // Forces all children to render once then render to 0 when reseted\n    if (!internalRender && this._hasChildren) {\n      tick(this, this.duration, 1, ~~internalRender, tickModes.FORCE);\n    }\n    this.reset(internalRender);\n    // Make sure to set autoplay to false to child timers so it doesn't attempt to autoplay / link\n    const autoplay = this._autoplay;\n    if (autoplay === true) {\n      this.resume();\n    } else if (autoplay && !isUnd(/** @type {ScrollObserver} */(autoplay).linked)) {\n      /** @type {ScrollObserver} */(autoplay).link(this);\n    }\n    return this;\n  }\n\n  /** @return {this} */\n  resetTime() {\n    const timeScale = 1 / (this._speed * engine._speed);\n    // TODO: See if we can safely use engine._elapsedTime here\n    // if (!engine.reqId) engine.requestTick(now())\n    // this._startTime = engine._elapsedTime - (this._currentTime + this._delay) * timeScale;\n    this._startTime = now() - (this._currentTime + this._delay) * timeScale;\n    return this;\n  }\n\n  /** @return {this} */\n  pause() {\n    if (this.paused) return this;\n    this.paused = true;\n    this.onPause(this);\n    return this;\n  }\n\n  /** @return {this} */\n  resume() {\n    if (!this.paused) return this;\n    this.paused = false;\n    // We can safely imediatly render a timer that has no duration and no children\n    if (this.duration <= minValue && !this._hasChildren) {\n      tick(this, minValue, 0, 0, tickModes.FORCE);\n    } else {\n      if (!this._running) {\n        addChild(engine, this);\n        engine._hasChildren = true;\n        this._running = true;\n      }\n      this.resetTime();\n      // Forces the timer to advance by at least one frame when the next tick occurs\n      this._startTime -= 12;\n      engine.wake();\n    }\n    return this;\n  }\n\n  /** @return {this} */\n  restart() {\n    return this.reset().resume();\n  }\n\n  /**\n   * @param  {Number} time\n   * @param  {Boolean|Number} [muteCallbacks]\n   * @param  {Boolean|Number} [internalRender]\n   * @return {this}\n   */\n  seek(time, muteCallbacks = 0, internalRender = 0) {\n    // Recompose the tween siblings in case the timer has been cancelled\n    reviveTimer(this);\n    // If you seek a completed animation, otherwise the next play will starts at 0\n    this.completed = false;\n    const isPaused = this.paused;\n    this.paused = true;\n    // timer, time, muteCallbacks, internalRender, tickMode\n    tick(this, time + this._delay, ~~muteCallbacks, ~~internalRender, tickModes.AUTO);\n    return isPaused ? this : this.resume();\n  }\n\n  /** @return {this} */\n  alternate() {\n    const reversed = this._reversed;\n    const count = this.iterationCount;\n    const duration = this.iterationDuration;\n    // Calculate the maximum iterations possible given the iteration duration\n    const iterations = count === Infinity ? floor(maxValue / duration) : count;\n    this._reversed = +(this._alternate && !(iterations % 2) ? reversed : !reversed);\n    if (count === Infinity) {\n      // Handle infinite loops to loop on themself\n      this.iterationProgress = this._reversed ? 1 - this.iterationProgress : this.iterationProgress;\n    } else {\n      this.seek((duration * iterations) - this._currentTime);\n    }\n    this.resetTime();\n    return this;\n  }\n\n  /** @return {this} */\n  play() {\n    if (this._reversed) this.alternate();\n    return this.resume();\n  }\n\n  /** @return {this} */\n  reverse() {\n    if (!this._reversed) this.alternate();\n    return this.resume();\n  }\n\n  // TODO: Move all the animation / tweens / children related code to Animation / Timeline\n\n  /** @return {this} */\n  cancel() {\n    if (this._hasChildren) {\n      forEachChildren(this, (/** @type {Renderable} */child) => child.cancel(), true);\n    } else {\n      forEachChildren(this, removeTweenSliblings);\n    }\n    this._cancelled = 1;\n    // Pausing the timer removes it from the engine\n    return this.pause();\n  }\n\n  /**\n   * @param  {Number} newDuration\n   * @return {this}\n   */\n  stretch(newDuration) {\n    const currentDuration = this.duration;\n    const normlizedDuration = normalizeTime(newDuration);\n    if (currentDuration === normlizedDuration) return this;\n    const timeScale = newDuration / currentDuration;\n    const isSetter = newDuration <= minValue;\n    this.duration = isSetter ? minValue : normlizedDuration;\n    this.iterationDuration = isSetter ? minValue : normalizeTime(this.iterationDuration * timeScale);\n    this._offset *= timeScale;\n    this._delay *= timeScale;\n    this._loopDelay *= timeScale;\n    return this;\n  }\n\n /**\n   * Cancels the timer by seeking it back to 0 and reverting the attached scroller if necessary\n   * @return {this}\n   */\n  revert() {\n    tick(this, 0, 1, 0, tickModes.AUTO);\n    const ap = /** @type {ScrollObserver} */(this._autoplay);\n    if (ap && ap.linked && ap.linked === this) ap.revert();\n    return this.cancel();\n  }\n\n /**\n   * Imediatly completes the timer, cancels it and triggers the onComplete callback\n   * @return {this}\n   */\n  complete() {\n    return this.seek(this.duration).cancel();\n  }\n\n  /**\n   * @typedef {this & {then: null}} ResolvedTimer\n   */\n\n  /**\n   * @param  {Callback<ResolvedTimer>} [callback]\n   * @return Promise<this>\n   */\n  then(callback = noop) {\n    const then = this.then;\n    const onResolve = () => {\n      // this.then = null prevents infinite recursion if returned by an async function\n      // https://github.com/juliangarnierorg/anime-beta/issues/26\n      this.then = null;\n      callback(/** @type {ResolvedTimer} */(this));\n      this.then = then;\n      this._resolve = noop;\n    };\n    return new Promise(r => {\n      this._resolve = () => r(onResolve());\n      // Make sure to resolve imediatly if the timer has already completed\n      if (this.completed) this._resolve();\n      return this;\n    });\n  }\n\n}\n\n/**\n * @param {TimerParams} [parameters]\n * @return {Timer}\n */\nconst createTimer = parameters => new Timer(parameters, null, 0).init();\n\nexport { Timer, createTimer };\n","/**\n * Anime.js - utils - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { noop } from '../core/consts.js';\nimport * as number from './number.js';\n\n// Chain-able utilities\n\nconst numberUtils = number; // Needed to keep the import when bundling\n\nconst chainables = {};\n\n/**\n * @callback UtilityFunction\n * @param {...*} args\n * @return {Number|String}\n *\n * @param {UtilityFunction} fn\n * @param {Number} [last=0]\n * @return {function(...(Number|String)): function(Number|String): (Number|String)}\n */\nconst curry = (fn, last = 0) => (...args) => last ? v => fn(...args, v) : v => fn(v, ...args);\n\n/**\n * @param {Function} fn\n * @return {function(...(Number|String))}\n */\nconst chain = fn => {\n   return (...args) => {\n    const result = fn(...args);\n    return new Proxy(noop, {\n      apply: (_, __, [v]) => result(v),\n      get: (_, prop) => chain(/**@param {...Number|String} nextArgs */(...nextArgs) => {\n        const nextResult = chainables[prop](...nextArgs);\n        return (/**@type {Number|String} */v) => nextResult(result(v));\n      })\n    });\n  }\n};\n\n/**\n * @param {UtilityFunction} fn\n * @param {String} name\n * @param {Number} [right]\n * @return {function(...(Number|String)): UtilityFunction}\n */\nconst makeChainable = (name, fn, right = 0) => {\n  const chained = (...args) => (args.length < fn.length ? chain(curry(fn, right)) : fn)(...args);\n  if (!chainables[name]) chainables[name] = chained;\n  return chained;\n};\n\n/**\n * @typedef {Object} ChainablesMap\n * @property {ChainedClamp} clamp\n * @property {ChainedRound} round\n * @property {ChainedSnap} snap\n * @property {ChainedWrap} wrap\n * @property {ChainedLerp} lerp\n * @property {ChainedDamp} damp\n * @property {ChainedMapRange} mapRange\n * @property {ChainedRoundPad} roundPad\n * @property {ChainedPadStart} padStart\n * @property {ChainedPadEnd} padEnd\n * @property {ChainedDegToRad} degToRad\n * @property {ChainedRadToDeg} radToDeg\n */\n\n/**\n * @callback ChainedUtilsResult\n * @param {Number} value - The value to process through the chained operations\n * @return {Number} The processed result\n */\n\n/**\n * @typedef {ChainablesMap & ChainedUtilsResult} ChainableUtil\n */\n\n// Chainable\n\n/**\n * @callback ChainedRoundPad\n * @param {Number} decimalLength - Number of decimal places\n * @return {ChainableUtil}\n */\nconst roundPad = /** @type {typeof numberUtils.roundPad & ChainedRoundPad} */(makeChainable('roundPad', numberUtils.roundPad));\n\n/**\n * @callback ChainedPadStart\n * @param {Number} totalLength - Target length\n * @param {String} padString - String to pad with\n * @return {ChainableUtil}\n */\nconst padStart = /** @type {typeof numberUtils.padStart & ChainedPadStart} */(makeChainable('padStart', numberUtils.padStart));\n\n/**\n * @callback ChainedPadEnd\n * @param {Number} totalLength - Target length\n * @param {String} padString - String to pad with\n * @return {ChainableUtil}\n */\nconst padEnd = /** @type {typeof numberUtils.padEnd & ChainedPadEnd} */(makeChainable('padEnd', numberUtils.padEnd));\n\n/**\n * @callback ChainedWrap\n * @param {Number} min - Minimum boundary\n * @param {Number} max - Maximum boundary\n * @return {ChainableUtil}\n */\nconst wrap = /** @type {typeof numberUtils.wrap & ChainedWrap} */(makeChainable('wrap', numberUtils.wrap));\n\n/**\n * @callback ChainedMapRange\n * @param {Number} inLow - Input range minimum\n * @param {Number} inHigh - Input range maximum\n * @param {Number} outLow - Output range minimum\n * @param {Number} outHigh - Output range maximum\n * @return {ChainableUtil}\n */\nconst mapRange = /** @type {typeof numberUtils.mapRange & ChainedMapRange} */(makeChainable('mapRange', numberUtils.mapRange));\n\n/**\n * @callback ChainedDegToRad\n * @return {ChainableUtil}\n */\nconst degToRad = /** @type {typeof numberUtils.degToRad & ChainedDegToRad} */(makeChainable('degToRad', numberUtils.degToRad));\n\n/**\n * @callback ChainedRadToDeg\n * @return {ChainableUtil}\n */\nconst radToDeg = /** @type {typeof numberUtils.radToDeg & ChainedRadToDeg} */(makeChainable('radToDeg', numberUtils.radToDeg));\n\n/**\n * @callback ChainedSnap\n * @param {Number|Array<Number>} increment - Step size or array of snap points\n * @return {ChainableUtil}\n */\nconst snap = /** @type {typeof numberUtils.snap & ChainedSnap} */(makeChainable('snap', numberUtils.snap));\n\n/**\n * @callback ChainedClamp\n * @param {Number} min - Minimum boundary\n * @param {Number} max - Maximum boundary\n * @return {ChainableUtil}\n */\nconst clamp = /** @type {typeof numberUtils.clamp & ChainedClamp} */(makeChainable('clamp', numberUtils.clamp));\n\n/**\n * @callback ChainedRound\n * @param {Number} decimalLength - Number of decimal places\n * @return {ChainableUtil}\n */\nconst round = /** @type {typeof numberUtils.round & ChainedRound} */(makeChainable('round', numberUtils.round));\n\n/**\n * @callback ChainedLerp\n * @param {Number} start - Starting value\n * @param {Number} end - Ending value\n * @return {ChainableUtil}\n */\nconst lerp = /** @type {typeof numberUtils.lerp & ChainedLerp} */(makeChainable('lerp', numberUtils.lerp, 1));\n\n/**\n * @callback ChainedDamp\n * @param {Number} start - Starting value\n * @param {Number} end - Target value\n * @param {Number} deltaTime - Delta time in ms\n * @return {ChainableUtil}\n */\nconst damp = /** @type {typeof numberUtils.damp & ChainedDamp} */(makeChainable('damp', numberUtils.damp, 1));\n\nexport { clamp, damp, degToRad, lerp, mapRange, padEnd, padStart, radToDeg, round, roundPad, snap, wrap };\n","/**\n * Anime.js - utils - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nexport { clamp, damp, degToRad, lerp, mapRange, padEnd, padStart, radToDeg, round, roundPad, snap, wrap } from './chainable.js';\nexport { createSeededRandom, random, randomPick, shuffle } from './random.js';\nexport { keepTime, sync } from './time.js';\nexport { get, remove, set } from './target.js';\nexport { stagger } from './stagger.js';\nexport { cleanInlineStyles } from '../core/styles.js';\nexport { registerTargets as $ } from '../core/targets.js';\n","/**\n * Anime.js - utils - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { lerp } from '../core/helpers.js';\nexport { clamp, round, snap } from '../core/helpers.js';\n\n/**\n * Rounds a number to fixed decimal places\n * @param  {Number|String} v - Value to round\n * @param  {Number} decimalLength - Number of decimal places\n * @return {String}\n */\nconst roundPad = (v, decimalLength) => (+v).toFixed(decimalLength);\n\n/**\n * Pads the start of a value with a string\n * @param  {Number} v - Value to pad\n * @param  {Number} totalLength - Target length\n * @param  {String} padString - String to pad with\n * @return {String}\n */\nconst padStart = (v, totalLength, padString) => `${v}`.padStart(totalLength, padString);\n\n/**\n * Pads the end of a value with a string\n * @param  {Number} v - Value to pad\n * @param  {Number} totalLength - Target length\n * @param  {String} padString - String to pad with\n * @return {String}\n */\nconst padEnd = (v, totalLength, padString) => `${v}`.padEnd(totalLength, padString);\n\n/**\n * Wraps a value within a range\n * @param  {Number} v - Value to wrap\n * @param  {Number} min - Minimum boundary\n * @param  {Number} max - Maximum boundary\n * @return {Number}\n */\nconst wrap = (v, min, max) => (((v - min) % (max - min) + (max - min)) % (max - min)) + min;\n\n/**\n * Maps a value from one range to another\n * @param  {Number} value - Input value\n * @param  {Number} inLow - Input range minimum\n * @param  {Number} inHigh - Input range maximum\n * @param  {Number} outLow - Output range minimum\n * @param  {Number} outHigh - Output range maximum\n * @return {Number}\n */\nconst mapRange = (value, inLow, inHigh, outLow, outHigh) => outLow + ((value - inLow) / (inHigh - inLow)) * (outHigh - outLow);\n\n/**\n * Converts degrees to radians\n * @param  {Number} degrees - Angle in degrees\n * @return {Number}\n */\nconst degToRad = degrees => degrees * Math.PI / 180;\n\n/**\n * Converts radians to degrees\n * @param  {Number} radians - Angle in radians\n * @return {Number}\n */\nconst radToDeg = radians => radians * 180 / Math.PI;\n\n/**\n * Frame rate independent damped lerp\n * Based on: https://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\n *\n * @param  {Number} start - Starting value\n * @param  {Number} end - Target value\n * @param  {Number} deltaTime - Delta time in ms\n * @param  {Number} factor - Interpolation factor in the range [0, 1]\n * @return {Number} The interpolated value\n */\nconst damp = (start, end, deltaTime, factor) => {\n  return !factor ? start : factor === 1 ? end : lerp(start, end, 1 - Math.exp(-factor * deltaTime * .1));\n};\n\nexport { damp, degToRad, lerp, mapRange, padEnd, padStart, radToDeg, roundPad, wrap };\n","/**\n * Anime.js - utils - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\n/**\n * Generate a random number between optional min and max (inclusive) and decimal precision\n *\n * @callback RandomNumberGenerator\n * @param    {Number} [min=0] - The minimum value (inclusive)\n * @param    {Number} [max=1] - The maximum value (inclusive)\n * @param    {Number} [decimalLength=0] - Number of decimal places to round to\n * @return   {Number} A random number between min and max\n */\n\n/**\n * Generates a random number between min and max (inclusive) with optional decimal precision\n *\n * @type {RandomNumberGenerator}\n */\nconst random = (min = 0, max = 1, decimalLength = 0) => {\n  const m = 10 ** decimalLength;\n  return Math.floor((Math.random() * (max - min + (1 / m)) + min) * m) / m;\n};\n\nlet _seed = 0;\n\n/**\n * Creates a seeded pseudorandom number generator function\n *\n * @param  {Number} [seed] - The seed value for the random number generator\n * @param  {Number} [seededMin=0] - The minimum default value (inclusive) of the returned function\n * @param  {Number} [seededMax=1] - The maximum default value (inclusive) of the returned function\n * @param  {Number} [seededDecimalLength=0] - Default number of decimal places to round to of the returned function\n * @return {RandomNumberGenerator} A function to generate a random number between optional min and max (inclusive) and decimal precision\n */\nconst createSeededRandom = (seed, seededMin = 0, seededMax = 1, seededDecimalLength = 0) => {\n  let t = seed === undefined ? _seed++ : seed;\n  return (min = seededMin, max = seededMax, decimalLength = seededDecimalLength) => {\n    t += 0x6D2B79F5;\n    t = Math.imul(t ^ t >>> 15, t | 1);\n    t ^= t + Math.imul(t ^ t >>> 7, t | 61);\n    const m = 10 ** decimalLength;\n    return Math.floor(((((t ^ t >>> 14) >>> 0) / 4294967296) * (max - min + (1 / m)) + min) * m) / m;\n  }\n};\n\n/**\n * Picks a random element from an array or a string\n *\n * @template T\n * @param    {String|Array<T>} items - The array or string to pick from\n * @return   {String|T} A random element from the array or character from the string\n */\nconst randomPick = items => items[random(0, items.length - 1)];\n\n/**\n * Shuffles an array in-place using the Fisher-Yates algorithm\n * Adapted from https://bost.ocks.org/mike/shuffle/\n *\n * @param  {Array} items - The array to shuffle (will be modified in-place)\n * @return {Array} The same array reference, now shuffled\n */\nconst shuffle = items => {\n  let m = items.length, t, i;\n  while (m) { i = random(0, --m); t = items[m]; items[m] = items[i]; items[i] = t; }\n  return items;\n};\n\nexport { createSeededRandom, random, randomPick, shuffle };\n","/**\n * Anime.js - utils - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { unitsExecRgx, emptyString } from '../core/consts.js';\nimport { isUnd, parseNumber, isFnc, abs, floor, sqrt, round, isArr, isNum, isStr, max } from '../core/helpers.js';\nimport { parseEase } from '../easings/eases/parser.js';\nimport { parseTimelinePosition } from '../timeline/position.js';\nimport { getOriginalAnimatableValue } from '../core/values.js';\nimport { registerTargets } from '../core/targets.js';\nimport { shuffle } from './random.js';\n\n/**\n * @import {\n *   StaggerParams,\n *   StaggerFunction,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   Spring,\n * } from '../easings/spring/index.js'\n*/\n\n/**\n * @overload\n * @param {Number} val\n * @param {StaggerParams} [params]\n * @return {StaggerFunction<Number>}\n */\n/**\n * @overload\n * @param {String} val\n * @param {StaggerParams} [params]\n * @return {StaggerFunction<String>}\n */\n/**\n * @overload\n * @param {[Number, Number]} val\n * @param {StaggerParams} [params]\n * @return {StaggerFunction<Number>}\n */\n/**\n * @overload\n * @param {[String, String]} val\n * @param {StaggerParams} [params]\n * @return {StaggerFunction<String>}\n */\n/**\n * @param {Number|String|[Number, Number]|[String, String]} val The staggered value or range\n * @param {StaggerParams} [params] The stagger parameters\n * @return {StaggerFunction<Number|String>}\n */\nconst stagger = (val, params = {}) => {\n  let values = [];\n  let maxValue = 0;\n  const from = params.from;\n  const reversed = params.reversed;\n  const ease = params.ease;\n  const hasEasing = !isUnd(ease);\n  const hasSpring = hasEasing && !isUnd(/** @type {Spring} */(ease).ease);\n  const staggerEase = hasSpring ? /** @type {Spring} */(ease).ease : hasEasing ? parseEase(ease) : null;\n  const grid = params.grid;\n  const axis = params.axis;\n  const customTotal = params.total;\n  const fromFirst = isUnd(from) || from === 0 || from === 'first';\n  const fromCenter = from === 'center';\n  const fromLast = from === 'last';\n  const fromRandom = from === 'random';\n  const isRange = isArr(val);\n  const useProp = params.use;\n  const val1 = isRange ? parseNumber(val[0]) : parseNumber(val);\n  const val2 = isRange ? parseNumber(val[1]) : 0;\n  const unitMatch = unitsExecRgx.exec((isRange ? val[1] : val) + emptyString);\n  const start = params.start || 0 + (isRange ? val1 : 0);\n  let fromIndex = fromFirst ? 0 : isNum(from) ? from : 0;\n  return (target, i, t, tl) => {\n    const [ registeredTarget ] = registerTargets(target);\n    const total = isUnd(customTotal) ? t : customTotal;\n    const customIndex = !isUnd(useProp) ? isFnc(useProp) ? useProp(registeredTarget, i, total) : getOriginalAnimatableValue(registeredTarget, useProp) : false;\n    const staggerIndex = isNum(customIndex) || isStr(customIndex) && isNum(+customIndex) ? +customIndex : i;\n    if (fromCenter) fromIndex = (total - 1) / 2;\n    if (fromLast) fromIndex = total - 1;\n    if (!values.length) {\n      for (let index = 0; index < total; index++) {\n        if (!grid) {\n          values.push(abs(fromIndex - index));\n        } else {\n          const fromX = !fromCenter ? fromIndex % grid[0] : (grid[0] - 1) / 2;\n          const fromY = !fromCenter ? floor(fromIndex / grid[0]) : (grid[1] - 1) / 2;\n          const toX = index % grid[0];\n          const toY = floor(index / grid[0]);\n          const distanceX = fromX - toX;\n          const distanceY = fromY - toY;\n          let value = sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') value = -distanceX;\n          if (axis === 'y') value = -distanceY;\n          values.push(value);\n        }\n        maxValue = max(...values);\n      }\n      if (staggerEase) values = values.map(val => staggerEase(val / maxValue) * maxValue);\n      if (reversed) values = values.map(val => axis ? (val < 0) ? val * -1 : -val : abs(maxValue - val));\n      if (fromRandom) values = shuffle(values);\n    }\n    const spacing = isRange ? (val2 - val1) / maxValue : val1;\n    const offset = tl ? parseTimelinePosition(tl, isUnd(params.start) ? tl.iterationDuration : start) : /** @type {Number} */(start);\n    /** @type {String|Number} */\n    let output = offset + ((spacing * round(values[staggerIndex], 2)) || 0);\n    if (params.modifier) output = params.modifier(output);\n    if (unitMatch) output = `${output}${unitMatch[2]}`;\n    return output;\n  }\n};\n\nexport { stagger };\n","/**\n * Anime.js - utils - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { globals } from '../core/globals.js';\nimport { valueTypes, minValue, compositionTypes } from '../core/consts.js';\nimport { isUnd, round } from '../core/helpers.js';\nimport { registerTargets, parseTargets } from '../core/targets.js';\nimport { sanitizePropertyName } from '../core/styles.js';\nexport { cleanInlineStyles } from '../core/styles.js';\nimport { getTweenType, getOriginalAnimatableValue, decomposeRawValue, decomposedOriginalValue, setValue } from '../core/values.js';\nimport { convertValueUnit } from '../core/units.js';\nimport { removeWAAPIAnimation } from '../waapi/composition.js';\nimport { removeTargetsFromRenderable } from '../animation/composition.js';\nimport { JSAnimation } from '../animation/animation.js';\n\n/**\n * @import {\n *   Renderable,\n *   DOMTargetSelector,\n *   JSTargetsParam,\n *   DOMTargetsParam,\n *   TargetsParam,\n *   DOMTarget,\n *   AnimationParams,\n *   TargetsArray,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   WAAPIAnimation\n * } from '../waapi/waapi.js'\n*/\n\n/**\n * @overload\n * @param  {DOMTargetSelector} targetSelector\n * @param  {String} propName\n * @return {String}\n *\n * @overload\n * @param  {JSTargetsParam} targetSelector\n * @param  {String} propName\n * @return {Number|String}\n *\n * @overload\n * @param  {DOMTargetsParam} targetSelector\n * @param  {String} propName\n * @param  {String} unit\n * @return {String}\n *\n * @overload\n * @param  {TargetsParam} targetSelector\n * @param  {String} propName\n * @param  {Boolean} unit\n * @return {Number}\n *\n * @param  {TargetsParam} targetSelector\n * @param  {String} propName\n * @param  {String|Boolean} [unit]\n */\nfunction get(targetSelector, propName, unit) {\n  const targets = registerTargets(targetSelector);\n  if (!targets.length) return;\n  const [ target ] = targets;\n  const tweenType = getTweenType(target, propName);\n  const normalizePropName = sanitizePropertyName(propName, target, tweenType);\n  let originalValue = getOriginalAnimatableValue(target, normalizePropName);\n  if (isUnd(unit)) {\n    return originalValue;\n  } else {\n    decomposeRawValue(originalValue, decomposedOriginalValue);\n    if (decomposedOriginalValue.t === valueTypes.NUMBER || decomposedOriginalValue.t === valueTypes.UNIT) {\n      if (unit === false) {\n        return decomposedOriginalValue.n;\n      } else {\n        const convertedValue = convertValueUnit(/** @type {DOMTarget} */(target), decomposedOriginalValue, /** @type {String} */(unit), false);\n        return `${round(convertedValue.n, globals.precision)}${convertedValue.u}`;\n      }\n    }\n  }\n}\n\n/**\n * @param  {TargetsParam} targets\n * @param  {AnimationParams} parameters\n * @return {JSAnimation}\n */\nconst set = (targets, parameters) => {\n  if (isUnd(parameters)) return;\n  parameters.duration = minValue;\n  // Do not overrides currently active tweens by default\n  parameters.composition = setValue(parameters.composition, compositionTypes.none);\n  // Skip init() and force rendering by playing the animation\n  return new JSAnimation(targets, parameters, null, 0, true).resume();\n};\n\n/**\n * @param  {TargetsParam} targets\n * @param  {Renderable|WAAPIAnimation} [renderable]\n * @param  {String} [propertyName]\n * @return {TargetsArray}\n */\nconst remove = (targets, renderable, propertyName) => {\n  const targetsArray = parseTargets(targets);\n  for (let i = 0, l = targetsArray.length; i < l; i++) {\n    removeWAAPIAnimation(\n      /** @type {DOMTarget}  */(targetsArray[i]),\n      propertyName,\n      renderable && /** @type {WAAPIAnimation} */(renderable).controlAnimation && /** @type {WAAPIAnimation} */(renderable),\n    );\n  }\n  removeTargetsFromRenderable(\n    targetsArray,\n    /** @type {Renderable} */(renderable),\n    propertyName\n  );\n  return targetsArray;\n};\n\nexport { registerTargets as $, get, remove, set };\n","/**\n * Anime.js - utils - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { noop } from '../core/consts.js';\nimport { globals } from '../core/globals.js';\nimport { isFnc, isUnd } from '../core/helpers.js';\nimport { Timer } from '../timer/timer.js';\n\n/**\n * @import {\n *   Callback,\n *   Tickable,\n * } from '../types/index.js'\n*/\n\n/**\n * @param  {Callback<Timer>} [callback]\n * @return {Timer}\n */\nconst sync = (callback = noop) => {\n  return new Timer({ duration: 1 * globals.timeScale, onComplete: callback }, null, 0).resume();\n};\n\n/**\n * @param  {(...args: any[]) => Tickable | ((...args: any[]) => void)} constructor\n * @return {(...args: any[]) => Tickable | ((...args: any[]) => void)}\n */\nconst keepTime = constructor => {\n  /** @type {Tickable} */\n  let tracked;\n  return (...args) => {\n    let currentIteration, currentIterationProgress, reversed, alternate;\n    if (tracked) {\n      currentIteration = tracked.currentIteration;\n      currentIterationProgress = tracked.iterationProgress;\n      reversed = tracked.reversed;\n      alternate = tracked._alternate;\n      tracked.revert();\n    }\n    const cleanup = constructor(...args);\n    if (cleanup && !isFnc(cleanup) && cleanup.revert) tracked = cleanup;\n    if (!isUnd(currentIterationProgress)) {\n      /** @type {Tickable} */(tracked).currentIteration = currentIteration;\n      /** @type {Tickable} */(tracked).iterationProgress = (alternate ? !(currentIteration % 2) ? reversed : !reversed : reversed) ? 1 - currentIterationProgress : currentIterationProgress;\n    }\n    return cleanup || noop;\n  }\n};\n\nexport { keepTime, sync };\n","/**\n * Anime.js - waapi - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { removeChild, addChild } from '../core/helpers.js';\n\n/**\n * @import {\n *   DOMTarget,\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   WAAPIAnimation,\n * } from '../waapi/waapi.js'\n*/\n\nconst WAAPIAnimationsLookups = {\n  _head: null,\n  _tail: null,\n};\n\n/**\n * @param {DOMTarget} $el\n * @param {String} [property]\n * @param {WAAPIAnimation} [parent]\n * @return {globalThis.Animation}\n */\nconst removeWAAPIAnimation = ($el, property, parent) => {\n  let nextLookup = WAAPIAnimationsLookups._head;\n  let anim;\n  while (nextLookup) {\n    const next = nextLookup._next;\n    const matchTarget = nextLookup.$el === $el;\n    const matchProperty = !property || nextLookup.property === property;\n    const matchParent = !parent || nextLookup.parent === parent;\n    if (matchTarget && matchProperty && matchParent) {\n      anim = nextLookup.animation;\n      try { anim.commitStyles(); } catch {}      anim.cancel();\n      removeChild(WAAPIAnimationsLookups, nextLookup);\n      const lookupParent = nextLookup.parent;\n      if (lookupParent) {\n        lookupParent._completed++;\n        if (lookupParent.animations.length === lookupParent._completed) {\n          lookupParent.completed = true;\n          lookupParent.paused = true;\n          if (!lookupParent.muteCallbacks) {\n            lookupParent.onComplete(lookupParent);\n            lookupParent._resolve(lookupParent);\n          }\n        }\n      }\n    }\n    nextLookup = next;\n  }\n  return anim;\n};\n\n/**\n * @param {WAAPIAnimation} parent\n * @param {DOMTarget} $el\n * @param {String} property\n * @param {PropertyIndexedKeyframes} keyframes\n * @param {KeyframeAnimationOptions} params\n * @retun {globalThis.Animation}\n */\nconst addWAAPIAnimation = (parent, $el, property, keyframes, params) => {\n  const animation = $el.animate(keyframes, params);\n  const animTotalDuration = params.delay + (+params.duration * params.iterations);\n  animation.playbackRate = parent._speed;\n  if (parent.paused) animation.pause();\n  if (parent.duration < animTotalDuration) {\n    parent.duration = animTotalDuration;\n    parent.controlAnimation = animation;\n  }\n  parent.animations.push(animation);\n  removeWAAPIAnimation($el, property);\n  addChild(WAAPIAnimationsLookups, { parent, animation, $el, property, _next: null, _prev: null });\n  const handleRemove = () => { removeWAAPIAnimation($el, property, parent); };\n  animation.oncancel = handleRemove;\n  animation.onremove = handleRemove;\n  if (!parent.persist) {\n    animation.onfinish = handleRemove;\n  }\n  return animation;\n};\n\nexport { addWAAPIAnimation, removeWAAPIAnimation };\n","/**\n * Anime.js - waapi - ESM\n * @version v4.2.2\n * @license MIT\n * @copyright 2025 - Julian Garnier\n */\n\nimport { isNil, isUnd, stringStartsWith, isKey, isObj, isArr, toLowerCase, round, isStr, isFnc, isNum } from '../core/helpers.js';\nimport { scope, globals } from '../core/globals.js';\nimport { registerTargets } from '../core/targets.js';\nimport { setValue, getFunctionValue } from '../core/values.js';\nimport { isBrowser, validTransforms, noop, transformsSymbol, shortTransforms, transformsFragmentStrings, emptyString, K } from '../core/consts.js';\nimport { none } from '../easings/none.js';\nimport { parseEaseString } from '../easings/eases/parser.js';\nimport { addWAAPIAnimation } from './composition.js';\n\n/**\n * @import {\n *   Callback,\n *   EasingFunction,\n *   EasingParam,\n *   DOMTarget,\n *   DOMTargetsParam,\n *   DOMTargetsArray,\n *   WAAPIAnimationParams,\n *   WAAPITweenOptions,\n *   WAAPIKeyframeValue,\n *   WAAPITweenValue\n * } from '../types/index.js'\n*/\n\n/**\n * @import {\n *   Spring,\n * } from '../easings/spring/index.js'\n*/\n\n/**\n * @import {\n *   ScrollObserver,\n * } from '../events/scroll.js'\n*/\n\n/**\n * Converts an easing function into a valid CSS linear() timing function string\n * @param {EasingFunction} fn\n * @param {number} [samples=100]\n * @returns {string} CSS linear() timing function\n */\nconst easingToLinear = (fn, samples = 100) => {\n  const points = [];\n  for (let i = 0; i <= samples; i++) points.push(round(fn(i / samples), 4));\n  return `linear(${points.join(', ')})`;\n};\n\nconst WAAPIEasesLookups = {};\n\n/**\n * @param  {EasingParam} ease\n * @return {String}\n */\nconst parseWAAPIEasing = (ease) => {\n  let parsedEase = WAAPIEasesLookups[ease];\n  if (parsedEase) return parsedEase;\n  parsedEase = 'linear';\n  if (isStr(ease)) {\n    if (\n      stringStartsWith(ease, 'linear') ||\n      stringStartsWith(ease, 'cubic-') ||\n      stringStartsWith(ease, 'steps') ||\n      stringStartsWith(ease, 'ease')\n    ) {\n      parsedEase = ease;\n    } else if (stringStartsWith(ease, 'cubicB')) {\n      parsedEase = toLowerCase(ease);\n    } else {\n      const parsed = parseEaseString(ease);\n      if (isFnc(parsed)) parsedEase = parsed === none ? 'linear' : easingToLinear(parsed);\n    }\n    // Only cache string based easing name, otherwise function arguments get lost\n    WAAPIEasesLookups[ease] = parsedEase;\n  } else if (isFnc(ease)) {\n    const easing = easingToLinear(ease);\n    if (easing) parsedEase = easing;\n  } else if (/** @type {Spring} */(ease).ease) {\n    parsedEase = easingToLinear(/** @type {Spring} */(ease).ease);\n  }\n  return parsedEase;\n};\n\nconst transformsShorthands = ['x', 'y', 'z'];\nconst commonDefaultPXProperties = [\n  'perspective',\n  'width',\n  'height',\n  'margin',\n  'padding',\n  'top',\n  'right',\n  'bottom',\n  'left',\n  'borderWidth',\n  'fontSize',\n  'borderRadius',\n  ...transformsShorthands\n];\n\nconst validIndividualTransforms = /*#__PURE__*/ (() => [...transformsShorthands, ...validTransforms.filter(t => ['X', 'Y', 'Z'].some(axis => t.endsWith(axis)))])();\n\nlet transformsPropertiesRegistered = null;\n\n/**\n * @param  {String} propName\n * @param  {WAAPIKeyframeValue} value\n * @param  {DOMTarget} $el\n * @param  {Number} i\n * @param  {Number} targetsLength\n * @return {String}\n */\nconst normalizeTweenValue = (propName, value, $el, i, targetsLength) => {\n  // Do not try to compute strings with getFunctionValue otherwise it will convert CSS variables\n  let v = isStr(value) ? value : getFunctionValue(/** @type {any} */(value), $el, i, targetsLength);\n  if (!isNum(v)) return v;\n  if (commonDefaultPXProperties.includes(propName) || stringStartsWith(propName, 'translate')) return `${v}px`;\n  if (stringStartsWith(propName, 'rotate') || stringStartsWith(propName, 'skew')) return `${v}deg`;\n  return `${v}`;\n};\n\n/**\n * @param  {DOMTarget} $el\n * @param  {String} propName\n * @param  {WAAPIKeyframeValue} from\n * @param  {WAAPIKeyframeValue} to\n * @param  {Number} i\n * @param  {Number} targetsLength\n * @return {WAAPITweenValue}\n */\nconst parseIndividualTweenValue = ($el, propName, from, to, i, targetsLength) => {\n  /** @type {WAAPITweenValue} */\n  let tweenValue = '0';\n  const computedTo = !isUnd(to) ? normalizeTweenValue(propName, to, $el, i, targetsLength) : getComputedStyle($el)[propName];\n  if (!isUnd(from)) {\n    const computedFrom = normalizeTweenValue(propName, from, $el, i, targetsLength);\n    tweenValue = [computedFrom, computedTo];\n  } else {\n    tweenValue = isArr(to) ? to.map((/** @type {any} */v) => normalizeTweenValue(propName, v, $el, i, targetsLength)) : computedTo;\n  }\n  return tweenValue;\n};\n\nclass WAAPIAnimation {\n/**\n * @param {DOMTargetsParam} targets\n * @param {WAAPIAnimationParams} params\n */\n  constructor(targets, params) {\n\n    if (scope.current) scope.current.register(this);\n\n    // Skip the registration and fallback to no animation in case CSS.registerProperty is not supported\n    if (isNil(transformsPropertiesRegistered)) {\n      if (isBrowser && (isUnd(CSS) || !Object.hasOwnProperty.call(CSS, 'registerProperty'))) {\n        transformsPropertiesRegistered = false;\n      } else {\n        validTransforms.forEach(t => {\n          const isSkew = stringStartsWith(t, 'skew');\n          const isScale = stringStartsWith(t, 'scale');\n          const isRotate = stringStartsWith(t, 'rotate');\n          const isTranslate = stringStartsWith(t, 'translate');\n          const isAngle = isRotate || isSkew;\n          const syntax = isAngle ? '<angle>' : isScale ? \"<number>\" : isTranslate ? \"<length-percentage>\" : \"*\";\n          try {\n            CSS.registerProperty({\n              name: '--' + t,\n              syntax,\n              inherits: false,\n              initialValue: isTranslate ? '0px' : isAngle ? '0deg' : isScale ? '1' : '0',\n            });\n          } catch {}        });\n        transformsPropertiesRegistered = true;\n      }\n    }\n\n    const parsedTargets = registerTargets(targets);\n    const targetsLength = parsedTargets.length;\n\n    if (!targetsLength) {\n      console.warn(`No target found. Make sure the element you're trying to animate is accessible before creating your animation.`);\n    }\n\n    const ease = setValue(params.ease, parseWAAPIEasing(globals.defaults.ease));\n    const spring = /** @type {Spring} */(ease).ease && ease;\n    const autoplay = setValue(params.autoplay, globals.defaults.autoplay);\n    const scroll = autoplay && /** @type {ScrollObserver} */(autoplay).link ? autoplay : false;\n    const alternate = params.alternate && /** @type {Boolean} */(params.alternate) === true;\n    const reversed = params.reversed && /** @type {Boolean} */(params.reversed) === true;\n    const loop = setValue(params.loop, globals.defaults.loop);\n    const iterations = /** @type {Number} */((loop === true || loop === Infinity) ? Infinity : isNum(loop) ? loop + 1 : 1);\n    /** @type {PlaybackDirection} */\n    const direction = alternate ? reversed ? 'alternate-reverse' : 'alternate' : reversed ? 'reverse' : 'normal';\n    /** @type {FillMode} */\n    const fill = 'both'; // We use 'both' here because the animation can be reversed during playback\n    /** @type {String} */\n    const easing = parseWAAPIEasing(ease);\n    const timeScale = (globals.timeScale === 1 ? 1 : K);\n\n    /** @type {DOMTargetsArray}] */\n    this.targets = parsedTargets;\n    /** @type {Array<globalThis.Animation>}] */\n    this.animations = [];\n    /** @type {globalThis.Animation}] */\n    this.controlAnimation = null;\n    /** @type {Callback<this>} */\n    this.onComplete = params.onComplete || /** @type {Callback<WAAPIAnimation>} */(/** @type {unknown} */(globals.defaults.onComplete));\n    /** @type {Number} */\n    this.duration = 0;\n    /** @type {Boolean} */\n    this.muteCallbacks = false;\n    /** @type {Boolean} */\n    this.completed = false;\n    /** @type {Boolean} */\n    this.paused = !autoplay || scroll !== false;\n    /** @type {Boolean} */\n    this.reversed = reversed;\n    /** @type {Boolean} */\n    this.persist = setValue(params.persist, globals.defaults.persist);\n    /** @type {Boolean|ScrollObserver} */\n    this.autoplay = autoplay;\n    /** @type {Number} */\n    this._speed = setValue(params.playbackRate, globals.defaults.playbackRate);\n    /** @type {Function} */\n    this._resolve = noop; // Used by .then()\n    /** @type {Number} */\n    this._completed = 0;\n    /** @type {Array.<Object>} */\n    this._inlineStyles = [];\n\n    parsedTargets.forEach(($el, i) => {\n\n      const cachedTransforms = $el[transformsSymbol];\n      const hasIndividualTransforms = validIndividualTransforms.some(t => params.hasOwnProperty(t));\n      const elStyle = $el.style;\n      const inlineStyles = this._inlineStyles[i] = {};\n\n      /** @type {Number} */\n      const duration = (spring ? /** @type {Spring} */(spring).settlingDuration : getFunctionValue(setValue(params.duration, globals.defaults.duration), $el, i, targetsLength)) * timeScale;\n      /** @type {Number} */\n      const delay = getFunctionValue(setValue(params.delay, globals.defaults.delay), $el, i, targetsLength) * timeScale;\n      /** @type {CompositeOperation} */\n      const composite = /** @type {CompositeOperation} */(setValue(params.composition, 'replace'));\n\n      for (let name in params) {\n        if (!isKey(name)) continue;\n        /** @type {PropertyIndexedKeyframes} */\n        const keyframes = {};\n        /** @type {KeyframeAnimationOptions} */\n        const tweenParams = { iterations, direction, fill, easing, duration, delay, composite };\n        const propertyValue = params[name];\n        const individualTransformProperty = hasIndividualTransforms ? validTransforms.includes(name) ? name : shortTransforms.get(name) : false;\n\n        const styleName = individualTransformProperty ? 'transform' : name;\n        if (!inlineStyles[styleName]) {\n          inlineStyles[styleName] = elStyle[styleName];\n        }\n\n        let parsedPropertyValue;\n        if (isObj(propertyValue)) {\n          const tweenOptions = /** @type {WAAPITweenOptions} */(propertyValue);\n          const tweenOptionsEase = setValue(tweenOptions.ease, ease);\n          const tweenOptionsSpring = /** @type {Spring} */(tweenOptionsEase).ease && tweenOptionsEase;\n          const to = /** @type {WAAPITweenOptions} */(tweenOptions).to;\n          const from = /** @type {WAAPITweenOptions} */(tweenOptions).from;\n          /** @type {Number} */\n          tweenParams.duration = (tweenOptionsSpring ? /** @type {Spring} */(tweenOptionsSpring).settlingDuration : getFunctionValue(setValue(tweenOptions.duration, duration), $el, i, targetsLength)) * timeScale;\n          /** @type {Number} */\n          tweenParams.delay = getFunctionValue(setValue(tweenOptions.delay, delay), $el, i, targetsLength) * timeScale;\n          /** @type {CompositeOperation} */\n          tweenParams.composite = /** @type {CompositeOperation} */(setValue(tweenOptions.composition, composite));\n          /** @type {String} */\n          tweenParams.easing = parseWAAPIEasing(tweenOptionsEase);\n          parsedPropertyValue = parseIndividualTweenValue($el, name, from, to, i, targetsLength);\n          if (individualTransformProperty) {\n            keyframes[`--${individualTransformProperty}`] = parsedPropertyValue;\n            cachedTransforms[individualTransformProperty] = parsedPropertyValue;\n          } else {\n            keyframes[name] = parseIndividualTweenValue($el, name, from, to, i, targetsLength);\n          }\n          addWAAPIAnimation(this, $el, name, keyframes, tweenParams);\n          if (!isUnd(from)) {\n            if (!individualTransformProperty) {\n              elStyle[name] = keyframes[name][0];\n            } else {\n              const key = `--${individualTransformProperty}`;\n              elStyle.setProperty(key, keyframes[key][0]);\n            }\n          }\n        } else {\n          parsedPropertyValue = isArr(propertyValue) ?\n                                propertyValue.map((/** @type {any} */v) => normalizeTweenValue(name, v, $el, i, targetsLength)) :\n                                normalizeTweenValue(name, /** @type {any} */(propertyValue), $el, i, targetsLength);\n          if (individualTransformProperty) {\n            keyframes[`--${individualTransformProperty}`] = parsedPropertyValue;\n            cachedTransforms[individualTransformProperty] = parsedPropertyValue;\n          } else {\n            keyframes[name] = parsedPropertyValue;\n          }\n          addWAAPIAnimation(this, $el, name, keyframes, tweenParams);\n        }\n      }\n      if (hasIndividualTransforms) {\n        let transforms = emptyString;\n        for (let t in cachedTransforms) {\n          transforms += `${transformsFragmentStrings[t]}var(--${t})) `;\n        }\n        elStyle.transform = transforms;\n      }\n    });\n\n    if (scroll) {\n      /** @type {ScrollObserver} */(this.autoplay).link(this);\n    }\n  }\n\n  /**\n   * @callback forEachCallback\n   * @param {globalThis.Animation} animation\n   */\n\n  /**\n   * @param  {forEachCallback|String} callback\n   * @return {this}\n   */\n  forEach(callback) {\n    const cb = isStr(callback) ? (/** @type {globalThis.Animation} */a) => a[callback]() : callback;\n    this.animations.forEach(cb);\n    return this;\n  }\n\n  get speed() {\n    return this._speed;\n  }\n\n  set speed(speed) {\n    this._speed = +speed;\n    this.forEach(anim => anim.playbackRate = speed);\n  }\n\n  get currentTime() {\n    const controlAnimation = this.controlAnimation;\n    const timeScale = globals.timeScale;\n    return this.completed ? this.duration : controlAnimation ? +controlAnimation.currentTime * (timeScale === 1 ? 1 : timeScale) : 0;\n  }\n\n  set currentTime(time) {\n    const t = time * (globals.timeScale === 1 ? 1 : K);\n    this.forEach(anim => {\n      // Make sure the animation playState is not 'paused' in order to properly trigger an onfinish callback.\n      // The \"paused\" play state supersedes the \"finished\" play state; if the animation is both paused and finished, the \"paused\" state is the one that will be reported.\n      // https://developer.mozilla.org/en-US/docs/Web/API/Animation/finish_event\n      // This is not needed for persisting animations since they never finish.\n      if (!this.persist && t >= this.duration) anim.play();\n      anim.currentTime = t;\n    });\n  }\n\n  get progress() {\n    return this.currentTime / this.duration;\n  }\n\n  set progress(progress) {\n    this.forEach(anim => anim.currentTime = progress * this.duration || 0);\n  }\n\n  resume() {\n    if (!this.paused) return this;\n    this.paused = false;\n    // TODO: Store the current time, and seek back to the last position\n    return this.forEach('play');\n  }\n\n  pause() {\n    if (this.paused) return this;\n    this.paused = true;\n    return this.forEach('pause');\n  }\n\n  alternate() {\n    this.reversed = !this.reversed;\n    this.forEach('reverse');\n    if (this.paused) this.forEach('pause');\n    return this;\n  }\n\n  play() {\n    if (this.reversed) this.alternate();\n    return this.resume();\n  }\n\n  reverse() {\n    if (!this.reversed) this.alternate();\n    return this.resume();\n  }\n\n /**\n  * @param {Number} time\n  * @param {Boolean} muteCallbacks\n  */\n  seek(time, muteCallbacks = false) {\n    if (muteCallbacks) this.muteCallbacks = true;\n    if (time < this.duration) this.completed = false;\n    this.currentTime = time;\n    this.muteCallbacks = false;\n    if (this.paused) this.pause();\n    return this;\n  }\n\n  restart() {\n    this.completed = false;\n    return this.seek(0, true).resume();\n  }\n\n  commitStyles() {\n    return this.forEach('commitStyles');\n  }\n\n  complete() {\n    return this.seek(this.duration);\n  }\n\n  cancel() {\n    this.muteCallbacks = true; // This prevents triggering the onComplete callback and resolving the Promise\n    return this.commitStyles().forEach('cancel');\n  }\n\n  revert() {\n    // NOTE: We need a better way to revert the transforms, since right now the entire transform property value is reverted,\n    // This means if you have multiple animations animating different transforms on the same target,\n    // reverting one of them will also override the transform property of the other animations.\n    // A better approach would be to store the original custom property values is they exist instead of the entire transform value,\n    // and update the CSS variables with the orignal value\n    this.cancel().targets.forEach(($el, i) => {\n      const targetStyle = $el.style;\n      const targetInlineStyles = this._inlineStyles[i];\n      for (let name in targetInlineStyles) {\n        const originalInlinedValue = targetInlineStyles[name];\n        if (isUnd(originalInlinedValue) || originalInlinedValue === emptyString) {\n          targetStyle.removeProperty(toLowerCase(name));\n        } else {\n          targetStyle[name] = originalInlinedValue;\n        }\n      }\n      // Remove style attribute if empty\n      if ($el.getAttribute('style') === emptyString) $el.removeAttribute('style');\n    });\n    return this;\n  }\n\n  /**\n   * @typedef {this & {then: null}} ResolvedWAAPIAnimation\n   */\n\n  /**\n   * @param  {Callback<ResolvedWAAPIAnimation>} [callback]\n   * @return Promise<this>\n   */\n  then(callback = noop) {\n    const then = this.then;\n    const onResolve = () => {\n      this.then = null;\n      callback(/** @type {ResolvedWAAPIAnimation} */(this));\n      this.then = then;\n      this._resolve = noop;\n    };\n    return new Promise(r => {\n      this._resolve = () => r(onResolve());\n      if (this.completed) this._resolve();\n      return this;\n    });\n  }\n}\n\nconst waapi = {\n/**\n * @param {DOMTargetsParam} targets\n * @param {WAAPIAnimationParams} params\n * @return {WAAPIAnimation}\n */\n  animate: (targets, params) => new WAAPIAnimation(targets, params),\n  convertEase: easingToLinear\n};\n\nexport { WAAPIAnimation, waapi };\n","/**!\n * Sortable 1.15.6\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.6\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    // Disabled on Safari: #1571; Enabled on Safari IOS: #2244\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && (!Safari || IOS),\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      if (options.supportPointer) {\n        on(ownerDocument, 'pointerup', _this._onDrop);\n        // Native D&D triggers pointercancel\n        !this.nativeDraggable && on(ownerDocument, 'pointercancel', _this._onDrop);\n      } else {\n        on(ownerDocument, 'mouseup', _this._onDrop);\n        on(ownerDocument, 'touchend', _this._onDrop);\n        on(ownerDocument, 'touchcancel', _this._onDrop);\n      }\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        if (options.supportPointer) {\n          on(ownerDocument, 'pointerup', _this._disableDelayedDrag);\n          on(ownerDocument, 'pointercancel', _this._disableDelayedDrag);\n        } else {\n          on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n          on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        }\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'pointerup', this._disableDelayedDrag);\n    off(ownerDocument, 'pointercancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      if (document.selection) {\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = getParentOrHost(parent));\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    window.getSelection().removeAllRanges();\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'pointercancel', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild,\n  expando: expando\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\n\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              (function () {\n                // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n                // (but previous selection existed)\n                var n, i;\n                if (currentIndex > lastIndex) {\n                  i = lastIndex;\n                  n = currentIndex;\n                } else {\n                  i = currentIndex;\n                  n = lastIndex + 1;\n                }\n                var filter = options.filter;\n                for (; i < n; i++) {\n                  if (~multiDragElements.indexOf(children[i])) continue;\n                  // Check if element is draggable\n                  if (!closest(children[i], options.draggable, parentEl, false)) continue;\n                  // Check if element is filtered\n                  var filtered = filter && (typeof filter === 'function' ? filter.call(sortable, evt, children[i], sortable) : filter.split(',').some(function (criteria) {\n                    return closest(children[i], criteria.trim(), parentEl, false);\n                  }));\n                  if (filtered) continue;\n                  toggleClass(children[i], options.selectedClass, true);\n                  multiDragElements.push(children[i]);\n                  dispatchEvent({\n                    sortable: sortable,\n                    rootEl: rootEl,\n                    name: 'select',\n                    targetEl: children[i],\n                    originalEvent: evt\n                  });\n                }\n              })();\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * Main builder file\r\n */\r\n\r\nimport { templatesPanelInit } from './templates.js';\r\nimport { fixContenteditable, keypressEvents } from './uigeneral.js';\r\nimport { CSectionsContainer } from './sectionscontainer.class.js';\r\nimport { settingsPanelInit } from './settings.panel.js';\r\nimport { sectionsInit } from './sections.js';\r\nimport { dragAndDropInit } from './dragndrop.js';\r\nimport { codeGenerationInitJS } from './codegeneration.js';\r\nimport { initPreviewAreaScroller } from './scroller.js';\r\nimport { untilsInitJs } from './utils.class.js';\r\nimport { modalwindowInitJS } from './modalwindow.js';\r\nimport { moduleInitJS } from './module.js';\r\nimport { presetsInit } from \"./presets.js\";\r\nimport { eventsInit } from './events.js';\r\n\r\n\r\nvar dslcDebug = false;\r\n// dslcDebug = true;\r\n\r\n// Global Plugin Object\r\nwindow.LiveComposer = {\r\n\r\n    Builder: {\r\n\r\n        Elements: {},\r\n        UI: {},\r\n        Actions: {},\r\n        Flags: {},\r\n        PreviewFrame: {},\r\n        Helpers: {}\r\n    },\r\n    Production: {\r\n\r\n    },\r\n    Utils: {}\r\n};\r\n\r\n(function(){\r\n\r\n\tLiveComposer.Builder.Flags = {\r\n\r\n\t\twindowScroller: false,\r\n\t\tpanelOpened: false, // Settings panel opened\r\n\t\tuiHidden: false, // ex composer-hidden\r\n\t\tmodalOpen: false,\r\n\r\n\t\t// Used to prevent multiple code generation when\r\n\t\t// cancelling row edits\r\n\t\tgenerate_code_after_row_changed: true\r\n\t};\r\n\r\n\tLiveComposer.Builder.Actions = {\r\n\r\n\t\tpostponed_actions_queue: {},\r\n\t\tadd_postponed_action: function( action_name ) {\r\n\r\n\t\t\tif (action_name === undefined) {\r\n\t\t\t   return;\r\n\t\t\t}\r\n\r\n\t\t\tif ( isNaN ( this.postponed_actions_queue[ action_name ] ) ) {\r\n\t\t\t\tthis.postponed_actions_queue[ action_name ] = 0;\r\n\t\t\t}\r\n\r\n\t\t\tthis.postponed_actions_queue[ action_name ] += 1;\r\n\t\t},\r\n\r\n\t\trelease_postponed_actions: function() {\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tjQuery.each( this.postponed_actions_queue, function(index, value) {\r\n\r\n\t\t\t\tif ( 1 < value ) {\r\n\t\t\t\t\tself.postponed_actions_queue[index] -= 1;\r\n\t\t\t\t} else if ( 1 == value ) {\r\n\t\t\t\t\twindow[index](); // Run function with action name\r\n\t\t\t\t\tself.postponed_actions_queue[index] -= 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// LiveComposer.Builder.Actions.optionsChanged() - if calling from parent.\r\n\t\t// parent.LiveComposer.Builder.Actions.optionsChanged() - if calling from iframe.\r\n\t\toptionsChanged: function () {\r\n\t\t\twindow.dslc_show_publish_button();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Inserts module fixing inline scripts bug\r\n\t *\r\n\t * @param {string} moduleHTML\r\n\t * @param {string} afterObject after what module should be inserted\r\n\t *\r\n\t * @return {DOM} inserted object\r\n\t */\r\n\tLiveComposer.Builder.Helpers.insertModule = function( moduleHTML, afterObject ) {\r\n\r\n\t\tvar newModule = jQuery(moduleHTML),\r\n\t\t\tafterObject = jQuery(afterObject);\r\n\r\n\t\tvar scripts = [];\r\n\r\n\t\tnewModule.find('script').each(function(){\r\n\r\n\t\t\tscripts.push(this.innerHTML);\r\n\t\t\tthis.parentNode.removeChild(this);\r\n\t\t});\r\n\r\n\t\t// Insert 'updated' module output after module we are editing.\r\n\t\t// && Delete 'old' instance of the module we are editing.\r\n\t\tafterObject\r\n\t\t\t.after(newModule)\r\n\t\t\t.remove();\r\n\r\n\t\tscripts.forEach(function(item) {\r\n\r\n\t\t\tvar script = LiveComposer.Builder.PreviewAreaDocument[0].createElement('script');\r\n\t\t\tscript.innerHTML = item;\r\n\t\t\tscript.type = 'text/javascript';\r\n\r\n\t\t\tLiveComposer.Builder.PreviewAreaDocument[0].getElementById(newModule[0].id).appendChild(script);\r\n\t\t});\r\n\r\n\t\tscripts = null;\r\n\t\tafterObject = null;\r\n\r\n\t\treturn newModule;\r\n\t}\r\n}());\r\n\r\n/** Wait till tinyMCE loaded */\r\nwindow.previewAreaTinyMCELoaded = function( windowObj ){\r\n\tLiveComposer.Builder.PreviewAreaWindow = windowObj;\r\n\tLiveComposer.Builder.PreviewAreaDocument = jQuery(windowObj.document);\r\n\r\n\t// Disable WP admin bar in editing mode\r\n\tjQuery('#wpadminbar', LiveComposer.Builder.PreviewAreaDocument).remove();\r\n\r\n\t// LiveComposer.Builder.UI.initInlineEditors();\r\n\tfixContenteditable();\r\n\r\n\ttemplatesPanelInit();\r\n\tsettingsPanelInit();\r\n\r\n\tsectionsInit();\r\n\r\n\tvar mainDraggable = LiveComposer.Builder.PreviewAreaDocument.find(\"#dslc-main\").eq(0)[0];\r\n\tnew CSectionsContainer( mainDraggable );\r\n\r\n\tjQuery(document).trigger('editorFrameLoaded');\r\n\tdragAndDropInit();\r\n\tcodeGenerationInitJS();\r\n\twindow.dslc_generate_code();\r\n\r\n\t// Catch keypress events (from both parent and iframe) to add keyboard support\r\n\tkeypressEvents();\r\n\tinitPreviewAreaScroller();\r\n\tmodalwindowInitJS();\r\n\tmoduleInitJS();\r\n\tuntilsInitJs();\r\n\tpresetsInit();\r\n\teventsInit();\r\n};\r\n\r\n// Disable the prompt ( are you sure ) on refresh\r\nwindow.onbeforeunload = function () { return; };\r\n"],"names":[],"sourceRoot":""}