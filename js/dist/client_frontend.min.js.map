{"version":3,"file":"client_frontend.min.js","mappings":"AAyBA","sources":["webpack://live-composer-page-builder/./js/src/client/frontend/index.js"],"sourcesContent":["/**\r\n * Table of Contents\r\n *\r\n * - dslc_responsive_classes\r\n * - dslc_init_accordion\r\n * - dslc_init_lightbox\r\n * - dslc_carousel ( Initializes carousels )\r\n * - dslc_bg_video ( Initiate row BG video )\r\n * - dslc_parallax\r\n * - dslc_masonry\r\n * - dslc_center\r\n * - dslc_tabs_generate_code\r\n * - dslc_accordion_generate_code\r\n * - dslc_tabs\r\n * - dslc_download_count_increment ( Increment download count )\r\n * - dslc_check_viewport ( Check if element in viewport )\r\n * - dslc_validate_comment_form\r\n * - dslc_social_share\r\n */\r\n\r\n/**\r\n * Responsive Classes\r\n *\r\n * We use it only in Responsive preview panel and for compatibility.\r\n */\r\nwindow.dslc_responsive_classes = ( force ) => {\r\n\r\n\tif ( force === undefined) force = false;\r\n\r\n\tvar windowWidth = jQuery(window).width();\r\n\tvar body = jQuery('body');\r\n\r\n\tif ( force == true || ( ! body.hasClass('dslc-res-disabled') && ! jQuery('.dslca-module-edit-options-tab-hook.dslca-active[data-section=\"responsive\"]').length ) ) {\r\n\r\n\t\tbody.removeClass( 'dslc-res-phone dslc-res-tablet dslc-res-smaller-monitor dslc-res-big' );\r\n\r\n\t\tif ( windowWidth >= 1024 && windowWidth < 1280 ) {\r\n\r\n\t\t\tbody.addClass( 'dslc-res-smaller-monitor' );\r\n\t\t} else if ( windowWidth >= 768 && windowWidth < 1024 ) {\r\n\r\n\t\t\tbody.addClass( 'dslc-res-tablet' );\r\n\t\t} else if ( windowWidth < 768 ) {\r\n\r\n\t\t\tbody.addClass( 'dslc-res-phone' );\r\n\t\t} else {\r\n\r\n\t\t\tbody.addClass( 'dslc-res-big' );\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Init Accordion\r\n */\r\nwindow.dslc_init_accordion = () => {\r\n\r\n\tjQuery('.dslc-accordion').each(function(){\r\n\r\n\t\tvar dslcAccordion = jQuery(this),\r\n\t\tdslcActiveIndex = dslcAccordion.data('open') - 1,\r\n\t\tdslcActive = jQuery( '.dslc-accordion-item:eq(' + dslcActiveIndex + ')', dslcAccordion ),\r\n\t\tdslcInactive = dslcActive.siblings('.dslc-accordion-item'),\r\n\t\tdslcAll = jQuery('.dslc-accordion-item', dslcAccordion);\r\n\r\n\t\tif ( dslcActiveIndex >= 0 ) {\r\n\r\n\t\t\tdslcActive.addClass('dslc-active');\r\n\t\t\tdslcInactive.addClass('dslc-inactive');\r\n\t\t\tjQuery('.dslc-accordion-content', dslcInactive).hide();\r\n\r\n\t\t\tif ( ! jQuery(\"body\").hasClass('dslca-enabled') ) {\r\n\t\t\t\tdslcInactive.find('.dslca-icon').removeClass('dslc-icon-minus').addClass('dslc-icon-plus');\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\tdslcAll.addClass('dslc-inactive');\r\n\t\t\tjQuery('.dslc-accordion-content', dslcAll).hide();\r\n\r\n\t\t\tif ( ! jQuery(\"body\").hasClass('dslca-enabled') ) {\r\n\t\t\t\tdslcAll.find('.dslca-icon').removeClass('dslc-icon-minus').addClass('dslc-icon-plus');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Init Lightbox\r\n */\r\nwindow.dslc_init_lightbox = () => {\r\n\r\n\tvar type;\r\n\r\n\tjQuery('.dslc-lightbox-image').each(function(){\r\n\r\n        // Default type\r\n        type = 'image';\r\n\r\n        // Detect iframe (vimeo)\r\n        const url = jQuery(this).attr('href');\r\n        const parsedUrl = new URL(url);\r\n        if (parsedUrl.hostname === 'vimeo.com') {\r\n            type = 'iframe';\r\n        }\r\n\r\n        jQuery(this).magnificPopup({\r\n            type: type,\r\n            image: {\r\n                titleSrc: function(item) {\r\n\r\n                    var caption = '';\r\n                    var dataCaption = item.el.attr('data-caption');\r\n                    var titleAttr = item.el.attr('title');\r\n\r\n                    if (typeof dataCaption !== \"undefined\") {\r\n                        caption = jQuery('<small></small>')\r\n                            .text(dataCaption)\r\n                            .prop('outerHTML');\r\n                    }\r\n\r\n                    var title = jQuery('<span></span>')\r\n                        .text(titleAttr)\r\n                        .prop('outerHTML');\r\n\r\n                    return title + caption;\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n\tjQuery( '.dslc-lightbox-gallery' ).each(function(){\r\n\t\tjQuery(this).magnificPopup({\r\n\t\t\tdelegate : 'a',\r\n\t\t\ttype:'image',\r\n\t\t\tgallery:{\r\n\t\t\t\tenabled: true\r\n\t\t\t},\r\n\t\t\timage: {\r\n\t\t\t\ttitleSrc: function(item) {\r\n\t\t\t\t\tvar caption = '';\r\n\t\t\t\t\tif ( typeof item.el.attr('data-caption') !== \"undefined\" ) {\r\n\t\t\t\t\t\tcaption = jQuery('<small></small>').text(item.el.attr('data-caption'))[0].outerHTML;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar title = jQuery('<span></span>').text(item.el.attr('title')).html();\r\n\t\t\t\t\treturn title + caption;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * Init carousels\r\n */\r\nwindow.dslc_carousel = () => {\r\n\r\n\t// Loop through each carousel\r\n\tjQuery( '.dslc-carousel, .dslc-slider' ).each( function(el) {\r\n\r\n\t\t// Variables\r\n\t\tvar carousel, container, defSettings, usrSettings, settings;\r\n\r\n\t\t// Elements\r\n\t\tcarousel = jQuery( this );\r\n\t\tcontainer = carousel.closest( '.dslc-module-front' );\r\n\r\n\t\tcontainer.imagesLoaded( function(){\r\n\r\n\t\t\tif ( container.closest('.dslc-modules-section').hasClass('dslc-no-columns-spacing') ) {\r\n\r\n\t\t\t\tvar margin = 0;\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar margin = ( container.width() / 100 * 2.12766 ) / 2;\r\n\t\t\t}\r\n\r\n\t\t\tif ( carousel.hasClass('dslc-carousel') ) {\r\n\r\n\t\t\t\tcarousel.find('.dslc-col').css({ 'margin-left' : margin, 'margin-right' : margin });\r\n\t\t\t\tcarousel.css({ 'margin-left' : margin * -1, 'width' : carousel.width() + margin * 2 });\r\n\t\t\t}\r\n\r\n\t\t\t// Default settings\r\n\t\t\tdefSettings = {\r\n\t\t\t\titems : 4,\r\n\t\t\t\tpagination : true,\r\n\t\t\t\tsingleItem : false,\r\n\t\t\t\titemsScaleUp : false,\r\n\t\t\t\tslideSpeed : 200,\r\n\t\t\t\tpaginationSpeed : 800,\r\n\t\t\t\trewindSpeed : 1000,\r\n\t\t\t\tautoPlay : false,\r\n\t\t\t\tstopOnHover : false,\r\n\t\t\t\tlazyLoad : false,\r\n\t\t\t\tlazyFollow : true,\r\n\t\t\t\tautoHeight : false,\r\n\t\t\t\tmouseDrag : true,\r\n\t\t\t\ttouchDrag : true,\r\n\t\t\t\taddClassActive : true,\r\n\t\t\t\ttransitionStyle : 'fade',\r\n\t\t\t\tscrollPerPage : true\r\n\t\t\t};\r\n\r\n\t\t\t// Custom Settings\r\n\t\t\tusrSettings = {\r\n\t\t\t\titems : carousel.data( 'columns' ),\r\n\t\t\t\tpagination : carousel.data( 'pagination' ),\r\n\t\t\t\titemsScaleUp : carousel.data( 'scale-up' ),\r\n\t\t\t\tslideSpeed : carousel.data( 'slide-speed' ),\r\n\t\t\t\tpaginationSpeed : carousel.data( 'pagination-speed' ),\r\n\t\t\t\trewindSpeed : carousel.data( 'rewind-speed' ),\r\n\t\t\t\tautoPlay : carousel.data( 'autoplay' ),\r\n\t\t\t\tstopOnHover : carousel.data( 'stop-on-hover' ),\r\n\t\t\t\tlazyLoad : carousel.data( 'lazy-load' ),\r\n\t\t\t\tlazyFollow : carousel.data( 'lazy-follow' ),\r\n\t\t\t\tautoHeight : carousel.data( 'flexible-height' ),\r\n\t\t\t\tmouseDrag : carousel.data( 'mouse-drag' ),\r\n\t\t\t\ttouchDrag : carousel.data( 'touch-drag' ),\r\n\t\t\t\taddClassActive : carousel.data( 'active-class' ),\r\n\t\t\t\ttransitionStyle : carousel.data( 'animation' ),\r\n\t\t\t\tscrollPerPage : carousel.data( 'scroll-per-page' )\r\n\t\t\t};\r\n\r\n\t\t\t// Merge default and custom settings\r\n\t\t\tsettings = jQuery.extend( {}, defSettings, usrSettings );\r\n\r\n\t\t\t// If it's a slider set singleItem to true\r\n\t\t\tif ( carousel.hasClass( 'dslc-slider' ) || settings.items == 1 ) {\r\n\r\n\t\t\t\tsettings.singleItem = true;\r\n\t\t\t}\r\n\r\n\t\t\t// If autoplay is 0 set to false\r\n\t\t\tif ( settings.autoPlay == 0 ) {\r\n\r\n\t\t\t\tsettings.autoPlay = false;\r\n\t\t\t}\r\n\r\n\t\t\t// Initialize\r\n\t\t\tcarousel.owlCarousel({\r\n\r\n\t\t\t\titems : settings.items,\r\n\t\t\t\tpagination : settings.pagination,\r\n\t\t\t\tsingleItem : settings.singleItem,\r\n\t\t\t\titemsScaleUp : settings.itemsScaleUp,\r\n\t\t\t\tslideSpeed : settings.slideSpeed,\r\n\t\t\t\tpaginationSpeed : settings.paginationSpeed,\r\n\t\t\t\trewindSpeed : settings.rewindSpeed,\r\n\t\t\t\tautoPlay : settings.autoPlay,\r\n\t\t\t\tstopOnHover : settings.stopOnHover,\r\n\t\t\t\tlazyLoad : settings.lazyLoad,\r\n\t\t\t\tlazyFollow : settings.lazyFollow,\r\n\t\t\t\tmouseDrag : settings.mouseDrag,\r\n\t\t\t\ttouchDrag : settings.touchDrag,\r\n\t\t\t\tscrollPerPage : settings.scrollPerPage,\r\n\t\t\t\ttransitionStyle : settings.transitionStyle,\r\n\t\t\t\tautoHeight : settings.autoHeight,\r\n\t\t\t\titemsDesktop : false,\r\n\t\t\t\titemsDesktopSmall : false,\r\n\t\t\t\titemsTablet : false,\r\n\t\t\t\titemsMobile : [766,1],\r\n\t\t\t\tafterInit: function() {\r\n\r\n\t\t\t\t\tcarousel.prev( '.dslc-loader' ).remove();\r\n\t\t\t\t\tcarousel.css({\r\n\t\t\t\t\t\topacity : 1,\r\n\t\t\t\t\t\tmaxHeight : 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tafterAction : function(){\r\n\r\n\t\t\t\t\tvar visible_items = this.owl.visibleItems;\r\n\t\t\t\t\tcarousel.find('.dslc-carousel-item-visible').removeClass('dslc-carousel-item-visible');\r\n\t\t\t\t\tcarousel.find('.owl-item').filter(function(index) {\r\n\t\t\t\t\t\treturn visible_items.indexOf(index) > -1;\r\n\t\t\t\t\t}).addClass('dslc-carousel-item-visible');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Previous\r\n\t\t\tjQuery( '.dslc-carousel-nav-next', container ).click( function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcarousel.data( 'owlCarousel' ).next();\r\n\t\t\t});\r\n\r\n\t\t\t// Next\r\n\t\t\tjQuery( '.dslc-carousel-nav-prev', container ).click( function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcarousel.data( 'owlCarousel' ).prev();\r\n\t\t\t});\r\n\t\t}); // End .imagesLoaded\r\n\t});\r\n}\r\n\r\n/**\r\n * Fix responsivness of carousel\r\n */\r\nwindow.dslc_carousel_responsive = () => {\r\n\r\n\t// Loop through each carousel\r\n\tjQuery( '.dslc-carousel' ).each( function() {\r\n\r\n\t\t// Variables\r\n\t\tvar carousel, container;\r\n\r\n\t\t// Elements\r\n\t\tcarousel = jQuery( this );\r\n\t\tcontainer = carousel.closest( '.dslc-module-front' );\r\n\r\n\t\tcarousel.css({ 'margin-left' : 0, 'width' : 'auto' });\r\n\r\n\t\tif ( container.closest('.dslc-modules-section').hasClass('dslc-no-columns-spacing') ) {\r\n\r\n\t\t\tvar margin = 0;\r\n\t\t} else {\r\n\r\n\t\t\tvar margin = ( container.width() / 100 * 2.12766 ) / 2;\r\n\t\t}\r\n\r\n\t\tif ( carousel.hasClass('dslc-carousel') ) {\r\n\r\n\t\t\tcarousel.find('.dslc-col').css({ 'margin-left' : margin, 'margin-right' : margin });\r\n\t\t\tcarousel.css({ 'margin-left' : margin * -1, 'width' : carousel.width() + margin * 2 });\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Initiate Video\r\n */\r\nwindow.dslc_bg_video = () => {\r\n\r\n\tjQuery('.dslc-bg-video').each(function(){\r\n\r\n\t\tif ( ! jQuery(this).find( 'video' ).length ) {\r\n\r\n\t\t\tjQuery(this).css({ opacity : 1 });\r\n\t\t}\r\n\t});\r\n\r\n\tjQuery('.dslc-bg-video video').mediaelementplayer({\r\n\t\tloop: true,\r\n\t\tpauseOtherPlayers: false,\r\n\t\tsuccess: function(mediaElement, domObject) {\r\n\r\n\t\t\tmediaElement.addEventListener('loadeddata', function (e) {\r\n\t\t\t\tjQuery(domObject).closest('.dslc-bg-video').animate({ opacity : 1 }, 400);\r\n\t\t\t});\r\n\r\n\t\t\tmediaElement.play();\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Initiate Parallax\r\n */\r\nwindow.dslc_parallax = () => {\r\n\r\n\tjQuery('.dslc-init-parallax').each(function(){\r\n\t\tvar $paralaxEl = jQuery(this);\r\n\t\t$paralaxEl.imagesLoaded( { background: true }, function(){\r\n\t\t\tvar dslcSpeed = 4,\r\n\t\t\tbgPosition = $paralaxEl.css( 'background-position' ).split( ' ' ),\r\n\t\t\tbgPositionHor = bgPosition[0],\r\n\t\t\tdslcPos = bgPositionHor + \" \" + ( -1 * ( window.pageYOffset - $paralaxEl.offset().top ) / dslcSpeed ) + \"px\";\r\n\r\n\t\t\t$paralaxEl.css({ backgroundPosition : dslcPos });\r\n\t\t});\r\n\t});\r\n\r\n\twindow.onscroll = function() {\r\n\r\n\t\tjQuery('.dslc-init-parallax').each(function(){\r\n\r\n\t\t\tvar dslcSpeed = 4,\r\n\t\t\tbgPosition = jQuery(this).css( 'background-position' ).split( ' ' ),\r\n\t\t\tbgPositionHor = bgPosition[0],\r\n\t\t\tdslcPos = bgPositionHor + \" \" + ( -1 * ( window.pageYOffset - jQuery(this).offset().top ) / dslcSpeed ) + \"px\";\r\n\r\n\t\t\tjQuery(this).css({ backgroundPosition : dslcPos });\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * Initiate Masonry\r\n */\r\nwindow.dslc_masonry = ( dslcWrapper, dslcAnimate ) => {\r\n\r\n\tdslcWrapper = typeof dslcWrapper !== 'undefined' ? dslcWrapper : jQuery('body');\r\n\tdslcAnimate = typeof dslcAnimate !== 'undefined' ? dslcAnimate : false;\r\n\r\n\tjQuery('.dslc-init-masonry', dslcWrapper).each(function(){\r\n\r\n\t\t\tvar dslcContainer, dslcSelector, dslcItems, dslcItemWidth, dslcContainerWidth, dslcGutterWidth;\r\n\r\n\t\t\tif ( jQuery(this).find('.dslc-posts-inner').length ) {\r\n\r\n\t\t\t\tdslcContainer = jQuery(this).find('.dslc-posts-inner');\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdslcContainer = jQuery(this);\r\n\t\t\t}\r\n\r\n\t\t\tdslcSelector = '.dslc-masonry-item';\r\n\t\t\tdslcItemWidth = jQuery(dslcSelector, dslcContainer).width();\r\n\t\t\tdslcContainerWidth = jQuery(dslcContainer).width();\r\n\r\n\t\t\tif ( jQuery(this).closest('.dslc-modules-section').hasClass('dslc-no-columns-spacing') ) {\r\n\r\n\t\t\t\tdslcGutterWidth = 0;\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdslcGutterWidth = dslcContainerWidth / 100 * 2.05;\r\n\t\t\t}\r\n\r\n\t\t\tif ( dslcContainer.data('masonry') ) {\r\n\r\n\t\t\t\tjQuery(dslcContainer).imagesLoaded(function() {\r\n\r\n\t\t\t\t\tjQuery(dslcContainer).masonry('destroy').masonry({\r\n\t\t\t\t\t\tgutter : dslcGutterWidth,\r\n\t\t\t\t\t\titemSelector : dslcSelector\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tjQuery( dslcContainer ).find( '.dslc-post:not(.dslc-masonry-item)' ).hide();\r\n\r\n\t\t\t\t\tif ( dslcAnimate ) {\r\n\r\n\t\t\t\t\t\tjQuery(dslcSelector, dslcContainer).css({ 'scale' : '0.2'}).animate({\r\n\t\t\t\t\t\t\t'scale' : '1'\r\n\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tjQuery(dslcSelector).css({ marginRight : 0 });\r\n\r\n\t\t\t\tjQuery(dslcContainer).imagesLoaded(function() {\r\n\r\n\t\t\t\t\tjQuery(dslcContainer).masonry({\r\n\t\t\t\t\t\tgutter : dslcGutterWidth,\r\n\t\t\t\t\t\titemSelector : dslcSelector\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t}); // End each().\r\n}\r\n\r\n/**\r\n * Generate Tabs Code\r\n */\r\nwindow.dslc_tabs_generate_code = ( dslcTabs ) => {\r\n\tvar dslcTabsContainer = dslcTabs.closest('.dslc-module-front');\r\n\r\n\tdslcTabsNav = jQuery('.dslc-tabs-nav', dslcTabs);\r\n\tdslcTabsContent = jQuery('.dslc-tabs-content', dslcTabs);\r\n\tdslcTabContent = jQuery('.dslc-tabs-tab-content', dslcTabs);\r\n\r\n\tvar dslcTabsNavVal = '';\r\n\tvar dslcTabsContentVal = '';\r\n\tvar dslcTabsNavValCount = 0;\r\n\tvar dslcTabsContentValCount = 0;\r\n\r\n\tjQuery( '.dslc-tabs-nav-hook', dslcTabsNav ).each(function(){\r\n\r\n\t\tdslcTabsNavValCount++;\r\n\r\n\t\tif ( dslcTabsNavValCount > 1 ) {\r\n\r\n\t\t\tdslcTabsNavVal += ' (dslc_sep) ';\r\n\t\t}\r\n\r\n\t\tdslcTabsNavVal += jQuery(this).find('.dslc-tabs-nav-hook-title').text();\r\n\t});\r\n\r\n\tdslcTabContent.each(function(){\r\n\r\n\t\tdslcTabsContentValCount++;\r\n\r\n\t\tif ( dslcTabsContentValCount > 1 ) {\r\n\r\n\t\t\tdslcTabsContentVal += ' (dslc_sep) ';\r\n\t\t}\r\n\r\n\t\tdslcTabsContentVal += jQuery(this).find('.dslca-tab-plain-content').val();\r\n\t});\r\n\r\n\tdslcTabsContentVal = dslcTabsContentVal.replace(/<textarea/g, '<lctextarea').replace(/<\\/textarea/g, '</lctextarea');\r\n\r\n\tjQuery('.dslca-module-option-front[data-id=\"tabs_nav\"]', dslcTabsContainer).val( dslcTabsNavVal );\r\n\tjQuery('.dslca-module-option-front[data-id=\"tabs_content\"]', dslcTabsContainer).val( dslcTabsContentVal );\r\n\tparent.LiveComposer.Builder.Actions.optionsChanged();\r\n}\r\n\r\n/**\r\n * Generate Code for the New Accordion Tab\r\n */\r\nwindow.dslc_accordion_generate_code = ( dslcAccordion ) => {\r\n\tvar dslcModule = dslcAccordion.closest('.dslc-module-front'),\r\n\tdslcAccordionCount = 0,\r\n\tdslcAccordionTitleVal = '',\r\n\tdslcAccordionContentVal = '';\r\n\r\n\tjQuery( '.dslc-accordion-item', dslcAccordion ).each(function(){\r\n\t\tdslcAccordionCount++;\r\n\t\tif ( dslcAccordionCount > 1 ) {\r\n\r\n\t\t\tdslcAccordionTitleVal += ' (dslc_sep) ';\r\n\t\t\tdslcAccordionContentVal += ' (dslc_sep) ';\r\n\t\t}\r\n\t\tdslcAccordionTitleVal += jQuery(this).find('.dslc-accordion-title').text();\r\n\t\tdslcAccordionContentVal += jQuery(this).find('.dslc-accordion-content').find('.dslca-accordion-plain-content').val();\r\n\t});\r\n\r\n\tdslcAccordionContentVal = dslcAccordionContentVal.replace(/<textarea/g, '<lctextarea').replace(/<\\/textarea/g, '</lctextarea');\r\n\r\n\tjQuery('.dslca-module-option-front[data-id=\"accordion_nav\"]', dslcModule).val( dslcAccordionTitleVal );\r\n\tjQuery('.dslca-module-option-front[data-id=\"accordion_content\"]', dslcModule).val( dslcAccordionContentVal );\r\n\r\n\tparent.LiveComposer.Builder.Actions.optionsChanged();\r\n}\r\n\r\nfunction dslc_on_tab_add( event ) {\r\n\r\n\tvar dslcTabs = jQuery(event.target).closest('.dslc-tabs'),\r\n\tdslcTabsNavLast = jQuery('.dslc-tabs-nav .dslc-tabs-nav-hook:last', dslcTabs),\r\n\tdslcTabContentLast = jQuery('.dslc-tabs-tab-content:last', dslcTabs),\r\n\tnumberOfTabs = jQuery('.dslc-tabs-nav .dslc-tabs-nav-hook', dslcTabs).length;\r\n\r\n\tdslcTabsNavLast.after('<span class=\"dslc-tabs-nav-hook\"><span class=\"dslc-tabs-nav-hook-title\" contenteditable=\"true\">Click to edit title</span><span class=\"dslca-delete-tab-hook\"><span class=\"dslca-icon dslc-icon-remove\"></span></span></span>');\r\n\tdslcTabContentLast.after('<div class=\"dslc-tabs-tab-content\"><div class=\"dslca-editable-content\" data-edit-id=\"' + numberOfTabs +'\" data-id=\"' + numberOfTabs +'\">This is just placeholder text.</div><textarea class=\"dslca-tab-plain-content\" data-edit-id=\"' + numberOfTabs +'\" data-id=\"' + numberOfTabs +'\">This is just placeholder text.</textarea><div class=\"dslca-wysiwyg-actions-edit\"><span class=\"dslca-wysiwyg-actions-edit-hook\" data-event=\"wysiwyg-edit\" data-id-to-edit=\"' + numberOfTabs +'\">Open in WP Editor</span></div></div>');\r\n\r\n\tjQuery('.dslc-tabs-nav-hook:last', dslcTabs).click();\r\n\r\n\tdslc_tabs_generate_code( dslcTabs );\r\n\r\n\t// openModuleForEditing( this[0] );\r\n\tif ( ! jQuery(dslcTabs[0]).closest('.dslc-module-front').hasClass('dslca-module-being-edited') ) {\r\n\t\tjQuery(dslcTabs[0]).closest('.dslc-module-front').find('.dslca-module-edit-hook').trigger('click');\r\n\t}\r\n\r\n\t// dslc_tabs()\r\n}\r\n\r\nfunction dslc_on_tab_delete( event ) {\r\n\tvar dslcTabs = jQuery(event.target).closest('.dslc-tabs');\r\n\tvar dslcTabHook = jQuery(event.target).closest('.dslc-tabs-nav-hook');\r\n\tvar dslcTabIndex = dslcTabHook.index();\r\n\tvar dslcTabContent = jQuery('.dslc-tabs-tab-content', dslcTabs).eq( dslcTabIndex );\r\n\r\n\tif ( jQuery( '.dslc-tabs-nav .dslc-tabs-nav-hook', dslcTabs ).length > 1 ) {\r\n\r\n\t\tdslcTabHook.remove();\r\n\t\tdslcTabContent.remove();\r\n\r\n\t\tif ( ! jQuery( '.dslc-tabs-tab-content.dslc-active', dslcTabs ).length ) {\r\n\t\t\tjQuery( '.dslc-tabs-nav-hook:first', dslcTabs ).trigger('click');\r\n\t\t}\r\n\r\n\t\tdslc_tabs_generate_code( dslcTabs );\r\n\t}\r\n\r\n\t// openModuleForEditing( this[0] );\r\n\t// Otherwise won't save changes.\r\n\tif ( ! jQuery(dslcTabs[0]).closest('.dslc-module-front').hasClass('dslca-module-being-edited') ) {\r\n\t\tjQuery(dslcTabs[0]).closest('.dslc-module-front').find('.dslca-module-edit-hook').trigger('click');\r\n\t}\r\n\r\n\tevent.stopPropagation()\r\n}\r\n\r\n\r\nfunction dslc_on_tab_nav( event ) {\r\n\tdslcTabs = jQuery(event.target).closest('.dslc-tabs');\r\n\tdslcTabsNav = jQuery('.dslc-tabs-nav', dslcTabs);\r\n\tdslcTabsContent = jQuery('.dslc-tabs-content', dslcTabs);\r\n\tdslcTabContent = jQuery('.dslc-tabs-tab-content', dslcTabs);\r\n\tdslcTabIndex = jQuery(event.currentTarget).index();\r\n\r\n\t// Tabs nav\r\n\tjQuery('.dslc-tabs-nav-hook.dslc-active', dslcTabs).removeClass('dslc-active');\r\n\tjQuery(event.currentTarget).addClass('dslc-active');\r\n\r\n\t// Tabs content\r\n\r\n\tif ( jQuery( '.dslc-tabs-tab-content.dslc-active', dslcTabs ).length ) {\r\n\t\tjQuery('.dslc-tabs-tab-content.dslc-active', dslcTabs).animate({\r\n\t\t\topacity : 0\r\n\t\t}, 250, function(){\r\n\t\t\tjQuery(this).removeClass('dslc-active');\r\n\t\t\tdslcTabContent.eq(dslcTabIndex).css({ opacity : 0 }).addClass('dslc-active').show().animate({\r\n\t\t\t\topacity : 1\r\n\t\t\t}, 250);\r\n\t\t});\r\n\t} else {\r\n\t\tdslcTabContent.eq(dslcTabIndex).css({ opacity : 0 }).addClass('dslc-active').show().animate({\r\n\t\t\topacity : 1\r\n\t\t}, 250);\r\n\t}\r\n\r\n\t// event.stopPropagation()\r\n}\r\n\r\n/**\r\n * Initiate Tabs\r\n */\r\nwindow.dslc_tabs = () => {\r\n\tvar dslcTabs, dslcTabsNav, dslcTabsContent, dslcTabContent;\r\n\r\n\tjQuery('.dslc-tabs').each(function(){\r\n\r\n\t\tdslcTabs = jQuery(this);\r\n\t\tdslcTabsNav = jQuery('.dslc-tabs-nav', dslcTabs);\r\n\t\tdslcTabsContent = jQuery('.dslc-tabs-content', dslcTabs);\r\n\t\tdslcTabContent = jQuery('.dslc-tabs-tab-content', dslcTabs);\r\n\r\n\t\tdslcTabContent.eq(0).addClass('dslc-active');\r\n\t\tjQuery('.dslc-tabs-nav-hook', dslcTabsNav ).eq(0).addClass('dslc-active');\r\n\r\n\t\t\r\n\t});\r\n}\r\n\r\n// $(staticAncestors).on(eventName, dynamicChild, function() {\r\n// jQuery(document).ready(function($) {\r\n\t\t/**\r\n\t\t* Tabs â€“ Tabs editing controls\r\n\t\t*/\r\n\t\tjQuery(document).on( 'click', '.dslca-add-new-tab-hook', (event) => dslc_on_tab_add(event));\r\n\t\tjQuery(document).on( 'click', '.dslca-delete-tab-hook', (event) => dslc_on_tab_delete(event));\r\n\t\tjQuery(document).on( 'click', '.dslc-tabs-nav-hook', (event) => dslc_on_tab_nav( event ));\r\n\r\n\t\tjQuery(document).on('blur paste', '.dslc-tabs-nav-hook-title[contenteditable], .dslc-tabs-tab-content[contenteditable]', function(event) {\r\n\t\t\tdslc_tabs_generate_code( jQuery(this).closest('.dslc-tabs') );\r\n\t\t}).on('focus', '.dslc-tabs-nav-hook-title[contenteditable], .dslc-tabs-tab-content[contenteditable]', function(event) {\r\n\t\t\tif ( ! jQuery(this).closest('.dslc-module-front').hasClass('dslca-module-being-edited') ) {\r\n\t\t\t\tjQuery(this).closest('.dslc-module-front').find('.dslca-module-edit-hook').trigger('click');\r\n\t\t\t}\r\n\t\t});\r\n\r\n// });\r\n/**\r\n * Increment download count\r\n */\r\n\r\nwindow.dslc_download_count_increment = ( post_id ) => {\r\n\r\n\tjQuery.post(\r\n\r\n\t\tDSLCAjax.ajaxurl,\r\n\t\t{\r\n\t\t\taction : 'dslc-download-count-increment',\r\n\t\t\tdslc_post_id : post_id\r\n\t\t},\r\n\t\tfunction( response ) { }\r\n\t);\r\n}\r\n\r\n/**\r\n * Check if element in viewport\r\n */\r\nwindow.dslc_check_viewport = () => {\r\n\r\n\tvar isIE = /*@cc_on!@*/false || !!document.documentMode;\r\n\r\n\tif ( !isIE ) {\r\n\r\n\t\tjQuery('.dslc-in-viewport-check:in-viewport:not(.dslc-in-viewport)').each(function(){\r\n\r\n\t\t\tvar _this = jQuery(this);\r\n\t\t\tvar anim = _this.data('dslc-anim');\r\n\t\t\tvar animDuration = parseInt( _this.data('dslc-anim-duration') ) / 1000;\r\n\r\n\t\t\tvar anim_speed = animDuration + 's';\r\n\t\t\tif ( jQuery(window).width() < 768 ) {\r\n\r\n\t\t\t\tanim_speed = '0s';\r\n\t\t\t}\r\n\r\n\t\t\tvar anim_delay = parseInt( _this.data('dslc-anim-delay') );\r\n\t\t\tvar anim_easing =  _this.data('dslc-anim-easing');\r\n\t\t\tvar anim_params = anim + ' ' + anim_speed + ' ' + anim_easing + ' forwards';\r\n\r\n\t\t\tjQuery(this).addClass('dslc-in-viewport');\r\n\r\n\t\t\tif ( anim_delay > 0 ) {\r\n\r\n\t\t\t\tsetTimeout( function(){\r\n\t\t\t\t\t_this.css({\r\n\t\t\t\t\t\t'-webkit-animation': anim_params,\r\n\t\t\t\t\t\t'-moz-animation': anim_params,\r\n\t\t\t\t\t\t'animation': anim_params\r\n\t\t\t\t\t});\r\n\t\t\t\t}, anim_delay );\r\n\t\t\t} else {\r\n\r\n\t\t\t\tjQuery(this).css({\r\n\t\t\t\t\t'-webkit-animation': anim_params,\r\n\t\t\t\t\t'-moz-animation': anim_params,\r\n\t\t\t\t\t'animation': anim_params\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t} else {\r\n\r\n\t\tjQuery('.dslc-in-viewport-check').css( 'opacity', 1 );\r\n\t}\r\n}\r\n\r\n/**\r\n * Animation of elements on hover ( posts modules )\r\n */\r\nwindow.dslc_el_anim_hover = () => {\r\n\r\n\tjQuery('.dslc-on-hover-anim-target').each(function(){\r\n\r\n\t\tvar anim_speed = parseInt( jQuery(this).data('dslc-anim-speed') ) / 1000;\r\n\t\tvar anim_value = 'all ' + anim_speed + 's ease-out';\r\n\r\n\t\tjQuery(this).css({\r\n\t\t\t'-webkit-transition' : anim_value,\r\n\t\t\t'-moz-transition' : anim_value,\r\n\t\t\t'transition' : anim_value\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * Progress Bar - Check viewport and animate\r\n */\r\nwindow.dslc_check_progress_bar_viewport = () => {\r\n\r\n\tjQuery('.dslc-progress-bar-animated:in-viewport:not(.dslc-progress-bar-in-viewport)').each(function(){\r\n\r\n\t\tvar dslcWrapper = jQuery(this),\r\n\t\tdslcEl = dslcWrapper.find('.dslc-progress-bar-loader-inner'),\r\n\t\tdslcVal = dslcEl.data('amount') + '%',\r\n\t\tdslcSpeed = dslcEl.data('speed');\r\n\r\n\t\tdslcWrapper.addClass('dslc-progress-bar-in-viewport');\r\n\r\n\t\tdslcEl.css({ width : 0, opacity : 1 }).animate({ width : dslcVal }, dslcSpeed );\r\n\t});\r\n}\r\n\r\n/**\r\n * Validate Comment Form\r\n */\r\nwindow.dslc_validate_comment_form = ( commentForm ) => {\r\n\r\n\tvar commentName = commentForm.find('#author'),\r\n\tcommentEmail = commentForm.find('#email'),\r\n\tcommentWebsite = commentForm.find('#url'),\r\n\tcommentMessage = commentForm.find('#comment'),\r\n\tcommentStatus = true;\r\n\r\n\t// Name\r\n\tif ( commentName.length && commentName.val().length == 0 ) {\r\n\r\n\t\tcommentName.css({ borderColor : '#e55f5f' });\r\n\t\tcommentStatus = false;\r\n\t} else {\r\n\r\n\t\tcommentName.attr( 'style', '' );\r\n\t}\r\n\r\n\t// Email\r\n\tif ( commentEmail.length && ( commentEmail.val().length == 0 || commentEmail.val().indexOf('@') === -1 ) ) {\r\n\r\n\t\tcommentEmail.css({ borderColor : '#e55f5f' });\r\n\t\tcommentStatus = false;\r\n\t} else {\r\n\r\n\t\tcommentEmail.attr( 'style', '' );\r\n\t}\r\n\r\n\t// Message\r\n\tif ( commentMessage.val().length == 0 ) {\r\n\r\n\t\tcommentMessage.css({ borderColor : '#e55f5f' });\r\n\t\tcommentStatus = false;\r\n\t} else {\r\n\r\n\t\tcommentMessage.attr( 'style', '' );\r\n\t}\r\n\r\n\treturn commentStatus;\r\n}\r\n\r\n/**\r\n * Social Sharing\r\n */\r\nwindow.dslc_social_share = ( width, height, url ) => {\r\n\r\n\tvar leftPosition, topPosition, u, t;\r\n\t//Allow for borders.\r\n\tleftPosition = (window.screen.width / 2) - ((width / 2) + 10);\r\n\t//Allow for title and status bars.\r\n\ttopPosition = (window.screen.height / 2) - ((height / 2) + 50);\r\n\tvar windowFeatures = \"status=no,height=\" + height + \",width=\" + width + \",resizable=yes,left=\" + leftPosition + \",top=\" + topPosition + \",screenX=\" + leftPosition + \",screenY=\" + topPosition + \",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no\";\r\n\tu=location.href;\r\n\tt=document.title;\r\n\twindow.open(url,'sharer', windowFeatures);\r\n\treturn false;\r\n}\r\n\r\n/**\r\n * Sticky Row\r\n */\r\nwindow.dslc_sticky_row = () => {\r\n\r\n\tvar row = jQuery('body .dslc-modules-section');\r\n\r\n\tif ( row.hasClass('dslc-sticky-row') && ! jQuery('body').hasClass('dslca-enabled') ) {\r\n\r\n\t\tvar rowSticky = jQuery('body .dslc-modules-section.dslc-sticky-row');\r\n\t\tvar $headers = jQuery(\".dslc-sticky-row\");\r\n\r\n\t\t$headers.each(function(index, el) {\r\n\t\t\tvar $curHeader = jQuery($headers).eq(index);\r\n\t\t\tvar curHeight = $curHeader.outerHeight();\r\n\r\n\t\t\tjQuery(el).wrap('<div class=\"dslc-modules-section-placeholder\"></div>').parent().height(jQuery(el).outerHeight());\r\n\t\t});\r\n\r\n\t\tvar rowSticky = jQuery('body .dslc-modules-section.dslc-sticky-row');\r\n\t\tvar rowStickyPos = rowSticky.offset().top;\r\n\r\n\t\t// Account for Admin bar.\r\n\t\tif ( jQuery( '#wpadminbar' ).length ) {\r\n\t\t\trowStickyPos -= jQuery( '#wpadminbar' ).height();\r\n\t\t}\r\n\r\n\t\tvar headers = jQuery(\".dslc-sticky-row\");\r\n\r\n\t\tdocument.addEventListener( 'scroll', (evt) => {\r\n\t\t\tvar scrollTop = window.scrollY;\r\n\r\n\t\t\tif ( scrollTop < 50 || scrollTop % 10 === 0 ) {\r\n\t\t\t\tif ( scrollTop >= 0 ) {\r\n\t\t\t\t\theaders.each(function(index, el) {\r\n\t\t\t\t\t\tvar curHeader = jQuery(headers).eq(index);\r\n\t\t\t\t\t\tvar curTop = curHeader.offset().top;\r\n\t\t\t\t\t\tvar curHeight = curHeader.outerHeight();\r\n\r\n\t\t\t\t\t\t// Account for Admin bar.\r\n\t\t\t\t\t\tif ( jQuery( '#wpadminbar' ).length ) {\r\n\t\t\t\t\t\t\tcurTop -= jQuery( '#wpadminbar' ).height();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// scroll up\r\n\t\t\t\t\t\t// If windown scoling pos is bellow the element top coordinates.\r\n\t\t\t\t\t\tvar isRelative = ( scrollTop <= el.exTop );\r\n\r\n\t\t\t\t\t\t// scroll down\r\n\t\t\t\t\t\tvar isFixed = ( curTop <= scrollTop );\r\n\r\n\t\t\t\t\t\tvar position = \"fixed\";\r\n\t\t\t\t\t\tvar top = 0;\r\n\r\n\t\t\t\t\t\tif ( isRelative ) {\r\n\t\t\t\t\t\t\tposition = \"relative\";\r\n\t\t\t\t\t\t\ttop = 0;\r\n\r\n\t\t\t\t\t\t\tel.isFixed = false;\r\n\r\n\t\t\t\t\t\t\tel.classList.remove(\"dslc-sticky-section-fixed\");\r\n\t\t\t\t\t\t\tjQuery(el).closest('.dslc-modules-section-placeholder').height(jQuery(el).outerHeight());\r\n\t\t\t\t\t\t} else if ( isFixed ) {\r\n\t\t\t\t\t\t\tposition = \"fixed\";\r\n\t\t\t\t\t\t\tif ( 0 < index ) {\r\n\t\t\t\t\t\t\t\tfor ( var i = 0; i < index; i++ ) {\r\n\t\t\t\t\t\t\t\t\ttop += jQuery(headers).eq(i).outerHeight();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tscrollTop += curHeight;\r\n\r\n\t\t\t\t\t\t\tif ( ! el.isFixed ) {\r\n\t\t\t\t\t\t\t\tel.isFixed = true;\r\n\t\t\t\t\t\t\t\tel.exTop = curTop;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Account for Admin bar.\r\n\t\t\t\t\t\t\tif ( jQuery( '#wpadminbar' ).length ) {\r\n\t\t\t\t\t\t\t\ttop += 32;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tel.classList.add(\"dslc-sticky-section-fixed\");\r\n\t\t\t\t\t\t\tjQuery(el).closest('.dslc-modules-section-placeholder').height(jQuery(el).outerHeight());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tjQuery(el).css({\r\n\t\t\t\t\t\t\tposition: position,\r\n\t\t\t\t\t\t\ttop: top + \"px\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\trowSticky.removeClass('dslc-sticky-section-fixed');\r\n\r\n\t\t\t\t\t// reset all\r\n\t\t\t\t\theaders.css({\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\ttop: \"0px\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, { capture: false, passive: true})\r\n\t}\r\n}\r\n\r\njQuery(document).ready(function($){\r\n\r\n\t// Fix issue - https://github.com/live-composer/live-composer-page-builder/issues/592\r\n\tvar viewport = document.querySelector(\"meta[name=viewport]\");\r\n\tviewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0');\r\n\r\n\tdslc_el_anim_hover();\r\n\tdslc_bg_video();\r\n\tdslc_tabs();\r\n\r\n\t// Load More Posts\r\n\tjQuery(document).on( 'click', '.dslc-pagination-load-more a', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif ( jQuery(this).parent().hasClass('dslc-active') ) {\r\n\r\n\t\t\tvar _this = jQuery(this),\r\n\t\t\tmodule = jQuery(this).closest('.dslc-module-front'),\r\n\t\t\tpagination = module.find('.dslc-pagination'),\r\n\t\t\tpostsContainer = module.find('.dslc-posts-inner'),\r\n\t\t\tmoduleID = module.attr('id'),\r\n\t\t\tpagLink = _this.attr('href'),\r\n\t\t\ttempHolder = module.find('.dslc-load-more-temp');\r\n\r\n\t\t\t// Validate same-origin\r\n\t\t\ttry {\r\n\t\t\t\tvar linkUrl = new URL(pagLink, window.location.href);\r\n\t\t\t\tif (linkUrl.origin !== window.location.origin) {\r\n\t\t\t\t\tconsole.error('Cross-origin not allowed');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.error('Invalid URL');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this.find('.dslc-icon').addClass('dslc-icon-spin');\r\n\r\n\t\t\ttempHolder.load( pagLink + ' #' + moduleID, function(){\r\n\r\n\t\t\t\tpostsContainer.append( '<div class=\"dslc-post-separator\"></div>' );\r\n\t\t\t\tpostsContainer.append( tempHolder.find('.dslc-posts-inner').html() );\r\n\r\n\t\t\t\tmodule.find('.dslc-pagination').html( tempHolder.find('.dslc-pagination').html() );\r\n\r\n\t\t\t\tpagination.replaceWith( tempHolder.find('.dslc-pagination') );\r\n\r\n\t\t\t\ttempHolder.html('');\r\n\r\n\t\t\t\tpostsContainer.imagesLoaded( function(){\r\n\t\t\t\t\tif ( module.find('.dslc-init-masonry').length ) {\r\n\t\t\t\t\t\tmodule.find('.dslc-init-masonry .dslc-posts-inner').masonry(\"reloadItems\").masonry();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t// Comment Form Validation\r\n\tjQuery('.dslc-tp-comment-form form').submit(function(e){\r\n\r\n\t\tif ( ! dslc_validate_comment_form( jQuery(this) ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Mobile Nav\r\n\t */\r\n\tjQuery('.dslc-mobile-navigation select').change(function() {\r\n\t\twindow.location = jQuery(this).val();\r\n\t});\r\n\r\n\t// Close Notification\r\n\tjQuery(document).on( 'click', '.dslc-notification-close', function(e){\r\n\r\n\t\tjQuery(this).closest('.dslc-notification').slideUp(200, function(){\r\n\r\n\t\t\tjQuery(this).remove();\r\n\t\t});\r\n\t});\r\n\r\n\t/**\r\n\t * Filter\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslc-post-filter', function(){\r\n\r\n\t\t// Get info.\r\n\t\tvar selectedFilterEl = jQuery(this);\r\n\t\tvar dslcContainer    = selectedFilterEl.closest('.dslc-module-front').find('.dslc-posts');\r\n\t\tvar dslcWrapper      = selectedFilterEl.closest('.dslc-module-front');\r\n\r\n\t\t// Filter posts according to selected filter.\r\n\t\tvar dslcCat = selectedFilterEl.data('filter-id');\r\n\t\tvar dslcFilterPosts    = jQuery(); // Empty jQuery object.\r\n\t\tvar dslcNotFilterPosts = jQuery();\r\n\r\n\t\tif ( dslcCat === 'show-all' ) {\r\n\r\n\t\t\tdslcFilterPosts    = dslcContainer.closest('.dslc-module-front').find('.dslc-post');\r\n\t\t\tdslcNotFilterPosts = jQuery(); // Empty jQuery object.\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdslcFilterPosts    = dslcContainer.closest('.dslc-module-front').find('.dslc-post[data-cats*=\"' + dslcCat + '\"]');\r\n\t\t\tdslcNotFilterPosts = dslcContainer.closest('.dslc-module-front').find('.dslc-post:not([data-cats*=\"' + dslcCat + '\"])');\r\n\t\t}\r\n\r\n\t\t// Set active\r\n\t\tselectedFilterEl.removeClass('dslc-inactive').addClass('dslc-active').siblings('.dslc-active').removeClass('dslc-active').addClass('dslc-inactive');\r\n\r\n\t\tif ( dslcContainer.hasClass('dslc-init-grid' ) ) {\r\n\r\n\t\t\tdslcFilterPosts.stop().animate({\r\n\t\t\t\topacity : 1\r\n\t\t\t}, 300);\r\n\r\n\t\t\tdslcNotFilterPosts.stop().animate({\r\n\t\t\t\topacity : 0.3\r\n\t\t\t}, 300);\r\n\t\t} else {\r\n\r\n\t\t\t// Hide posts\r\n\t\t\tdslcNotFilterPosts.removeClass('dslc-masonry-item dslc-masonry-item-animate').css({ visibility : 'hidden' });\r\n\t\t\tdslcFilterPosts.addClass('dslc-masonry-item dslc-masonry-item-animate').css({ visibility : 'visible' }).show();\r\n\r\n\t\t\tdslc_masonry( dslcWrapper, true );\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Download Count Hook\r\n\t */\r\n\tjQuery(document).on( 'click', '.dslc-download-count-hook', function(e) {\r\n\r\n\t\tdslc_download_count_increment( jQuery(this).data('post-id') );\r\n\t});\r\n\r\n\t/**\r\n\t * Notification Close\r\n\t */\r\n\tjQuery('.dslc-notification-box-has-timeout').each(function(){\r\n\r\n\t\tvar nBox = jQuery(this);\r\n\t\tnTimeout = 'none',\r\n\t\tmoduleID = nBox.closest('.dslc-module-front').data('module-id'),\r\n\t\tcookieID = 'nBox' + moduleID;\r\n\r\n\t\t// Check timeout\r\n\t\tif ( nBox.data('notification-timeout') ) {\r\n\r\n\t\t\tif ( Cookies.get(cookieID) == undefined ) {\r\n\t\t\t\tnBox.show();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tjQuery(document).on( 'click', '.dslc-notification-box-close', function() {\r\n\r\n\t\tvar nBox = jQuery(this).closest('.dslc-notification-box'),\r\n\t\tnTimeout = 'none',\r\n\t\tmoduleID = nBox.closest('.dslc-module-front').data('module-id'),\r\n\t\tcookieID = 'nBox' + moduleID;\r\n\r\n\t\t// Check timeout\r\n\t\tif ( nBox.data('notification-timeout') ) {\r\n\r\n\t\t\tnTimeout = nBox.data('notification-timeout');\r\n\t\t}\r\n\r\n\t\t// Set cookie if timeout exists\r\n\t\tif ( nTimeout !== 'none' ) {\r\n\r\n\t\t\tCookies.set( cookieID, 'closed', { expires: nTimeout } );\r\n\t\t}\r\n\r\n\t\t// Close with animation\r\n\t\tnBox.animate({\r\n\t\t\topacity : 0\r\n\t\t}, 400, function(){\r\n\r\n\t\t\tjQuery(this).remove();\r\n\t\t});\r\n\t});\r\n\r\n\t/**\r\n\t * Lightbox\r\n\t */\r\n\tdslc_init_lightbox();\r\n\r\n\t/**\r\n\t * Accordion\r\n\t */\r\n\tdslc_init_accordion();\r\n\r\n\tjQuery(document).on( 'click', '.dslc-accordion-hook', function(){\r\n\r\n\t\tvar dslcActive = jQuery(this).closest('.dslc-accordion-item'),\r\n\t\tdslcInactive = dslcActive.siblings('.dslc-accordion-item');\r\n\r\n\t\tif ( dslcActive.hasClass('dslc-active') ) {\r\n\r\n\t\t\tif ( ! jQuery(\"body\").hasClass('dslca-enabled') ) {\r\n\t\t\t\tif ( dslcActive.find('.dslca-icon').hasClass('dslc-icon-minus') ) {\r\n\t\t\t\t\tdslcActive.find('.dslca-icon').removeClass('dslc-icon-minus').addClass('dslc-icon-plus');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdslcActive.find('.dslca-icon').removeClass('dslc-icon-plus').addClass('dslc-icon-minus');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdslcInactive = dslcActive;\r\n\t\t} else {\r\n\r\n\t\t\tdslcActive.removeClass('dslc-inactive').addClass('dslc-active');\r\n\r\n\t\t\tif ( ! jQuery(\"body\").hasClass('dslca-enabled') ) {\r\n\t\t\t\tif ( dslcActive.find('.dslca-icon').hasClass('dslc-icon-minus') ) {\r\n\t\t\t\t\tdslcActive.find('.dslca-icon').removeClass('dslc-icon-minus').addClass('dslc-icon-plus');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdslcActive.find('.dslca-icon').removeClass('dslc-icon-plus').addClass('dslc-icon-minus');\r\n\t\t\t\t\tdslcInactive.find('.dslca-icon').removeClass('dslc-icon-minus').addClass('dslc-icon-plus');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdslcInactive.removeClass('dslc-active').addClass('dslc-inactive');\r\n\r\n\t\tjQuery('.dslc-accordion-content', dslcActive).slideDown(300);\r\n\t\tjQuery('.dslc-accordion-content', dslcInactive).slideUp(300);\r\n\t});\r\n\r\n\tjQuery(document).on( 'click', '.dslca-add-accordion-hook', function(){\r\n\r\n\t\tvar dslcAccordion = jQuery(this).closest('.dslc-accordion'),\r\n\t\tdslcAccordionLast = jQuery('.dslc-accordion-item:last', dslcAccordion),\r\n\t\tdslcAccordionNew = dslcAccordionLast.clone().insertAfter(dslcAccordionLast);\r\n\t\tnumberOfTabs = jQuery('.dslc-accordion-item', dslcAccordion).length;\r\n\r\n\t\tjQuery('.dslc-accordion-title', dslcAccordionNew).html('CLICK TO EDIT');\r\n\t\tjQuery('.dslc-accordion-content', dslcAccordionNew).html('<div class=\"dslca-editable-content\" data-edit-id=\"' + numberOfTabs +'\">Placeholder content, click to edit. Lorem ipsum dolor sit amet, consectetur tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div><textarea class=\"dslca-accordion-plain-content\"></textarea><div class=\"dslca-wysiwyg-actions-edit\"><span class=\"dslca-wysiwyg-actions-edit-hook\" data-event=\"wysiwyg-edit\" data-id-to-edit=\"' + numberOfTabs +'\">Edit Content</span></div>');\r\n\t\tjQuery('.dslc-accordion-hook', dslcAccordionNew).click();\r\n\r\n\t\tdslc_accordion_generate_code( dslcAccordion );\r\n\r\n\t\tif ( ! jQuery(this).closest('.dslc-module-front').hasClass('dslca-module-being-edited') ) {\r\n\r\n\t\t\tjQuery(this).closest('.dslc-module-front').find('.dslca-module-edit-hook').trigger('click');\r\n\t\t}\r\n\t});\r\n\r\n\tjQuery(document).on( 'click', '.dslca-delete-accordion-hook', function(e){\r\n\r\n\t\tvar dslcAccordion = jQuery(this).closest('.dslc-accordion'),\r\n\t\tdslcAccordionItem = jQuery(this).closest('.dslc-accordion-item');\r\n\r\n\t\tif ( ! jQuery(this).closest('.dslc-module-front').hasClass('dslca-module-being-edited') ) {\r\n\r\n\t\t\tjQuery(this).closest('.dslc-module-front').find('.dslca-module-edit-hook').trigger('click');\r\n\t\t}\r\n\r\n\t\tif ( jQuery( '.dslc-accordion-item', dslcAccordion ).length > 1 ) {\r\n\r\n\t\t\tdslcAccordionItem.remove();\r\n\r\n\t\t\tif ( ! jQuery( '.dslc-accordion-item.dslc-active', dslcAccordion ).length ) {\r\n\t\t\t\tjQuery( '.dslc-accordion-hook:first', dslcAccordion ).trigger('click');\r\n\t\t\t}\r\n\r\n\t\t\tdslc_accordion_generate_code( dslcAccordion );\r\n\t\t} else {\r\n\r\n\t\t\talert( 'You can not delete the last remaining accordion item.' );\r\n\t\t}\r\n\r\n\t\te.stopPropagation()\r\n\t});\r\n\r\n\tjQuery(document).on( 'click', '.dslca-move-up-accordion-hook, .dslca-move-down-accordion-hook', function(e){\r\n\r\n\t\tvar dslcAccordion = jQuery(this).closest('.dslc-accordion'),\r\n\t\tdslcAccordionItem = jQuery(this).closest('.dslc-accordion-item'),\r\n\t\tdslcAccordionItemNext = dslcAccordionItem.next( '.dslc-accordion-item' ),\r\n\t\tdslcAccordionItemPrev = dslcAccordionItem.prev( '.dslc-accordion-item' );\r\n\r\n\t\tif ( ! jQuery(this).closest('.dslc-module-front').hasClass('dslca-module-being-edited') ) {\r\n\r\n\t\t\tjQuery(this).closest('.dslc-module-front').find('.dslca-module-edit-hook').trigger('click');\r\n\t\t}\r\n\r\n\t\tif ( jQuery(this).hasClass('dslca-move-down-accordion-hook') ) {\r\n\r\n\t\t\tdslcAccordionItem.insertAfter( dslcAccordionItemNext );\r\n\t\t\tdslc_accordion_generate_code( dslcAccordion );\r\n\t\t} else {\r\n\r\n\t\t\tdslcAccordionItem.insertBefore( dslcAccordionItemPrev );\r\n\t\t\tdslc_accordion_generate_code( dslcAccordion );\r\n\t\t}\r\n\r\n\t\te.stopPropagation()\r\n\t});\r\n\r\n\tjQuery(document).on('blur paste keyup', '.dslc-accordion-title[contenteditable], .dslc-accordion-content[contenteditable]', function() {\r\n\r\n\t\tdslc_accordion_generate_code( jQuery(this).closest('.dslc-accordion') );\r\n\t}).on('focus', '.dslc-accordion-title[contenteditable], .dslc-accordion-content[contenteditable]', function() {\r\n\r\n\t\tif ( ! jQuery(this).closest('.dslc-module-front').hasClass('dslca-module-being-edited') ) {\r\n\r\n\t\t\tjQuery(this).closest('.dslc-module-front').find('.dslca-module-edit-hook').trigger('click');\r\n\t\t}\r\n\t});\r\n\r\n\tjQuery(document).on( 'click', '.dslc-trigger-lightbox-gallery', function(e){\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif ( jQuery(this).closest('.dslc-post').length ) {\r\n\r\n\t\t\tjQuery(this).closest('.dslc-post').find('.dslc-lightbox-gallery a:first-child').trigger('click');\r\n\t\t} else if ( jQuery(this).closest('.dslc-col') ) {\r\n\r\n\t\t\tvar imageIndex = jQuery(this).closest('.dslc-col').index();\r\n\t\t\tjQuery(this).closest('.dslc-module-front').find('.dslc-lightbox-gallery a:eq(' + imageIndex + ')').trigger('click');\r\n\t\t} else {\r\n\r\n\t\t\tjQuery(this).closest('.dslc-module-front').find('.dslc-lightbox-gallery a:first-child').trigger('click');\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Header Fixed/Absolute - https://github.com/live-composer/live-composer-page-builder/issues/787\r\n\t */\r\n\r\n\tif ( jQuery( \"#dslc-header\" ).hasClass( \"dslc-header-extra-padding\" ) && !jQuery( \"body\" ).hasClass( \"dslca-enabled\" ) ) {\r\n\r\n\t\tvar headerHeight = jQuery( \"#dslc-header\" ).height();\r\n\t\tjQuery( \"#dslc-main .dslc-modules-section:first-child\" ).css({ paddingTop : headerHeight });\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Navigation Module\r\n\t */\r\n\t/* Disabled in favour of CSS hover.\r\n\tjQuery( '.dslc-navigation li' ).mouseenter(function(){\r\n\r\n\t\tvar subnav = jQuery(this).children('ul');\r\n\r\n\t\tif ( subnav.length ) {\r\n\r\n\t\t\tif ( jQuery(this).closest('.dslc-navigation').hasClass('dslc-navigation-sub-position-center') ) {\r\n\r\n\t\t\t\tvar parentWidth = jQuery(this).closest('li').width(),\r\n\t\t\t\tsubnavWidth = subnav.outerWidth(),\r\n\t\t\t\toffsetToCenter = parseInt( parentWidth ) / 2 - parseInt( subnavWidth ) / 2 + 'px';\r\n\r\n\t\t\t\tsubnav.css({ 'left' : offsetToCenter });\r\n\t\t\t}\r\n\r\n\t\t\t// Display child menu\r\n\t\t\tsubnav.css({ 'display' : 'block' });\r\n\r\n\t\t\tvar elOffsetLeft = subnav.offset().left;\r\n\t\t\tvar elWidth = subnav.outerWidth();\r\n\t\t\tvar docWidth = jQuery('body').width();\r\n\r\n\t\t\tif ( docWidth < ( elOffsetLeft + elWidth ) ) {\r\n\t\t\t\tsubnav.addClass('dslc-navigation-invert-subnav');\r\n\t\t\t}\r\n\r\n\t\t\t// Show child menu\r\n\t\t\tjQuery(this).children('ul').stop().animate({ opacity : 1 }, 300 );\r\n\t\t}\r\n\t}).mouseleave(function(){\r\n\r\n\t\tjQuery(this).children('ul').stop().animate({ opacity : 0 }, 300, function(){\r\n\r\n\t\t\tjQuery(this).css({ 'display' : 'none' }).children('ul').removeClass('dslc-navigation-invert-subnav');\r\n\t\t});\r\n\t});\r\n\t*/\r\n\tdslc_check_viewport();\r\n\tdslc_check_progress_bar_viewport();\r\n\r\n\tjQuery(document).on( 'scroll', function(){\r\n\r\n\t\tdslc_check_viewport();\r\n\t\tdslc_check_progress_bar_viewport();\r\n\t});\r\n\r\n\t/*\r\n\t * Keep the footer at the bottom of the page.\r\n\t */\r\n\r\n\tif ( jQuery(\"#dslc-footer\").hasClass(\"dslc-footer-pos-relative\") ) {\r\n\t\tvar pageHeight, footer, footerHeight, content, contentMinHeight;\r\n\r\n\t\tpageHeight = jQuery('body').height();\r\n\t\tfooter = jQuery('#dslc-footer');\r\n\t\tfooterHeight = jQuery(footer).height();\r\n\t\tcontent = jQuery('#dslc-content');\r\n\t\tcontentMinHeight = '100vh';\r\n\r\n\t\t// Account for Admin bar.\r\n\t\tif ( jQuery( '#wpadminbar' ).length ) {\r\n\t\t\tcontentMinHeight = '96.7vh';\r\n\t\t}\r\n\r\n\t\tif (pageHeight < jQuery(window).height()) {\r\n\r\n\t\t\tjQuery(footer).css({\r\n\t\t\t\t'position': 'absolute',\r\n\t\t\t\t'bottom': '0',\r\n\t\t\t\t'width': '100%'\r\n\t\t\t});\r\n\t\t\tjQuery(content).css({\r\n\t\t\t\t'min-height': contentMinHeight,\r\n\t\t\t\t'padding-bottom': footerHeight + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n\r\njQuery(document).ready(function($){\r\n\tconsole.log('document reload with sticky row');\r\n\tdslc_responsive_classes();\r\n\tdslc_carousel();\r\n\tdslc_masonry();\r\n\tdslc_parallax();\r\n\tdslc_init_lightbox();\r\n\twindow.dslc_sticky_row();\r\n\r\n\t// No need to wait for jQuery(window).load.\r\n\t// These functions will check if images loaded by itself.\r\n});\r\n\r\njQuery(window).resize(function(){\r\n\tdslc_responsive_classes();\r\n\tdslc_carousel_responsive();\r\n});\r\n"],"names":[],"sourceRoot":""}