/*! Wait for images to load */
(function(e){var t="waitForImages";e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"]};e.expr[":"].uncached=function(t){if(!e(t).is('img[src!=""]')){return false}var n=new Image;n.src=t.src;return!n.complete};e.fn.waitForImages=function(n,r,i){var s=0;var o=0;if(e.isPlainObject(arguments[0])){i=arguments[0].waitForAll;r=arguments[0].each;n=arguments[0].finished}n=n||e.noop;r=r||e.noop;i=!!i;if(!e.isFunction(n)||!e.isFunction(r)){throw new TypeError("An invalid callback was supplied.")}return this.each(function(){var u=e(this);var a=[];var f=e.waitForImages.hasImageProperties||[];var l=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(i){u.find("*").addBack().each(function(){var t=e(this);if(t.is("img:uncached")){a.push({src:t.attr("src"),element:t[0]})}e.each(f,function(e,n){var r=t.css(n);var i;if(!r){return true}while(i=l.exec(r)){a.push({src:i[2],element:t[0]})}})})}else{u.find("img:uncached").each(function(){a.push({src:this.src,element:this})})}s=a.length;o=0;if(s===0){n.call(u[0])}e.each(a,function(i,a){var f=new Image;e(f).on("load."+t+" error."+t,function(e){o++;r.call(a.element,o,s,e.type=="load");if(o==s){n.call(u[0]);return false}});f.src=a.src})})}})(jQuery);